(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();var Yh={exports:{}},Ea={},Xh={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bm;function L0(){if(Bm)return Le;Bm=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),k=Symbol.iterator;function D(L){return L===null||typeof L!="object"?null:(L=k&&L[k]||L["@@iterator"],typeof L=="function"?L:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,W={};function O(L,K,we){this.props=L,this.context=K,this.refs=W,this.updater=we||U}O.prototype.isReactComponent={},O.prototype.setState=function(L,K){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,K,"setState")},O.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function q(){}q.prototype=O.prototype;function Y(L,K,we){this.props=L,this.context=K,this.refs=W,this.updater=we||U}var H=Y.prototype=new q;H.constructor=Y,$(H,O.prototype),H.isPureReactComponent=!0;var ie=Array.isArray,fe=Object.prototype.hasOwnProperty,te={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function x(L,K,we){var Ee,Z={},ce=null,_e=null;if(K!=null)for(Ee in K.ref!==void 0&&(_e=K.ref),K.key!==void 0&&(ce=""+K.key),K)fe.call(K,Ee)&&!R.hasOwnProperty(Ee)&&(Z[Ee]=K[Ee]);var Re=arguments.length-2;if(Re===1)Z.children=we;else if(1<Re){for(var Ve=Array(Re),qe=0;qe<Re;qe++)Ve[qe]=arguments[qe+2];Z.children=Ve}if(L&&L.defaultProps)for(Ee in Re=L.defaultProps,Re)Z[Ee]===void 0&&(Z[Ee]=Re[Ee]);return{$$typeof:s,type:L,key:ce,ref:_e,props:Z,_owner:te.current}}function S(L,K){return{$$typeof:s,type:L.type,key:K,ref:L.ref,props:L.props,_owner:L._owner}}function P(L){return typeof L=="object"&&L!==null&&L.$$typeof===s}function A(L){var K={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(we){return K[we]})}var N=/\/+/g;function I(L,K){return typeof L=="object"&&L!==null&&L.key!=null?A(""+L.key):K.toString(36)}function le(L,K,we,Ee,Z){var ce=typeof L;(ce==="undefined"||ce==="boolean")&&(L=null);var _e=!1;if(L===null)_e=!0;else switch(ce){case"string":case"number":_e=!0;break;case"object":switch(L.$$typeof){case s:case e:_e=!0}}if(_e)return _e=L,Z=Z(_e),L=Ee===""?"."+I(_e,0):Ee,ie(Z)?(we="",L!=null&&(we=L.replace(N,"$&/")+"/"),le(Z,K,we,"",function(qe){return qe})):Z!=null&&(P(Z)&&(Z=S(Z,we+(!Z.key||_e&&_e.key===Z.key?"":(""+Z.key).replace(N,"$&/")+"/")+L)),K.push(Z)),1;if(_e=0,Ee=Ee===""?".":Ee+":",ie(L))for(var Re=0;Re<L.length;Re++){ce=L[Re];var Ve=Ee+I(ce,Re);_e+=le(ce,K,we,Ve,Z)}else if(Ve=D(L),typeof Ve=="function")for(L=Ve.call(L),Re=0;!(ce=L.next()).done;)ce=ce.value,Ve=Ee+I(ce,Re++),_e+=le(ce,K,we,Ve,Z);else if(ce==="object")throw K=String(L),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return _e}function Ie(L,K,we){if(L==null)return L;var Ee=[],Z=0;return le(L,Ee,"","",function(ce){return K.call(we,ce,Z++)}),Ee}function xe(L){if(L._status===-1){var K=L._result;K=K(),K.then(function(we){(L._status===0||L._status===-1)&&(L._status=1,L._result=we)},function(we){(L._status===0||L._status===-1)&&(L._status=2,L._result=we)}),L._status===-1&&(L._status=0,L._result=K)}if(L._status===1)return L._result.default;throw L._result}var Ae={current:null},re={transition:null},pe={ReactCurrentDispatcher:Ae,ReactCurrentBatchConfig:re,ReactCurrentOwner:te};function ae(){throw Error("act(...) is not supported in production builds of React.")}return Le.Children={map:Ie,forEach:function(L,K,we){Ie(L,function(){K.apply(this,arguments)},we)},count:function(L){var K=0;return Ie(L,function(){K++}),K},toArray:function(L){return Ie(L,function(K){return K})||[]},only:function(L){if(!P(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Le.Component=O,Le.Fragment=t,Le.Profiler=o,Le.PureComponent=Y,Le.StrictMode=i,Le.Suspense=g,Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,Le.act=ae,Le.cloneElement=function(L,K,we){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Ee=$({},L.props),Z=L.key,ce=L.ref,_e=L._owner;if(K!=null){if(K.ref!==void 0&&(ce=K.ref,_e=te.current),K.key!==void 0&&(Z=""+K.key),L.type&&L.type.defaultProps)var Re=L.type.defaultProps;for(Ve in K)fe.call(K,Ve)&&!R.hasOwnProperty(Ve)&&(Ee[Ve]=K[Ve]===void 0&&Re!==void 0?Re[Ve]:K[Ve])}var Ve=arguments.length-2;if(Ve===1)Ee.children=we;else if(1<Ve){Re=Array(Ve);for(var qe=0;qe<Ve;qe++)Re[qe]=arguments[qe+2];Ee.children=Re}return{$$typeof:s,type:L.type,key:Z,ref:ce,props:Ee,_owner:_e}},Le.createContext=function(L){return L={$$typeof:h,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:u,_context:L},L.Consumer=L},Le.createElement=x,Le.createFactory=function(L){var K=x.bind(null,L);return K.type=L,K},Le.createRef=function(){return{current:null}},Le.forwardRef=function(L){return{$$typeof:m,render:L}},Le.isValidElement=P,Le.lazy=function(L){return{$$typeof:E,_payload:{_status:-1,_result:L},_init:xe}},Le.memo=function(L,K){return{$$typeof:_,type:L,compare:K===void 0?null:K}},Le.startTransition=function(L){var K=re.transition;re.transition={};try{L()}finally{re.transition=K}},Le.unstable_act=ae,Le.useCallback=function(L,K){return Ae.current.useCallback(L,K)},Le.useContext=function(L){return Ae.current.useContext(L)},Le.useDebugValue=function(){},Le.useDeferredValue=function(L){return Ae.current.useDeferredValue(L)},Le.useEffect=function(L,K){return Ae.current.useEffect(L,K)},Le.useId=function(){return Ae.current.useId()},Le.useImperativeHandle=function(L,K,we){return Ae.current.useImperativeHandle(L,K,we)},Le.useInsertionEffect=function(L,K){return Ae.current.useInsertionEffect(L,K)},Le.useLayoutEffect=function(L,K){return Ae.current.useLayoutEffect(L,K)},Le.useMemo=function(L,K){return Ae.current.useMemo(L,K)},Le.useReducer=function(L,K,we){return Ae.current.useReducer(L,K,we)},Le.useRef=function(L){return Ae.current.useRef(L)},Le.useState=function(L){return Ae.current.useState(L)},Le.useSyncExternalStore=function(L,K,we){return Ae.current.useSyncExternalStore(L,K,we)},Le.useTransition=function(){return Ae.current.useTransition()},Le.version="18.3.1",Le}var $m;function Md(){return $m||($m=1,Xh.exports=L0()),Xh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hm;function O0(){if(Hm)return Ea;Hm=1;var s=Md(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function h(m,g,_){var E,k={},D=null,U=null;_!==void 0&&(D=""+_),g.key!==void 0&&(D=""+g.key),g.ref!==void 0&&(U=g.ref);for(E in g)i.call(g,E)&&!u.hasOwnProperty(E)&&(k[E]=g[E]);if(m&&m.defaultProps)for(E in g=m.defaultProps,g)k[E]===void 0&&(k[E]=g[E]);return{$$typeof:e,type:m,key:D,ref:U,props:k,_owner:o.current}}return Ea.Fragment=t,Ea.jsx=h,Ea.jsxs=h,Ea}var qm;function M0(){return qm||(qm=1,Yh.exports=O0()),Yh.exports}var v=M0(),ne=Md(),yu={},Jh={exports:{}},an={},Zh={exports:{}},ed={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wm;function j0(){return Wm||(Wm=1,function(s){function e(re,pe){var ae=re.length;re.push(pe);e:for(;0<ae;){var L=ae-1>>>1,K=re[L];if(0<o(K,pe))re[L]=pe,re[ae]=K,ae=L;else break e}}function t(re){return re.length===0?null:re[0]}function i(re){if(re.length===0)return null;var pe=re[0],ae=re.pop();if(ae!==pe){re[0]=ae;e:for(var L=0,K=re.length,we=K>>>1;L<we;){var Ee=2*(L+1)-1,Z=re[Ee],ce=Ee+1,_e=re[ce];if(0>o(Z,ae))ce<K&&0>o(_e,Z)?(re[L]=_e,re[ce]=ae,L=ce):(re[L]=Z,re[Ee]=ae,L=Ee);else if(ce<K&&0>o(_e,ae))re[L]=_e,re[ce]=ae,L=ce;else break e}}return pe}function o(re,pe){var ae=re.sortIndex-pe.sortIndex;return ae!==0?ae:re.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();s.unstable_now=function(){return h.now()-m}}var g=[],_=[],E=1,k=null,D=3,U=!1,$=!1,W=!1,O=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H(re){for(var pe=t(_);pe!==null;){if(pe.callback===null)i(_);else if(pe.startTime<=re)i(_),pe.sortIndex=pe.expirationTime,e(g,pe);else break;pe=t(_)}}function ie(re){if(W=!1,H(re),!$)if(t(g)!==null)$=!0,xe(fe);else{var pe=t(_);pe!==null&&Ae(ie,pe.startTime-re)}}function fe(re,pe){$=!1,W&&(W=!1,q(x),x=-1),U=!0;var ae=D;try{for(H(pe),k=t(g);k!==null&&(!(k.expirationTime>pe)||re&&!A());){var L=k.callback;if(typeof L=="function"){k.callback=null,D=k.priorityLevel;var K=L(k.expirationTime<=pe);pe=s.unstable_now(),typeof K=="function"?k.callback=K:k===t(g)&&i(g),H(pe)}else i(g);k=t(g)}if(k!==null)var we=!0;else{var Ee=t(_);Ee!==null&&Ae(ie,Ee.startTime-pe),we=!1}return we}finally{k=null,D=ae,U=!1}}var te=!1,R=null,x=-1,S=5,P=-1;function A(){return!(s.unstable_now()-P<S)}function N(){if(R!==null){var re=s.unstable_now();P=re;var pe=!0;try{pe=R(!0,re)}finally{pe?I():(te=!1,R=null)}}else te=!1}var I;if(typeof Y=="function")I=function(){Y(N)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,Ie=le.port2;le.port1.onmessage=N,I=function(){Ie.postMessage(null)}}else I=function(){O(N,0)};function xe(re){R=re,te||(te=!0,I())}function Ae(re,pe){x=O(function(){re(s.unstable_now())},pe)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(re){re.callback=null},s.unstable_continueExecution=function(){$||U||($=!0,xe(fe))},s.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<re?Math.floor(1e3/re):5},s.unstable_getCurrentPriorityLevel=function(){return D},s.unstable_getFirstCallbackNode=function(){return t(g)},s.unstable_next=function(re){switch(D){case 1:case 2:case 3:var pe=3;break;default:pe=D}var ae=D;D=pe;try{return re()}finally{D=ae}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(re,pe){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var ae=D;D=re;try{return pe()}finally{D=ae}},s.unstable_scheduleCallback=function(re,pe,ae){var L=s.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?L+ae:L):ae=L,re){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=ae+K,re={id:E++,callback:pe,priorityLevel:re,startTime:ae,expirationTime:K,sortIndex:-1},ae>L?(re.sortIndex=ae,e(_,re),t(g)===null&&re===t(_)&&(W?(q(x),x=-1):W=!0,Ae(ie,ae-L))):(re.sortIndex=K,e(g,re),$||U||($=!0,xe(fe))),re},s.unstable_shouldYield=A,s.unstable_wrapCallback=function(re){var pe=D;return function(){var ae=D;D=pe;try{return re.apply(this,arguments)}finally{D=ae}}}}(ed)),ed}var Km;function F0(){return Km||(Km=1,Zh.exports=j0()),Zh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gm;function U0(){if(Gm)return an;Gm=1;var s=Md(),e=F0();function t(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function u(n,r){h(n,r),h(n+"Capture",r)}function h(n,r){for(o[n]=r,n=0;n<r.length;n++)i.add(r[n])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},k={};function D(n){return g.call(k,n)?!0:g.call(E,n)?!1:_.test(n)?k[n]=!0:(E[n]=!0,!1)}function U(n,r,a,c){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function $(n,r,a,c){if(r===null||typeof r>"u"||U(n,r,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function W(n,r,a,c,d,p,w){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=r,this.sanitizeURL=p,this.removeEmptyString=w}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){O[n]=new W(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];O[r]=new W(r,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){O[n]=new W(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){O[n]=new W(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){O[n]=new W(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){O[n]=new W(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){O[n]=new W(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){O[n]=new W(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){O[n]=new W(n,5,!1,n.toLowerCase(),null,!1,!1)});var q=/[\-:]([a-z])/g;function Y(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(q,Y);O[r]=new W(r,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(q,Y);O[r]=new W(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(q,Y);O[r]=new W(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){O[n]=new W(n,1,!1,n.toLowerCase(),null,!1,!1)}),O.xlinkHref=new W("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){O[n]=new W(n,1,!1,n.toLowerCase(),null,!0,!0)});function H(n,r,a,c){var d=O.hasOwnProperty(r)?O[r]:null;(d!==null?d.type!==0:c||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&($(r,a,d,c)&&(a=null),c||d===null?D(r)&&(a===null?n.removeAttribute(r):n.setAttribute(r,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(r=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(r):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,r,a):n.setAttribute(r,a))))}var ie=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fe=Symbol.for("react.element"),te=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),A=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),Ie=Symbol.for("react.memo"),xe=Symbol.for("react.lazy"),Ae=Symbol.for("react.offscreen"),re=Symbol.iterator;function pe(n){return n===null||typeof n!="object"?null:(n=re&&n[re]||n["@@iterator"],typeof n=="function"?n:null)}var ae=Object.assign,L;function K(n){if(L===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);L=r&&r[1]||""}return`
`+L+n}var we=!1;function Ee(n,r){if(!n||we)return"";we=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(z){var c=z}Reflect.construct(n,[],r)}else{try{r.call()}catch(z){c=z}n.call(r.prototype)}else{try{throw Error()}catch(z){c=z}n()}}catch(z){if(z&&c&&typeof z.stack=="string"){for(var d=z.stack.split(`
`),p=c.stack.split(`
`),w=d.length-1,C=p.length-1;1<=w&&0<=C&&d[w]!==p[C];)C--;for(;1<=w&&0<=C;w--,C--)if(d[w]!==p[C]){if(w!==1||C!==1)do if(w--,C--,0>C||d[w]!==p[C]){var b=`
`+d[w].replace(" at new "," at ");return n.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",n.displayName)),b}while(1<=w&&0<=C);break}}}finally{we=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?K(n):""}function Z(n){switch(n.tag){case 5:return K(n.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return n=Ee(n.type,!1),n;case 11:return n=Ee(n.type.render,!1),n;case 1:return n=Ee(n.type,!0),n;default:return""}}function ce(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case R:return"Fragment";case te:return"Portal";case S:return"Profiler";case x:return"StrictMode";case I:return"Suspense";case le:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case A:return(n.displayName||"Context")+".Consumer";case P:return(n._context.displayName||"Context")+".Provider";case N:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Ie:return r=n.displayName||null,r!==null?r:ce(n.type)||"Memo";case xe:r=n._payload,n=n._init;try{return ce(n(r))}catch{}}return null}function _e(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ce(r);case 8:return r===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Re(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ve(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function qe(n){var r=Ve(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),c=""+n[r];if(!n.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return d.call(this)},set:function(w){c=""+w,p.call(this,w)}}),Object.defineProperty(n,r,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function dt(n){n._valueTracker||(n._valueTracker=qe(n))}function Jt(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return n&&(c=Ve(n)?n.checked?"true":"false":n.value),n=c,n!==a?(r.setValue(n),!0):!1}function _n(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Cs(n,r){var a=r.checked;return ae({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function fi(n,r){var a=r.defaultValue==null?"":r.defaultValue,c=r.checked!=null?r.checked:r.defaultChecked;a=Re(r.value!=null?r.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Ao(n,r){r=r.checked,r!=null&&H(n,"checked",r,!1)}function ko(n,r){Ao(n,r);var a=Re(r.value),c=r.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?pi(n,r.type,a):r.hasOwnProperty("defaultValue")&&pi(n,r.type,Re(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function nl(n,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var c=r.type;if(!(c!=="submit"&&c!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,a||r===n.value||(n.value=r),n.defaultValue=r}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function pi(n,r,a){(r!=="number"||_n(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var cr=Array.isArray;function hr(n,r,a,c){if(n=n.options,r){r={};for(var d=0;d<a.length;d++)r["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=r.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Re(a),r=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}r!==null||n[d].disabled||(r=n[d])}r!==null&&(r.selected=!0)}}function Ro(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function mi(n,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(t(92));if(cr(a)){if(1<a.length)throw Error(t(93));a=a[0]}r=a}r==null&&(r=""),a=r}n._wrapperState={initialValue:Re(a)}}function gi(n,r){var a=Re(r.value),c=Re(r.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),r.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Po(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function yt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vt(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?yt(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var dr,No=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(r,a,c,d)})}:n}(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for(dr=dr||document.createElement("div"),dr.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=dr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function Fr(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var As={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ks=["Webkit","ms","Moz","O"];Object.keys(As).forEach(function(n){ks.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),As[r]=As[n]})});function bo(n,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||As.hasOwnProperty(n)&&As[n]?(""+r).trim():r+"px"}function Do(n,r){n=n.style;for(var a in r)if(r.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=bo(a,r[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var Vo=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lo(n,r){if(r){if(Vo[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(t(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(t(61))}if(r.style!=null&&typeof r.style!="object")throw Error(t(62))}}function Oo(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rs=null;function yi(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var vi=null,wn=null,Kn=null;function _i(n){if(n=oa(n)){if(typeof vi!="function")throw Error(t(280));var r=n.stateNode;r&&(r=bl(r),vi(n.stateNode,n.type,r))}}function Gn(n){wn?Kn?Kn.push(n):Kn=[n]:wn=n}function Mo(){if(wn){var n=wn,r=Kn;if(Kn=wn=null,_i(n),r)for(n=0;n<r.length;n++)_i(r[n])}}function Ps(n,r){return n(r)}function jo(){}var fr=!1;function Fo(n,r,a){if(fr)return n(r,a);fr=!0;try{return Ps(n,r,a)}finally{fr=!1,(wn!==null||Kn!==null)&&(jo(),Mo())}}function lt(n,r){var a=n.stateNode;if(a===null)return null;var c=bl(a);if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,r,typeof a));return a}var wi=!1;if(m)try{var Nn={};Object.defineProperty(Nn,"passive",{get:function(){wi=!0}}),window.addEventListener("test",Nn,Nn),window.removeEventListener("test",Nn,Nn)}catch{wi=!1}function Ns(n,r,a,c,d,p,w,C,b){var z=Array.prototype.slice.call(arguments,3);try{r.apply(a,z)}catch(X){this.onError(X)}}var bs=!1,Ei=null,bn=!1,Uo=null,xc={onError:function(n){bs=!0,Ei=n}};function Ti(n,r,a,c,d,p,w,C,b){bs=!1,Ei=null,Ns.apply(xc,arguments)}function rl(n,r,a,c,d,p,w,C,b){if(Ti.apply(this,arguments),bs){if(bs){var z=Ei;bs=!1,Ei=null}else throw Error(t(198));bn||(bn=!0,Uo=z)}}function Dn(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function Ds(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function Vn(n){if(Dn(n)!==n)throw Error(t(188))}function sl(n){var r=n.alternate;if(!r){if(r=Dn(n),r===null)throw Error(t(188));return r!==n?null:n}for(var a=n,c=r;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return Vn(d),n;if(p===c)return Vn(d),r;p=p.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=p;else{for(var w=!1,C=d.child;C;){if(C===a){w=!0,a=d,c=p;break}if(C===c){w=!0,c=d,a=p;break}C=C.sibling}if(!w){for(C=p.child;C;){if(C===a){w=!0,a=p,c=d;break}if(C===c){w=!0,c=p,a=d;break}C=C.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:r}function zo(n){return n=sl(n),n!==null?Ii(n):null}function Ii(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=Ii(n);if(r!==null)return r;n=n.sibling}return null}var xi=e.unstable_scheduleCallback,Bo=e.unstable_cancelCallback,il=e.unstable_shouldYield,Sc=e.unstable_requestPaint,Ye=e.unstable_now,ol=e.unstable_getCurrentPriorityLevel,Vs=e.unstable_ImmediatePriority,Ur=e.unstable_UserBlockingPriority,En=e.unstable_NormalPriority,$o=e.unstable_LowPriority,al=e.unstable_IdlePriority,Ls=null,hn=null;function ll(n){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(Ls,n,void 0,(n.current.flags&128)===128)}catch{}}var Kt=Math.clz32?Math.clz32:cl,Ho=Math.log,ul=Math.LN2;function cl(n){return n>>>=0,n===0?32:31-(Ho(n)/ul|0)|0}var Si=64,Ci=4194304;function zr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Os(n,r){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,p=n.pingedLanes,w=a&268435455;if(w!==0){var C=w&~d;C!==0?c=zr(C):(p&=w,p!==0&&(c=zr(p)))}else w=a&~d,w!==0?c=zr(w):p!==0&&(c=zr(p));if(c===0)return 0;if(r!==0&&r!==c&&(r&d)===0&&(d=c&-c,p=r&-r,d>=p||d===16&&(p&4194240)!==0))return r;if((c&4)!==0&&(c|=a&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=c;0<r;)a=31-Kt(r),d=1<<a,c|=n[a],r&=~d;return c}function Cc(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pr(n,r){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes;0<p;){var w=31-Kt(p),C=1<<w,b=d[w];b===-1?((C&a)===0||(C&c)!==0)&&(d[w]=Cc(C,r)):b<=r&&(n.expiredLanes|=C),p&=~C}}function dn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Ms(){var n=Si;return Si<<=1,(Si&4194240)===0&&(Si=64),n}function Br(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function $r(n,r,a){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-Kt(r),n[r]=a}function Ge(n,r){var a=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-Kt(a),p=1<<d;r[d]=0,c[d]=-1,n[d]=-1,a&=~p}}function Hr(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var c=31-Kt(a),d=1<<c;d&r|n[c]&r&&(n[c]|=r),a&=~d}}var Me=0;function qr(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var hl,Ai,dl,fl,pl,qo=!1,Qn=[],kt=null,Ln=null,On=null,Wr=new Map,Tn=new Map,Yn=[],Ac="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ml(n,r){switch(n){case"focusin":case"focusout":kt=null;break;case"dragenter":case"dragleave":Ln=null;break;case"mouseover":case"mouseout":On=null;break;case"pointerover":case"pointerout":Wr.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tn.delete(r.pointerId)}}function Zt(n,r,a,c,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[d]},r!==null&&(r=oa(r),r!==null&&Ai(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),n)}function kc(n,r,a,c,d){switch(r){case"focusin":return kt=Zt(kt,n,r,a,c,d),!0;case"dragenter":return Ln=Zt(Ln,n,r,a,c,d),!0;case"mouseover":return On=Zt(On,n,r,a,c,d),!0;case"pointerover":var p=d.pointerId;return Wr.set(p,Zt(Wr.get(p)||null,n,r,a,c,d)),!0;case"gotpointercapture":return p=d.pointerId,Tn.set(p,Zt(Tn.get(p)||null,n,r,a,c,d)),!0}return!1}function gl(n){var r=Bs(n.target);if(r!==null){var a=Dn(r);if(a!==null){if(r=a.tag,r===13){if(r=Ds(a),r!==null){n.blockedOn=r,pl(n.priority,function(){dl(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function mr(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=ki(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Rs=c,a.target.dispatchEvent(c),Rs=null}else return r=oa(a),r!==null&&Ai(r),n.blockedOn=a,!1;r.shift()}return!0}function js(n,r,a){mr(n)&&a.delete(r)}function yl(){qo=!1,kt!==null&&mr(kt)&&(kt=null),Ln!==null&&mr(Ln)&&(Ln=null),On!==null&&mr(On)&&(On=null),Wr.forEach(js),Tn.forEach(js)}function Mn(n,r){n.blockedOn===r&&(n.blockedOn=null,qo||(qo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,yl)))}function jn(n){function r(d){return Mn(d,n)}if(0<Qn.length){Mn(Qn[0],n);for(var a=1;a<Qn.length;a++){var c=Qn[a];c.blockedOn===n&&(c.blockedOn=null)}}for(kt!==null&&Mn(kt,n),Ln!==null&&Mn(Ln,n),On!==null&&Mn(On,n),Wr.forEach(r),Tn.forEach(r),a=0;a<Yn.length;a++)c=Yn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Yn.length&&(a=Yn[0],a.blockedOn===null);)gl(a),a.blockedOn===null&&Yn.shift()}var gr=ie.ReactCurrentBatchConfig,Kr=!0;function tt(n,r,a,c){var d=Me,p=gr.transition;gr.transition=null;try{Me=1,Wo(n,r,a,c)}finally{Me=d,gr.transition=p}}function Rc(n,r,a,c){var d=Me,p=gr.transition;gr.transition=null;try{Me=4,Wo(n,r,a,c)}finally{Me=d,gr.transition=p}}function Wo(n,r,a,c){if(Kr){var d=ki(n,r,a,c);if(d===null)Uc(n,r,c,Fs,a),ml(n,c);else if(kc(d,n,r,a,c))c.stopPropagation();else if(ml(n,c),r&4&&-1<Ac.indexOf(n)){for(;d!==null;){var p=oa(d);if(p!==null&&hl(p),p=ki(n,r,a,c),p===null&&Uc(n,r,c,Fs,a),p===d)break;d=p}d!==null&&c.stopPropagation()}else Uc(n,r,c,null,a)}}var Fs=null;function ki(n,r,a,c){if(Fs=null,n=yi(c),n=Bs(n),n!==null)if(r=Dn(n),r===null)n=null;else if(a=r.tag,a===13){if(n=Ds(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return Fs=n,null}function Ko(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ol()){case Vs:return 1;case Ur:return 4;case En:case $o:return 16;case al:return 536870912;default:return 16}default:return 16}}var fn=null,Ri=null,en=null;function Go(){if(en)return en;var n,r=Ri,a=r.length,c,d="value"in fn?fn.value:fn.textContent,p=d.length;for(n=0;n<a&&r[n]===d[n];n++);var w=a-n;for(c=1;c<=w&&r[a-c]===d[p-c];c++);return en=d.slice(n,1<c?1-c:void 0)}function Pi(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Xn(){return!0}function Qo(){return!1}function Rt(n){function r(a,c,d,p,w){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(a=n[C],this[C]=a?a(p):p[C]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Xn:Qo,this.isPropagationStopped=Qo,this}return ae(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Xn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Xn)},persist:function(){},isPersistent:Xn}),r}var Fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ni=Rt(Fn),Jn=ae({},Fn,{view:0,detail:0}),Pc=Rt(Jn),bi,yr,Gr,Us=ae({},Jn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zn,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Gr&&(Gr&&n.type==="mousemove"?(bi=n.screenX-Gr.screenX,yr=n.screenY-Gr.screenY):yr=bi=0,Gr=n),bi)},movementY:function(n){return"movementY"in n?n.movementY:yr}}),Di=Rt(Us),Yo=ae({},Us,{dataTransfer:0}),vl=Rt(Yo),Vi=ae({},Jn,{relatedTarget:0}),Li=Rt(Vi),_l=ae({},Fn,{animationName:0,elapsedTime:0,pseudoElement:0}),vr=Rt(_l),wl=ae({},Fn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),El=Rt(wl),Tl=ae({},Fn,{data:0}),Xo=Rt(Tl),Oi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Il={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xl(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Il[n])?!!r[n]:!1}function Zn(){return xl}var l=ae({},Jn,{key:function(n){if(n.key){var r=Oi[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Pi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Gt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zn,charCode:function(n){return n.type==="keypress"?Pi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Pi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),f=Rt(l),y=ae({},Us,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=Rt(y),M=ae({},Jn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zn}),B=Rt(M),oe=ae({},Fn,{propertyName:0,elapsedTime:0,pseudoElement:0}),We=Rt(oe),_t=ae({},Us,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Fe=Rt(_t),It=[9,13,27,32],ft=m&&"CompositionEvent"in window,In=null;m&&"documentMode"in document&&(In=document.documentMode);var pn=m&&"TextEvent"in window&&!In,zs=m&&(!ft||In&&8<In&&11>=In),Mi=" ",Of=!1;function Mf(n,r){switch(n){case"keyup":return It.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ji=!1;function b_(n,r){switch(n){case"compositionend":return jf(r);case"keypress":return r.which!==32?null:(Of=!0,Mi);case"textInput":return n=r.data,n===Mi&&Of?null:n;default:return null}}function D_(n,r){if(ji)return n==="compositionend"||!ft&&Mf(n,r)?(n=Go(),en=Ri=fn=null,ji=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return zs&&r.locale!=="ko"?null:r.data;default:return null}}var V_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ff(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!V_[n.type]:r==="textarea"}function Uf(n,r,a,c){Gn(c),r=Rl(r,"onChange"),0<r.length&&(a=new Ni("onChange","change",null,a,c),n.push({event:a,listeners:r}))}var Jo=null,Zo=null;function L_(n){sp(n,0)}function Sl(n){var r=$i(n);if(Jt(r))return n}function O_(n,r){if(n==="change")return r}var zf=!1;if(m){var Nc;if(m){var bc="oninput"in document;if(!bc){var Bf=document.createElement("div");Bf.setAttribute("oninput","return;"),bc=typeof Bf.oninput=="function"}Nc=bc}else Nc=!1;zf=Nc&&(!document.documentMode||9<document.documentMode)}function $f(){Jo&&(Jo.detachEvent("onpropertychange",Hf),Zo=Jo=null)}function Hf(n){if(n.propertyName==="value"&&Sl(Zo)){var r=[];Uf(r,Zo,n,yi(n)),Fo(L_,r)}}function M_(n,r,a){n==="focusin"?($f(),Jo=r,Zo=a,Jo.attachEvent("onpropertychange",Hf)):n==="focusout"&&$f()}function j_(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Sl(Zo)}function F_(n,r){if(n==="click")return Sl(r)}function U_(n,r){if(n==="input"||n==="change")return Sl(r)}function z_(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Un=typeof Object.is=="function"?Object.is:z_;function ea(n,r){if(Un(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(r,d)||!Un(n[d],r[d]))return!1}return!0}function qf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Wf(n,r){var a=qf(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=r&&c>=r)return{node:a,offset:r-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=qf(a)}}function Kf(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Kf(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Gf(){for(var n=window,r=_n();r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=_n(n.document)}return r}function Dc(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function B_(n){var r=Gf(),a=n.focusedElem,c=n.selectionRange;if(r!==a&&a&&a.ownerDocument&&Kf(a.ownerDocument.documentElement,a)){if(c!==null&&Dc(a)){if(r=c.start,n=c.end,n===void 0&&(n=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(n,a.value.length);else if(n=(r=a.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,p=Math.min(c.start,d);c=c.end===void 0?p:Math.min(c.end,d),!n.extend&&p>c&&(d=c,c=p,p=d),d=Wf(a,p);var w=Wf(a,c);d&&w&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(r=r.createRange(),r.setStart(d.node,d.offset),n.removeAllRanges(),p>c?(n.addRange(r),n.extend(w.node,w.offset)):(r.setEnd(w.node,w.offset),n.addRange(r)))}}for(r=[],n=a;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)n=r[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var $_=m&&"documentMode"in document&&11>=document.documentMode,Fi=null,Vc=null,ta=null,Lc=!1;function Qf(n,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Lc||Fi==null||Fi!==_n(c)||(c=Fi,"selectionStart"in c&&Dc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ta&&ea(ta,c)||(ta=c,c=Rl(Vc,"onSelect"),0<c.length&&(r=new Ni("onSelect","select",null,r,a),n.push({event:r,listeners:c}),r.target=Fi)))}function Cl(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var Ui={animationend:Cl("Animation","AnimationEnd"),animationiteration:Cl("Animation","AnimationIteration"),animationstart:Cl("Animation","AnimationStart"),transitionend:Cl("Transition","TransitionEnd")},Oc={},Yf={};m&&(Yf=document.createElement("div").style,"AnimationEvent"in window||(delete Ui.animationend.animation,delete Ui.animationiteration.animation,delete Ui.animationstart.animation),"TransitionEvent"in window||delete Ui.transitionend.transition);function Al(n){if(Oc[n])return Oc[n];if(!Ui[n])return n;var r=Ui[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in Yf)return Oc[n]=r[a];return n}var Xf=Al("animationend"),Jf=Al("animationiteration"),Zf=Al("animationstart"),ep=Al("transitionend"),tp=new Map,np="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qr(n,r){tp.set(n,r),u(r,[n])}for(var Mc=0;Mc<np.length;Mc++){var jc=np[Mc],H_=jc.toLowerCase(),q_=jc[0].toUpperCase()+jc.slice(1);Qr(H_,"on"+q_)}Qr(Xf,"onAnimationEnd"),Qr(Jf,"onAnimationIteration"),Qr(Zf,"onAnimationStart"),Qr("dblclick","onDoubleClick"),Qr("focusin","onFocus"),Qr("focusout","onBlur"),Qr(ep,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var na="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),W_=new Set("cancel close invalid load scroll toggle".split(" ").concat(na));function rp(n,r,a){var c=n.type||"unknown-event";n.currentTarget=a,rl(c,r,void 0,n),n.currentTarget=null}function sp(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var p=void 0;if(r)for(var w=c.length-1;0<=w;w--){var C=c[w],b=C.instance,z=C.currentTarget;if(C=C.listener,b!==p&&d.isPropagationStopped())break e;rp(d,C,z),p=b}else for(w=0;w<c.length;w++){if(C=c[w],b=C.instance,z=C.currentTarget,C=C.listener,b!==p&&d.isPropagationStopped())break e;rp(d,C,z),p=b}}}if(bn)throw n=Uo,bn=!1,Uo=null,n}function Je(n,r){var a=r[Wc];a===void 0&&(a=r[Wc]=new Set);var c=n+"__bubble";a.has(c)||(ip(r,n,2,!1),a.add(c))}function Fc(n,r,a){var c=0;r&&(c|=4),ip(a,n,c,r)}var kl="_reactListening"+Math.random().toString(36).slice(2);function ra(n){if(!n[kl]){n[kl]=!0,i.forEach(function(a){a!=="selectionchange"&&(W_.has(a)||Fc(a,!1,n),Fc(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[kl]||(r[kl]=!0,Fc("selectionchange",!1,r))}}function ip(n,r,a,c){switch(Ko(r)){case 1:var d=tt;break;case 4:d=Rc;break;default:d=Wo}a=d.bind(null,r,a,n),d=void 0,!wi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(r,a,{capture:!0,passive:d}):n.addEventListener(r,a,!0):d!==void 0?n.addEventListener(r,a,{passive:d}):n.addEventListener(r,a,!1)}function Uc(n,r,a,c,d){var p=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var C=c.stateNode.containerInfo;if(C===d||C.nodeType===8&&C.parentNode===d)break;if(w===4)for(w=c.return;w!==null;){var b=w.tag;if((b===3||b===4)&&(b=w.stateNode.containerInfo,b===d||b.nodeType===8&&b.parentNode===d))return;w=w.return}for(;C!==null;){if(w=Bs(C),w===null)return;if(b=w.tag,b===5||b===6){c=p=w;continue e}C=C.parentNode}}c=c.return}Fo(function(){var z=p,X=yi(a),ee=[];e:{var Q=tp.get(n);if(Q!==void 0){var ue=Ni,me=n;switch(n){case"keypress":if(Pi(a)===0)break e;case"keydown":case"keyup":ue=f;break;case"focusin":me="focus",ue=Li;break;case"focusout":me="blur",ue=Li;break;case"beforeblur":case"afterblur":ue=Li;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Di;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=vl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=B;break;case Xf:case Jf:case Zf:ue=vr;break;case ep:ue=We;break;case"scroll":ue=Pc;break;case"wheel":ue=Fe;break;case"copy":case"cut":case"paste":ue=El;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=T}var ge=(r&4)!==0,ut=!ge&&n==="scroll",j=ge?Q!==null?Q+"Capture":null:Q;ge=[];for(var V=z,F;V!==null;){F=V;var se=F.stateNode;if(F.tag===5&&se!==null&&(F=se,j!==null&&(se=lt(V,j),se!=null&&ge.push(sa(V,se,F)))),ut)break;V=V.return}0<ge.length&&(Q=new ue(Q,me,null,a,X),ee.push({event:Q,listeners:ge}))}}if((r&7)===0){e:{if(Q=n==="mouseover"||n==="pointerover",ue=n==="mouseout"||n==="pointerout",Q&&a!==Rs&&(me=a.relatedTarget||a.fromElement)&&(Bs(me)||me[_r]))break e;if((ue||Q)&&(Q=X.window===X?X:(Q=X.ownerDocument)?Q.defaultView||Q.parentWindow:window,ue?(me=a.relatedTarget||a.toElement,ue=z,me=me?Bs(me):null,me!==null&&(ut=Dn(me),me!==ut||me.tag!==5&&me.tag!==6)&&(me=null)):(ue=null,me=z),ue!==me)){if(ge=Di,se="onMouseLeave",j="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(ge=T,se="onPointerLeave",j="onPointerEnter",V="pointer"),ut=ue==null?Q:$i(ue),F=me==null?Q:$i(me),Q=new ge(se,V+"leave",ue,a,X),Q.target=ut,Q.relatedTarget=F,se=null,Bs(X)===z&&(ge=new ge(j,V+"enter",me,a,X),ge.target=F,ge.relatedTarget=ut,se=ge),ut=se,ue&&me)t:{for(ge=ue,j=me,V=0,F=ge;F;F=zi(F))V++;for(F=0,se=j;se;se=zi(se))F++;for(;0<V-F;)ge=zi(ge),V--;for(;0<F-V;)j=zi(j),F--;for(;V--;){if(ge===j||j!==null&&ge===j.alternate)break t;ge=zi(ge),j=zi(j)}ge=null}else ge=null;ue!==null&&op(ee,Q,ue,ge,!1),me!==null&&ut!==null&&op(ee,ut,me,ge,!0)}}e:{if(Q=z?$i(z):window,ue=Q.nodeName&&Q.nodeName.toLowerCase(),ue==="select"||ue==="input"&&Q.type==="file")var ve=O_;else if(Ff(Q))if(zf)ve=U_;else{ve=j_;var Se=M_}else(ue=Q.nodeName)&&ue.toLowerCase()==="input"&&(Q.type==="checkbox"||Q.type==="radio")&&(ve=F_);if(ve&&(ve=ve(n,z))){Uf(ee,ve,a,X);break e}Se&&Se(n,Q,z),n==="focusout"&&(Se=Q._wrapperState)&&Se.controlled&&Q.type==="number"&&pi(Q,"number",Q.value)}switch(Se=z?$i(z):window,n){case"focusin":(Ff(Se)||Se.contentEditable==="true")&&(Fi=Se,Vc=z,ta=null);break;case"focusout":ta=Vc=Fi=null;break;case"mousedown":Lc=!0;break;case"contextmenu":case"mouseup":case"dragend":Lc=!1,Qf(ee,a,X);break;case"selectionchange":if($_)break;case"keydown":case"keyup":Qf(ee,a,X)}var Ce;if(ft)e:{switch(n){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else ji?Mf(n,a)&&(ke="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(ke="onCompositionStart");ke&&(zs&&a.locale!=="ko"&&(ji||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&ji&&(Ce=Go()):(fn=X,Ri="value"in fn?fn.value:fn.textContent,ji=!0)),Se=Rl(z,ke),0<Se.length&&(ke=new Xo(ke,n,null,a,X),ee.push({event:ke,listeners:Se}),Ce?ke.data=Ce:(Ce=jf(a),Ce!==null&&(ke.data=Ce)))),(Ce=pn?b_(n,a):D_(n,a))&&(z=Rl(z,"onBeforeInput"),0<z.length&&(X=new Xo("onBeforeInput","beforeinput",null,a,X),ee.push({event:X,listeners:z}),X.data=Ce))}sp(ee,r)})}function sa(n,r,a){return{instance:n,listener:r,currentTarget:a}}function Rl(n,r){for(var a=r+"Capture",c=[];n!==null;){var d=n,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=lt(n,a),p!=null&&c.unshift(sa(n,p,d)),p=lt(n,r),p!=null&&c.push(sa(n,p,d))),n=n.return}return c}function zi(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function op(n,r,a,c,d){for(var p=r._reactName,w=[];a!==null&&a!==c;){var C=a,b=C.alternate,z=C.stateNode;if(b!==null&&b===c)break;C.tag===5&&z!==null&&(C=z,d?(b=lt(a,p),b!=null&&w.unshift(sa(a,b,C))):d||(b=lt(a,p),b!=null&&w.push(sa(a,b,C)))),a=a.return}w.length!==0&&n.push({event:r,listeners:w})}var K_=/\r\n?/g,G_=/\u0000|\uFFFD/g;function ap(n){return(typeof n=="string"?n:""+n).replace(K_,`
`).replace(G_,"")}function Pl(n,r,a){if(r=ap(r),ap(n)!==r&&a)throw Error(t(425))}function Nl(){}var zc=null,Bc=null;function $c(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Hc=typeof setTimeout=="function"?setTimeout:void 0,Q_=typeof clearTimeout=="function"?clearTimeout:void 0,lp=typeof Promise=="function"?Promise:void 0,Y_=typeof queueMicrotask=="function"?queueMicrotask:typeof lp<"u"?function(n){return lp.resolve(null).then(n).catch(X_)}:Hc;function X_(n){setTimeout(function(){throw n})}function qc(n,r){var a=r,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),jn(r);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);jn(r)}function Yr(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function up(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return n;r--}else a==="/$"&&r++}n=n.previousSibling}return null}var Bi=Math.random().toString(36).slice(2),er="__reactFiber$"+Bi,ia="__reactProps$"+Bi,_r="__reactContainer$"+Bi,Wc="__reactEvents$"+Bi,J_="__reactListeners$"+Bi,Z_="__reactHandles$"+Bi;function Bs(n){var r=n[er];if(r)return r;for(var a=n.parentNode;a;){if(r=a[_r]||a[er]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=up(n);n!==null;){if(a=n[er])return a;n=up(n)}return r}n=a,a=n.parentNode}return null}function oa(n){return n=n[er]||n[_r],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function $i(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function bl(n){return n[ia]||null}var Kc=[],Hi=-1;function Xr(n){return{current:n}}function Ze(n){0>Hi||(n.current=Kc[Hi],Kc[Hi]=null,Hi--)}function Xe(n,r){Hi++,Kc[Hi]=n.current,n.current=r}var Jr={},Mt=Xr(Jr),tn=Xr(!1),$s=Jr;function qi(n,r){var a=n.type.contextTypes;if(!a)return Jr;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===r)return c.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in a)d[p]=r[p];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=d),d}function nn(n){return n=n.childContextTypes,n!=null}function Dl(){Ze(tn),Ze(Mt)}function cp(n,r,a){if(Mt.current!==Jr)throw Error(t(168));Xe(Mt,r),Xe(tn,a)}function hp(n,r,a){var c=n.stateNode;if(r=r.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in r))throw Error(t(108,_e(n)||"Unknown",d));return ae({},a,c)}function Vl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Jr,$s=Mt.current,Xe(Mt,n),Xe(tn,tn.current),!0}function dp(n,r,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=hp(n,r,$s),c.__reactInternalMemoizedMergedChildContext=n,Ze(tn),Ze(Mt),Xe(Mt,n)):Ze(tn),Xe(tn,a)}var wr=null,Ll=!1,Gc=!1;function fp(n){wr===null?wr=[n]:wr.push(n)}function e0(n){Ll=!0,fp(n)}function Zr(){if(!Gc&&wr!==null){Gc=!0;var n=0,r=Me;try{var a=wr;for(Me=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}wr=null,Ll=!1}catch(d){throw wr!==null&&(wr=wr.slice(n+1)),xi(Vs,Zr),d}finally{Me=r,Gc=!1}}return null}var Wi=[],Ki=0,Ol=null,Ml=0,xn=[],Sn=0,Hs=null,Er=1,Tr="";function qs(n,r){Wi[Ki++]=Ml,Wi[Ki++]=Ol,Ol=n,Ml=r}function pp(n,r,a){xn[Sn++]=Er,xn[Sn++]=Tr,xn[Sn++]=Hs,Hs=n;var c=Er;n=Tr;var d=32-Kt(c)-1;c&=~(1<<d),a+=1;var p=32-Kt(r)+d;if(30<p){var w=d-d%5;p=(c&(1<<w)-1).toString(32),c>>=w,d-=w,Er=1<<32-Kt(r)+d|a<<d|c,Tr=p+n}else Er=1<<p|a<<d|c,Tr=n}function Qc(n){n.return!==null&&(qs(n,1),pp(n,1,0))}function Yc(n){for(;n===Ol;)Ol=Wi[--Ki],Wi[Ki]=null,Ml=Wi[--Ki],Wi[Ki]=null;for(;n===Hs;)Hs=xn[--Sn],xn[Sn]=null,Tr=xn[--Sn],xn[Sn]=null,Er=xn[--Sn],xn[Sn]=null}var mn=null,gn=null,nt=!1,zn=null;function mp(n,r){var a=Rn(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=n,r=n.deletions,r===null?(n.deletions=[a],n.flags|=16):r.push(a)}function gp(n,r){switch(n.tag){case 5:var a=n.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,mn=n,gn=Yr(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,mn=n,gn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=Hs!==null?{id:Er,overflow:Tr}:null,n.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=Rn(18,null,null,0),a.stateNode=r,a.return=n,n.child=a,mn=n,gn=null,!0):!1;default:return!1}}function Xc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Jc(n){if(nt){var r=gn;if(r){var a=r;if(!gp(n,r)){if(Xc(n))throw Error(t(418));r=Yr(a.nextSibling);var c=mn;r&&gp(n,r)?mp(c,a):(n.flags=n.flags&-4097|2,nt=!1,mn=n)}}else{if(Xc(n))throw Error(t(418));n.flags=n.flags&-4097|2,nt=!1,mn=n}}}function yp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;mn=n}function jl(n){if(n!==mn)return!1;if(!nt)return yp(n),nt=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!$c(n.type,n.memoizedProps)),r&&(r=gn)){if(Xc(n))throw vp(),Error(t(418));for(;r;)mp(n,r),r=Yr(r.nextSibling)}if(yp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(r===0){gn=Yr(n.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}n=n.nextSibling}gn=null}}else gn=mn?Yr(n.stateNode.nextSibling):null;return!0}function vp(){for(var n=gn;n;)n=Yr(n.nextSibling)}function Gi(){gn=mn=null,nt=!1}function Zc(n){zn===null?zn=[n]:zn.push(n)}var t0=ie.ReactCurrentBatchConfig;function aa(n,r,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,p=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(w){var C=d.refs;w===null?delete C[p]:C[p]=w},r._stringRef=p,r)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Fl(n,r){throw n=Object.prototype.toString.call(r),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function _p(n){var r=n._init;return r(n._payload)}function wp(n){function r(j,V){if(n){var F=j.deletions;F===null?(j.deletions=[V],j.flags|=16):F.push(V)}}function a(j,V){if(!n)return null;for(;V!==null;)r(j,V),V=V.sibling;return null}function c(j,V){for(j=new Map;V!==null;)V.key!==null?j.set(V.key,V):j.set(V.index,V),V=V.sibling;return j}function d(j,V){return j=as(j,V),j.index=0,j.sibling=null,j}function p(j,V,F){return j.index=F,n?(F=j.alternate,F!==null?(F=F.index,F<V?(j.flags|=2,V):F):(j.flags|=2,V)):(j.flags|=1048576,V)}function w(j){return n&&j.alternate===null&&(j.flags|=2),j}function C(j,V,F,se){return V===null||V.tag!==6?(V=Hh(F,j.mode,se),V.return=j,V):(V=d(V,F),V.return=j,V)}function b(j,V,F,se){var ve=F.type;return ve===R?X(j,V,F.props.children,se,F.key):V!==null&&(V.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===xe&&_p(ve)===V.type)?(se=d(V,F.props),se.ref=aa(j,V,F),se.return=j,se):(se=uu(F.type,F.key,F.props,null,j.mode,se),se.ref=aa(j,V,F),se.return=j,se)}function z(j,V,F,se){return V===null||V.tag!==4||V.stateNode.containerInfo!==F.containerInfo||V.stateNode.implementation!==F.implementation?(V=qh(F,j.mode,se),V.return=j,V):(V=d(V,F.children||[]),V.return=j,V)}function X(j,V,F,se,ve){return V===null||V.tag!==7?(V=Zs(F,j.mode,se,ve),V.return=j,V):(V=d(V,F),V.return=j,V)}function ee(j,V,F){if(typeof V=="string"&&V!==""||typeof V=="number")return V=Hh(""+V,j.mode,F),V.return=j,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case fe:return F=uu(V.type,V.key,V.props,null,j.mode,F),F.ref=aa(j,null,V),F.return=j,F;case te:return V=qh(V,j.mode,F),V.return=j,V;case xe:var se=V._init;return ee(j,se(V._payload),F)}if(cr(V)||pe(V))return V=Zs(V,j.mode,F,null),V.return=j,V;Fl(j,V)}return null}function Q(j,V,F,se){var ve=V!==null?V.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return ve!==null?null:C(j,V,""+F,se);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case fe:return F.key===ve?b(j,V,F,se):null;case te:return F.key===ve?z(j,V,F,se):null;case xe:return ve=F._init,Q(j,V,ve(F._payload),se)}if(cr(F)||pe(F))return ve!==null?null:X(j,V,F,se,null);Fl(j,F)}return null}function ue(j,V,F,se,ve){if(typeof se=="string"&&se!==""||typeof se=="number")return j=j.get(F)||null,C(V,j,""+se,ve);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case fe:return j=j.get(se.key===null?F:se.key)||null,b(V,j,se,ve);case te:return j=j.get(se.key===null?F:se.key)||null,z(V,j,se,ve);case xe:var Se=se._init;return ue(j,V,F,Se(se._payload),ve)}if(cr(se)||pe(se))return j=j.get(F)||null,X(V,j,se,ve,null);Fl(V,se)}return null}function me(j,V,F,se){for(var ve=null,Se=null,Ce=V,ke=V=0,Ct=null;Ce!==null&&ke<F.length;ke++){Ce.index>ke?(Ct=Ce,Ce=null):Ct=Ce.sibling;var $e=Q(j,Ce,F[ke],se);if($e===null){Ce===null&&(Ce=Ct);break}n&&Ce&&$e.alternate===null&&r(j,Ce),V=p($e,V,ke),Se===null?ve=$e:Se.sibling=$e,Se=$e,Ce=Ct}if(ke===F.length)return a(j,Ce),nt&&qs(j,ke),ve;if(Ce===null){for(;ke<F.length;ke++)Ce=ee(j,F[ke],se),Ce!==null&&(V=p(Ce,V,ke),Se===null?ve=Ce:Se.sibling=Ce,Se=Ce);return nt&&qs(j,ke),ve}for(Ce=c(j,Ce);ke<F.length;ke++)Ct=ue(Ce,j,ke,F[ke],se),Ct!==null&&(n&&Ct.alternate!==null&&Ce.delete(Ct.key===null?ke:Ct.key),V=p(Ct,V,ke),Se===null?ve=Ct:Se.sibling=Ct,Se=Ct);return n&&Ce.forEach(function(ls){return r(j,ls)}),nt&&qs(j,ke),ve}function ge(j,V,F,se){var ve=pe(F);if(typeof ve!="function")throw Error(t(150));if(F=ve.call(F),F==null)throw Error(t(151));for(var Se=ve=null,Ce=V,ke=V=0,Ct=null,$e=F.next();Ce!==null&&!$e.done;ke++,$e=F.next()){Ce.index>ke?(Ct=Ce,Ce=null):Ct=Ce.sibling;var ls=Q(j,Ce,$e.value,se);if(ls===null){Ce===null&&(Ce=Ct);break}n&&Ce&&ls.alternate===null&&r(j,Ce),V=p(ls,V,ke),Se===null?ve=ls:Se.sibling=ls,Se=ls,Ce=Ct}if($e.done)return a(j,Ce),nt&&qs(j,ke),ve;if(Ce===null){for(;!$e.done;ke++,$e=F.next())$e=ee(j,$e.value,se),$e!==null&&(V=p($e,V,ke),Se===null?ve=$e:Se.sibling=$e,Se=$e);return nt&&qs(j,ke),ve}for(Ce=c(j,Ce);!$e.done;ke++,$e=F.next())$e=ue(Ce,j,ke,$e.value,se),$e!==null&&(n&&$e.alternate!==null&&Ce.delete($e.key===null?ke:$e.key),V=p($e,V,ke),Se===null?ve=$e:Se.sibling=$e,Se=$e);return n&&Ce.forEach(function(V0){return r(j,V0)}),nt&&qs(j,ke),ve}function ut(j,V,F,se){if(typeof F=="object"&&F!==null&&F.type===R&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case fe:e:{for(var ve=F.key,Se=V;Se!==null;){if(Se.key===ve){if(ve=F.type,ve===R){if(Se.tag===7){a(j,Se.sibling),V=d(Se,F.props.children),V.return=j,j=V;break e}}else if(Se.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===xe&&_p(ve)===Se.type){a(j,Se.sibling),V=d(Se,F.props),V.ref=aa(j,Se,F),V.return=j,j=V;break e}a(j,Se);break}else r(j,Se);Se=Se.sibling}F.type===R?(V=Zs(F.props.children,j.mode,se,F.key),V.return=j,j=V):(se=uu(F.type,F.key,F.props,null,j.mode,se),se.ref=aa(j,V,F),se.return=j,j=se)}return w(j);case te:e:{for(Se=F.key;V!==null;){if(V.key===Se)if(V.tag===4&&V.stateNode.containerInfo===F.containerInfo&&V.stateNode.implementation===F.implementation){a(j,V.sibling),V=d(V,F.children||[]),V.return=j,j=V;break e}else{a(j,V);break}else r(j,V);V=V.sibling}V=qh(F,j.mode,se),V.return=j,j=V}return w(j);case xe:return Se=F._init,ut(j,V,Se(F._payload),se)}if(cr(F))return me(j,V,F,se);if(pe(F))return ge(j,V,F,se);Fl(j,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,V!==null&&V.tag===6?(a(j,V.sibling),V=d(V,F),V.return=j,j=V):(a(j,V),V=Hh(F,j.mode,se),V.return=j,j=V),w(j)):a(j,V)}return ut}var Qi=wp(!0),Ep=wp(!1),Ul=Xr(null),zl=null,Yi=null,eh=null;function th(){eh=Yi=zl=null}function nh(n){var r=Ul.current;Ze(Ul),n._currentValue=r}function rh(n,r,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===a)break;n=n.return}}function Xi(n,r){zl=n,eh=Yi=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&r)!==0&&(rn=!0),n.firstContext=null)}function Cn(n){var r=n._currentValue;if(eh!==n)if(n={context:n,memoizedValue:r,next:null},Yi===null){if(zl===null)throw Error(t(308));Yi=n,zl.dependencies={lanes:0,firstContext:n}}else Yi=Yi.next=n;return r}var Ws=null;function sh(n){Ws===null?Ws=[n]:Ws.push(n)}function Tp(n,r,a,c){var d=r.interleaved;return d===null?(a.next=a,sh(r)):(a.next=d.next,d.next=a),r.interleaved=a,Ir(n,c)}function Ir(n,r){n.lanes|=r;var a=n.alternate;for(a!==null&&(a.lanes|=r),a=n,n=n.return;n!==null;)n.childLanes|=r,a=n.alternate,a!==null&&(a.childLanes|=r),a=n,n=n.return;return a.tag===3?a.stateNode:null}var es=!1;function ih(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ip(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function xr(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function ts(n,r,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Be&2)!==0){var d=c.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),c.pending=r,Ir(n,a)}return d=c.interleaved,d===null?(r.next=r,sh(c)):(r.next=d.next,d.next=r),c.interleaved=r,Ir(n,a)}function Bl(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,Hr(n,a)}}function xp(n,r){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?d=p=w:p=p.next=w,a=a.next}while(a!==null);p===null?d=p=r:p=p.next=r}else d=p=r;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}function $l(n,r,a,c){var d=n.updateQueue;es=!1;var p=d.firstBaseUpdate,w=d.lastBaseUpdate,C=d.shared.pending;if(C!==null){d.shared.pending=null;var b=C,z=b.next;b.next=null,w===null?p=z:w.next=z,w=b;var X=n.alternate;X!==null&&(X=X.updateQueue,C=X.lastBaseUpdate,C!==w&&(C===null?X.firstBaseUpdate=z:C.next=z,X.lastBaseUpdate=b))}if(p!==null){var ee=d.baseState;w=0,X=z=b=null,C=p;do{var Q=C.lane,ue=C.eventTime;if((c&Q)===Q){X!==null&&(X=X.next={eventTime:ue,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var me=n,ge=C;switch(Q=r,ue=a,ge.tag){case 1:if(me=ge.payload,typeof me=="function"){ee=me.call(ue,ee,Q);break e}ee=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=ge.payload,Q=typeof me=="function"?me.call(ue,ee,Q):me,Q==null)break e;ee=ae({},ee,Q);break e;case 2:es=!0}}C.callback!==null&&C.lane!==0&&(n.flags|=64,Q=d.effects,Q===null?d.effects=[C]:Q.push(C))}else ue={eventTime:ue,lane:Q,tag:C.tag,payload:C.payload,callback:C.callback,next:null},X===null?(z=X=ue,b=ee):X=X.next=ue,w|=Q;if(C=C.next,C===null){if(C=d.shared.pending,C===null)break;Q=C,C=Q.next,Q.next=null,d.lastBaseUpdate=Q,d.shared.pending=null}}while(!0);if(X===null&&(b=ee),d.baseState=b,d.firstBaseUpdate=z,d.lastBaseUpdate=X,r=d.shared.interleaved,r!==null){d=r;do w|=d.lane,d=d.next;while(d!==r)}else p===null&&(d.shared.lanes=0);Qs|=w,n.lanes=w,n.memoizedState=ee}}function Sp(n,r,a){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var c=n[r],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var la={},tr=Xr(la),ua=Xr(la),ca=Xr(la);function Ks(n){if(n===la)throw Error(t(174));return n}function oh(n,r){switch(Xe(ca,r),Xe(ua,n),Xe(tr,la),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:vt(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=vt(r,n)}Ze(tr),Xe(tr,r)}function Ji(){Ze(tr),Ze(ua),Ze(ca)}function Cp(n){Ks(ca.current);var r=Ks(tr.current),a=vt(r,n.type);r!==a&&(Xe(ua,n),Xe(tr,a))}function ah(n){ua.current===n&&(Ze(tr),Ze(ua))}var rt=Xr(0);function Hl(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var lh=[];function uh(){for(var n=0;n<lh.length;n++)lh[n]._workInProgressVersionPrimary=null;lh.length=0}var ql=ie.ReactCurrentDispatcher,ch=ie.ReactCurrentBatchConfig,Gs=0,st=null,wt=null,xt=null,Wl=!1,ha=!1,da=0,n0=0;function jt(){throw Error(t(321))}function hh(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!Un(n[a],r[a]))return!1;return!0}function dh(n,r,a,c,d,p){if(Gs=p,st=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ql.current=n===null||n.memoizedState===null?o0:a0,n=a(c,d),ha){p=0;do{if(ha=!1,da=0,25<=p)throw Error(t(301));p+=1,xt=wt=null,r.updateQueue=null,ql.current=l0,n=a(c,d)}while(ha)}if(ql.current=Ql,r=wt!==null&&wt.next!==null,Gs=0,xt=wt=st=null,Wl=!1,r)throw Error(t(300));return n}function fh(){var n=da!==0;return da=0,n}function nr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?st.memoizedState=xt=n:xt=xt.next=n,xt}function An(){if(wt===null){var n=st.alternate;n=n!==null?n.memoizedState:null}else n=wt.next;var r=xt===null?st.memoizedState:xt.next;if(r!==null)xt=r,wt=n;else{if(n===null)throw Error(t(310));wt=n,n={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},xt===null?st.memoizedState=xt=n:xt=xt.next=n}return xt}function fa(n,r){return typeof r=="function"?r(n):r}function ph(n){var r=An(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=wt,d=c.baseQueue,p=a.pending;if(p!==null){if(d!==null){var w=d.next;d.next=p.next,p.next=w}c.baseQueue=d=p,a.pending=null}if(d!==null){p=d.next,c=c.baseState;var C=w=null,b=null,z=p;do{var X=z.lane;if((Gs&X)===X)b!==null&&(b=b.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),c=z.hasEagerState?z.eagerState:n(c,z.action);else{var ee={lane:X,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};b===null?(C=b=ee,w=c):b=b.next=ee,st.lanes|=X,Qs|=X}z=z.next}while(z!==null&&z!==p);b===null?w=c:b.next=C,Un(c,r.memoizedState)||(rn=!0),r.memoizedState=c,r.baseState=w,r.baseQueue=b,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do p=d.lane,st.lanes|=p,Qs|=p,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function mh(n){var r=An(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,p=r.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do p=n(p,w.action),w=w.next;while(w!==d);Un(p,r.memoizedState)||(rn=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),a.lastRenderedState=p}return[p,c]}function Ap(){}function kp(n,r){var a=st,c=An(),d=r(),p=!Un(c.memoizedState,d);if(p&&(c.memoizedState=d,rn=!0),c=c.queue,gh(Np.bind(null,a,c,n),[n]),c.getSnapshot!==r||p||xt!==null&&xt.memoizedState.tag&1){if(a.flags|=2048,pa(9,Pp.bind(null,a,c,d,r),void 0,null),St===null)throw Error(t(349));(Gs&30)!==0||Rp(a,r,d)}return d}function Rp(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=st.updateQueue,r===null?(r={lastEffect:null,stores:null},st.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function Pp(n,r,a,c){r.value=a,r.getSnapshot=c,bp(r)&&Dp(n)}function Np(n,r,a){return a(function(){bp(r)&&Dp(n)})}function bp(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!Un(n,a)}catch{return!0}}function Dp(n){var r=Ir(n,1);r!==null&&qn(r,n,1,-1)}function Vp(n){var r=nr();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:n},r.queue=n,n=n.dispatch=i0.bind(null,st,n),[r.memoizedState,n]}function pa(n,r,a,c){return n={tag:n,create:r,destroy:a,deps:c,next:null},r=st.updateQueue,r===null?(r={lastEffect:null,stores:null},st.updateQueue=r,r.lastEffect=n.next=n):(a=r.lastEffect,a===null?r.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,r.lastEffect=n)),n}function Lp(){return An().memoizedState}function Kl(n,r,a,c){var d=nr();st.flags|=n,d.memoizedState=pa(1|r,a,void 0,c===void 0?null:c)}function Gl(n,r,a,c){var d=An();c=c===void 0?null:c;var p=void 0;if(wt!==null){var w=wt.memoizedState;if(p=w.destroy,c!==null&&hh(c,w.deps)){d.memoizedState=pa(r,a,p,c);return}}st.flags|=n,d.memoizedState=pa(1|r,a,p,c)}function Op(n,r){return Kl(8390656,8,n,r)}function gh(n,r){return Gl(2048,8,n,r)}function Mp(n,r){return Gl(4,2,n,r)}function jp(n,r){return Gl(4,4,n,r)}function Fp(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function Up(n,r,a){return a=a!=null?a.concat([n]):null,Gl(4,4,Fp.bind(null,r,n),a)}function yh(){}function zp(n,r){var a=An();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&hh(r,c[1])?c[0]:(a.memoizedState=[n,r],n)}function Bp(n,r){var a=An();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&hh(r,c[1])?c[0]:(n=n(),a.memoizedState=[n,r],n)}function $p(n,r,a){return(Gs&21)===0?(n.baseState&&(n.baseState=!1,rn=!0),n.memoizedState=a):(Un(a,r)||(a=Ms(),st.lanes|=a,Qs|=a,n.baseState=!0),r)}function r0(n,r){var a=Me;Me=a!==0&&4>a?a:4,n(!0);var c=ch.transition;ch.transition={};try{n(!1),r()}finally{Me=a,ch.transition=c}}function Hp(){return An().memoizedState}function s0(n,r,a){var c=is(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},qp(n))Wp(r,a);else if(a=Tp(n,r,a,c),a!==null){var d=Yt();qn(a,n,c,d),Kp(a,r,c)}}function i0(n,r,a){var c=is(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(qp(n))Wp(r,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var w=r.lastRenderedState,C=p(w,a);if(d.hasEagerState=!0,d.eagerState=C,Un(C,w)){var b=r.interleaved;b===null?(d.next=d,sh(r)):(d.next=b.next,b.next=d),r.interleaved=d;return}}catch{}finally{}a=Tp(n,r,d,c),a!==null&&(d=Yt(),qn(a,n,c,d),Kp(a,r,c))}}function qp(n){var r=n.alternate;return n===st||r!==null&&r===st}function Wp(n,r){ha=Wl=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function Kp(n,r,a){if((a&4194240)!==0){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,Hr(n,a)}}var Ql={readContext:Cn,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},o0={readContext:Cn,useCallback:function(n,r){return nr().memoizedState=[n,r===void 0?null:r],n},useContext:Cn,useEffect:Op,useImperativeHandle:function(n,r,a){return a=a!=null?a.concat([n]):null,Kl(4194308,4,Fp.bind(null,r,n),a)},useLayoutEffect:function(n,r){return Kl(4194308,4,n,r)},useInsertionEffect:function(n,r){return Kl(4,2,n,r)},useMemo:function(n,r){var a=nr();return r=r===void 0?null:r,n=n(),a.memoizedState=[n,r],n},useReducer:function(n,r,a){var c=nr();return r=a!==void 0?a(r):r,c.memoizedState=c.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},c.queue=n,n=n.dispatch=s0.bind(null,st,n),[c.memoizedState,n]},useRef:function(n){var r=nr();return n={current:n},r.memoizedState=n},useState:Vp,useDebugValue:yh,useDeferredValue:function(n){return nr().memoizedState=n},useTransition:function(){var n=Vp(!1),r=n[0];return n=r0.bind(null,n[1]),nr().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,a){var c=st,d=nr();if(nt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=r(),St===null)throw Error(t(349));(Gs&30)!==0||Rp(c,r,a)}d.memoizedState=a;var p={value:a,getSnapshot:r};return d.queue=p,Op(Np.bind(null,c,p,n),[n]),c.flags|=2048,pa(9,Pp.bind(null,c,p,a,r),void 0,null),a},useId:function(){var n=nr(),r=St.identifierPrefix;if(nt){var a=Tr,c=Er;a=(c&~(1<<32-Kt(c)-1)).toString(32)+a,r=":"+r+"R"+a,a=da++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=n0++,r=":"+r+"r"+a.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},a0={readContext:Cn,useCallback:zp,useContext:Cn,useEffect:gh,useImperativeHandle:Up,useInsertionEffect:Mp,useLayoutEffect:jp,useMemo:Bp,useReducer:ph,useRef:Lp,useState:function(){return ph(fa)},useDebugValue:yh,useDeferredValue:function(n){var r=An();return $p(r,wt.memoizedState,n)},useTransition:function(){var n=ph(fa)[0],r=An().memoizedState;return[n,r]},useMutableSource:Ap,useSyncExternalStore:kp,useId:Hp,unstable_isNewReconciler:!1},l0={readContext:Cn,useCallback:zp,useContext:Cn,useEffect:gh,useImperativeHandle:Up,useInsertionEffect:Mp,useLayoutEffect:jp,useMemo:Bp,useReducer:mh,useRef:Lp,useState:function(){return mh(fa)},useDebugValue:yh,useDeferredValue:function(n){var r=An();return wt===null?r.memoizedState=n:$p(r,wt.memoizedState,n)},useTransition:function(){var n=mh(fa)[0],r=An().memoizedState;return[n,r]},useMutableSource:Ap,useSyncExternalStore:kp,useId:Hp,unstable_isNewReconciler:!1};function Bn(n,r){if(n&&n.defaultProps){r=ae({},r),n=n.defaultProps;for(var a in n)r[a]===void 0&&(r[a]=n[a]);return r}return r}function vh(n,r,a,c){r=n.memoizedState,a=a(c,r),a=a==null?r:ae({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Yl={isMounted:function(n){return(n=n._reactInternals)?Dn(n)===n:!1},enqueueSetState:function(n,r,a){n=n._reactInternals;var c=Yt(),d=is(n),p=xr(c,d);p.payload=r,a!=null&&(p.callback=a),r=ts(n,p,d),r!==null&&(qn(r,n,d,c),Bl(r,n,d))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var c=Yt(),d=is(n),p=xr(c,d);p.tag=1,p.payload=r,a!=null&&(p.callback=a),r=ts(n,p,d),r!==null&&(qn(r,n,d,c),Bl(r,n,d))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=Yt(),c=is(n),d=xr(a,c);d.tag=2,r!=null&&(d.callback=r),r=ts(n,d,c),r!==null&&(qn(r,n,c,a),Bl(r,n,c))}};function Gp(n,r,a,c,d,p,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,w):r.prototype&&r.prototype.isPureReactComponent?!ea(a,c)||!ea(d,p):!0}function Qp(n,r,a){var c=!1,d=Jr,p=r.contextType;return typeof p=="object"&&p!==null?p=Cn(p):(d=nn(r)?$s:Mt.current,c=r.contextTypes,p=(c=c!=null)?qi(n,d):Jr),r=new r(a,p),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Yl,n.stateNode=r,r._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=p),r}function Yp(n,r,a,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==n&&Yl.enqueueReplaceState(r,r.state,null)}function _h(n,r,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},ih(n);var p=r.contextType;typeof p=="object"&&p!==null?d.context=Cn(p):(p=nn(r)?$s:Mt.current,d.context=qi(n,p)),d.state=n.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(vh(n,r,p,a),d.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(r=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),r!==d.state&&Yl.enqueueReplaceState(d,d.state,null),$l(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function Zi(n,r){try{var a="",c=r;do a+=Z(c),c=c.return;while(c);var d=a}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:n,source:r,stack:d,digest:null}}function wh(n,r,a){return{value:n,source:null,stack:a??null,digest:r??null}}function Eh(n,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var u0=typeof WeakMap=="function"?WeakMap:Map;function Xp(n,r,a){a=xr(-1,a),a.tag=3,a.payload={element:null};var c=r.value;return a.callback=function(){ru||(ru=!0,Oh=c),Eh(n,r)},a}function Jp(n,r,a){a=xr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=r.value;a.payload=function(){return c(d)},a.callback=function(){Eh(n,r)}}var p=n.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){Eh(n,r),typeof c!="function"&&(rs===null?rs=new Set([this]):rs.add(this));var w=r.stack;this.componentDidCatch(r.value,{componentStack:w!==null?w:""})}),a}function Zp(n,r,a){var c=n.pingCache;if(c===null){c=n.pingCache=new u0;var d=new Set;c.set(r,d)}else d=c.get(r),d===void 0&&(d=new Set,c.set(r,d));d.has(a)||(d.add(a),n=I0.bind(null,n,r,a),r.then(n,n))}function em(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function tm(n,r,a,c,d){return(n.mode&1)===0?(n===r?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=xr(-1,1),r.tag=2,ts(a,r,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var c0=ie.ReactCurrentOwner,rn=!1;function Qt(n,r,a,c){r.child=n===null?Ep(r,null,a,c):Qi(r,n.child,a,c)}function nm(n,r,a,c,d){a=a.render;var p=r.ref;return Xi(r,d),c=dh(n,r,a,c,p,d),a=fh(),n!==null&&!rn?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~d,Sr(n,r,d)):(nt&&a&&Qc(r),r.flags|=1,Qt(n,r,c,d),r.child)}function rm(n,r,a,c,d){if(n===null){var p=a.type;return typeof p=="function"&&!$h(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=p,sm(n,r,p,c,d)):(n=uu(a.type,null,c,r,r.mode,d),n.ref=r.ref,n.return=r,r.child=n)}if(p=n.child,(n.lanes&d)===0){var w=p.memoizedProps;if(a=a.compare,a=a!==null?a:ea,a(w,c)&&n.ref===r.ref)return Sr(n,r,d)}return r.flags|=1,n=as(p,c),n.ref=r.ref,n.return=r,r.child=n}function sm(n,r,a,c,d){if(n!==null){var p=n.memoizedProps;if(ea(p,c)&&n.ref===r.ref)if(rn=!1,r.pendingProps=c=p,(n.lanes&d)!==0)(n.flags&131072)!==0&&(rn=!0);else return r.lanes=n.lanes,Sr(n,r,d)}return Th(n,r,a,c,d)}function im(n,r,a){var c=r.pendingProps,d=c.children,p=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(to,yn),yn|=a;else{if((a&1073741824)===0)return n=p!==null?p.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,Xe(to,yn),yn|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:a,Xe(to,yn),yn|=c}else p!==null?(c=p.baseLanes|a,r.memoizedState=null):c=a,Xe(to,yn),yn|=c;return Qt(n,r,d,a),r.child}function om(n,r){var a=r.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function Th(n,r,a,c,d){var p=nn(a)?$s:Mt.current;return p=qi(r,p),Xi(r,d),a=dh(n,r,a,c,p,d),c=fh(),n!==null&&!rn?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~d,Sr(n,r,d)):(nt&&c&&Qc(r),r.flags|=1,Qt(n,r,a,d),r.child)}function am(n,r,a,c,d){if(nn(a)){var p=!0;Vl(r)}else p=!1;if(Xi(r,d),r.stateNode===null)Jl(n,r),Qp(r,a,c),_h(r,a,c,d),c=!0;else if(n===null){var w=r.stateNode,C=r.memoizedProps;w.props=C;var b=w.context,z=a.contextType;typeof z=="object"&&z!==null?z=Cn(z):(z=nn(a)?$s:Mt.current,z=qi(r,z));var X=a.getDerivedStateFromProps,ee=typeof X=="function"||typeof w.getSnapshotBeforeUpdate=="function";ee||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==c||b!==z)&&Yp(r,w,c,z),es=!1;var Q=r.memoizedState;w.state=Q,$l(r,c,w,d),b=r.memoizedState,C!==c||Q!==b||tn.current||es?(typeof X=="function"&&(vh(r,a,X,c),b=r.memoizedState),(C=es||Gp(r,a,C,c,Q,b,z))?(ee||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(r.flags|=4194308)):(typeof w.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=b),w.props=c,w.state=b,w.context=z,c=C):(typeof w.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{w=r.stateNode,Ip(n,r),C=r.memoizedProps,z=r.type===r.elementType?C:Bn(r.type,C),w.props=z,ee=r.pendingProps,Q=w.context,b=a.contextType,typeof b=="object"&&b!==null?b=Cn(b):(b=nn(a)?$s:Mt.current,b=qi(r,b));var ue=a.getDerivedStateFromProps;(X=typeof ue=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(C!==ee||Q!==b)&&Yp(r,w,c,b),es=!1,Q=r.memoizedState,w.state=Q,$l(r,c,w,d);var me=r.memoizedState;C!==ee||Q!==me||tn.current||es?(typeof ue=="function"&&(vh(r,a,ue,c),me=r.memoizedState),(z=es||Gp(r,a,z,c,Q,me,b)||!1)?(X||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,me,b),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,me,b)),typeof w.componentDidUpdate=="function"&&(r.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof w.componentDidUpdate!="function"||C===n.memoizedProps&&Q===n.memoizedState||(r.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&Q===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=me),w.props=c,w.state=me,w.context=b,c=z):(typeof w.componentDidUpdate!="function"||C===n.memoizedProps&&Q===n.memoizedState||(r.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||C===n.memoizedProps&&Q===n.memoizedState||(r.flags|=1024),c=!1)}return Ih(n,r,a,c,p,d)}function Ih(n,r,a,c,d,p){om(n,r);var w=(r.flags&128)!==0;if(!c&&!w)return d&&dp(r,a,!1),Sr(n,r,p);c=r.stateNode,c0.current=r;var C=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return r.flags|=1,n!==null&&w?(r.child=Qi(r,n.child,null,p),r.child=Qi(r,null,C,p)):Qt(n,r,C,p),r.memoizedState=c.state,d&&dp(r,a,!0),r.child}function lm(n){var r=n.stateNode;r.pendingContext?cp(n,r.pendingContext,r.pendingContext!==r.context):r.context&&cp(n,r.context,!1),oh(n,r.containerInfo)}function um(n,r,a,c,d){return Gi(),Zc(d),r.flags|=256,Qt(n,r,a,c),r.child}var xh={dehydrated:null,treeContext:null,retryLane:0};function Sh(n){return{baseLanes:n,cachePool:null,transitions:null}}function cm(n,r,a){var c=r.pendingProps,d=rt.current,p=!1,w=(r.flags&128)!==0,C;if((C=w)||(C=n!==null&&n.memoizedState===null?!1:(d&2)!==0),C?(p=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Xe(rt,d&1),n===null)return Jc(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((r.mode&1)===0?r.lanes=1:n.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(w=c.children,n=c.fallback,p?(c=r.mode,p=r.child,w={mode:"hidden",children:w},(c&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=w):p=cu(w,c,0,null),n=Zs(n,c,a,null),p.return=r,n.return=r,p.sibling=n,r.child=p,r.child.memoizedState=Sh(a),r.memoizedState=xh,n):Ch(r,w));if(d=n.memoizedState,d!==null&&(C=d.dehydrated,C!==null))return h0(n,r,w,c,C,d,a);if(p){p=c.fallback,w=r.mode,d=n.child,C=d.sibling;var b={mode:"hidden",children:c.children};return(w&1)===0&&r.child!==d?(c=r.child,c.childLanes=0,c.pendingProps=b,r.deletions=null):(c=as(d,b),c.subtreeFlags=d.subtreeFlags&14680064),C!==null?p=as(C,p):(p=Zs(p,w,a,null),p.flags|=2),p.return=r,c.return=r,c.sibling=p,r.child=c,c=p,p=r.child,w=n.child.memoizedState,w=w===null?Sh(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},p.memoizedState=w,p.childLanes=n.childLanes&~a,r.memoizedState=xh,c}return p=n.child,n=p.sibling,c=as(p,{mode:"visible",children:c.children}),(r.mode&1)===0&&(c.lanes=a),c.return=r,c.sibling=null,n!==null&&(a=r.deletions,a===null?(r.deletions=[n],r.flags|=16):a.push(n)),r.child=c,r.memoizedState=null,c}function Ch(n,r){return r=cu({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function Xl(n,r,a,c){return c!==null&&Zc(c),Qi(r,n.child,null,a),n=Ch(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function h0(n,r,a,c,d,p,w){if(a)return r.flags&256?(r.flags&=-257,c=wh(Error(t(422))),Xl(n,r,w,c)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(p=c.fallback,d=r.mode,c=cu({mode:"visible",children:c.children},d,0,null),p=Zs(p,d,w,null),p.flags|=2,c.return=r,p.return=r,c.sibling=p,r.child=c,(r.mode&1)!==0&&Qi(r,n.child,null,w),r.child.memoizedState=Sh(w),r.memoizedState=xh,p);if((r.mode&1)===0)return Xl(n,r,w,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var C=c.dgst;return c=C,p=Error(t(419)),c=wh(p,c,void 0),Xl(n,r,w,c)}if(C=(w&n.childLanes)!==0,rn||C){if(c=St,c!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|w))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,Ir(n,d),qn(c,n,d,-1))}return Bh(),c=wh(Error(t(421))),Xl(n,r,w,c)}return d.data==="$?"?(r.flags|=128,r.child=n.child,r=x0.bind(null,n),d._reactRetry=r,null):(n=p.treeContext,gn=Yr(d.nextSibling),mn=r,nt=!0,zn=null,n!==null&&(xn[Sn++]=Er,xn[Sn++]=Tr,xn[Sn++]=Hs,Er=n.id,Tr=n.overflow,Hs=r),r=Ch(r,c.children),r.flags|=4096,r)}function hm(n,r,a){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),rh(n.return,r,a)}function Ah(n,r,a,c,d){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=d)}function dm(n,r,a){var c=r.pendingProps,d=c.revealOrder,p=c.tail;if(Qt(n,r,c.children,a),c=rt.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&hm(n,a,r);else if(n.tag===19)hm(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Xe(rt,c),(r.mode&1)===0)r.memoizedState=null;else switch(d){case"forwards":for(a=r.child,d=null;a!==null;)n=a.alternate,n!==null&&Hl(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),Ah(r,!1,d,a,p);break;case"backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(n=d.alternate,n!==null&&Hl(n)===null){r.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}Ah(r,!0,a,null,p);break;case"together":Ah(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Jl(n,r){(r.mode&1)===0&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function Sr(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),Qs|=r.lanes,(a&r.childLanes)===0)return null;if(n!==null&&r.child!==n.child)throw Error(t(153));if(r.child!==null){for(n=r.child,a=as(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=as(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function d0(n,r,a){switch(r.tag){case 3:lm(r),Gi();break;case 5:Cp(r);break;case 1:nn(r.type)&&Vl(r);break;case 4:oh(r,r.stateNode.containerInfo);break;case 10:var c=r.type._context,d=r.memoizedProps.value;Xe(Ul,c._currentValue),c._currentValue=d;break;case 13:if(c=r.memoizedState,c!==null)return c.dehydrated!==null?(Xe(rt,rt.current&1),r.flags|=128,null):(a&r.child.childLanes)!==0?cm(n,r,a):(Xe(rt,rt.current&1),n=Sr(n,r,a),n!==null?n.sibling:null);Xe(rt,rt.current&1);break;case 19:if(c=(a&r.childLanes)!==0,(n.flags&128)!==0){if(c)return dm(n,r,a);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Xe(rt,rt.current),c)break;return null;case 22:case 23:return r.lanes=0,im(n,r,a)}return Sr(n,r,a)}var fm,kh,pm,mm;fm=function(n,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},kh=function(){},pm=function(n,r,a,c){var d=n.memoizedProps;if(d!==c){n=r.stateNode,Ks(tr.current);var p=null;switch(a){case"input":d=Cs(n,d),c=Cs(n,c),p=[];break;case"select":d=ae({},d,{value:void 0}),c=ae({},c,{value:void 0}),p=[];break;case"textarea":d=Ro(n,d),c=Ro(n,c),p=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Nl)}Lo(a,c);var w;a=null;for(z in d)if(!c.hasOwnProperty(z)&&d.hasOwnProperty(z)&&d[z]!=null)if(z==="style"){var C=d[z];for(w in C)C.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(o.hasOwnProperty(z)?p||(p=[]):(p=p||[]).push(z,null));for(z in c){var b=c[z];if(C=d!=null?d[z]:void 0,c.hasOwnProperty(z)&&b!==C&&(b!=null||C!=null))if(z==="style")if(C){for(w in C)!C.hasOwnProperty(w)||b&&b.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in b)b.hasOwnProperty(w)&&C[w]!==b[w]&&(a||(a={}),a[w]=b[w])}else a||(p||(p=[]),p.push(z,a)),a=b;else z==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,C=C?C.__html:void 0,b!=null&&C!==b&&(p=p||[]).push(z,b)):z==="children"?typeof b!="string"&&typeof b!="number"||(p=p||[]).push(z,""+b):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(o.hasOwnProperty(z)?(b!=null&&z==="onScroll"&&Je("scroll",n),p||C===b||(p=[])):(p=p||[]).push(z,b))}a&&(p=p||[]).push("style",a);var z=p;(r.updateQueue=z)&&(r.flags|=4)}},mm=function(n,r,a,c){a!==c&&(r.flags|=4)};function ma(n,r){if(!nt)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Ft(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(r)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,r}function f0(n,r,a){var c=r.pendingProps;switch(Yc(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(r),null;case 1:return nn(r.type)&&Dl(),Ft(r),null;case 3:return c=r.stateNode,Ji(),Ze(tn),Ze(Mt),uh(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(jl(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,zn!==null&&(Fh(zn),zn=null))),kh(n,r),Ft(r),null;case 5:ah(r);var d=Ks(ca.current);if(a=r.type,n!==null&&r.stateNode!=null)pm(n,r,a,c,d),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!c){if(r.stateNode===null)throw Error(t(166));return Ft(r),null}if(n=Ks(tr.current),jl(r)){c=r.stateNode,a=r.type;var p=r.memoizedProps;switch(c[er]=r,c[ia]=p,n=(r.mode&1)!==0,a){case"dialog":Je("cancel",c),Je("close",c);break;case"iframe":case"object":case"embed":Je("load",c);break;case"video":case"audio":for(d=0;d<na.length;d++)Je(na[d],c);break;case"source":Je("error",c);break;case"img":case"image":case"link":Je("error",c),Je("load",c);break;case"details":Je("toggle",c);break;case"input":fi(c,p),Je("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},Je("invalid",c);break;case"textarea":mi(c,p),Je("invalid",c)}Lo(a,p),d=null;for(var w in p)if(p.hasOwnProperty(w)){var C=p[w];w==="children"?typeof C=="string"?c.textContent!==C&&(p.suppressHydrationWarning!==!0&&Pl(c.textContent,C,n),d=["children",C]):typeof C=="number"&&c.textContent!==""+C&&(p.suppressHydrationWarning!==!0&&Pl(c.textContent,C,n),d=["children",""+C]):o.hasOwnProperty(w)&&C!=null&&w==="onScroll"&&Je("scroll",c)}switch(a){case"input":dt(c),nl(c,p,!0);break;case"textarea":dt(c),Po(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=Nl)}c=d,r.updateQueue=c,c!==null&&(r.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=yt(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[er]=r,n[ia]=c,fm(n,r,!1,!1),r.stateNode=n;e:{switch(w=Oo(a,c),a){case"dialog":Je("cancel",n),Je("close",n),d=c;break;case"iframe":case"object":case"embed":Je("load",n),d=c;break;case"video":case"audio":for(d=0;d<na.length;d++)Je(na[d],n);d=c;break;case"source":Je("error",n),d=c;break;case"img":case"image":case"link":Je("error",n),Je("load",n),d=c;break;case"details":Je("toggle",n),d=c;break;case"input":fi(n,c),d=Cs(n,c),Je("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=ae({},c,{value:void 0}),Je("invalid",n);break;case"textarea":mi(n,c),d=Ro(n,c),Je("invalid",n);break;default:d=c}Lo(a,d),C=d;for(p in C)if(C.hasOwnProperty(p)){var b=C[p];p==="style"?Do(n,b):p==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&No(n,b)):p==="children"?typeof b=="string"?(a!=="textarea"||b!=="")&&Fr(n,b):typeof b=="number"&&Fr(n,""+b):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?b!=null&&p==="onScroll"&&Je("scroll",n):b!=null&&H(n,p,b,w))}switch(a){case"input":dt(n),nl(n,c,!1);break;case"textarea":dt(n),Po(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Re(c.value));break;case"select":n.multiple=!!c.multiple,p=c.value,p!=null?hr(n,!!c.multiple,p,!1):c.defaultValue!=null&&hr(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=Nl)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Ft(r),null;case 6:if(n&&r.stateNode!=null)mm(n,r,n.memoizedProps,c);else{if(typeof c!="string"&&r.stateNode===null)throw Error(t(166));if(a=Ks(ca.current),Ks(tr.current),jl(r)){if(c=r.stateNode,a=r.memoizedProps,c[er]=r,(p=c.nodeValue!==a)&&(n=mn,n!==null))switch(n.tag){case 3:Pl(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Pl(c.nodeValue,a,(n.mode&1)!==0)}p&&(r.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[er]=r,r.stateNode=c}return Ft(r),null;case 13:if(Ze(rt),c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(nt&&gn!==null&&(r.mode&1)!==0&&(r.flags&128)===0)vp(),Gi(),r.flags|=98560,p=!1;else if(p=jl(r),c!==null&&c.dehydrated!==null){if(n===null){if(!p)throw Error(t(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[er]=r}else Gi(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ft(r),p=!1}else zn!==null&&(Fh(zn),zn=null),p=!0;if(!p)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=a,r):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(r.child.flags|=8192,(r.mode&1)!==0&&(n===null||(rt.current&1)!==0?Et===0&&(Et=3):Bh())),r.updateQueue!==null&&(r.flags|=4),Ft(r),null);case 4:return Ji(),kh(n,r),n===null&&ra(r.stateNode.containerInfo),Ft(r),null;case 10:return nh(r.type._context),Ft(r),null;case 17:return nn(r.type)&&Dl(),Ft(r),null;case 19:if(Ze(rt),p=r.memoizedState,p===null)return Ft(r),null;if(c=(r.flags&128)!==0,w=p.rendering,w===null)if(c)ma(p,!1);else{if(Et!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(w=Hl(n),w!==null){for(r.flags|=128,ma(p,!1),c=w.updateQueue,c!==null&&(r.updateQueue=c,r.flags|=4),r.subtreeFlags=0,c=a,a=r.child;a!==null;)p=a,n=c,p.flags&=14680066,w=p.alternate,w===null?(p.childLanes=0,p.lanes=n,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=w.childLanes,p.lanes=w.lanes,p.child=w.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=w.memoizedProps,p.memoizedState=w.memoizedState,p.updateQueue=w.updateQueue,p.type=w.type,n=w.dependencies,p.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Xe(rt,rt.current&1|2),r.child}n=n.sibling}p.tail!==null&&Ye()>no&&(r.flags|=128,c=!0,ma(p,!1),r.lanes=4194304)}else{if(!c)if(n=Hl(w),n!==null){if(r.flags|=128,c=!0,a=n.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),ma(p,!0),p.tail===null&&p.tailMode==="hidden"&&!w.alternate&&!nt)return Ft(r),null}else 2*Ye()-p.renderingStartTime>no&&a!==1073741824&&(r.flags|=128,c=!0,ma(p,!1),r.lanes=4194304);p.isBackwards?(w.sibling=r.child,r.child=w):(a=p.last,a!==null?a.sibling=w:r.child=w,p.last=w)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=Ye(),r.sibling=null,a=rt.current,Xe(rt,c?a&1|2:a&1),r):(Ft(r),null);case 22:case 23:return zh(),c=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(r.flags|=8192),c&&(r.mode&1)!==0?(yn&1073741824)!==0&&(Ft(r),r.subtreeFlags&6&&(r.flags|=8192)):Ft(r),null;case 24:return null;case 25:return null}throw Error(t(156,r.tag))}function p0(n,r){switch(Yc(r),r.tag){case 1:return nn(r.type)&&Dl(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Ji(),Ze(tn),Ze(Mt),uh(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 5:return ah(r),null;case 13:if(Ze(rt),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(t(340));Gi()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return Ze(rt),null;case 4:return Ji(),null;case 10:return nh(r.type._context),null;case 22:case 23:return zh(),null;case 24:return null;default:return null}}var Zl=!1,Ut=!1,m0=typeof WeakSet=="function"?WeakSet:Set,he=null;function eo(n,r){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){ot(n,r,c)}else a.current=null}function Rh(n,r,a){try{a()}catch(c){ot(n,r,c)}}var gm=!1;function g0(n,r){if(zc=Kr,n=Gf(),Dc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var w=0,C=-1,b=-1,z=0,X=0,ee=n,Q=null;t:for(;;){for(var ue;ee!==a||d!==0&&ee.nodeType!==3||(C=w+d),ee!==p||c!==0&&ee.nodeType!==3||(b=w+c),ee.nodeType===3&&(w+=ee.nodeValue.length),(ue=ee.firstChild)!==null;)Q=ee,ee=ue;for(;;){if(ee===n)break t;if(Q===a&&++z===d&&(C=w),Q===p&&++X===c&&(b=w),(ue=ee.nextSibling)!==null)break;ee=Q,Q=ee.parentNode}ee=ue}a=C===-1||b===-1?null:{start:C,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for(Bc={focusedElem:n,selectionRange:a},Kr=!1,he=r;he!==null;)if(r=he,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,he=n;else for(;he!==null;){r=he;try{var me=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(me!==null){var ge=me.memoizedProps,ut=me.memoizedState,j=r.stateNode,V=j.getSnapshotBeforeUpdate(r.elementType===r.type?ge:Bn(r.type,ge),ut);j.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var F=r.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(se){ot(r,r.return,se)}if(n=r.sibling,n!==null){n.return=r.return,he=n;break}he=r.return}return me=gm,gm=!1,me}function ga(n,r,a){var c=r.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var p=d.destroy;d.destroy=void 0,p!==void 0&&Rh(r,a,p)}d=d.next}while(d!==c)}}function eu(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==r)}}function Ph(n){var r=n.ref;if(r!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof r=="function"?r(n):r.current=n}}function ym(n){var r=n.alternate;r!==null&&(n.alternate=null,ym(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[er],delete r[ia],delete r[Wc],delete r[J_],delete r[Z_])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function vm(n){return n.tag===5||n.tag===3||n.tag===4}function _m(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||vm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Nh(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(n,r):a.insertBefore(n,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(n,a)):(r=a,r.appendChild(n)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Nl));else if(c!==4&&(n=n.child,n!==null))for(Nh(n,r,a),n=n.sibling;n!==null;)Nh(n,r,a),n=n.sibling}function bh(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(bh(n,r,a),n=n.sibling;n!==null;)bh(n,r,a),n=n.sibling}var Pt=null,$n=!1;function ns(n,r,a){for(a=a.child;a!==null;)wm(n,r,a),a=a.sibling}function wm(n,r,a){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(Ls,a)}catch{}switch(a.tag){case 5:Ut||eo(a,r);case 6:var c=Pt,d=$n;Pt=null,ns(n,r,a),Pt=c,$n=d,Pt!==null&&($n?(n=Pt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Pt.removeChild(a.stateNode));break;case 18:Pt!==null&&($n?(n=Pt,a=a.stateNode,n.nodeType===8?qc(n.parentNode,a):n.nodeType===1&&qc(n,a),jn(n)):qc(Pt,a.stateNode));break;case 4:c=Pt,d=$n,Pt=a.stateNode.containerInfo,$n=!0,ns(n,r,a),Pt=c,$n=d;break;case 0:case 11:case 14:case 15:if(!Ut&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var p=d,w=p.destroy;p=p.tag,w!==void 0&&((p&2)!==0||(p&4)!==0)&&Rh(a,r,w),d=d.next}while(d!==c)}ns(n,r,a);break;case 1:if(!Ut&&(eo(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(C){ot(a,r,C)}ns(n,r,a);break;case 21:ns(n,r,a);break;case 22:a.mode&1?(Ut=(c=Ut)||a.memoizedState!==null,ns(n,r,a),Ut=c):ns(n,r,a);break;default:ns(n,r,a)}}function Em(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new m0),r.forEach(function(c){var d=S0.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function Hn(n,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var p=n,w=r,C=w;e:for(;C!==null;){switch(C.tag){case 5:Pt=C.stateNode,$n=!1;break e;case 3:Pt=C.stateNode.containerInfo,$n=!0;break e;case 4:Pt=C.stateNode.containerInfo,$n=!0;break e}C=C.return}if(Pt===null)throw Error(t(160));wm(p,w,d),Pt=null,$n=!1;var b=d.alternate;b!==null&&(b.return=null),d.return=null}catch(z){ot(d,r,z)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Tm(r,n),r=r.sibling}function Tm(n,r){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Hn(r,n),rr(n),c&4){try{ga(3,n,n.return),eu(3,n)}catch(ge){ot(n,n.return,ge)}try{ga(5,n,n.return)}catch(ge){ot(n,n.return,ge)}}break;case 1:Hn(r,n),rr(n),c&512&&a!==null&&eo(a,a.return);break;case 5:if(Hn(r,n),rr(n),c&512&&a!==null&&eo(a,a.return),n.flags&32){var d=n.stateNode;try{Fr(d,"")}catch(ge){ot(n,n.return,ge)}}if(c&4&&(d=n.stateNode,d!=null)){var p=n.memoizedProps,w=a!==null?a.memoizedProps:p,C=n.type,b=n.updateQueue;if(n.updateQueue=null,b!==null)try{C==="input"&&p.type==="radio"&&p.name!=null&&Ao(d,p),Oo(C,w);var z=Oo(C,p);for(w=0;w<b.length;w+=2){var X=b[w],ee=b[w+1];X==="style"?Do(d,ee):X==="dangerouslySetInnerHTML"?No(d,ee):X==="children"?Fr(d,ee):H(d,X,ee,z)}switch(C){case"input":ko(d,p);break;case"textarea":gi(d,p);break;case"select":var Q=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var ue=p.value;ue!=null?hr(d,!!p.multiple,ue,!1):Q!==!!p.multiple&&(p.defaultValue!=null?hr(d,!!p.multiple,p.defaultValue,!0):hr(d,!!p.multiple,p.multiple?[]:"",!1))}d[ia]=p}catch(ge){ot(n,n.return,ge)}}break;case 6:if(Hn(r,n),rr(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,p=n.memoizedProps;try{d.nodeValue=p}catch(ge){ot(n,n.return,ge)}}break;case 3:if(Hn(r,n),rr(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{jn(r.containerInfo)}catch(ge){ot(n,n.return,ge)}break;case 4:Hn(r,n),rr(n);break;case 13:Hn(r,n),rr(n),d=n.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(Lh=Ye())),c&4&&Em(n);break;case 22:if(X=a!==null&&a.memoizedState!==null,n.mode&1?(Ut=(z=Ut)||X,Hn(r,n),Ut=z):Hn(r,n),rr(n),c&8192){if(z=n.memoizedState!==null,(n.stateNode.isHidden=z)&&!X&&(n.mode&1)!==0)for(he=n,X=n.child;X!==null;){for(ee=he=X;he!==null;){switch(Q=he,ue=Q.child,Q.tag){case 0:case 11:case 14:case 15:ga(4,Q,Q.return);break;case 1:eo(Q,Q.return);var me=Q.stateNode;if(typeof me.componentWillUnmount=="function"){c=Q,a=Q.return;try{r=c,me.props=r.memoizedProps,me.state=r.memoizedState,me.componentWillUnmount()}catch(ge){ot(c,a,ge)}}break;case 5:eo(Q,Q.return);break;case 22:if(Q.memoizedState!==null){Sm(ee);continue}}ue!==null?(ue.return=Q,he=ue):Sm(ee)}X=X.sibling}e:for(X=null,ee=n;;){if(ee.tag===5){if(X===null){X=ee;try{d=ee.stateNode,z?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(C=ee.stateNode,b=ee.memoizedProps.style,w=b!=null&&b.hasOwnProperty("display")?b.display:null,C.style.display=bo("display",w))}catch(ge){ot(n,n.return,ge)}}}else if(ee.tag===6){if(X===null)try{ee.stateNode.nodeValue=z?"":ee.memoizedProps}catch(ge){ot(n,n.return,ge)}}else if((ee.tag!==22&&ee.tag!==23||ee.memoizedState===null||ee===n)&&ee.child!==null){ee.child.return=ee,ee=ee.child;continue}if(ee===n)break e;for(;ee.sibling===null;){if(ee.return===null||ee.return===n)break e;X===ee&&(X=null),ee=ee.return}X===ee&&(X=null),ee.sibling.return=ee.return,ee=ee.sibling}}break;case 19:Hn(r,n),rr(n),c&4&&Em(n);break;case 21:break;default:Hn(r,n),rr(n)}}function rr(n){var r=n.flags;if(r&2){try{e:{for(var a=n.return;a!==null;){if(vm(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&(Fr(d,""),c.flags&=-33);var p=_m(n);bh(n,p,d);break;case 3:case 4:var w=c.stateNode.containerInfo,C=_m(n);Nh(n,C,w);break;default:throw Error(t(161))}}catch(b){ot(n,n.return,b)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function y0(n,r,a){he=n,Im(n)}function Im(n,r,a){for(var c=(n.mode&1)!==0;he!==null;){var d=he,p=d.child;if(d.tag===22&&c){var w=d.memoizedState!==null||Zl;if(!w){var C=d.alternate,b=C!==null&&C.memoizedState!==null||Ut;C=Zl;var z=Ut;if(Zl=w,(Ut=b)&&!z)for(he=d;he!==null;)w=he,b=w.child,w.tag===22&&w.memoizedState!==null?Cm(d):b!==null?(b.return=w,he=b):Cm(d);for(;p!==null;)he=p,Im(p),p=p.sibling;he=d,Zl=C,Ut=z}xm(n)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,he=p):xm(n)}}function xm(n){for(;he!==null;){var r=he;if((r.flags&8772)!==0){var a=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:Ut||eu(5,r);break;case 1:var c=r.stateNode;if(r.flags&4&&!Ut)if(a===null)c.componentDidMount();else{var d=r.elementType===r.type?a.memoizedProps:Bn(r.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&Sp(r,p,c);break;case 3:var w=r.updateQueue;if(w!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}Sp(r,w,a)}break;case 5:var C=r.stateNode;if(a===null&&r.flags&4){a=C;var b=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&a.focus();break;case"img":b.src&&(a.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var z=r.alternate;if(z!==null){var X=z.memoizedState;if(X!==null){var ee=X.dehydrated;ee!==null&&jn(ee)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ut||r.flags&512&&Ph(r)}catch(Q){ot(r,r.return,Q)}}if(r===n){he=null;break}if(a=r.sibling,a!==null){a.return=r.return,he=a;break}he=r.return}}function Sm(n){for(;he!==null;){var r=he;if(r===n){he=null;break}var a=r.sibling;if(a!==null){a.return=r.return,he=a;break}he=r.return}}function Cm(n){for(;he!==null;){var r=he;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{eu(4,r)}catch(b){ot(r,a,b)}break;case 1:var c=r.stateNode;if(typeof c.componentDidMount=="function"){var d=r.return;try{c.componentDidMount()}catch(b){ot(r,d,b)}}var p=r.return;try{Ph(r)}catch(b){ot(r,p,b)}break;case 5:var w=r.return;try{Ph(r)}catch(b){ot(r,w,b)}}}catch(b){ot(r,r.return,b)}if(r===n){he=null;break}var C=r.sibling;if(C!==null){C.return=r.return,he=C;break}he=r.return}}var v0=Math.ceil,tu=ie.ReactCurrentDispatcher,Dh=ie.ReactCurrentOwner,kn=ie.ReactCurrentBatchConfig,Be=0,St=null,pt=null,Nt=0,yn=0,to=Xr(0),Et=0,ya=null,Qs=0,nu=0,Vh=0,va=null,sn=null,Lh=0,no=1/0,Cr=null,ru=!1,Oh=null,rs=null,su=!1,ss=null,iu=0,_a=0,Mh=null,ou=-1,au=0;function Yt(){return(Be&6)!==0?Ye():ou!==-1?ou:ou=Ye()}function is(n){return(n.mode&1)===0?1:(Be&2)!==0&&Nt!==0?Nt&-Nt:t0.transition!==null?(au===0&&(au=Ms()),au):(n=Me,n!==0||(n=window.event,n=n===void 0?16:Ko(n.type)),n)}function qn(n,r,a,c){if(50<_a)throw _a=0,Mh=null,Error(t(185));$r(n,a,c),((Be&2)===0||n!==St)&&(n===St&&((Be&2)===0&&(nu|=a),Et===4&&os(n,Nt)),on(n,c),a===1&&Be===0&&(r.mode&1)===0&&(no=Ye()+500,Ll&&Zr()))}function on(n,r){var a=n.callbackNode;pr(n,r);var c=Os(n,n===St?Nt:0);if(c===0)a!==null&&Bo(a),n.callbackNode=null,n.callbackPriority=0;else if(r=c&-c,n.callbackPriority!==r){if(a!=null&&Bo(a),r===1)n.tag===0?e0(km.bind(null,n)):fp(km.bind(null,n)),Y_(function(){(Be&6)===0&&Zr()}),a=null;else{switch(qr(c)){case 1:a=Vs;break;case 4:a=Ur;break;case 16:a=En;break;case 536870912:a=al;break;default:a=En}a=Om(a,Am.bind(null,n))}n.callbackPriority=r,n.callbackNode=a}}function Am(n,r){if(ou=-1,au=0,(Be&6)!==0)throw Error(t(327));var a=n.callbackNode;if(ro()&&n.callbackNode!==a)return null;var c=Os(n,n===St?Nt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||r)r=lu(n,c);else{r=c;var d=Be;Be|=2;var p=Pm();(St!==n||Nt!==r)&&(Cr=null,no=Ye()+500,Xs(n,r));do try{E0();break}catch(C){Rm(n,C)}while(!0);th(),tu.current=p,Be=d,pt!==null?r=0:(St=null,Nt=0,r=Et)}if(r!==0){if(r===2&&(d=dn(n),d!==0&&(c=d,r=jh(n,d))),r===1)throw a=ya,Xs(n,0),os(n,c),on(n,Ye()),a;if(r===6)os(n,c);else{if(d=n.current.alternate,(c&30)===0&&!_0(d)&&(r=lu(n,c),r===2&&(p=dn(n),p!==0&&(c=p,r=jh(n,p))),r===1))throw a=ya,Xs(n,0),os(n,c),on(n,Ye()),a;switch(n.finishedWork=d,n.finishedLanes=c,r){case 0:case 1:throw Error(t(345));case 2:Js(n,sn,Cr);break;case 3:if(os(n,c),(c&130023424)===c&&(r=Lh+500-Ye(),10<r)){if(Os(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Yt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=Hc(Js.bind(null,n,sn,Cr),r);break}Js(n,sn,Cr);break;case 4:if(os(n,c),(c&4194240)===c)break;for(r=n.eventTimes,d=-1;0<c;){var w=31-Kt(c);p=1<<w,w=r[w],w>d&&(d=w),c&=~p}if(c=d,c=Ye()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*v0(c/1960))-c,10<c){n.timeoutHandle=Hc(Js.bind(null,n,sn,Cr),c);break}Js(n,sn,Cr);break;case 5:Js(n,sn,Cr);break;default:throw Error(t(329))}}}return on(n,Ye()),n.callbackNode===a?Am.bind(null,n):null}function jh(n,r){var a=va;return n.current.memoizedState.isDehydrated&&(Xs(n,r).flags|=256),n=lu(n,r),n!==2&&(r=sn,sn=a,r!==null&&Fh(r)),n}function Fh(n){sn===null?sn=n:sn.push.apply(sn,n)}function _0(n){for(var r=n;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],p=d.getSnapshot;d=d.value;try{if(!Un(p(),d))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function os(n,r){for(r&=~Vh,r&=~nu,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var a=31-Kt(r),c=1<<a;n[a]=-1,r&=~c}}function km(n){if((Be&6)!==0)throw Error(t(327));ro();var r=Os(n,0);if((r&1)===0)return on(n,Ye()),null;var a=lu(n,r);if(n.tag!==0&&a===2){var c=dn(n);c!==0&&(r=c,a=jh(n,c))}if(a===1)throw a=ya,Xs(n,0),os(n,r),on(n,Ye()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,Js(n,sn,Cr),on(n,Ye()),null}function Uh(n,r){var a=Be;Be|=1;try{return n(r)}finally{Be=a,Be===0&&(no=Ye()+500,Ll&&Zr())}}function Ys(n){ss!==null&&ss.tag===0&&(Be&6)===0&&ro();var r=Be;Be|=1;var a=kn.transition,c=Me;try{if(kn.transition=null,Me=1,n)return n()}finally{Me=c,kn.transition=a,Be=r,(Be&6)===0&&Zr()}}function zh(){yn=to.current,Ze(to)}function Xs(n,r){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Q_(a)),pt!==null)for(a=pt.return;a!==null;){var c=a;switch(Yc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Dl();break;case 3:Ji(),Ze(tn),Ze(Mt),uh();break;case 5:ah(c);break;case 4:Ji();break;case 13:Ze(rt);break;case 19:Ze(rt);break;case 10:nh(c.type._context);break;case 22:case 23:zh()}a=a.return}if(St=n,pt=n=as(n.current,null),Nt=yn=r,Et=0,ya=null,Vh=nu=Qs=0,sn=va=null,Ws!==null){for(r=0;r<Ws.length;r++)if(a=Ws[r],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,p=a.pending;if(p!==null){var w=p.next;p.next=d,c.next=w}a.pending=c}Ws=null}return n}function Rm(n,r){do{var a=pt;try{if(th(),ql.current=Ql,Wl){for(var c=st.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}Wl=!1}if(Gs=0,xt=wt=st=null,ha=!1,da=0,Dh.current=null,a===null||a.return===null){Et=1,ya=r,pt=null;break}e:{var p=n,w=a.return,C=a,b=r;if(r=Nt,C.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var z=b,X=C,ee=X.tag;if((X.mode&1)===0&&(ee===0||ee===11||ee===15)){var Q=X.alternate;Q?(X.updateQueue=Q.updateQueue,X.memoizedState=Q.memoizedState,X.lanes=Q.lanes):(X.updateQueue=null,X.memoizedState=null)}var ue=em(w);if(ue!==null){ue.flags&=-257,tm(ue,w,C,p,r),ue.mode&1&&Zp(p,z,r),r=ue,b=z;var me=r.updateQueue;if(me===null){var ge=new Set;ge.add(b),r.updateQueue=ge}else me.add(b);break e}else{if((r&1)===0){Zp(p,z,r),Bh();break e}b=Error(t(426))}}else if(nt&&C.mode&1){var ut=em(w);if(ut!==null){(ut.flags&65536)===0&&(ut.flags|=256),tm(ut,w,C,p,r),Zc(Zi(b,C));break e}}p=b=Zi(b,C),Et!==4&&(Et=2),va===null?va=[p]:va.push(p),p=w;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var j=Xp(p,b,r);xp(p,j);break e;case 1:C=b;var V=p.type,F=p.stateNode;if((p.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(rs===null||!rs.has(F)))){p.flags|=65536,r&=-r,p.lanes|=r;var se=Jp(p,C,r);xp(p,se);break e}}p=p.return}while(p!==null)}bm(a)}catch(ve){r=ve,pt===a&&a!==null&&(pt=a=a.return);continue}break}while(!0)}function Pm(){var n=tu.current;return tu.current=Ql,n===null?Ql:n}function Bh(){(Et===0||Et===3||Et===2)&&(Et=4),St===null||(Qs&268435455)===0&&(nu&268435455)===0||os(St,Nt)}function lu(n,r){var a=Be;Be|=2;var c=Pm();(St!==n||Nt!==r)&&(Cr=null,Xs(n,r));do try{w0();break}catch(d){Rm(n,d)}while(!0);if(th(),Be=a,tu.current=c,pt!==null)throw Error(t(261));return St=null,Nt=0,Et}function w0(){for(;pt!==null;)Nm(pt)}function E0(){for(;pt!==null&&!il();)Nm(pt)}function Nm(n){var r=Lm(n.alternate,n,yn);n.memoizedProps=n.pendingProps,r===null?bm(n):pt=r,Dh.current=null}function bm(n){var r=n;do{var a=r.alternate;if(n=r.return,(r.flags&32768)===0){if(a=f0(a,r,yn),a!==null){pt=a;return}}else{if(a=p0(a,r),a!==null){a.flags&=32767,pt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Et=6,pt=null;return}}if(r=r.sibling,r!==null){pt=r;return}pt=r=n}while(r!==null);Et===0&&(Et=5)}function Js(n,r,a){var c=Me,d=kn.transition;try{kn.transition=null,Me=1,T0(n,r,a,c)}finally{kn.transition=d,Me=c}return null}function T0(n,r,a,c){do ro();while(ss!==null);if((Be&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var p=a.lanes|a.childLanes;if(Ge(n,p),n===St&&(pt=St=null,Nt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||su||(su=!0,Om(En,function(){return ro(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=kn.transition,kn.transition=null;var w=Me;Me=1;var C=Be;Be|=4,Dh.current=null,g0(n,a),Tm(a,n),B_(Bc),Kr=!!zc,Bc=zc=null,n.current=a,y0(a),Sc(),Be=C,Me=w,kn.transition=p}else n.current=a;if(su&&(su=!1,ss=n,iu=d),p=n.pendingLanes,p===0&&(rs=null),ll(a.stateNode),on(n,Ye()),r!==null)for(c=n.onRecoverableError,a=0;a<r.length;a++)d=r[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(ru)throw ru=!1,n=Oh,Oh=null,n;return(iu&1)!==0&&n.tag!==0&&ro(),p=n.pendingLanes,(p&1)!==0?n===Mh?_a++:(_a=0,Mh=n):_a=0,Zr(),null}function ro(){if(ss!==null){var n=qr(iu),r=kn.transition,a=Me;try{if(kn.transition=null,Me=16>n?16:n,ss===null)var c=!1;else{if(n=ss,ss=null,iu=0,(Be&6)!==0)throw Error(t(331));var d=Be;for(Be|=4,he=n.current;he!==null;){var p=he,w=p.child;if((he.flags&16)!==0){var C=p.deletions;if(C!==null){for(var b=0;b<C.length;b++){var z=C[b];for(he=z;he!==null;){var X=he;switch(X.tag){case 0:case 11:case 15:ga(8,X,p)}var ee=X.child;if(ee!==null)ee.return=X,he=ee;else for(;he!==null;){X=he;var Q=X.sibling,ue=X.return;if(ym(X),X===z){he=null;break}if(Q!==null){Q.return=ue,he=Q;break}he=ue}}}var me=p.alternate;if(me!==null){var ge=me.child;if(ge!==null){me.child=null;do{var ut=ge.sibling;ge.sibling=null,ge=ut}while(ge!==null)}}he=p}}if((p.subtreeFlags&2064)!==0&&w!==null)w.return=p,he=w;else e:for(;he!==null;){if(p=he,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:ga(9,p,p.return)}var j=p.sibling;if(j!==null){j.return=p.return,he=j;break e}he=p.return}}var V=n.current;for(he=V;he!==null;){w=he;var F=w.child;if((w.subtreeFlags&2064)!==0&&F!==null)F.return=w,he=F;else e:for(w=V;he!==null;){if(C=he,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:eu(9,C)}}catch(ve){ot(C,C.return,ve)}if(C===w){he=null;break e}var se=C.sibling;if(se!==null){se.return=C.return,he=se;break e}he=C.return}}if(Be=d,Zr(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(Ls,n)}catch{}c=!0}return c}finally{Me=a,kn.transition=r}}return!1}function Dm(n,r,a){r=Zi(a,r),r=Xp(n,r,1),n=ts(n,r,1),r=Yt(),n!==null&&($r(n,1,r),on(n,r))}function ot(n,r,a){if(n.tag===3)Dm(n,n,a);else for(;r!==null;){if(r.tag===3){Dm(r,n,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(rs===null||!rs.has(c))){n=Zi(a,n),n=Jp(r,n,1),r=ts(r,n,1),n=Yt(),r!==null&&($r(r,1,n),on(r,n));break}}r=r.return}}function I0(n,r,a){var c=n.pingCache;c!==null&&c.delete(r),r=Yt(),n.pingedLanes|=n.suspendedLanes&a,St===n&&(Nt&a)===a&&(Et===4||Et===3&&(Nt&130023424)===Nt&&500>Ye()-Lh?Xs(n,0):Vh|=a),on(n,r)}function Vm(n,r){r===0&&((n.mode&1)===0?r=1:(r=Ci,Ci<<=1,(Ci&130023424)===0&&(Ci=4194304)));var a=Yt();n=Ir(n,r),n!==null&&($r(n,r,a),on(n,a))}function x0(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),Vm(n,a)}function S0(n,r){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(r),Vm(n,a)}var Lm;Lm=function(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps||tn.current)rn=!0;else{if((n.lanes&a)===0&&(r.flags&128)===0)return rn=!1,d0(n,r,a);rn=(n.flags&131072)!==0}else rn=!1,nt&&(r.flags&1048576)!==0&&pp(r,Ml,r.index);switch(r.lanes=0,r.tag){case 2:var c=r.type;Jl(n,r),n=r.pendingProps;var d=qi(r,Mt.current);Xi(r,a),d=dh(null,r,c,n,d,a);var p=fh();return r.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,nn(c)?(p=!0,Vl(r)):p=!1,r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,ih(r),d.updater=Yl,r.stateNode=d,d._reactInternals=r,_h(r,c,n,a),r=Ih(null,r,c,!0,p,a)):(r.tag=0,nt&&p&&Qc(r),Qt(null,r,d,a),r=r.child),r;case 16:c=r.elementType;e:{switch(Jl(n,r),n=r.pendingProps,d=c._init,c=d(c._payload),r.type=c,d=r.tag=A0(c),n=Bn(c,n),d){case 0:r=Th(null,r,c,n,a);break e;case 1:r=am(null,r,c,n,a);break e;case 11:r=nm(null,r,c,n,a);break e;case 14:r=rm(null,r,c,Bn(c.type,n),a);break e}throw Error(t(306,c,""))}return r;case 0:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Bn(c,d),Th(n,r,c,d,a);case 1:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Bn(c,d),am(n,r,c,d,a);case 3:e:{if(lm(r),n===null)throw Error(t(387));c=r.pendingProps,p=r.memoizedState,d=p.element,Ip(n,r),$l(r,c,null,a);var w=r.memoizedState;if(c=w.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){d=Zi(Error(t(423)),r),r=um(n,r,c,a,d);break e}else if(c!==d){d=Zi(Error(t(424)),r),r=um(n,r,c,a,d);break e}else for(gn=Yr(r.stateNode.containerInfo.firstChild),mn=r,nt=!0,zn=null,a=Ep(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Gi(),c===d){r=Sr(n,r,a);break e}Qt(n,r,c,a)}r=r.child}return r;case 5:return Cp(r),n===null&&Jc(r),c=r.type,d=r.pendingProps,p=n!==null?n.memoizedProps:null,w=d.children,$c(c,d)?w=null:p!==null&&$c(c,p)&&(r.flags|=32),om(n,r),Qt(n,r,w,a),r.child;case 6:return n===null&&Jc(r),null;case 13:return cm(n,r,a);case 4:return oh(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=Qi(r,null,c,a):Qt(n,r,c,a),r.child;case 11:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Bn(c,d),nm(n,r,c,d,a);case 7:return Qt(n,r,r.pendingProps,a),r.child;case 8:return Qt(n,r,r.pendingProps.children,a),r.child;case 12:return Qt(n,r,r.pendingProps.children,a),r.child;case 10:e:{if(c=r.type._context,d=r.pendingProps,p=r.memoizedProps,w=d.value,Xe(Ul,c._currentValue),c._currentValue=w,p!==null)if(Un(p.value,w)){if(p.children===d.children&&!tn.current){r=Sr(n,r,a);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var C=p.dependencies;if(C!==null){w=p.child;for(var b=C.firstContext;b!==null;){if(b.context===c){if(p.tag===1){b=xr(-1,a&-a),b.tag=2;var z=p.updateQueue;if(z!==null){z=z.shared;var X=z.pending;X===null?b.next=b:(b.next=X.next,X.next=b),z.pending=b}}p.lanes|=a,b=p.alternate,b!==null&&(b.lanes|=a),rh(p.return,a,r),C.lanes|=a;break}b=b.next}}else if(p.tag===10)w=p.type===r.type?null:p.child;else if(p.tag===18){if(w=p.return,w===null)throw Error(t(341));w.lanes|=a,C=w.alternate,C!==null&&(C.lanes|=a),rh(w,a,r),w=p.sibling}else w=p.child;if(w!==null)w.return=p;else for(w=p;w!==null;){if(w===r){w=null;break}if(p=w.sibling,p!==null){p.return=w.return,w=p;break}w=w.return}p=w}Qt(n,r,d.children,a),r=r.child}return r;case 9:return d=r.type,c=r.pendingProps.children,Xi(r,a),d=Cn(d),c=c(d),r.flags|=1,Qt(n,r,c,a),r.child;case 14:return c=r.type,d=Bn(c,r.pendingProps),d=Bn(c.type,d),rm(n,r,c,d,a);case 15:return sm(n,r,r.type,r.pendingProps,a);case 17:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Bn(c,d),Jl(n,r),r.tag=1,nn(c)?(n=!0,Vl(r)):n=!1,Xi(r,a),Qp(r,c,d),_h(r,c,d,a),Ih(null,r,c,!0,n,a);case 19:return dm(n,r,a);case 22:return im(n,r,a)}throw Error(t(156,r.tag))};function Om(n,r){return xi(n,r)}function C0(n,r,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(n,r,a,c){return new C0(n,r,a,c)}function $h(n){return n=n.prototype,!(!n||!n.isReactComponent)}function A0(n){if(typeof n=="function")return $h(n)?1:0;if(n!=null){if(n=n.$$typeof,n===N)return 11;if(n===Ie)return 14}return 2}function as(n,r){var a=n.alternate;return a===null?(a=Rn(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function uu(n,r,a,c,d,p){var w=2;if(c=n,typeof n=="function")$h(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case R:return Zs(a.children,d,p,r);case x:w=8,d|=8;break;case S:return n=Rn(12,a,r,d|2),n.elementType=S,n.lanes=p,n;case I:return n=Rn(13,a,r,d),n.elementType=I,n.lanes=p,n;case le:return n=Rn(19,a,r,d),n.elementType=le,n.lanes=p,n;case Ae:return cu(a,d,p,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case P:w=10;break e;case A:w=9;break e;case N:w=11;break e;case Ie:w=14;break e;case xe:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return r=Rn(w,a,r,d),r.elementType=n,r.type=c,r.lanes=p,r}function Zs(n,r,a,c){return n=Rn(7,n,c,r),n.lanes=a,n}function cu(n,r,a,c){return n=Rn(22,n,c,r),n.elementType=Ae,n.lanes=a,n.stateNode={isHidden:!1},n}function Hh(n,r,a){return n=Rn(6,n,null,r),n.lanes=a,n}function qh(n,r,a){return r=Rn(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function k0(n,r,a,c,d){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Br(0),this.expirationTimes=Br(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Br(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Wh(n,r,a,c,d,p,w,C,b){return n=new k0(n,r,a,C,b),r===1?(r=1,p===!0&&(r|=8)):r=0,p=Rn(3,null,null,r),n.current=p,p.stateNode=n,p.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},ih(p),n}function R0(n,r,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:te,key:c==null?null:""+c,children:n,containerInfo:r,implementation:a}}function Mm(n){if(!n)return Jr;n=n._reactInternals;e:{if(Dn(n)!==n||n.tag!==1)throw Error(t(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(nn(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(nn(a))return hp(n,a,r)}return r}function jm(n,r,a,c,d,p,w,C,b){return n=Wh(a,c,!0,n,d,p,w,C,b),n.context=Mm(null),a=n.current,c=Yt(),d=is(a),p=xr(c,d),p.callback=r??null,ts(a,p,d),n.current.lanes=d,$r(n,d,c),on(n,c),n}function hu(n,r,a,c){var d=r.current,p=Yt(),w=is(d);return a=Mm(a),r.context===null?r.context=a:r.pendingContext=a,r=xr(p,w),r.payload={element:n},c=c===void 0?null:c,c!==null&&(r.callback=c),n=ts(d,r,w),n!==null&&(qn(n,d,w,p),Bl(n,d,w)),w}function du(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Fm(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function Kh(n,r){Fm(n,r),(n=n.alternate)&&Fm(n,r)}function P0(){return null}var Um=typeof reportError=="function"?reportError:function(n){console.error(n)};function Gh(n){this._internalRoot=n}fu.prototype.render=Gh.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(t(409));hu(n,r,null,null)},fu.prototype.unmount=Gh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;Ys(function(){hu(null,n,null,null)}),r[_r]=null}};function fu(n){this._internalRoot=n}fu.prototype.unstable_scheduleHydration=function(n){if(n){var r=fl();n={blockedOn:null,target:n,priority:r};for(var a=0;a<Yn.length&&r!==0&&r<Yn[a].priority;a++);Yn.splice(a,0,n),a===0&&gl(n)}};function Qh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function pu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function zm(){}function N0(n,r,a,c,d){if(d){if(typeof c=="function"){var p=c;c=function(){var z=du(w);p.call(z)}}var w=jm(r,c,n,0,null,!1,!1,"",zm);return n._reactRootContainer=w,n[_r]=w.current,ra(n.nodeType===8?n.parentNode:n),Ys(),w}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var C=c;c=function(){var z=du(b);C.call(z)}}var b=Wh(n,0,!1,null,null,!1,!1,"",zm);return n._reactRootContainer=b,n[_r]=b.current,ra(n.nodeType===8?n.parentNode:n),Ys(function(){hu(r,b,a,c)}),b}function mu(n,r,a,c,d){var p=a._reactRootContainer;if(p){var w=p;if(typeof d=="function"){var C=d;d=function(){var b=du(w);C.call(b)}}hu(r,w,n,d)}else w=N0(a,r,n,d,c);return du(w)}hl=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var a=zr(r.pendingLanes);a!==0&&(Hr(r,a|1),on(r,Ye()),(Be&6)===0&&(no=Ye()+500,Zr()))}break;case 13:Ys(function(){var c=Ir(n,1);if(c!==null){var d=Yt();qn(c,n,1,d)}}),Kh(n,1)}},Ai=function(n){if(n.tag===13){var r=Ir(n,134217728);if(r!==null){var a=Yt();qn(r,n,134217728,a)}Kh(n,134217728)}},dl=function(n){if(n.tag===13){var r=is(n),a=Ir(n,r);if(a!==null){var c=Yt();qn(a,n,r,c)}Kh(n,r)}},fl=function(){return Me},pl=function(n,r){var a=Me;try{return Me=n,r()}finally{Me=a}},vi=function(n,r,a){switch(r){case"input":if(ko(n,a),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==n&&c.form===n.form){var d=bl(c);if(!d)throw Error(t(90));Jt(c),ko(c,d)}}}break;case"textarea":gi(n,a);break;case"select":r=a.value,r!=null&&hr(n,!!a.multiple,r,!1)}},Ps=Uh,jo=Ys;var b0={usingClientEntryPoint:!1,Events:[oa,$i,bl,Gn,Mo,Uh]},wa={findFiberByHostInstance:Bs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},D0={bundleType:wa.bundleType,version:wa.version,rendererPackageName:wa.rendererPackageName,rendererConfig:wa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ie.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=zo(n),n===null?null:n.stateNode},findFiberByHostInstance:wa.findFiberByHostInstance||P0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gu.isDisabled&&gu.supportsFiber)try{Ls=gu.inject(D0),hn=gu}catch{}}return an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=b0,an.createPortal=function(n,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qh(r))throw Error(t(200));return R0(n,r,null,a)},an.createRoot=function(n,r){if(!Qh(n))throw Error(t(299));var a=!1,c="",d=Um;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(d=r.onRecoverableError)),r=Wh(n,1,!1,null,null,a,!1,c,d),n[_r]=r.current,ra(n.nodeType===8?n.parentNode:n),new Gh(r)},an.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=zo(r),n=n===null?null:n.stateNode,n},an.flushSync=function(n){return Ys(n)},an.hydrate=function(n,r,a){if(!pu(r))throw Error(t(200));return mu(null,n,r,!0,a)},an.hydrateRoot=function(n,r,a){if(!Qh(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,p="",w=Um;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),r=jm(r,null,n,1,a??null,d,!1,p,w),n[_r]=r.current,ra(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,d]:r.mutableSourceEagerHydrationData.push(a,d);return new fu(r)},an.render=function(n,r,a){if(!pu(r))throw Error(t(200));return mu(null,n,r,!1,a)},an.unmountComponentAtNode=function(n){if(!pu(n))throw Error(t(40));return n._reactRootContainer?(Ys(function(){mu(null,null,n,!1,function(){n._reactRootContainer=null,n[_r]=null})}),!0):!1},an.unstable_batchedUpdates=Uh,an.unstable_renderSubtreeIntoContainer=function(n,r,a,c){if(!pu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return mu(n,r,a,!1,c)},an.version="18.3.1-next-f1338f8080-20240426",an}var Qm;function z0(){if(Qm)return Jh.exports;Qm=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Jh.exports=U0(),Jh.exports}var Ym;function B0(){if(Ym)return yu;Ym=1;var s=z0();return yu.createRoot=s.createRoot,yu.hydrateRoot=s.hydrateRoot,yu}var $0=B0(),Xm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my=function(s){const e=[];let t=0;for(let i=0;i<s.length;i++){let o=s.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},H0=function(s){const e=[];let t=0,i=0;for(;t<s.length;){const o=s[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[t++];e[i++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[t++],h=s[t++],m=s[t++],g=((o&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const u=s[t++],h=s[t++];e[i++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},gy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<s.length;o+=3){const u=s[o],h=o+1<s.length,m=h?s[o+1]:0,g=o+2<s.length,_=g?s[o+2]:0,E=u>>2,k=(u&3)<<4|m>>4;let D=(m&15)<<2|_>>6,U=_&63;g||(U=64,h||(D=64)),i.push(t[E],t[k],t[D],t[U])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(my(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):H0(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<s.length;){const u=t[s.charAt(o++)],m=o<s.length?t[s.charAt(o)]:0;++o;const _=o<s.length?t[s.charAt(o)]:64;++o;const k=o<s.length?t[s.charAt(o)]:64;if(++o,u==null||m==null||_==null||k==null)throw new q0;const D=u<<2|m>>4;if(i.push(D),_!==64){const U=m<<4&240|_>>2;if(i.push(U),k!==64){const $=_<<6&192|k;i.push($)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class q0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const W0=function(s){const e=my(s);return gy.encodeByteArray(e,!0)},Vu=function(s){return W0(s).replace(/\./g,"")},yy=function(s){try{return gy.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0=()=>K0().__FIREBASE_DEFAULTS__,Q0=()=>{if(typeof process>"u"||typeof Xm>"u")return;const s=Xm.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},Y0=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&yy(s[1]);return e&&JSON.parse(e)},ec=()=>{try{return G0()||Q0()||Y0()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},vy=s=>{var e,t;return(t=(e=ec())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[s]},X0=s=>{const e=vy(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},_y=()=>{var s;return(s=ec())===null||s===void 0?void 0:s.config},wy=s=>{var e;return(e=ec())===null||e===void 0?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},s);return[Vu(JSON.stringify(t)),Vu(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ew(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function tw(){var s;const e=(s=ec())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rw(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function sw(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iw(){const s=Wt();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function ow(){return!tw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aw(){try{return typeof indexedDB=="object"}catch{return!1}}function lw(){return new Promise((s,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw="FirebaseError";class jr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=uw,Object.setPrototypeOf(this,jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ba.prototype.create)}}class Ba{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?cw(u,i):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new jr(o,m,i)}}function cw(s,e){return s.replace(hw,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const hw=/\{\$([^}]+)}/g;function dw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Lu(s,e){if(s===e)return!0;const t=Object.keys(s),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const u=s[o],h=e[o];if(Jm(u)&&Jm(h)){if(!Lu(u,h))return!1}else if(u!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Jm(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(s){const e=[];for(const[t,i]of Object.entries(s))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function fw(s,e){const t=new pw(s,e);return t.subscribe.bind(t)}class pw{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");mw(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=td),o.error===void 0&&(o.error=td),o.complete===void 0&&(o.complete=td);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mw(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function td(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(s){return s&&s._delegate?s._delegate:s}class ri{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new J0;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vw(e))try{this.getOrInitializeService({instanceIdentifier:ei})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});i.resolve(u)}catch{}}}}clearInstance(e=ei){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ei){return this.instances.has(e)}getOptions(e=ei){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);i===m&&h.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),u=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;u.add(e),this.onInitCallbacks.set(o,u);const h=this.instances.get(o);return h&&e(h,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:yw(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ei){return this.component?this.component.multipleInstances?e:ei:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yw(s){return s===ei?void 0:s}function vw(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new gw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(je||(je={}));const ww={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},Ew=je.INFO,Tw={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},Iw=(s,e,...t)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),o=Tw[e];if(o)console[o](`[${i}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jd{constructor(e){this.name=e,this._logLevel=Ew,this._logHandler=Iw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ww[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const xw=(s,e)=>e.some(t=>s instanceof t);let Zm,eg;function Sw(){return Zm||(Zm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Cw(){return eg||(eg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ey=new WeakMap,dd=new WeakMap,Ty=new WeakMap,nd=new WeakMap,Fd=new WeakMap;function Aw(s){const e=new Promise((t,i)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{t(gs(s.result)),o()},h=()=>{i(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&Ey.set(t,s)}).catch(()=>{}),Fd.set(e,s),e}function kw(s){if(dd.has(s))return;const e=new Promise((t,i)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{t(),o()},h=()=>{i(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});dd.set(s,e)}let fd={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return dd.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Ty.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return gs(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function Rw(s){fd=s(fd)}function Pw(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=s.call(rd(this),e,...t);return Ty.set(i,e.sort?e.sort():[e]),gs(i)}:Cw().includes(s)?function(...e){return s.apply(rd(this),e),gs(Ey.get(this))}:function(...e){return gs(s.apply(rd(this),e))}}function Nw(s){return typeof s=="function"?Pw(s):(s instanceof IDBTransaction&&kw(s),xw(s,Sw())?new Proxy(s,fd):s)}function gs(s){if(s instanceof IDBRequest)return Aw(s);if(nd.has(s))return nd.get(s);const e=Nw(s);return e!==s&&(nd.set(s,e),Fd.set(e,s)),e}const rd=s=>Fd.get(s);function bw(s,e,{blocked:t,upgrade:i,blocking:o,terminated:u}={}){const h=indexedDB.open(s,e),m=gs(h);return i&&h.addEventListener("upgradeneeded",g=>{i(gs(h.result),g.oldVersion,g.newVersion,gs(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const Dw=["get","getKey","getAll","getAllKeys","count"],Vw=["put","add","delete","clear"],sd=new Map;function tg(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(sd.get(e))return sd.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=Vw.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||Dw.includes(t)))return;const u=async function(h,...m){const g=this.transaction(h,o?"readwrite":"readonly");let _=g.store;return i&&(_=_.index(m.shift())),(await Promise.all([_[t](...m),o&&g.done]))[0]};return sd.set(e,u),u}Rw(s=>({...s,get:(e,t,i)=>tg(e,t)||s.get(e,t,i),has:(e,t)=>!!tg(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Ow(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Ow(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pd="@firebase/app",ng="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br=new jd("@firebase/app"),Mw="@firebase/app-compat",jw="@firebase/analytics-compat",Fw="@firebase/analytics",Uw="@firebase/app-check-compat",zw="@firebase/app-check",Bw="@firebase/auth",$w="@firebase/auth-compat",Hw="@firebase/database",qw="@firebase/data-connect",Ww="@firebase/database-compat",Kw="@firebase/functions",Gw="@firebase/functions-compat",Qw="@firebase/installations",Yw="@firebase/installations-compat",Xw="@firebase/messaging",Jw="@firebase/messaging-compat",Zw="@firebase/performance",eE="@firebase/performance-compat",tE="@firebase/remote-config",nE="@firebase/remote-config-compat",rE="@firebase/storage",sE="@firebase/storage-compat",iE="@firebase/firestore",oE="@firebase/vertexai-preview",aE="@firebase/firestore-compat",lE="firebase",uE="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md="[DEFAULT]",cE={[pd]:"fire-core",[Mw]:"fire-core-compat",[Fw]:"fire-analytics",[jw]:"fire-analytics-compat",[zw]:"fire-app-check",[Uw]:"fire-app-check-compat",[Bw]:"fire-auth",[$w]:"fire-auth-compat",[Hw]:"fire-rtdb",[qw]:"fire-data-connect",[Ww]:"fire-rtdb-compat",[Kw]:"fire-fn",[Gw]:"fire-fn-compat",[Qw]:"fire-iid",[Yw]:"fire-iid-compat",[Xw]:"fire-fcm",[Jw]:"fire-fcm-compat",[Zw]:"fire-perf",[eE]:"fire-perf-compat",[tE]:"fire-rc",[nE]:"fire-rc-compat",[rE]:"fire-gcs",[sE]:"fire-gcs-compat",[iE]:"fire-fst",[aE]:"fire-fst-compat",[oE]:"fire-vertex","fire-js":"fire-js",[lE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ou=new Map,hE=new Map,gd=new Map;function rg(s,e){try{s.container.addComponent(e)}catch(t){br.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function po(s){const e=s.name;if(gd.has(e))return br.debug(`There were multiple attempts to register component ${e}.`),!1;gd.set(e,s);for(const t of Ou.values())rg(t,s);for(const t of hE.values())rg(t,s);return!0}function Ud(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function Ar(s){return s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ys=new Ba("app","Firebase",dE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ri("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ys.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=uE;function Iy(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const i=Object.assign({name:md,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw ys.create("bad-app-name",{appName:String(o)});if(t||(t=_y()),!t)throw ys.create("no-options");const u=Ou.get(o);if(u){if(Lu(t,u.options)&&Lu(i,u.config))return u;throw ys.create("duplicate-app",{appName:o})}const h=new _w(o);for(const g of gd.values())h.addComponent(g);const m=new fE(t,i,h);return Ou.set(o,m),m}function xy(s=md){const e=Ou.get(s);if(!e&&s===md&&_y())return Iy();if(!e)throw ys.create("no-app",{appName:s});return e}function vs(s,e,t){var i;let o=(i=cE[s])!==null&&i!==void 0?i:s;t&&(o+=`-${t}`);const u=o.match(/\s|\//),h=e.match(/\s|\//);if(u||h){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&h&&m.push("and"),h&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),br.warn(m.join(" "));return}po(new ri(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="firebase-heartbeat-database",mE=1,ba="firebase-heartbeat-store";let id=null;function Sy(){return id||(id=bw(pE,mE,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(ba)}catch(t){console.warn(t)}}}}).catch(s=>{throw ys.create("idb-open",{originalErrorMessage:s.message})})),id}async function gE(s){try{const t=(await Sy()).transaction(ba),i=await t.objectStore(ba).get(Cy(s));return await t.done,i}catch(e){if(e instanceof jr)br.warn(e.message);else{const t=ys.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});br.warn(t.message)}}}async function sg(s,e){try{const i=(await Sy()).transaction(ba,"readwrite");await i.objectStore(ba).put(e,Cy(s)),await i.done}catch(t){if(t instanceof jr)br.warn(t.message);else{const i=ys.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});br.warn(i.message)}}}function Cy(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE=1024,vE=30*24*60*60*1e3;class _E{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new EE(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=ig();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u)?void 0:(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const m=new Date(h.date).valueOf();return Date.now()-m<=vE}),this._storage.overwrite(this._heartbeatsCache))}catch(i){br.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ig(),{heartbeatsToSend:i,unsentEntries:o}=wE(this._heartbeatsCache.heartbeats),u=Vu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(t){return br.warn(t),""}}}function ig(){return new Date().toISOString().substring(0,10)}function wE(s,e=yE){const t=[];let i=s.slice();for(const o of s){const u=t.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),og(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),og(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class EE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aw()?lw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await gE(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return sg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return sg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function og(s){return Vu(JSON.stringify({version:2,heartbeats:s})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(s){po(new ri("platform-logger",e=>new Lw(e),"PRIVATE")),po(new ri("heartbeat",e=>new _E(e),"PRIVATE")),vs(pd,ng,s),vs(pd,ng,"esm2017"),vs("fire-js","")}TE("");var IE="firebase",xE="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vs(IE,xE,"app");function zd(s,e){var t={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&e.indexOf(i)<0&&(t[i]=s[i]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(s);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(s,i[o])&&(t[i[o]]=s[i[o]]);return t}function Ay(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const SE=Ay,ky=new Ba("auth","Firebase",Ay());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mu=new jd("@firebase/auth");function CE(s,...e){Mu.logLevel<=je.WARN&&Mu.warn(`Auth (${To}): ${s}`,...e)}function Iu(s,...e){Mu.logLevel<=je.ERROR&&Mu.error(`Auth (${To}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(s,...e){throw Bd(s,...e)}function sr(s,...e){return Bd(s,...e)}function Ry(s,e,t){const i=Object.assign(Object.assign({},SE()),{[e]:t});return new Ba("auth","Firebase",i).create(e,{appName:s.name})}function _s(s){return Ry(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Bd(s,...e){if(typeof s!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(t,...i)}return ky.create(s,...e)}function Pe(s,e,...t){if(!s)throw Bd(e,...t)}function kr(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Iu(e),new Error(e)}function Vr(s,e){s||kr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function AE(){return ag()==="http:"||ag()==="https:"}function ag(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AE()||rw()||"connection"in navigator)?navigator.onLine:!0}function RE(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,t){this.shortDelay=e,this.longDelay=t,Vr(t>e,"Short delay should be less than long delay!"),this.isMobile=ew()||sw()}get(){return kE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(s,e){Vr(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Py{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;kr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;kr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;kr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE=new Ha(3e4,6e4);function tc(s,e){return s.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:s.tenantId}):e}async function Io(s,e,t,i,o={}){return Ny(s,o,async()=>{let u={},h={};i&&(e==="GET"?h=i:u={body:JSON.stringify(i)});const m=$a(Object.assign({key:s.config.apiKey},h)).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const _=Object.assign({method:e,headers:g},u);return nw()||(_.referrerPolicy="no-referrer"),Py.fetch()(Dy(s,s.config.apiHost,t,m),_)})}async function Ny(s,e,t){s._canInitEmulator=!1;const i=Object.assign(Object.assign({},PE),e);try{const o=new bE(s),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw vu(s,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const m=u.ok?h.errorMessage:h.error.message,[g,_]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw vu(s,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw vu(s,"email-already-in-use",h);if(g==="USER_DISABLED")throw vu(s,"user-disabled",h);const E=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw Ry(s,E,_);Dr(s,E)}}catch(o){if(o instanceof jr)throw o;Dr(s,"network-request-failed",{message:String(o)})}}async function by(s,e,t,i,o={}){const u=await Io(s,e,t,i,o);return"mfaPendingCredential"in u&&Dr(s,"multi-factor-auth-required",{_serverResponse:u}),u}function Dy(s,e,t,i){const o=`${e}${t}?${i}`;return s.config.emulator?$d(s.config,o):`${s.config.apiScheme}://${o}`}class bE{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(sr(this.auth,"network-request-failed")),NE.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function vu(s,e,t){const i={appName:s.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=sr(s,e,i);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DE(s,e){return Io(s,"POST","/v1/accounts:delete",e)}async function Vy(s,e){return Io(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aa(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function VE(s,e=!1){const t=Lt(s),i=await t.getIdToken(e),o=Hd(i);Pe(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u==null?void 0:u.sign_in_provider;return{claims:o,token:i,authTime:Aa(od(o.auth_time)),issuedAtTime:Aa(od(o.iat)),expirationTime:Aa(od(o.exp)),signInProvider:h||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function od(s){return Number(s)*1e3}function Hd(s){const[e,t,i]=s.split(".");if(e===void 0||t===void 0||i===void 0)return Iu("JWT malformed, contained fewer than 3 sections"),null;try{const o=yy(t);return o?JSON.parse(o):(Iu("Failed to decode base64 JWT payload"),null)}catch(o){return Iu("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function lg(s){const e=Hd(s);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Da(s,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof jr&&LE(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function LE({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Aa(this.lastLoginAt),this.creationTime=Aa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ju(s){var e;const t=s.auth,i=await s.getIdToken(),o=await Da(s,Vy(t,{idToken:i}));Pe(o==null?void 0:o.users.length,t,"internal-error");const u=o.users[0];s._notifyReloadListener(u);const h=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?Ly(u.providerUserInfo):[],m=jE(s.providerData,h),g=s.isAnonymous,_=!(s.email&&u.passwordHash)&&!(m!=null&&m.length),E=g?_:!1,k={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new vd(u.createdAt,u.lastLoginAt),isAnonymous:E};Object.assign(s,k)}async function ME(s){const e=Lt(s);await ju(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jE(s,e){return[...s.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function Ly(s){return s.map(e=>{var{providerId:t}=e,i=zd(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FE(s,e){const t=await Ny(s,{},async()=>{const i=$a({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,h=Dy(s,o,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",Py.fetch()(h,{method:"POST",headers:m,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function UE(s,e){return Io(s,"POST","/v2/accounts:revokeToken",tc(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):lg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const t=lg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:u}=await FE(e,t);this.updateTokensAndExpiration(i,o,Number(u))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:u}=t,h=new lo;return i&&(Pe(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Pe(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(Pe(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new lo,this.toJSON())}_performRefresh(){return kr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(s,e){Pe(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Rr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,u=zd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new OE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new vd(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const t=await Da(this,this.stsTokenManager.getToken(this.auth,e));return Pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return VE(this,e)}reload(){return ME(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Rr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await ju(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ar(this.auth.app))return Promise.reject(_s(this.auth));const e=await this.getIdToken();return await Da(this,DE(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,u,h,m,g,_,E;const k=(i=t.displayName)!==null&&i!==void 0?i:void 0,D=(o=t.email)!==null&&o!==void 0?o:void 0,U=(u=t.phoneNumber)!==null&&u!==void 0?u:void 0,$=(h=t.photoURL)!==null&&h!==void 0?h:void 0,W=(m=t.tenantId)!==null&&m!==void 0?m:void 0,O=(g=t._redirectEventId)!==null&&g!==void 0?g:void 0,q=(_=t.createdAt)!==null&&_!==void 0?_:void 0,Y=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:H,emailVerified:ie,isAnonymous:fe,providerData:te,stsTokenManager:R}=t;Pe(H&&R,e,"internal-error");const x=lo.fromJSON(this.name,R);Pe(typeof H=="string",e,"internal-error"),us(k,e.name),us(D,e.name),Pe(typeof ie=="boolean",e,"internal-error"),Pe(typeof fe=="boolean",e,"internal-error"),us(U,e.name),us($,e.name),us(W,e.name),us(O,e.name),us(q,e.name),us(Y,e.name);const S=new Rr({uid:H,auth:e,email:D,emailVerified:ie,displayName:k,isAnonymous:fe,photoURL:$,phoneNumber:U,tenantId:W,stsTokenManager:x,createdAt:q,lastLoginAt:Y});return te&&Array.isArray(te)&&(S.providerData=te.map(P=>Object.assign({},P))),O&&(S._redirectEventId=O),S}static async _fromIdTokenResponse(e,t,i=!1){const o=new lo;o.updateFromServerResponse(t);const u=new Rr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await ju(u),u}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Pe(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?Ly(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new lo;m.updateFromIdToken(i);const g=new Rr({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new vd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(g,_),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug=new Map;function Pr(s){Vr(s instanceof Function,"Expected a class definition");let e=ug.get(s);return e?(Vr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,ug.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Oy.type="NONE";const cg=Oy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(s,e,t){return`firebase:${s}:${e}:${t}`}class uo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:u}=this.auth;this.fullUserKey=xu(this.userKey,o.apiKey,u),this.fullPersistenceKey=xu("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Rr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new uo(Pr(cg),e,i);const o=(await Promise.all(t.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let u=o[0]||Pr(cg);const h=xu(i,e.config.apiKey,e.name);let m=null;for(const _ of t)try{const E=await _._get(h);if(E){const k=Rr._fromJSON(e,E);_!==u&&(m=k),u=_;break}}catch{}const g=o.filter(_=>_._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new uo(u,e,i):(u=g[0],m&&await u._set(h,m.toJSON()),await Promise.all(t.map(async _=>{if(_!==u)try{await _._remove(h)}catch{}})),new uo(u,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Uy(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(My(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(By(e))return"Blackberry";if($y(e))return"Webos";if(jy(e))return"Safari";if((e.includes("chrome/")||Fy(e))&&!e.includes("edge/"))return"Chrome";if(zy(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function My(s=Wt()){return/firefox\//i.test(s)}function jy(s=Wt()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Fy(s=Wt()){return/crios\//i.test(s)}function Uy(s=Wt()){return/iemobile/i.test(s)}function zy(s=Wt()){return/android/i.test(s)}function By(s=Wt()){return/blackberry/i.test(s)}function $y(s=Wt()){return/webos/i.test(s)}function qd(s=Wt()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function zE(s=Wt()){var e;return qd(s)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function BE(){return iw()&&document.documentMode===10}function Hy(s=Wt()){return qd(s)||zy(s)||$y(s)||By(s)||/windows phone/i.test(s)||Uy(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(s,e=[]){let t;switch(s){case"Browser":t=hg(Wt());break;case"Worker":t=`${hg(Wt())}-${s}`;break;default:t=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${To}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=u=>new Promise((h,m)=>{try{const g=e(u);h(g)}catch(g){m(g)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HE(s,e={}){return Io(s,"GET","/v2/passwordPolicy",tc(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE=6;class WE{constructor(e){var t,i,o,u;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:qE,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,u,h,m;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(t=g.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),g.isValid&&(g.isValid=(i=g.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(u=g.containsUppercaseLetter)!==null&&u!==void 0?u:!0),g.isValid&&(g.isValid=(h=g.containsNumericCharacter)!==null&&h!==void 0?h:!0),g.isValid&&(g.isValid=(m=g.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),g}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dg(this),this.idTokenSubscription=new dg(this),this.beforeStateQueue=new $E(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ky,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Pr(t)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await uo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Vy(this,{idToken:e}),i=await Rr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ar(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(m,m))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,m=o==null?void 0:o._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===m)&&(g!=null&&g.user)&&(o=g.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ju(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RE()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ar(this.app))return Promise.reject(_s(this));const t=e?Lt(e):null;return t&&Pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ar(this.app)?Promise.reject(_s(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ar(this.app)?Promise.reject(_s(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Pr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await HE(this),t=new WE(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ba("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await UE(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Pr(e)||this._popupRedirectResolver;Pe(t,this,"argument-error"),this.redirectPersistenceManager=await uo.create(this,[Pr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(m,this,"internal-error"),m.then(()=>{h||u(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&CE(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function nc(s){return Lt(s)}class dg{constructor(e){this.auth=e,this.observer=null,this.addObserver=fw(t=>this.observer=t)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function GE(s){Wd=s}function QE(s){return Wd.loadJS(s)}function YE(){return Wd.gapiScript}function XE(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(s,e){const t=Ud(s,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(Lu(u,e??{}))return o;Dr(o,"already-initialized")}return t.initialize({options:e})}function ZE(s,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Pr);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function eT(s,e,t){const i=nc(s);Pe(i._canInitEmulator,i,"emulator-config-failed"),Pe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,u=Wy(e),{host:h,port:m}=tT(e),g=m===null?"":`:${m}`;i.config.emulator={url:`${u}//${h}${g}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:h,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})}),nT()}function Wy(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function tT(s){const e=Wy(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const u=o[1];return{host:u,port:fg(i.substr(u.length+1))}}else{const[u,h]=i.split(":");return{host:u,port:fg(h)}}}function fg(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function nT(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return kr("not implemented")}_getIdTokenResponse(e){return kr("not implemented")}_linkToIdToken(e,t){return kr("not implemented")}_getReauthenticationResolver(e){return kr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function co(s,e){return by(s,"POST","/v1/accounts:signInWithIdp",tc(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="http://localhost";class si extends Ky{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new si(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Dr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,u=zd(t,["providerId","signInMethod"]);if(!i||!o)return null;const h=new si(i,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return co(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,co(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,co(e,t)}buildRequest(){const e={requestUri:rT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$a(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa extends Gy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends qa{constructor(){super("facebook.com")}static credential(e){return si._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hs.credential(e.oauthAccessToken)}catch{return null}}}hs.FACEBOOK_SIGN_IN_METHOD="facebook.com";hs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends qa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return si._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return ds.credential(t,i)}catch{return null}}}ds.GOOGLE_SIGN_IN_METHOD="google.com";ds.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends qa{constructor(){super("github.com")}static credential(e){return si._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fs.credential(e.oauthAccessToken)}catch{return null}}}fs.GITHUB_SIGN_IN_METHOD="github.com";fs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends qa{constructor(){super("twitter.com")}static credential(e,t){return si._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ps.credential(t,i)}catch{return null}}}ps.TWITTER_SIGN_IN_METHOD="twitter.com";ps.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sT(s,e){return by(s,"POST","/v1/accounts:signUp",tc(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const u=await Rr._fromIdTokenResponse(e,i,o),h=pg(i);return new Es({user:u,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=pg(i);return new Es({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function pg(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iT(s){var e;if(Ar(s.app))return Promise.reject(_s(s));const t=nc(s);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new Es({user:t.currentUser,providerId:null,operationType:"signIn"});const i=await sT(t,{returnSecureToken:!0}),o=await Es._fromIdTokenResponse(t,"signIn",i,!0);return await t._updateCurrentUser(o.user),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu extends jr{constructor(e,t,i,o){var u;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Fu.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Fu(e,t,i,o)}}function Qy(s,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Fu._fromErrorAndOperation(s,u,e,i):u})}async function oT(s,e,t=!1){const i=await Da(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Es._forOperation(s,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aT(s,e,t=!1){const{auth:i}=s;if(Ar(i.app))return Promise.reject(_s(i));const o="reauthenticate";try{const u=await Da(s,Qy(i,o,e,s),t);Pe(u.idToken,i,"internal-error");const h=Hd(u.idToken);Pe(h,i,"internal-error");const{sub:m}=h;return Pe(s.uid===m,i,"user-mismatch"),Es._forOperation(s,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Dr(i,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lT(s,e,t=!1){if(Ar(s.app))return Promise.reject(_s(s));const i="signIn",o=await Qy(s,i,e),u=await Es._fromIdTokenResponse(s,i,o);return t||await s._updateCurrentUser(u.user),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(s,e,t,i){return Lt(s).onIdTokenChanged(e,t,i)}function cT(s,e,t){return Lt(s).beforeAuthStateChanged(e,t)}function hT(s,e,t,i){return Lt(s).onAuthStateChanged(e,t,i)}const Uu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Uu,"1"),this.storage.removeItem(Uu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT=1e3,fT=10;class Xy extends Yy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Hy(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,m,g)=>{this.notifyListeners(h,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},u=this.storage.getItem(i);BE()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,fT):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},dT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Xy.type="LOCAL";const pT=Xy;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy extends Yy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Jy.type="SESSION";const Zy=Jy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new rc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:u}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const m=Array.from(h).map(async _=>_(t.origin,u)),g=await mT(m);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(s="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((m,g)=>{const _=Kd("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(k){const D=k;if(D.data.eventId===_)switch(D.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(D.data.response);break;default:clearTimeout(E),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:_,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(){return window}function yT(s){ir().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(){return typeof ir().WorkerGlobalScope<"u"&&typeof ir().importScripts=="function"}async function vT(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _T(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function wT(){return ev()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv="firebaseLocalStorageDb",ET=1,zu="firebaseLocalStorage",nv="fbase_key";class Wa{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function sc(s,e){return s.transaction([zu],e?"readwrite":"readonly").objectStore(zu)}function TT(){const s=indexedDB.deleteDatabase(tv);return new Wa(s).toPromise()}function _d(){const s=indexedDB.open(tv,ET);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore(zu,{keyPath:nv})}catch(o){t(o)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains(zu)?e(i):(i.close(),await TT(),e(await _d()))})})}async function mg(s,e,t){const i=sc(s,!0).put({[nv]:e,value:t});return new Wa(i).toPromise()}async function IT(s,e){const t=sc(s,!1).get(e),i=await new Wa(t).toPromise();return i===void 0?null:i.value}function gg(s,e){const t=sc(s,!0).delete(e);return new Wa(t).toPromise()}const xT=800,ST=3;class rv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _d(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>ST)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ev()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rc._getInstance(wT()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await vT(),!this.activeServiceWorker)return;this.sender=new gT(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_T()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _d();return await mg(e,Uu,"1"),await gg(e,Uu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>mg(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>IT(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>gg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=sc(o,!1).getAll();return new Wa(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}rv.type="LOCAL";const CT=rv;new Ha(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(s,e){return e?Pr(e):(Pe(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd extends Ky{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return co(e,this._buildIdpRequest())}_linkToIdToken(e,t){return co(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return co(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function kT(s){return lT(s.auth,new Gd(s),s.bypassAuthState)}function RT(s){const{auth:e,user:t}=s;return Pe(t,e,"internal-error"),aT(t,new Gd(s),s.bypassAuthState)}async function PT(s){const{auth:e,user:t}=s;return Pe(t,e,"internal-error"),oT(t,new Gd(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e,t,i,o,u=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:u,error:h,type:m}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kT;case"linkViaPopup":case"linkViaRedirect":return PT;case"reauthViaPopup":case"reauthViaRedirect":return RT;default:Dr(this.auth,"internal-error")}}resolve(e){Vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT=new Ha(2e3,1e4);class ao extends sv{constructor(e,t,i,o,u){super(e,t,o,u),this.provider=i,this.authWindow=null,this.pollId=null,ao.currentPopupAction&&ao.currentPopupAction.cancel(),ao.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){Vr(this.filter.length===1,"Popup operations only handle one event");const e=Kd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(sr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(sr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ao.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(sr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,NT.get())};e()}}ao.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT="pendingRedirect",Su=new Map;class DT extends sv{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Su.get(this.auth._key());if(!e){try{const i=await VT(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Su.set(this.auth._key(),e)}return this.bypassAuthState||Su.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VT(s,e){const t=MT(e),i=OT(s);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function LT(s,e){Su.set(s._key(),e)}function OT(s){return Pr(s._redirectPersistence)}function MT(s){return xu(bT,s.config.apiKey,s.name)}async function jT(s,e,t=!1){if(Ar(s.app))return Promise.reject(_s(s));const i=nc(s),o=AT(i,e),h=await new DT(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT=10*60*1e3;class UT{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zT(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!iv(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(sr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=FT&&this.cachedEventUids.clear(),this.cachedEventUids.has(yg(e))}saveEventToCache(e){this.cachedEventUids.add(yg(e)),this.lastProcessedEventTime=Date.now()}}function yg(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function iv({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function zT(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iv(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BT(s,e={}){return Io(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HT=/^https?/;async function qT(s){if(s.config.emulator)return;const{authorizedDomains:e}=await BT(s);for(const t of e)try{if(WT(t))return}catch{}Dr(s,"unauthorized-domain")}function WT(s){const e=yd(),{protocol:t,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&i===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!HT.test(t))return!1;if($T.test(s))return i===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT=new Ha(3e4,6e4);function vg(){const s=ir().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function GT(s){return new Promise((e,t)=>{var i,o,u;function h(){vg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vg(),t(sr(s,"network-request-failed"))},timeout:KT.get()})}if(!((o=(i=ir().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=ir().gapi)===null||u===void 0)&&u.load)h();else{const m=XE("iframefcb");return ir()[m]=()=>{gapi.load?h():t(sr(s,"network-request-failed"))},QE(`${YE()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw Cu=null,e})}let Cu=null;function QT(s){return Cu=Cu||GT(s),Cu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT=new Ha(5e3,15e3),XT="__/auth/iframe",JT="emulator/auth/iframe",ZT={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tI(s){const e=s.config;Pe(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?$d(e,JT):`https://${s.config.authDomain}/${XT}`,i={apiKey:e.apiKey,appName:s.name,v:To},o=eI.get(s.config.apiHost);o&&(i.eid=o);const u=s._getFrameworks();return u.length&&(i.fw=u.join(",")),`${t}?${$a(i).slice(1)}`}async function nI(s){const e=await QT(s),t=ir().gapi;return Pe(t,s,"internal-error"),e.open({where:document.body,url:tI(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZT,dontclear:!0},i=>new Promise(async(o,u)=>{await i.restyle({setHideOnLeave:!1});const h=sr(s,"network-request-failed"),m=ir().setTimeout(()=>{u(h)},YT.get());function g(){ir().clearTimeout(m),o(i)}i.ping(g).then(g,()=>{u(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sI=500,iI=600,oI="_blank",aI="http://localhost";class _g{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lI(s,e,t,i=sI,o=iI){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const g=Object.assign(Object.assign({},rI),{width:i.toString(),height:o.toString(),top:u,left:h}),_=Wt().toLowerCase();t&&(m=Fy(_)?oI:t),My(_)&&(e=e||aI,g.scrollbars="yes");const E=Object.entries(g).reduce((D,[U,$])=>`${D}${U}=${$},`,"");if(zE(_)&&m!=="_self")return uI(e||"",m),new _g(null);const k=window.open(e||"",m,E);Pe(k,s,"popup-blocked");try{k.focus()}catch{}return new _g(k)}function uI(s,e){const t=document.createElement("a");t.href=s,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI="__/auth/handler",hI="emulator/auth/handler",dI=encodeURIComponent("fac");async function wg(s,e,t,i,o,u){Pe(s.config.authDomain,s,"auth-domain-config-required"),Pe(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:i,v:To,eventId:o};if(e instanceof Gy){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",dw(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,k]of Object.entries({}))h[E]=k}if(e instanceof qa){const E=e.getScopes().filter(k=>k!=="");E.length>0&&(h.scopes=E.join(","))}s.tenantId&&(h.tid=s.tenantId);const m=h;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const g=await s._getAppCheckToken(),_=g?`#${dI}=${encodeURIComponent(g)}`:"";return`${fI(s)}?${$a(m).slice(1)}${_}`}function fI({config:s}){return s.emulator?$d(s,hI):`https://${s.authDomain}/${cI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad="webStorageSupport";class pI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zy,this._completeRedirectFn=jT,this._overrideRedirectResult=LT}async _openPopup(e,t,i,o){var u;Vr((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const h=await wg(e,t,i,yd(),o);return lI(e,h,Kd())}async _openRedirect(e,t,i,o){await this._originValidation(e);const u=await wg(e,t,i,yd(),o);return yT(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(Vr(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await nI(e),i=new UT(e);return t.register("authEvent",o=>(Pe(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ad,{type:ad},o=>{var u;const h=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[ad];h!==void 0&&t(!!h),Dr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=qT(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Hy()||jy()||qd()}}const mI=pI;var Eg="@firebase/auth",Tg="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vI(s){po(new ri("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=i.options;Pe(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qy(s)},_=new KE(i,o,u,g);return ZE(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),po(new ri("auth-internal",e=>{const t=nc(e.getProvider("auth").getImmediate());return(i=>new gI(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),vs(Eg,Tg,yI(s)),vs(Eg,Tg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=5*60,wI=wy("authIdTokenMaxAge")||_I;let Ig=null;const EI=s=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>wI)return;const o=t==null?void 0:t.token;Ig!==o&&(Ig=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function TI(s=xy()){const e=Ud(s,"auth");if(e.isInitialized())return e.getImmediate();const t=JE(s,{popupRedirectResolver:mI,persistence:[CT,pT,Zy]}),i=wy("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const h=EI(u.toString());cT(t,h,()=>h(t.currentUser)),uT(t,m=>h(m))}}const o=vy("auth");return o&&eT(t,`http://${o}`),t}function II(){var s,e;return(e=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&e!==void 0?e:document}GE({loadJS(s){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=o=>{const u=sr("internal-error");u.customData=o,t(u)},i.type="text/javascript",i.charset="UTF-8",II().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vI("Browser");var xg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ni,ov;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,x){function S(){}S.prototype=x.prototype,R.D=x.prototype,R.prototype=new S,R.prototype.constructor=R,R.C=function(P,A,N){for(var I=Array(arguments.length-2),le=2;le<arguments.length;le++)I[le-2]=arguments[le];return x.prototype[A].apply(P,I)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,x,S){S||(S=0);var P=Array(16);if(typeof x=="string")for(var A=0;16>A;++A)P[A]=x.charCodeAt(S++)|x.charCodeAt(S++)<<8|x.charCodeAt(S++)<<16|x.charCodeAt(S++)<<24;else for(A=0;16>A;++A)P[A]=x[S++]|x[S++]<<8|x[S++]<<16|x[S++]<<24;x=R.g[0],S=R.g[1],A=R.g[2];var N=R.g[3],I=x+(N^S&(A^N))+P[0]+3614090360&4294967295;x=S+(I<<7&4294967295|I>>>25),I=N+(A^x&(S^A))+P[1]+3905402710&4294967295,N=x+(I<<12&4294967295|I>>>20),I=A+(S^N&(x^S))+P[2]+606105819&4294967295,A=N+(I<<17&4294967295|I>>>15),I=S+(x^A&(N^x))+P[3]+3250441966&4294967295,S=A+(I<<22&4294967295|I>>>10),I=x+(N^S&(A^N))+P[4]+4118548399&4294967295,x=S+(I<<7&4294967295|I>>>25),I=N+(A^x&(S^A))+P[5]+1200080426&4294967295,N=x+(I<<12&4294967295|I>>>20),I=A+(S^N&(x^S))+P[6]+2821735955&4294967295,A=N+(I<<17&4294967295|I>>>15),I=S+(x^A&(N^x))+P[7]+4249261313&4294967295,S=A+(I<<22&4294967295|I>>>10),I=x+(N^S&(A^N))+P[8]+1770035416&4294967295,x=S+(I<<7&4294967295|I>>>25),I=N+(A^x&(S^A))+P[9]+2336552879&4294967295,N=x+(I<<12&4294967295|I>>>20),I=A+(S^N&(x^S))+P[10]+4294925233&4294967295,A=N+(I<<17&4294967295|I>>>15),I=S+(x^A&(N^x))+P[11]+2304563134&4294967295,S=A+(I<<22&4294967295|I>>>10),I=x+(N^S&(A^N))+P[12]+1804603682&4294967295,x=S+(I<<7&4294967295|I>>>25),I=N+(A^x&(S^A))+P[13]+4254626195&4294967295,N=x+(I<<12&4294967295|I>>>20),I=A+(S^N&(x^S))+P[14]+2792965006&4294967295,A=N+(I<<17&4294967295|I>>>15),I=S+(x^A&(N^x))+P[15]+1236535329&4294967295,S=A+(I<<22&4294967295|I>>>10),I=x+(A^N&(S^A))+P[1]+4129170786&4294967295,x=S+(I<<5&4294967295|I>>>27),I=N+(S^A&(x^S))+P[6]+3225465664&4294967295,N=x+(I<<9&4294967295|I>>>23),I=A+(x^S&(N^x))+P[11]+643717713&4294967295,A=N+(I<<14&4294967295|I>>>18),I=S+(N^x&(A^N))+P[0]+3921069994&4294967295,S=A+(I<<20&4294967295|I>>>12),I=x+(A^N&(S^A))+P[5]+3593408605&4294967295,x=S+(I<<5&4294967295|I>>>27),I=N+(S^A&(x^S))+P[10]+38016083&4294967295,N=x+(I<<9&4294967295|I>>>23),I=A+(x^S&(N^x))+P[15]+3634488961&4294967295,A=N+(I<<14&4294967295|I>>>18),I=S+(N^x&(A^N))+P[4]+3889429448&4294967295,S=A+(I<<20&4294967295|I>>>12),I=x+(A^N&(S^A))+P[9]+568446438&4294967295,x=S+(I<<5&4294967295|I>>>27),I=N+(S^A&(x^S))+P[14]+3275163606&4294967295,N=x+(I<<9&4294967295|I>>>23),I=A+(x^S&(N^x))+P[3]+4107603335&4294967295,A=N+(I<<14&4294967295|I>>>18),I=S+(N^x&(A^N))+P[8]+1163531501&4294967295,S=A+(I<<20&4294967295|I>>>12),I=x+(A^N&(S^A))+P[13]+2850285829&4294967295,x=S+(I<<5&4294967295|I>>>27),I=N+(S^A&(x^S))+P[2]+4243563512&4294967295,N=x+(I<<9&4294967295|I>>>23),I=A+(x^S&(N^x))+P[7]+1735328473&4294967295,A=N+(I<<14&4294967295|I>>>18),I=S+(N^x&(A^N))+P[12]+2368359562&4294967295,S=A+(I<<20&4294967295|I>>>12),I=x+(S^A^N)+P[5]+4294588738&4294967295,x=S+(I<<4&4294967295|I>>>28),I=N+(x^S^A)+P[8]+2272392833&4294967295,N=x+(I<<11&4294967295|I>>>21),I=A+(N^x^S)+P[11]+1839030562&4294967295,A=N+(I<<16&4294967295|I>>>16),I=S+(A^N^x)+P[14]+4259657740&4294967295,S=A+(I<<23&4294967295|I>>>9),I=x+(S^A^N)+P[1]+2763975236&4294967295,x=S+(I<<4&4294967295|I>>>28),I=N+(x^S^A)+P[4]+1272893353&4294967295,N=x+(I<<11&4294967295|I>>>21),I=A+(N^x^S)+P[7]+4139469664&4294967295,A=N+(I<<16&4294967295|I>>>16),I=S+(A^N^x)+P[10]+3200236656&4294967295,S=A+(I<<23&4294967295|I>>>9),I=x+(S^A^N)+P[13]+681279174&4294967295,x=S+(I<<4&4294967295|I>>>28),I=N+(x^S^A)+P[0]+3936430074&4294967295,N=x+(I<<11&4294967295|I>>>21),I=A+(N^x^S)+P[3]+3572445317&4294967295,A=N+(I<<16&4294967295|I>>>16),I=S+(A^N^x)+P[6]+76029189&4294967295,S=A+(I<<23&4294967295|I>>>9),I=x+(S^A^N)+P[9]+3654602809&4294967295,x=S+(I<<4&4294967295|I>>>28),I=N+(x^S^A)+P[12]+3873151461&4294967295,N=x+(I<<11&4294967295|I>>>21),I=A+(N^x^S)+P[15]+530742520&4294967295,A=N+(I<<16&4294967295|I>>>16),I=S+(A^N^x)+P[2]+3299628645&4294967295,S=A+(I<<23&4294967295|I>>>9),I=x+(A^(S|~N))+P[0]+4096336452&4294967295,x=S+(I<<6&4294967295|I>>>26),I=N+(S^(x|~A))+P[7]+1126891415&4294967295,N=x+(I<<10&4294967295|I>>>22),I=A+(x^(N|~S))+P[14]+2878612391&4294967295,A=N+(I<<15&4294967295|I>>>17),I=S+(N^(A|~x))+P[5]+4237533241&4294967295,S=A+(I<<21&4294967295|I>>>11),I=x+(A^(S|~N))+P[12]+1700485571&4294967295,x=S+(I<<6&4294967295|I>>>26),I=N+(S^(x|~A))+P[3]+2399980690&4294967295,N=x+(I<<10&4294967295|I>>>22),I=A+(x^(N|~S))+P[10]+4293915773&4294967295,A=N+(I<<15&4294967295|I>>>17),I=S+(N^(A|~x))+P[1]+2240044497&4294967295,S=A+(I<<21&4294967295|I>>>11),I=x+(A^(S|~N))+P[8]+1873313359&4294967295,x=S+(I<<6&4294967295|I>>>26),I=N+(S^(x|~A))+P[15]+4264355552&4294967295,N=x+(I<<10&4294967295|I>>>22),I=A+(x^(N|~S))+P[6]+2734768916&4294967295,A=N+(I<<15&4294967295|I>>>17),I=S+(N^(A|~x))+P[13]+1309151649&4294967295,S=A+(I<<21&4294967295|I>>>11),I=x+(A^(S|~N))+P[4]+4149444226&4294967295,x=S+(I<<6&4294967295|I>>>26),I=N+(S^(x|~A))+P[11]+3174756917&4294967295,N=x+(I<<10&4294967295|I>>>22),I=A+(x^(N|~S))+P[2]+718787259&4294967295,A=N+(I<<15&4294967295|I>>>17),I=S+(N^(A|~x))+P[9]+3951481745&4294967295,R.g[0]=R.g[0]+x&4294967295,R.g[1]=R.g[1]+(A+(I<<21&4294967295|I>>>11))&4294967295,R.g[2]=R.g[2]+A&4294967295,R.g[3]=R.g[3]+N&4294967295}i.prototype.u=function(R,x){x===void 0&&(x=R.length);for(var S=x-this.blockSize,P=this.B,A=this.h,N=0;N<x;){if(A==0)for(;N<=S;)o(this,R,N),N+=this.blockSize;if(typeof R=="string"){for(;N<x;)if(P[A++]=R.charCodeAt(N++),A==this.blockSize){o(this,P),A=0;break}}else for(;N<x;)if(P[A++]=R[N++],A==this.blockSize){o(this,P),A=0;break}}this.h=A,this.o+=x},i.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var x=1;x<R.length-8;++x)R[x]=0;var S=8*this.o;for(x=R.length-8;x<R.length;++x)R[x]=S&255,S/=256;for(this.u(R),R=Array(16),x=S=0;4>x;++x)for(var P=0;32>P;P+=8)R[S++]=this.g[x]>>>P&255;return R};function u(R,x){var S=m;return Object.prototype.hasOwnProperty.call(S,R)?S[R]:S[R]=x(R)}function h(R,x){this.h=x;for(var S=[],P=!0,A=R.length-1;0<=A;A--){var N=R[A]|0;P&&N==x||(S[A]=N,P=!1)}this.g=S}var m={};function g(R){return-128<=R&&128>R?u(R,function(x){return new h([x|0],0>x?-1:0)}):new h([R|0],0>R?-1:0)}function _(R){if(isNaN(R)||!isFinite(R))return k;if(0>R)return O(_(-R));for(var x=[],S=1,P=0;R>=S;P++)x[P]=R/S|0,S*=4294967296;return new h(x,0)}function E(R,x){if(R.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(R.charAt(0)=="-")return O(E(R.substring(1),x));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=_(Math.pow(x,8)),P=k,A=0;A<R.length;A+=8){var N=Math.min(8,R.length-A),I=parseInt(R.substring(A,A+N),x);8>N?(N=_(Math.pow(x,N)),P=P.j(N).add(_(I))):(P=P.j(S),P=P.add(_(I)))}return P}var k=g(0),D=g(1),U=g(16777216);s=h.prototype,s.m=function(){if(W(this))return-O(this).m();for(var R=0,x=1,S=0;S<this.g.length;S++){var P=this.i(S);R+=(0<=P?P:4294967296+P)*x,x*=4294967296}return R},s.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if($(this))return"0";if(W(this))return"-"+O(this).toString(R);for(var x=_(Math.pow(R,6)),S=this,P="";;){var A=ie(S,x).g;S=q(S,A.j(x));var N=((0<S.g.length?S.g[0]:S.h)>>>0).toString(R);if(S=A,$(S))return N+P;for(;6>N.length;)N="0"+N;P=N+P}},s.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function $(R){if(R.h!=0)return!1;for(var x=0;x<R.g.length;x++)if(R.g[x]!=0)return!1;return!0}function W(R){return R.h==-1}s.l=function(R){return R=q(this,R),W(R)?-1:$(R)?0:1};function O(R){for(var x=R.g.length,S=[],P=0;P<x;P++)S[P]=~R.g[P];return new h(S,~R.h).add(D)}s.abs=function(){return W(this)?O(this):this},s.add=function(R){for(var x=Math.max(this.g.length,R.g.length),S=[],P=0,A=0;A<=x;A++){var N=P+(this.i(A)&65535)+(R.i(A)&65535),I=(N>>>16)+(this.i(A)>>>16)+(R.i(A)>>>16);P=I>>>16,N&=65535,I&=65535,S[A]=I<<16|N}return new h(S,S[S.length-1]&-2147483648?-1:0)};function q(R,x){return R.add(O(x))}s.j=function(R){if($(this)||$(R))return k;if(W(this))return W(R)?O(this).j(O(R)):O(O(this).j(R));if(W(R))return O(this.j(O(R)));if(0>this.l(U)&&0>R.l(U))return _(this.m()*R.m());for(var x=this.g.length+R.g.length,S=[],P=0;P<2*x;P++)S[P]=0;for(P=0;P<this.g.length;P++)for(var A=0;A<R.g.length;A++){var N=this.i(P)>>>16,I=this.i(P)&65535,le=R.i(A)>>>16,Ie=R.i(A)&65535;S[2*P+2*A]+=I*Ie,Y(S,2*P+2*A),S[2*P+2*A+1]+=N*Ie,Y(S,2*P+2*A+1),S[2*P+2*A+1]+=I*le,Y(S,2*P+2*A+1),S[2*P+2*A+2]+=N*le,Y(S,2*P+2*A+2)}for(P=0;P<x;P++)S[P]=S[2*P+1]<<16|S[2*P];for(P=x;P<2*x;P++)S[P]=0;return new h(S,0)};function Y(R,x){for(;(R[x]&65535)!=R[x];)R[x+1]+=R[x]>>>16,R[x]&=65535,x++}function H(R,x){this.g=R,this.h=x}function ie(R,x){if($(x))throw Error("division by zero");if($(R))return new H(k,k);if(W(R))return x=ie(O(R),x),new H(O(x.g),O(x.h));if(W(x))return x=ie(R,O(x)),new H(O(x.g),x.h);if(30<R.g.length){if(W(R)||W(x))throw Error("slowDivide_ only works with positive integers.");for(var S=D,P=x;0>=P.l(R);)S=fe(S),P=fe(P);var A=te(S,1),N=te(P,1);for(P=te(P,2),S=te(S,2);!$(P);){var I=N.add(P);0>=I.l(R)&&(A=A.add(S),N=I),P=te(P,1),S=te(S,1)}return x=q(R,A.j(x)),new H(A,x)}for(A=k;0<=R.l(x);){for(S=Math.max(1,Math.floor(R.m()/x.m())),P=Math.ceil(Math.log(S)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),N=_(S),I=N.j(x);W(I)||0<I.l(R);)S-=P,N=_(S),I=N.j(x);$(N)&&(N=D),A=A.add(N),R=q(R,I)}return new H(A,R)}s.A=function(R){return ie(this,R).h},s.and=function(R){for(var x=Math.max(this.g.length,R.g.length),S=[],P=0;P<x;P++)S[P]=this.i(P)&R.i(P);return new h(S,this.h&R.h)},s.or=function(R){for(var x=Math.max(this.g.length,R.g.length),S=[],P=0;P<x;P++)S[P]=this.i(P)|R.i(P);return new h(S,this.h|R.h)},s.xor=function(R){for(var x=Math.max(this.g.length,R.g.length),S=[],P=0;P<x;P++)S[P]=this.i(P)^R.i(P);return new h(S,this.h^R.h)};function fe(R){for(var x=R.g.length+1,S=[],P=0;P<x;P++)S[P]=R.i(P)<<1|R.i(P-1)>>>31;return new h(S,R.h)}function te(R,x){var S=x>>5;x%=32;for(var P=R.g.length-S,A=[],N=0;N<P;N++)A[N]=0<x?R.i(N+S)>>>x|R.i(N+S+1)<<32-x:R.i(N+S);return new h(A,R.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,ov=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=E,ni=h}).apply(typeof xg<"u"?xg:typeof self<"u"?self:typeof window<"u"?window:{});var _u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var av,Ia,lv,Au,wd,uv,cv,hv;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,y){return l==Array.prototype||l==Object.prototype||(l[f]=y.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof _u=="object"&&_u];for(var f=0;f<l.length;++f){var y=l[f];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=t(this);function o(l,f){if(f)e:{var y=i;l=l.split(".");for(var T=0;T<l.length-1;T++){var M=l[T];if(!(M in y))break e;y=y[M]}l=l[l.length-1],T=y[l],f=f(T),f!=T&&f!=null&&e(y,l,{configurable:!0,writable:!0,value:f})}}function u(l,f){l instanceof String&&(l+="");var y=0,T=!1,M={next:function(){if(!T&&y<l.length){var B=y++;return{value:f(B,l[B]),done:!1}}return T=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}o("Array.prototype.values",function(l){return l||function(){return u(this,function(f,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},m=this||self;function g(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function _(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function E(l,f,y){return l.call.apply(l.bind,arguments)}function k(l,f,y){if(!l)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,T),l.apply(f,M)}}return function(){return l.apply(f,arguments)}}function D(l,f,y){return D=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:k,D.apply(null,arguments)}function U(l,f){var y=Array.prototype.slice.call(arguments,1);return function(){var T=y.slice();return T.push.apply(T,arguments),l.apply(this,T)}}function $(l,f){function y(){}y.prototype=f.prototype,l.aa=f.prototype,l.prototype=new y,l.prototype.constructor=l,l.Qb=function(T,M,B){for(var oe=Array(arguments.length-2),We=2;We<arguments.length;We++)oe[We-2]=arguments[We];return f.prototype[M].apply(T,oe)}}function W(l){const f=l.length;if(0<f){const y=Array(f);for(let T=0;T<f;T++)y[T]=l[T];return y}return[]}function O(l,f){for(let y=1;y<arguments.length;y++){const T=arguments[y];if(g(T)){const M=l.length||0,B=T.length||0;l.length=M+B;for(let oe=0;oe<B;oe++)l[M+oe]=T[oe]}else l.push(T)}}class q{constructor(f,y){this.i=f,this.j=y,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function Y(l){return/^[\s\xa0]*$/.test(l)}function H(){var l=m.navigator;return l&&(l=l.userAgent)?l:""}function ie(l){return ie[" "](l),l}ie[" "]=function(){};var fe=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function te(l,f,y){for(const T in l)f.call(y,l[T],T,l)}function R(l,f){for(const y in l)f.call(void 0,l[y],y,l)}function x(l){const f={};for(const y in l)f[y]=l[y];return f}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(l,f){let y,T;for(let M=1;M<arguments.length;M++){T=arguments[M];for(y in T)l[y]=T[y];for(let B=0;B<S.length;B++)y=S[B],Object.prototype.hasOwnProperty.call(T,y)&&(l[y]=T[y])}}function A(l){var f=1;l=l.split(":");const y=[];for(;0<f&&l.length;)y.push(l.shift()),f--;return l.length&&y.push(l.join(":")),y}function N(l){m.setTimeout(()=>{throw l},0)}function I(){var l=pe;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class le{constructor(){this.h=this.g=null}add(f,y){const T=Ie.get();T.set(f,y),this.h?this.h.next=T:this.g=T,this.h=T}}var Ie=new q(()=>new xe,l=>l.reset());class xe{constructor(){this.next=this.g=this.h=null}set(f,y){this.h=f,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Ae,re=!1,pe=new le,ae=()=>{const l=m.Promise.resolve(void 0);Ae=()=>{l.then(L)}};var L=()=>{for(var l;l=I();){try{l.h.call(l.g)}catch(y){N(y)}var f=Ie;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}re=!1};function K(){this.s=this.s,this.C=this.C}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function we(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}we.prototype.h=function(){this.defaultPrevented=!0};var Ee=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const y=()=>{};m.addEventListener("test",y,f),m.removeEventListener("test",y,f)}catch{}return l}();function Z(l,f){if(we.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var y=this.type=l.type,T=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(fe){e:{try{ie(f.nodeName);var M=!0;break e}catch{}M=!1}M||(f=null)}}else y=="mouseover"?f=l.fromElement:y=="mouseout"&&(f=l.toElement);this.relatedTarget=f,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:ce[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Z.aa.h.call(this)}}$(Z,we);var ce={2:"touch",3:"pen",4:"mouse"};Z.prototype.h=function(){Z.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var _e="closure_listenable_"+(1e6*Math.random()|0),Re=0;function Ve(l,f,y,T,M){this.listener=l,this.proxy=null,this.src=f,this.type=y,this.capture=!!T,this.ha=M,this.key=++Re,this.da=this.fa=!1}function qe(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function dt(l){this.src=l,this.g={},this.h=0}dt.prototype.add=function(l,f,y,T,M){var B=l.toString();l=this.g[B],l||(l=this.g[B]=[],this.h++);var oe=_n(l,f,T,M);return-1<oe?(f=l[oe],y||(f.fa=!1)):(f=new Ve(f,this.src,B,!!T,M),f.fa=y,l.push(f)),f};function Jt(l,f){var y=f.type;if(y in l.g){var T=l.g[y],M=Array.prototype.indexOf.call(T,f,void 0),B;(B=0<=M)&&Array.prototype.splice.call(T,M,1),B&&(qe(f),l.g[y].length==0&&(delete l.g[y],l.h--))}}function _n(l,f,y,T){for(var M=0;M<l.length;++M){var B=l[M];if(!B.da&&B.listener==f&&B.capture==!!y&&B.ha==T)return M}return-1}var Cs="closure_lm_"+(1e6*Math.random()|0),fi={};function Ao(l,f,y,T,M){if(Array.isArray(f)){for(var B=0;B<f.length;B++)Ao(l,f[B],y,T,M);return null}return y=Po(y),l&&l[_e]?l.K(f,y,_(T)?!!T.capture:!1,M):ko(l,f,y,!1,T,M)}function ko(l,f,y,T,M,B){if(!f)throw Error("Invalid event type");var oe=_(M)?!!M.capture:!!M,We=mi(l);if(We||(l[Cs]=We=new dt(l)),y=We.add(f,y,T,oe,B),y.proxy)return y;if(T=nl(),y.proxy=T,T.src=l,T.listener=y,l.addEventListener)Ee||(M=oe),M===void 0&&(M=!1),l.addEventListener(f.toString(),T,M);else if(l.attachEvent)l.attachEvent(hr(f.toString()),T);else if(l.addListener&&l.removeListener)l.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return y}function nl(){function l(y){return f.call(l.src,l.listener,y)}const f=Ro;return l}function pi(l,f,y,T,M){if(Array.isArray(f))for(var B=0;B<f.length;B++)pi(l,f[B],y,T,M);else T=_(T)?!!T.capture:!!T,y=Po(y),l&&l[_e]?(l=l.i,f=String(f).toString(),f in l.g&&(B=l.g[f],y=_n(B,y,T,M),-1<y&&(qe(B[y]),Array.prototype.splice.call(B,y,1),B.length==0&&(delete l.g[f],l.h--)))):l&&(l=mi(l))&&(f=l.g[f.toString()],l=-1,f&&(l=_n(f,y,T,M)),(y=-1<l?f[l]:null)&&cr(y))}function cr(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[_e])Jt(f.i,l);else{var y=l.type,T=l.proxy;f.removeEventListener?f.removeEventListener(y,T,l.capture):f.detachEvent?f.detachEvent(hr(y),T):f.addListener&&f.removeListener&&f.removeListener(T),(y=mi(f))?(Jt(y,l),y.h==0&&(y.src=null,f[Cs]=null)):qe(l)}}}function hr(l){return l in fi?fi[l]:fi[l]="on"+l}function Ro(l,f){if(l.da)l=!0;else{f=new Z(f,this);var y=l.listener,T=l.ha||l.src;l.fa&&cr(l),l=y.call(T,f)}return l}function mi(l){return l=l[Cs],l instanceof dt?l:null}var gi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Po(l){return typeof l=="function"?l:(l[gi]||(l[gi]=function(f){return l.handleEvent(f)}),l[gi])}function yt(){K.call(this),this.i=new dt(this),this.M=this,this.F=null}$(yt,K),yt.prototype[_e]=!0,yt.prototype.removeEventListener=function(l,f,y,T){pi(this,l,f,y,T)};function vt(l,f){var y,T=l.F;if(T)for(y=[];T;T=T.F)y.push(T);if(l=l.M,T=f.type||f,typeof f=="string")f=new we(f,l);else if(f instanceof we)f.target=f.target||l;else{var M=f;f=new we(T,l),P(f,M)}if(M=!0,y)for(var B=y.length-1;0<=B;B--){var oe=f.g=y[B];M=dr(oe,T,!0,f)&&M}if(oe=f.g=l,M=dr(oe,T,!0,f)&&M,M=dr(oe,T,!1,f)&&M,y)for(B=0;B<y.length;B++)oe=f.g=y[B],M=dr(oe,T,!1,f)&&M}yt.prototype.N=function(){if(yt.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var y=l.g[f],T=0;T<y.length;T++)qe(y[T]);delete l.g[f],l.h--}}this.F=null},yt.prototype.K=function(l,f,y,T){return this.i.add(String(l),f,!1,y,T)},yt.prototype.L=function(l,f,y,T){return this.i.add(String(l),f,!0,y,T)};function dr(l,f,y,T){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var M=!0,B=0;B<f.length;++B){var oe=f[B];if(oe&&!oe.da&&oe.capture==y){var We=oe.listener,_t=oe.ha||oe.src;oe.fa&&Jt(l.i,oe),M=We.call(_t,T)!==!1&&M}}return M&&!T.defaultPrevented}function No(l,f,y){if(typeof l=="function")y&&(l=D(l,y));else if(l&&typeof l.handleEvent=="function")l=D(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:m.setTimeout(l,f||0)}function Fr(l){l.g=No(()=>{l.g=null,l.i&&(l.i=!1,Fr(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class As extends K{constructor(f,y){super(),this.m=f,this.l=y,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Fr(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ks(l){K.call(this),this.h=l,this.g={}}$(ks,K);var bo=[];function Do(l){te(l.g,function(f,y){this.g.hasOwnProperty(y)&&cr(f)},l),l.g={}}ks.prototype.N=function(){ks.aa.N.call(this),Do(this)},ks.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vo=m.JSON.stringify,Lo=m.JSON.parse,Oo=class{stringify(l){return m.JSON.stringify(l,void 0)}parse(l){return m.JSON.parse(l,void 0)}};function Rs(){}Rs.prototype.h=null;function yi(l){return l.h||(l.h=l.i())}function vi(){}var wn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kn(){we.call(this,"d")}$(Kn,we);function _i(){we.call(this,"c")}$(_i,we);var Gn={},Mo=null;function Ps(){return Mo=Mo||new yt}Gn.La="serverreachability";function jo(l){we.call(this,Gn.La,l)}$(jo,we);function fr(l){const f=Ps();vt(f,new jo(f))}Gn.STAT_EVENT="statevent";function Fo(l,f){we.call(this,Gn.STAT_EVENT,l),this.stat=f}$(Fo,we);function lt(l){const f=Ps();vt(f,new Fo(f,l))}Gn.Ma="timingevent";function wi(l,f){we.call(this,Gn.Ma,l),this.size=f}$(wi,we);function Nn(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){l()},f)}function Ns(){this.g=!0}Ns.prototype.xa=function(){this.g=!1};function bs(l,f,y,T,M,B){l.info(function(){if(l.g)if(B)for(var oe="",We=B.split("&"),_t=0;_t<We.length;_t++){var Fe=We[_t].split("=");if(1<Fe.length){var It=Fe[0];Fe=Fe[1];var ft=It.split("_");oe=2<=ft.length&&ft[1]=="type"?oe+(It+"="+Fe+"&"):oe+(It+"=redacted&")}}else oe=null;else oe=B;return"XMLHTTP REQ ("+T+") [attempt "+M+"]: "+f+`
`+y+`
`+oe})}function Ei(l,f,y,T,M,B,oe){l.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+M+"]: "+f+`
`+y+`
`+B+" "+oe})}function bn(l,f,y,T){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+xc(l,y)+(T?" "+T:"")})}function Uo(l,f){l.info(function(){return"TIMEOUT: "+f})}Ns.prototype.info=function(){};function xc(l,f){if(!l.g)return f;if(!f)return null;try{var y=JSON.parse(f);if(y){for(l=0;l<y.length;l++)if(Array.isArray(y[l])){var T=y[l];if(!(2>T.length)){var M=T[1];if(Array.isArray(M)&&!(1>M.length)){var B=M[0];if(B!="noop"&&B!="stop"&&B!="close")for(var oe=1;oe<M.length;oe++)M[oe]=""}}}}return Vo(y)}catch{return f}}var Ti={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Dn;function Ds(){}$(Ds,Rs),Ds.prototype.g=function(){return new XMLHttpRequest},Ds.prototype.i=function(){return{}},Dn=new Ds;function Vn(l,f,y,T){this.j=l,this.i=f,this.l=y,this.R=T||1,this.U=new ks(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new sl}function sl(){this.i=null,this.g="",this.h=!1}var zo={},Ii={};function xi(l,f,y){l.L=1,l.v=Hr(dn(f)),l.m=y,l.P=!0,Bo(l,null)}function Bo(l,f){l.F=Date.now(),Ye(l),l.A=dn(l.v);var y=l.A,T=l.R;Array.isArray(T)||(T=[String(T)]),Wr(y.i,"t",T),l.C=0,y=l.j.J,l.h=new sl,l.g=Tl(l.j,y?f:null,!l.m),0<l.O&&(l.M=new As(D(l.Y,l,l.g),l.O)),f=l.U,y=l.g,T=l.ca;var M="readystatechange";Array.isArray(M)||(M&&(bo[0]=M.toString()),M=bo);for(var B=0;B<M.length;B++){var oe=Ao(y,M[B],T||f.handleEvent,!1,f.h||f);if(!oe)break;f.g[oe.key]=oe}f=l.H?x(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),fr(),bs(l.i,l.u,l.A,l.l,l.R,l.m)}Vn.prototype.ca=function(l){l=l.target;const f=this.M;f&&en(l)==3?f.j():this.Y(l)},Vn.prototype.Y=function(l){try{if(l==this.g)e:{const ft=en(this.g);var f=this.g.Ba();const In=this.g.Z();if(!(3>ft)&&(ft!=3||this.g&&(this.h.h||this.g.oa()||Go(this.g)))){this.J||ft!=4||f==7||(f==8||0>=In?fr(3):fr(2)),Vs(this);var y=this.g.Z();this.X=y;t:if(il(this)){var T=Go(this.g);l="";var M=T.length,B=en(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){En(this),Ur(this);var oe="";break t}this.h.i=new m.TextDecoder}for(f=0;f<M;f++)this.h.h=!0,l+=this.h.i.decode(T[f],{stream:!(B&&f==M-1)});T.length=0,this.h.g+=l,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=y==200,Ei(this.i,this.u,this.A,this.l,this.R,ft,y),this.o){if(this.T&&!this.K){t:{if(this.g){var We,_t=this.g;if((We=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(We)){var Fe=We;break t}}Fe=null}if(y=Fe)bn(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$o(this,y);else{this.o=!1,this.s=3,lt(12),En(this),Ur(this);break e}}if(this.P){y=!0;let pn;for(;!this.J&&this.C<oe.length;)if(pn=Sc(this,oe),pn==Ii){ft==4&&(this.s=4,lt(14),y=!1),bn(this.i,this.l,null,"[Incomplete Response]");break}else if(pn==zo){this.s=4,lt(15),bn(this.i,this.l,oe,"[Invalid Chunk]"),y=!1;break}else bn(this.i,this.l,pn,null),$o(this,pn);if(il(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||oe.length!=0||this.h.h||(this.s=1,lt(16),y=!1),this.o=this.o&&y,!y)bn(this.i,this.l,oe,"[Invalid Chunked Response]"),En(this),Ur(this);else if(0<oe.length&&!this.W){this.W=!0;var It=this.j;It.g==this&&It.ba&&!It.M&&(It.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),Yo(It),It.M=!0,lt(11))}}else bn(this.i,this.l,oe,null),$o(this,oe);ft==4&&En(this),this.o&&!this.J&&(ft==4?Li(this.j,this):(this.o=!1,Ye(this)))}else Pi(this.g),y==400&&0<oe.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),En(this),Ur(this)}}}catch{}finally{}};function il(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Sc(l,f){var y=l.C,T=f.indexOf(`
`,y);return T==-1?Ii:(y=Number(f.substring(y,T)),isNaN(y)?zo:(T+=1,T+y>f.length?Ii:(f=f.slice(T,T+y),l.C=T+y,f)))}Vn.prototype.cancel=function(){this.J=!0,En(this)};function Ye(l){l.S=Date.now()+l.I,ol(l,l.I)}function ol(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Nn(D(l.ba,l),f)}function Vs(l){l.B&&(m.clearTimeout(l.B),l.B=null)}Vn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Uo(this.i,this.A),this.L!=2&&(fr(),lt(17)),En(this),this.s=2,Ur(this)):ol(this,this.S-l)};function Ur(l){l.j.G==0||l.J||Li(l.j,l)}function En(l){Vs(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,Do(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function $o(l,f){try{var y=l.j;if(y.G!=0&&(y.g==l||Kt(y.h,l))){if(!l.K&&Kt(y.h,l)&&y.G==3){try{var T=y.Da.g.parse(f)}catch{T=null}if(Array.isArray(T)&&T.length==3){var M=T;if(M[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<l.F)Vi(y),Fn(y);else break e;Di(y),lt(18)}}else y.za=M[1],0<y.za-y.T&&37500>M[2]&&y.F&&y.v==0&&!y.C&&(y.C=Nn(D(y.Za,y),6e3));if(1>=ll(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else vr(y,11)}else if((l.K||y.g==l)&&Vi(y),!Y(f))for(M=y.Da.g.parse(f),f=0;f<M.length;f++){let Fe=M[f];if(y.T=Fe[0],Fe=Fe[1],y.G==2)if(Fe[0]=="c"){y.K=Fe[1],y.ia=Fe[2];const It=Fe[3];It!=null&&(y.la=It,y.j.info("VER="+y.la));const ft=Fe[4];ft!=null&&(y.Aa=ft,y.j.info("SVER="+y.Aa));const In=Fe[5];In!=null&&typeof In=="number"&&0<In&&(T=1.5*In,y.L=T,y.j.info("backChannelRequestTimeoutMs_="+T)),T=y;const pn=l.g;if(pn){const zs=pn.g?pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zs){var B=T.h;B.g||zs.indexOf("spdy")==-1&&zs.indexOf("quic")==-1&&zs.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Ho(B,B.h),B.h=null))}if(T.D){const Mi=pn.g?pn.g.getResponseHeader("X-HTTP-Session-Id"):null;Mi&&(T.ya=Mi,Ge(T.I,T.D,Mi))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-l.F,y.j.info("Handshake RTT: "+y.R+"ms")),T=y;var oe=l;if(T.qa=El(T,T.J?T.ia:null,T.W),oe.K){ul(T.h,oe);var We=oe,_t=T.L;_t&&(We.I=_t),We.B&&(Vs(We),Ye(We)),T.g=oe}else Us(T);0<y.i.length&&Jn(y)}else Fe[0]!="stop"&&Fe[0]!="close"||vr(y,7);else y.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?vr(y,7):Rt(y):Fe[0]!="noop"&&y.l&&y.l.ta(Fe),y.v=0)}}fr(4)}catch{}}var al=class{constructor(l,f){this.g=l,this.map=f}};function Ls(l){this.l=l||10,m.PerformanceNavigationTiming?(l=m.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function hn(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function ll(l){return l.h?1:l.g?l.g.size:0}function Kt(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function Ho(l,f){l.g?l.g.add(f):l.h=f}function ul(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}Ls.prototype.cancel=function(){if(this.i=cl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function cl(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const y of l.g.values())f=f.concat(y.D);return f}return W(l.i)}function Si(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(g(l)){for(var f=[],y=l.length,T=0;T<y;T++)f.push(l[T]);return f}f=[],y=0;for(T in l)f[y++]=l[T];return f}function Ci(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(g(l)||typeof l=="string"){var f=[];l=l.length;for(var y=0;y<l;y++)f.push(y);return f}f=[],y=0;for(const T in l)f[y++]=T;return f}}}function zr(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(g(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var y=Ci(l),T=Si(l),M=T.length,B=0;B<M;B++)f.call(void 0,T[B],y&&y[B],l)}var Os=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cc(l,f){if(l){l=l.split("&");for(var y=0;y<l.length;y++){var T=l[y].indexOf("="),M=null;if(0<=T){var B=l[y].substring(0,T);M=l[y].substring(T+1)}else B=l[y];f(B,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function pr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof pr){this.h=l.h,Ms(this,l.j),this.o=l.o,this.g=l.g,Br(this,l.s),this.l=l.l;var f=l.i,y=new Qn;y.i=f.i,f.g&&(y.g=new Map(f.g),y.h=f.h),$r(this,y),this.m=l.m}else l&&(f=String(l).match(Os))?(this.h=!1,Ms(this,f[1]||"",!0),this.o=Me(f[2]||""),this.g=Me(f[3]||"",!0),Br(this,f[4]),this.l=Me(f[5]||"",!0),$r(this,f[6]||"",!0),this.m=Me(f[7]||"")):(this.h=!1,this.i=new Qn(null,this.h))}pr.prototype.toString=function(){var l=[],f=this.j;f&&l.push(qr(f,Ai,!0),":");var y=this.g;return(y||f=="file")&&(l.push("//"),(f=this.o)&&l.push(qr(f,Ai,!0),"@"),l.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&l.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(qr(y,y.charAt(0)=="/"?fl:dl,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",qr(y,qo)),l.join("")};function dn(l){return new pr(l)}function Ms(l,f,y){l.j=y?Me(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function Br(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function $r(l,f,y){f instanceof Qn?(l.i=f,Yn(l.i,l.h)):(y||(f=qr(f,pl)),l.i=new Qn(f,l.h))}function Ge(l,f,y){l.i.set(f,y)}function Hr(l){return Ge(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Me(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function qr(l,f,y){return typeof l=="string"?(l=encodeURI(l).replace(f,hl),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function hl(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Ai=/[#\/\?@]/g,dl=/[#\?:]/g,fl=/[#\?]/g,pl=/[#\?@]/g,qo=/#/g;function Qn(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function kt(l){l.g||(l.g=new Map,l.h=0,l.i&&Cc(l.i,function(f,y){l.add(decodeURIComponent(f.replace(/\+/g," ")),y)}))}s=Qn.prototype,s.add=function(l,f){kt(this),this.i=null,l=Tn(this,l);var y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(f),this.h+=1,this};function Ln(l,f){kt(l),f=Tn(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function On(l,f){return kt(l),f=Tn(l,f),l.g.has(f)}s.forEach=function(l,f){kt(this),this.g.forEach(function(y,T){y.forEach(function(M){l.call(f,M,T,this)},this)},this)},s.na=function(){kt(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),y=[];for(let T=0;T<f.length;T++){const M=l[T];for(let B=0;B<M.length;B++)y.push(f[T])}return y},s.V=function(l){kt(this);let f=[];if(typeof l=="string")On(this,l)&&(f=f.concat(this.g.get(Tn(this,l))));else{l=Array.from(this.g.values());for(let y=0;y<l.length;y++)f=f.concat(l[y])}return f},s.set=function(l,f){return kt(this),this.i=null,l=Tn(this,l),On(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},s.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function Wr(l,f,y){Ln(l,f),0<y.length&&(l.i=null,l.g.set(Tn(l,f),W(y)),l.h+=y.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var y=0;y<f.length;y++){var T=f[y];const B=encodeURIComponent(String(T)),oe=this.V(T);for(T=0;T<oe.length;T++){var M=B;oe[T]!==""&&(M+="="+encodeURIComponent(String(oe[T]))),l.push(M)}}return this.i=l.join("&")};function Tn(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function Yn(l,f){f&&!l.j&&(kt(l),l.i=null,l.g.forEach(function(y,T){var M=T.toLowerCase();T!=M&&(Ln(this,T),Wr(this,M,y))},l)),l.j=f}function Ac(l,f){const y=new Ns;if(m.Image){const T=new Image;T.onload=U(Zt,y,"TestLoadImage: loaded",!0,f,T),T.onerror=U(Zt,y,"TestLoadImage: error",!1,f,T),T.onabort=U(Zt,y,"TestLoadImage: abort",!1,f,T),T.ontimeout=U(Zt,y,"TestLoadImage: timeout",!1,f,T),m.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=l}else f(!1)}function ml(l,f){const y=new Ns,T=new AbortController,M=setTimeout(()=>{T.abort(),Zt(y,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:T.signal}).then(B=>{clearTimeout(M),B.ok?Zt(y,"TestPingServer: ok",!0,f):Zt(y,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(M),Zt(y,"TestPingServer: error",!1,f)})}function Zt(l,f,y,T,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),T(y)}catch{}}function kc(){this.g=new Oo}function gl(l,f,y){const T=y||"";try{zr(l,function(M,B){let oe=M;_(M)&&(oe=Vo(M)),f.push(T+B+"="+encodeURIComponent(oe))})}catch(M){throw f.push(T+"type="+encodeURIComponent("_badmap")),M}}function mr(l){this.l=l.Ub||null,this.j=l.eb||!1}$(mr,Rs),mr.prototype.g=function(){return new js(this.l,this.j)},mr.prototype.i=function(l){return function(){return l}}({});function js(l,f){yt.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}$(js,yt),s=js.prototype,s.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,jn(this)},s.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||m).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mn(this)),this.readyState=0},s.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,jn(this)),this.g&&(this.readyState=3,jn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yl(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function yl(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}s.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Mn(this):jn(this),this.readyState==3&&yl(this)}},s.Ra=function(l){this.g&&(this.response=this.responseText=l,Mn(this))},s.Qa=function(l){this.g&&(this.response=l,Mn(this))},s.ga=function(){this.g&&Mn(this)};function Mn(l){l.readyState=4,l.l=null,l.j=null,l.v=null,jn(l)}s.setRequestHeader=function(l,f){this.u.append(l,f)},s.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var y=f.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=f.next();return l.join(`\r
`)};function jn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(js.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function gr(l){let f="";return te(l,function(y,T){f+=T,f+=":",f+=y,f+=`\r
`}),f}function Kr(l,f,y){e:{for(T in y){var T=!1;break e}T=!0}T||(y=gr(y),typeof l=="string"?y!=null&&encodeURIComponent(String(y)):Ge(l,f,y))}function tt(l){yt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}$(tt,yt);var Rc=/^https?$/i,Wo=["POST","PUT"];s=tt.prototype,s.Ha=function(l){this.J=l},s.ea=function(l,f,y,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Dn.g(),this.v=this.o?yi(this.o):yi(Dn),this.g.onreadystatechange=D(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(B){Fs(this,B);return}if(l=y||"",y=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var M in T)y.set(M,T[M]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const B of T.keys())y.set(B,T.get(B));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(y.keys()).find(B=>B.toLowerCase()=="content-type"),M=m.FormData&&l instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Wo,f,void 0))||T||M||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,oe]of y)this.g.setRequestHeader(B,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ri(this),this.u=!0,this.g.send(l),this.u=!1}catch(B){Fs(this,B)}};function Fs(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,ki(l),fn(l)}function ki(l){l.A||(l.A=!0,vt(l,"complete"),vt(l,"error"))}s.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,vt(this,"complete"),vt(this,"abort"),fn(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fn(this,!0)),tt.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Ko(this):this.bb())},s.bb=function(){Ko(this)};function Ko(l){if(l.h&&typeof h<"u"&&(!l.v[1]||en(l)!=4||l.Z()!=2)){if(l.u&&en(l)==4)No(l.Ea,0,l);else if(vt(l,"readystatechange"),en(l)==4){l.h=!1;try{const oe=l.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var y;if(!(y=f)){var T;if(T=oe===0){var M=String(l.D).match(Os)[1]||null;!M&&m.self&&m.self.location&&(M=m.self.location.protocol.slice(0,-1)),T=!Rc.test(M?M.toLowerCase():"")}y=T}if(y)vt(l,"complete"),vt(l,"success");else{l.m=6;try{var B=2<en(l)?l.g.statusText:""}catch{B=""}l.l=B+" ["+l.Z()+"]",ki(l)}}finally{fn(l)}}}}function fn(l,f){if(l.g){Ri(l);const y=l.g,T=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||vt(l,"ready");try{y.onreadystatechange=T}catch{}}}function Ri(l){l.I&&(m.clearTimeout(l.I),l.I=null)}s.isActive=function(){return!!this.g};function en(l){return l.g?l.g.readyState:0}s.Z=function(){try{return 2<en(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),Lo(f)}};function Go(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Pi(l){const f={};l=(l.g&&2<=en(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<l.length;T++){if(Y(l[T]))continue;var y=A(l[T]);const M=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const B=f[M]||[];f[M]=B,B.push(y)}R(f,function(T){return T.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xn(l,f,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||f}function Qo(l){this.Aa=0,this.i=[],this.j=new Ns,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xn("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xn("baseRetryDelayMs",5e3,l),this.cb=Xn("retryDelaySeedMs",1e4,l),this.Wa=Xn("forwardChannelMaxRetries",2,l),this.wa=Xn("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Ls(l&&l.concurrentRequestLimit),this.Da=new kc,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Qo.prototype,s.la=8,s.G=1,s.connect=function(l,f,y,T){lt(0),this.W=l,this.H=f||{},y&&T!==void 0&&(this.H.OSID=y,this.H.OAID=T),this.F=this.X,this.I=El(this,null,this.W),Jn(this)};function Rt(l){if(Ni(l),l.G==3){var f=l.U++,y=dn(l.I);if(Ge(y,"SID",l.K),Ge(y,"RID",f),Ge(y,"TYPE","terminate"),yr(l,y),f=new Vn(l,l.j,f),f.L=2,f.v=Hr(dn(y)),y=!1,m.navigator&&m.navigator.sendBeacon)try{y=m.navigator.sendBeacon(f.v.toString(),"")}catch{}!y&&m.Image&&(new Image().src=f.v,y=!0),y||(f.g=Tl(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Ye(f)}wl(l)}function Fn(l){l.g&&(Yo(l),l.g.cancel(),l.g=null)}function Ni(l){Fn(l),l.u&&(m.clearTimeout(l.u),l.u=null),Vi(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&m.clearTimeout(l.s),l.s=null)}function Jn(l){if(!hn(l.h)&&!l.s){l.s=!0;var f=l.Ga;Ae||ae(),re||(Ae(),re=!0),pe.add(f,l),l.B=0}}function Pc(l,f){return ll(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Nn(D(l.Ga,l,f),_l(l,l.B)),l.B++,!0)}s.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const M=new Vn(this,this.j,l);let B=this.o;if(this.S&&(B?(B=x(B),P(B,this.S)):B=this.S),this.m!==null||this.O||(M.H=B,B=null),this.P)e:{for(var f=0,y=0;y<this.i.length;y++){t:{var T=this.i[y];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(f+=T,4096<f){f=y;break e}if(f===4096||y===this.i.length-1){f=y+1;break e}}f=1e3}else f=1e3;f=Gr(this,M,f),y=dn(this.I),Ge(y,"RID",l),Ge(y,"CVER",22),this.D&&Ge(y,"X-HTTP-Session-Id",this.D),yr(this,y),B&&(this.O?f="headers="+encodeURIComponent(String(gr(B)))+"&"+f:this.m&&Kr(y,this.m,B)),Ho(this.h,M),this.Ua&&Ge(y,"TYPE","init"),this.P?(Ge(y,"$req",f),Ge(y,"SID","null"),M.T=!0,xi(M,y,null)):xi(M,y,f),this.G=2}}else this.G==3&&(l?bi(this,l):this.i.length==0||hn(this.h)||bi(this))};function bi(l,f){var y;f?y=f.l:y=l.U++;const T=dn(l.I);Ge(T,"SID",l.K),Ge(T,"RID",y),Ge(T,"AID",l.T),yr(l,T),l.m&&l.o&&Kr(T,l.m,l.o),y=new Vn(l,l.j,y,l.B+1),l.m===null&&(y.H=l.o),f&&(l.i=f.D.concat(l.i)),f=Gr(l,y,1e3),y.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Ho(l.h,y),xi(y,T,f)}function yr(l,f){l.H&&te(l.H,function(y,T){Ge(f,T,y)}),l.l&&zr({},function(y,T){Ge(f,T,y)})}function Gr(l,f,y){y=Math.min(l.i.length,y);var T=l.l?D(l.l.Na,l.l,l):null;e:{var M=l.i;let B=-1;for(;;){const oe=["count="+y];B==-1?0<y?(B=M[0].g,oe.push("ofs="+B)):B=0:oe.push("ofs="+B);let We=!0;for(let _t=0;_t<y;_t++){let Fe=M[_t].g;const It=M[_t].map;if(Fe-=B,0>Fe)B=Math.max(0,M[_t].g-100),We=!1;else try{gl(It,oe,"req"+Fe+"_")}catch{T&&T(It)}}if(We){T=oe.join("&");break e}}}return l=l.i.splice(0,y),f.D=l,T}function Us(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;Ae||ae(),re||(Ae(),re=!0),pe.add(f,l),l.v=0}}function Di(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Nn(D(l.Fa,l),_l(l,l.v)),l.v++,!0)}s.Fa=function(){if(this.u=null,vl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Nn(D(this.ab,this),l)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),Fn(this),vl(this))};function Yo(l){l.A!=null&&(m.clearTimeout(l.A),l.A=null)}function vl(l){l.g=new Vn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=dn(l.qa);Ge(f,"RID","rpc"),Ge(f,"SID",l.K),Ge(f,"AID",l.T),Ge(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ge(f,"TO",l.ja),Ge(f,"TYPE","xmlhttp"),yr(l,f),l.m&&l.o&&Kr(f,l.m,l.o),l.L&&(l.g.I=l.L);var y=l.g;l=l.ia,y.L=1,y.v=Hr(dn(f)),y.m=null,y.P=!0,Bo(y,l)}s.Za=function(){this.C!=null&&(this.C=null,Fn(this),Di(this),lt(19))};function Vi(l){l.C!=null&&(m.clearTimeout(l.C),l.C=null)}function Li(l,f){var y=null;if(l.g==f){Vi(l),Yo(l),l.g=null;var T=2}else if(Kt(l.h,f))y=f.D,ul(l.h,f),T=1;else return;if(l.G!=0){if(f.o)if(T==1){y=f.m?f.m.length:0,f=Date.now()-f.F;var M=l.B;T=Ps(),vt(T,new wi(T,y)),Jn(l)}else Us(l);else if(M=f.s,M==3||M==0&&0<f.X||!(T==1&&Pc(l,f)||T==2&&Di(l)))switch(y&&0<y.length&&(f=l.h,f.i=f.i.concat(y)),M){case 1:vr(l,5);break;case 4:vr(l,10);break;case 3:vr(l,6);break;default:vr(l,2)}}}function _l(l,f){let y=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(y*=2),y*f}function vr(l,f){if(l.j.info("Error code "+f),f==2){var y=D(l.fb,l),T=l.Xa;const M=!T;T=new pr(T||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Ms(T,"https"),Hr(T),M?Ac(T.toString(),y):ml(T.toString(),y)}else lt(2);l.G=0,l.l&&l.l.sa(f),wl(l),Ni(l)}s.fb=function(l){l?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function wl(l){if(l.G=0,l.ka=[],l.l){const f=cl(l.h);(f.length!=0||l.i.length!=0)&&(O(l.ka,f),O(l.ka,l.i),l.h.i.length=0,W(l.i),l.i.length=0),l.l.ra()}}function El(l,f,y){var T=y instanceof pr?dn(y):new pr(y);if(T.g!="")f&&(T.g=f+"."+T.g),Br(T,T.s);else{var M=m.location;T=M.protocol,f=f?f+"."+M.hostname:M.hostname,M=+M.port;var B=new pr(null);T&&Ms(B,T),f&&(B.g=f),M&&Br(B,M),y&&(B.l=y),T=B}return y=l.D,f=l.ya,y&&f&&Ge(T,y,f),Ge(T,"VER",l.la),yr(l,T),T}function Tl(l,f,y){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new tt(new mr({eb:y})):new tt(l.pa),f.Ha(l.J),f}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xo(){}s=Xo.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Oi(){}Oi.prototype.g=function(l,f){return new Gt(l,f)};function Gt(l,f){yt.call(this),this.g=new Qo(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!Y(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!Y(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new Zn(this)}$(Gt,yt),Gt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gt.prototype.close=function(){Rt(this.g)},Gt.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.u&&(y={},y.__data__=Vo(l),l=y);f.i.push(new al(f.Ya++,l)),f.G==3&&Jn(f)},Gt.prototype.N=function(){this.g.l=null,delete this.j,Rt(this.g),delete this.g,Gt.aa.N.call(this)};function Il(l){Kn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const y in f){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}$(Il,Kn);function xl(){_i.call(this),this.status=1}$(xl,_i);function Zn(l){this.g=l}$(Zn,Xo),Zn.prototype.ua=function(){vt(this.g,"a")},Zn.prototype.ta=function(l){vt(this.g,new Il(l))},Zn.prototype.sa=function(l){vt(this.g,new xl)},Zn.prototype.ra=function(){vt(this.g,"b")},Oi.prototype.createWebChannel=Oi.prototype.g,Gt.prototype.send=Gt.prototype.o,Gt.prototype.open=Gt.prototype.m,Gt.prototype.close=Gt.prototype.close,hv=function(){return new Oi},cv=function(){return Ps()},uv=Gn,wd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ti.NO_ERROR=0,Ti.TIMEOUT=8,Ti.HTTP_ERROR=6,Au=Ti,rl.COMPLETE="complete",lv=rl,vi.EventType=wn,wn.OPEN="a",wn.CLOSE="b",wn.ERROR="c",wn.MESSAGE="d",yt.prototype.listen=yt.prototype.K,Ia=vi,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,av=tt}).apply(typeof _u<"u"?_u:typeof self<"u"?self:typeof window<"u"?window:{});const Sg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Bt.UNAUTHENTICATED=new Bt(null),Bt.GOOGLE_CREDENTIALS=new Bt("google-credentials-uid"),Bt.FIRST_PARTY=new Bt("first-party-uid"),Bt.MOCK_USER=new Bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii=new jd("@firebase/firestore");function Ta(){return ii.logLevel}function ye(s,...e){if(ii.logLevel<=je.DEBUG){const t=e.map(Qd);ii.debug(`Firestore (${xo}): ${s}`,...t)}}function Lr(s,...e){if(ii.logLevel<=je.ERROR){const t=e.map(Qd);ii.error(`Firestore (${xo}): ${s}`,...t)}}function mo(s,...e){if(ii.logLevel<=je.WARN){const t=e.map(Qd);ii.warn(`Firestore (${xo}): ${s}`,...t)}}function Qd(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(s="Unexpected state"){const e=`FIRESTORE (${xo}) INTERNAL ASSERTION FAILED: `+s;throw Lr(e),new Error(e)}function Ke(s,e){s||Ne()}function De(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends jr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Bt.UNAUTHENTICATED))}shutdown(){}}class SI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class CI{constructor(e){this.t=e,this.currentUser=Bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ke(this.o===void 0);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let u=new Nr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Nr,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const g=u;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},m=g=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(g=>m(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Nr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ke(typeof i.accessToken=="string"),new dv(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string"),new Bt(e)}}class AI{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Bt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class kI{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new AI(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class RI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PI{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ke(this.o===void 0);const i=u=>{u.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.R;return this.R=u.token,ye("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>i(u))};const o=u=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ke(typeof t.token=="string"),this.R=t.token,new RI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<s;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=NI(40);for(let u=0;u<o.length;++u)i.length<20&&o[u]<t&&(i+=e.charAt(o[u]%e.length))}return i}}function He(s,e){return s<e?-1:s>e?1:0}function go(s,e,t){return s.length===e.length&&s.every((i,o)=>t(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new de(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Tt(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.timestamp=e}static fromTimestamp(e){return new be(e)}static min(){return new be(new Tt(0,0))}static max(){return new be(new Tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ne(),i===void 0?i=e.length-t:i>e.length-t&&Ne(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Va.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Va?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const u=e.get(o),h=t.get(o);if(u<h)return-1;if(u>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class et extends Va{construct(e,t,i){return new et(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new de(G.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new et(t)}static emptyPath(){return new et([])}}const bI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dt extends Va{construct(e,t,i){return new Dt(e,t,i)}static isValidIdentifier(e){return bI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Dt(["__name__"])}static fromServerFormat(e){const t=[];let i="",o=0;const u=()=>{if(i.length===0)throw new de(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new de(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new de(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(i+=m,o++):(u(),o++)}if(u(),h)throw new de(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dt(t)}static emptyPath(){return new Dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(et.fromString(e))}static fromName(e){return new Te(et.fromString(e).popFirst(5))}static empty(){return new Te(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&et.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return et.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new et(e.slice()))}}function DI(s,e){const t=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,o=be.fromTimestamp(i===1e9?new Tt(t+1,0):new Tt(t,i));return new Ts(o,Te.empty(),e)}function VI(s){return new Ts(s.readTime,s.key,-1)}class Ts{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ts(be.min(),Te.empty(),-1)}static max(){return new Ts(be.max(),Te.empty(),-1)}}function LI(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(s.documentKey,e.documentKey),t!==0?t:He(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ka(s){if(s.code!==G.FAILED_PRECONDITION||s.message!==OI)throw s;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new J((i,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(i,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof J?t:J.resolve(t)}catch(t){return J.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):J.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):J.reject(t)}static resolve(e){return new J((t,i)=>{t(e)})}static reject(e){return new J((t,i)=>{i(e)})}static waitFor(e){return new J((t,i)=>{let o=0,u=0,h=!1;e.forEach(m=>{++o,m.next(()=>{++u,h&&u===o&&t()},g=>i(g))}),h=!0,u===o&&t()})}static or(e){let t=J.resolve(!1);for(const i of e)t=t.next(o=>o?J.resolve(o):i());return t}static forEach(e,t){const i=[];return e.forEach((o,u)=>{i.push(t.call(this,o,u))}),this.waitFor(i)}static mapArray(e,t){return new J((i,o)=>{const u=e.length,h=new Array(u);let m=0;for(let g=0;g<u;g++){const _=g;t(e[_]).next(E=>{h[_]=E,++m,m===u&&i(h)},E=>o(E))}})}static doWhile(e,t){return new J((i,o)=>{const u=()=>{e()===!0?t().next(()=>{u()},o):i()};u()})}}function jI(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ga(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Yd.oe=-1;function ic(s){return s==null}function Bu(s){return s===0&&1/s==-1/0}function FI(s){return typeof s=="number"&&Number.isInteger(s)&&!Bu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function ci(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function pv(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,t){this.comparator=e,this.root=t||bt.EMPTY}insert(e,t){return new it(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,bt.BLACK,null,null))}remove(e){return new it(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wu(this.root,e,this.comparator,!1)}getReverseIterator(){return new wu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wu(this.root,e,this.comparator,!0)}}class wu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?i(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bt{constructor(e,t,i,o,u){this.key=e,this.value=t,this.color=i??bt.RED,this.left=o??bt.EMPTY,this.right=u??bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,u){return new bt(e??this.key,t??this.value,i??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const u=i(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,i),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return bt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ne();const e=this.left.check();if(e!==this.right.check())throw Ne();return e+(this.isRed()?0:1)}}bt.EMPTY=null,bt.RED=!0,bt.BLACK=!1;bt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne()}get value(){throw Ne()}get color(){throw Ne()}get left(){throw Ne()}get right(){throw Ne()}copy(e,t,i,o,u){return this}insert(e,t,i){return new bt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ag(this.data.getIterator())}getIteratorFrom(e){return new Ag(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Vt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=i.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Vt(this.comparator);return t.data=e,t}}class Ag{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new vn([])}unionWith(e){let t=new Vt(Dt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new vn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return go(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new mv("Invalid base64 string: "+u):u}}(e);return new Ot(t)}static fromUint8Array(e){const t=function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u}(e);return new Ot(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const UI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Is(s){if(Ke(!!s),typeof s=="string"){let e=0;const t=UI.exec(s);if(Ke(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ct(s.seconds),nanos:ct(s.nanos)}}function ct(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function oi(s){return typeof s=="string"?Ot.fromBase64String(s):Ot.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(s){var e,t;return((t=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Jd(s){const e=s.mapValue.fields.__previous_value__;return Xd(e)?Jd(e):e}function La(s){const e=Is(s.mapValue.fields.__local_write_time__.timestampValue);return new Tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e,t,i,o,u,h,m,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=_}}class Oa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Oa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Oa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu={mapValue:{}};function ai(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Xd(s)?4:$I(s)?9007199254740991:BI(s)?10:11:Ne()}function ur(s,e){if(s===e)return!0;const t=ai(s);if(t!==ai(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return La(s).isEqual(La(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=Is(o.timestampValue),m=Is(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(o,u){return oi(o.bytesValue).isEqual(oi(u.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(o,u){return ct(o.geoPointValue.latitude)===ct(u.geoPointValue.latitude)&&ct(o.geoPointValue.longitude)===ct(u.geoPointValue.longitude)}(s,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return ct(o.integerValue)===ct(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=ct(o.doubleValue),m=ct(u.doubleValue);return h===m?Bu(h)===Bu(m):isNaN(h)&&isNaN(m)}return!1}(s,e);case 9:return go(s.arrayValue.values||[],e.arrayValue.values||[],ur);case 10:case 11:return function(o,u){const h=o.mapValue.fields||{},m=u.mapValue.fields||{};if(Cg(h)!==Cg(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!ur(h[g],m[g])))return!1;return!0}(s,e);default:return Ne()}}function Ma(s,e){return(s.values||[]).find(t=>ur(t,e))!==void 0}function yo(s,e){if(s===e)return 0;const t=ai(s),i=ai(e);if(t!==i)return He(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return He(s.booleanValue,e.booleanValue);case 2:return function(u,h){const m=ct(u.integerValue||u.doubleValue),g=ct(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1}(s,e);case 3:return kg(s.timestampValue,e.timestampValue);case 4:return kg(La(s),La(e));case 5:return He(s.stringValue,e.stringValue);case 6:return function(u,h){const m=oi(u),g=oi(h);return m.compareTo(g)}(s.bytesValue,e.bytesValue);case 7:return function(u,h){const m=u.split("/"),g=h.split("/");for(let _=0;_<m.length&&_<g.length;_++){const E=He(m[_],g[_]);if(E!==0)return E}return He(m.length,g.length)}(s.referenceValue,e.referenceValue);case 8:return function(u,h){const m=He(ct(u.latitude),ct(h.latitude));return m!==0?m:He(ct(u.longitude),ct(h.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return Rg(s.arrayValue,e.arrayValue);case 10:return function(u,h){var m,g,_,E;const k=u.fields||{},D=h.fields||{},U=(m=k.value)===null||m===void 0?void 0:m.arrayValue,$=(g=D.value)===null||g===void 0?void 0:g.arrayValue,W=He(((_=U==null?void 0:U.values)===null||_===void 0?void 0:_.length)||0,((E=$==null?void 0:$.values)===null||E===void 0?void 0:E.length)||0);return W!==0?W:Rg(U,$)}(s.mapValue,e.mapValue);case 11:return function(u,h){if(u===Eu.mapValue&&h===Eu.mapValue)return 0;if(u===Eu.mapValue)return 1;if(h===Eu.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),_=h.fields||{},E=Object.keys(_);g.sort(),E.sort();for(let k=0;k<g.length&&k<E.length;++k){const D=He(g[k],E[k]);if(D!==0)return D;const U=yo(m[g[k]],_[E[k]]);if(U!==0)return U}return He(g.length,E.length)}(s.mapValue,e.mapValue);default:throw Ne()}}function kg(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return He(s,e);const t=Is(s),i=Is(e),o=He(t.seconds,i.seconds);return o!==0?o:He(t.nanos,i.nanos)}function Rg(s,e){const t=s.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const u=yo(t[o],i[o]);if(u)return u}return He(t.length,i.length)}function vo(s){return Ed(s)}function Ed(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(t){const i=Is(t);return`time(${i.seconds},${i.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(t){return oi(t).toBase64()}(s.bytesValue):"referenceValue"in s?function(t){return Te.fromName(t).toString()}(s.referenceValue):"geoPointValue"in s?function(t){return`geo(${t.latitude},${t.longitude})`}(s.geoPointValue):"arrayValue"in s?function(t){let i="[",o=!0;for(const u of t.values||[])o?o=!1:i+=",",i+=Ed(u);return i+"]"}(s.arrayValue):"mapValue"in s?function(t){const i=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const h of i)u?u=!1:o+=",",o+=`${h}:${Ed(t.fields[h])}`;return o+"}"}(s.mapValue):Ne()}function Pg(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Td(s){return!!s&&"integerValue"in s}function Zd(s){return!!s&&"arrayValue"in s}function Ng(s){return!!s&&"nullValue"in s}function bg(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function ku(s){return!!s&&"mapValue"in s}function BI(s){var e,t;return((t=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function ka(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return ci(s.mapValue.fields,(t,i)=>e.mapValue.fields[t]=ka(i)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ka(s.arrayValue.values[t]);return e}return Object.assign({},s)}function $I(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!ku(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ka(t)}setAll(e){let t=Dt.emptyPath(),i={},o=[];e.forEach((h,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=m.popLast()}h?i[m.lastSegment()]=ka(h):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,i,o)}delete(e){const t=this.field(e.popLast());ku(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ur(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];ku(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){ci(t,(o,u)=>e[o]=u);for(const o of i)delete e[o]}clone(){return new ln(ka(this.value))}}function gv(s){const e=[];return ci(s.fields,(t,i)=>{const o=new Dt([t]);if(ku(i)){const u=gv(i.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)}),new vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,t,i,o,u,h,m){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(e){return new $t(e,0,be.min(),be.min(),be.min(),ln.empty(),0)}static newFoundDocument(e,t,i,o){return new $t(e,1,t,be.min(),i,o,0)}static newNoDocument(e,t){return new $t(e,2,t,be.min(),be.min(),ln.empty(),0)}static newUnknownDocument(e,t){return new $t(e,3,t,be.min(),be.min(),ln.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,t){this.position=e,this.inclusive=t}}function Dg(s,e,t){let i=0;for(let o=0;o<s.position.length;o++){const u=e[o],h=s.position[o];if(u.field.isKeyField()?i=Te.comparator(Te.fromName(h.referenceValue),t.key):i=yo(h,t.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function Vg(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!ur(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,t="asc"){this.field=e,this.dir=t}}function HI(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{}class gt extends yv{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new WI(e,t,i):t==="array-contains"?new QI(e,i):t==="in"?new YI(e,i):t==="not-in"?new XI(e,i):t==="array-contains-any"?new JI(e,i):new gt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new KI(e,i):new GI(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(yo(t,this.value)):t!==null&&ai(this.value)===ai(t)&&this.matchesComparison(yo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wn extends yv{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Wn(e,t)}matches(e){return vv(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function vv(s){return s.op==="and"}function _v(s){return qI(s)&&vv(s)}function qI(s){for(const e of s.filters)if(e instanceof Wn)return!1;return!0}function Id(s){if(s instanceof gt)return s.field.canonicalString()+s.op.toString()+vo(s.value);if(_v(s))return s.filters.map(e=>Id(e)).join(",");{const e=s.filters.map(t=>Id(t)).join(",");return`${s.op}(${e})`}}function wv(s,e){return s instanceof gt?function(i,o){return o instanceof gt&&i.op===o.op&&i.field.isEqual(o.field)&&ur(i.value,o.value)}(s,e):s instanceof Wn?function(i,o){return o instanceof Wn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((u,h,m)=>u&&wv(h,o.filters[m]),!0):!1}(s,e):void Ne()}function Ev(s){return s instanceof gt?function(t){return`${t.field.canonicalString()} ${t.op} ${vo(t.value)}`}(s):s instanceof Wn?function(t){return t.op.toString()+" {"+t.getFilters().map(Ev).join(" ,")+"}"}(s):"Filter"}class WI extends gt{constructor(e,t,i){super(e,t,i),this.key=Te.fromName(i.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class KI extends gt{constructor(e,t){super(e,"in",t),this.keys=Tv("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class GI extends gt{constructor(e,t){super(e,"not-in",t),this.keys=Tv("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Tv(s,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Te.fromName(i.referenceValue))}class QI extends gt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Zd(t)&&Ma(t.arrayValue,this.value)}}class YI extends gt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ma(this.value.arrayValue,t)}}class XI extends gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ma(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Ma(this.value.arrayValue,t)}}class JI extends gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Zd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Ma(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,t=null,i=[],o=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.ue=null}}function Lg(s,e=null,t=[],i=[],o=null,u=null,h=null){return new ZI(s,e,t,i,o,u,h)}function ef(s){const e=De(s);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Id(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(u){return u.field.canonicalString()+u.dir}(i)).join(","),ic(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>vo(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>vo(i)).join(",")),e.ue=t}return e.ue}function tf(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!HI(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!wv(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Vg(s.startAt,e.startAt)&&Vg(s.endAt,e.endAt)}function xd(s){return Te.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,t=null,i=[],o=[],u=null,h="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=g,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function ex(s,e,t,i,o,u,h,m){return new Qa(s,e,t,i,o,u,h,m)}function oc(s){return new Qa(s)}function Og(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Iv(s){return s.collectionGroup!==null}function Ra(s){const e=De(s);if(e.ce===null){e.ce=[];const t=new Set;for(const u of e.explicitOrderBy)e.ce.push(u),t.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new Vt(Dt.comparator);return h.filters.forEach(g=>{g.getFlattenedFilters().forEach(_=>{_.isInequality()&&(m=m.add(_.field))})}),m})(e).forEach(u=>{t.has(u.canonicalString())||u.isKeyField()||e.ce.push(new Hu(u,i))}),t.has(Dt.keyField().canonicalString())||e.ce.push(new Hu(Dt.keyField(),i))}return e.ce}function or(s){const e=De(s);return e.le||(e.le=tx(e,Ra(s))),e.le}function tx(s,e){if(s.limitType==="F")return Lg(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new Hu(o.field,u)});const t=s.endAt?new $u(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new $u(s.startAt.position,s.startAt.inclusive):null;return Lg(s.path,s.collectionGroup,e,s.filters,s.limit,t,i)}}function Sd(s,e){const t=s.filters.concat([e]);return new Qa(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function Cd(s,e,t){return new Qa(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function ac(s,e){return tf(or(s),or(e))&&s.limitType===e.limitType}function xv(s){return`${ef(or(s))}|lt:${s.limitType}`}function so(s){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(o=>Ev(o)).join(", ")}]`),ic(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>vo(o)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>vo(o)).join(",")),`Target(${i})`}(or(s))}; limitType=${s.limitType})`}function lc(s,e){return e.isFoundDocument()&&function(i,o){const u=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):Te.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)}(s,e)&&function(i,o){for(const u of Ra(i))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(s,e)&&function(i,o){for(const u of i.filters)if(!u.matches(o))return!1;return!0}(s,e)&&function(i,o){return!(i.startAt&&!function(h,m,g){const _=Dg(h,m,g);return h.inclusive?_<=0:_<0}(i.startAt,Ra(i),o)||i.endAt&&!function(h,m,g){const _=Dg(h,m,g);return h.inclusive?_>=0:_>0}(i.endAt,Ra(i),o))}(s,e)}function nx(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function Sv(s){return(e,t)=>{let i=!1;for(const o of Ra(s)){const u=rx(o,e,t);if(u!==0)return u;i=i||o.field.isKeyField()}return 0}}function rx(s,e,t){const i=s.field.isKeyField()?Te.comparator(e.key,t.key):function(u,h,m){const g=h.data.field(u),_=m.data.field(u);return g!==null&&_!==null?yo(g,_):Ne()}(s.field,e,t);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return Ne()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,u]of i)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ci(this.inner,(t,i)=>{for(const[o,u]of i)e(o,u)})}isEmpty(){return pv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx=new it(Te.comparator);function Or(){return sx}const Cv=new it(Te.comparator);function xa(...s){let e=Cv;for(const t of s)e=e.insert(t.key,t);return e}function Av(s){let e=Cv;return s.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function ti(){return Pa()}function kv(){return Pa()}function Pa(){return new So(s=>s.toString(),(s,e)=>s.isEqual(e))}const ix=new it(Te.comparator),ox=new Vt(Te.comparator);function Oe(...s){let e=ox;for(const t of s)e=e.add(t);return e}const ax=new Vt(He);function lx(){return ax}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bu(e)?"-0":e}}function Rv(s){return{integerValue:""+s}}function ux(s,e){return FI(e)?Rv(e):nf(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(){this._=void 0}}function cx(s,e,t){return s instanceof qu?function(o,u){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Xd(u)&&(u=Jd(u)),u&&(h.fields.__previous_value__=u),{mapValue:h}}(t,e):s instanceof ja?Nv(s,e):s instanceof Fa?bv(s,e):function(o,u){const h=Pv(o,u),m=Mg(h)+Mg(o.Pe);return Td(h)&&Td(o.Pe)?Rv(m):nf(o.serializer,m)}(s,e)}function hx(s,e,t){return s instanceof ja?Nv(s,e):s instanceof Fa?bv(s,e):t}function Pv(s,e){return s instanceof Wu?function(i){return Td(i)||function(u){return!!u&&"doubleValue"in u}(i)}(e)?e:{integerValue:0}:null}class qu extends uc{}class ja extends uc{constructor(e){super(),this.elements=e}}function Nv(s,e){const t=Dv(e);for(const i of s.elements)t.some(o=>ur(o,i))||t.push(i);return{arrayValue:{values:t}}}class Fa extends uc{constructor(e){super(),this.elements=e}}function bv(s,e){let t=Dv(e);for(const i of s.elements)t=t.filter(o=>!ur(o,i));return{arrayValue:{values:t}}}class Wu extends uc{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Mg(s){return ct(s.integerValue||s.doubleValue)}function Dv(s){return Zd(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function dx(s,e){return s.field.isEqual(e.field)&&function(i,o){return i instanceof ja&&o instanceof ja||i instanceof Fa&&o instanceof Fa?go(i.elements,o.elements,ur):i instanceof Wu&&o instanceof Wu?ur(i.Pe,o.Pe):i instanceof qu&&o instanceof qu}(s.transform,e.transform)}class fx{constructor(e,t){this.version=e,this.transformResults=t}}class Pn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pn}static exists(e){return new Pn(void 0,e)}static updateTime(e){return new Pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ru(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class cc{}function Vv(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new rf(s.key,Pn.none()):new Ya(s.key,s.data,Pn.none());{const t=s.data,i=ln.empty();let o=new Vt(Dt.comparator);for(let u of e.fields)if(!o.has(u)){let h=t.field(u);h===null&&u.length>1&&(u=u.popLast(),h=t.field(u)),h===null?i.delete(u):i.set(u,h),o=o.add(u)}return new Ss(s.key,i,new vn(o.toArray()),Pn.none())}}function px(s,e,t){s instanceof Ya?function(o,u,h){const m=o.value.clone(),g=Fg(o.fieldTransforms,u,h.transformResults);m.setAll(g),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()}(s,e,t):s instanceof Ss?function(o,u,h){if(!Ru(o.precondition,u))return void u.convertToUnknownDocument(h.version);const m=Fg(o.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(Lv(o)),g.setAll(m),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()}(s,e,t):function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function Na(s,e,t,i){return s instanceof Ya?function(u,h,m,g){if(!Ru(u.precondition,h))return m;const _=u.value.clone(),E=Ug(u.fieldTransforms,g,h);return _.setAll(E),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null}(s,e,t,i):s instanceof Ss?function(u,h,m,g){if(!Ru(u.precondition,h))return m;const _=Ug(u.fieldTransforms,g,h),E=h.data;return E.setAll(Lv(u)),E.setAll(_),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(k=>k.field))}(s,e,t,i):function(u,h,m){return Ru(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m}(s,e,t)}function mx(s,e){let t=null;for(const i of s.fieldTransforms){const o=e.data.field(i.field),u=Pv(i.transform,o||null);u!=null&&(t===null&&(t=ln.empty()),t.set(i.field,u))}return t||null}function jg(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&go(i,o,(u,h)=>dx(u,h))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Ya extends cc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ss extends cc{constructor(e,t,i,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Lv(s){const e=new Map;return s.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=s.data.field(t);e.set(t,i)}}),e}function Fg(s,e,t){const i=new Map;Ke(s.length===t.length);for(let o=0;o<t.length;o++){const u=s[o],h=u.transform,m=e.data.field(u.field);i.set(u.field,hx(h,m,t[o]))}return i}function Ug(s,e,t){const i=new Map;for(const o of s){const u=o.transform,h=t.data.field(o.field);i.set(o.field,cx(u,h,e))}return i}class rf extends cc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gx extends cc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&px(u,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Na(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Na(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=kv();return this.mutations.forEach(o=>{const u=e.get(o.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=t.has(o.key)?null:m;const g=Vv(h,m);g!==null&&i.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(be.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Oe())}isEqual(e){return this.batchId===e.batchId&&go(this.mutations,e.mutations,(t,i)=>jg(t,i))&&go(this.baseMutations,e.baseMutations,(t,i)=>jg(t,i))}}class sf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Ke(e.mutations.length===i.length);let o=function(){return ix}();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,i[h].version);return new sf(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,Ue;function wx(s){switch(s){default:return Ne();case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0}}function Ov(s){if(s===void 0)return Lr("GRPC error has no .code"),G.UNKNOWN;switch(s){case mt.OK:return G.OK;case mt.CANCELLED:return G.CANCELLED;case mt.UNKNOWN:return G.UNKNOWN;case mt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case mt.INTERNAL:return G.INTERNAL;case mt.UNAVAILABLE:return G.UNAVAILABLE;case mt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case mt.NOT_FOUND:return G.NOT_FOUND;case mt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case mt.ABORTED:return G.ABORTED;case mt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case mt.DATA_LOSS:return G.DATA_LOSS;default:return Ne()}}(Ue=mt||(mt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=new ni([4294967295,4294967295],0);function zg(s){const e=Ex().encode(s),t=new ov;return t.update(e),new Uint8Array(t.digest())}function Bg(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ni([t,i],0),new ni([o,u],0)]}class of{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Sa(`Invalid padding: ${t}`);if(i<0)throw new Sa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Sa(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Sa(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ni.fromNumber(this.Ie)}Ee(e,t,i){let o=e.add(t.multiply(ni.fromNumber(i)));return o.compare(Tx)===1&&(o=new ni([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=zg(e),[i,o]=Bg(t);for(let u=0;u<this.hashCount;u++){const h=this.Ee(i,o,u);if(!this.de(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new of(u,o,t);return i.forEach(m=>h.insert(m)),h}insert(e){if(this.Ie===0)return;const t=zg(e),[i,o]=Bg(t);for(let u=0;u<this.hashCount;u++){const h=this.Ee(i,o,u);this.Ae(h)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Sa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,t,i,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Xa.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new hc(be.min(),o,new it(He),Or(),Oe())}}class Xa{constructor(e,t,i,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Xa(i,t,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,t,i,o){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=o}}class Mv{constructor(e,t){this.targetId=e,this.me=t}}class jv{constructor(e,t,i=Ot.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class $g{constructor(){this.fe=0,this.ge=qg(),this.pe=Ot.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Oe(),t=Oe(),i=Oe();return this.ge.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Ne()}}),new Xa(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=qg()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ke(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Ix{constructor(e){this.Le=e,this.Be=new Map,this.ke=Or(),this.qe=Hg(),this.Qe=new it(He)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:Ne()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,o)=>{this.ze(o)&&t(o)})}He(e){const t=e.targetId,i=e.me.count,o=this.Je(t);if(o){const u=o.target;if(xd(u))if(i===0){const h=new Te(u.path);this.Ue(t,h,$t.newNoDocument(h,be.min()))}else Ke(i===1);else{const h=this.Ye(t);if(h!==i){const m=this.Ze(e),g=m?this.Xe(m,e,h):1;if(g!==0){this.je(t);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,_)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:u=0}=t;let h,m;try{h=oi(i).toUint8Array()}catch(g){if(g instanceof mv)return mo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new of(h,o,u)}catch(g){return mo(g instanceof Sa?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.Ie===0?null:m}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let o=0;return i.forEach(u=>{const h=this.Le.tt(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.Ue(t,u,null),o++)}),o}rt(e){const t=new Map;this.Be.forEach((u,h)=>{const m=this.Je(h);if(m){if(u.current&&xd(m.target)){const g=new Te(m.target.path);this.ke.get(g)!==null||this.it(h,g)||this.Ue(h,g,$t.newNoDocument(g,e))}u.be&&(t.set(h,u.ve()),u.Ce())}});let i=Oe();this.qe.forEach((u,h)=>{let m=!0;h.forEachWhile(g=>{const _=this.Je(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(i=i.add(u))}),this.ke.forEach((u,h)=>h.setReadTime(e));const o=new hc(e,t,this.Qe,this.ke,i);return this.ke=Or(),this.qe=Hg(),this.Qe=new it(He),o}$e(e,t){if(!this.ze(e))return;const i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,t)?o.Fe(t,1):o.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new $g,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Vt(He),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||ye("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new $g),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Hg(){return new it(Te.comparator)}function qg(){return new it(Te.comparator)}const xx={asc:"ASCENDING",desc:"DESCENDING"},Sx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Cx={and:"AND",or:"OR"};class Ax{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ad(s,e){return s.useProto3Json||ic(e)?e:{value:e}}function Ku(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Fv(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function kx(s,e){return Ku(s,e.toTimestamp())}function ar(s){return Ke(!!s),be.fromTimestamp(function(t){const i=Is(t);return new Tt(i.seconds,i.nanos)}(s))}function af(s,e){return kd(s,e).canonicalString()}function kd(s,e){const t=function(o){return new et(["projects",o.projectId,"databases",o.database])}(s).child("documents");return e===void 0?t:t.child(e)}function Uv(s){const e=et.fromString(s);return Ke(qv(e)),e}function Rd(s,e){return af(s.databaseId,e.path)}function ld(s,e){const t=Uv(e);if(t.get(1)!==s.databaseId.projectId)throw new de(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new de(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new Te(Bv(t))}function zv(s,e){return af(s.databaseId,e)}function Rx(s){const e=Uv(s);return e.length===4?et.emptyPath():Bv(e)}function Pd(s){return new et(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Bv(s){return Ke(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function Wg(s,e,t){return{name:Rd(s,e),fields:t.value.mapValue.fields}}function Px(s,e){let t;if("targetChange"in e){e.targetChange;const i=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(_,E){return _.useProto3Json?(Ke(E===void 0||typeof E=="string"),Ot.fromBase64String(E||"")):(Ke(E===void 0||E instanceof Buffer||E instanceof Uint8Array),Ot.fromUint8Array(E||new Uint8Array))}(s,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&function(_){const E=_.code===void 0?G.UNKNOWN:Ov(_.code);return new de(E,_.message||"")}(h);t=new jv(i,o,u,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=ld(s,i.document.name),u=ar(i.document.updateTime),h=i.document.createTime?ar(i.document.createTime):be.min(),m=new ln({mapValue:{fields:i.document.fields}}),g=$t.newFoundDocument(o,u,h,m),_=i.targetIds||[],E=i.removedTargetIds||[];t=new Pu(_,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=ld(s,i.document),u=i.readTime?ar(i.readTime):be.min(),h=$t.newNoDocument(o,u),m=i.removedTargetIds||[];t=new Pu([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=ld(s,i.document),u=i.removedTargetIds||[];t=new Pu([],u,o,null)}else{if(!("filter"in e))return Ne();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:u}=i,h=new _x(o,u),m=i.targetId;t=new Mv(m,h)}}return t}function Nx(s,e){let t;if(e instanceof Ya)t={update:Wg(s,e.key,e.value)};else if(e instanceof rf)t={delete:Rd(s,e.key)};else if(e instanceof Ss)t={update:Wg(s,e.key,e.data),updateMask:Ux(e.fieldMask)};else{if(!(e instanceof gx))return Ne();t={verify:Rd(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(u,h){const m=h.transform;if(m instanceof qu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof ja)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Fa)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Wu)return{fieldPath:h.field.canonicalString(),increment:m.Pe};throw Ne()}(0,i))),e.precondition.isNone||(t.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:kx(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ne()}(s,e.precondition)),t}function bx(s,e){return s&&s.length>0?(Ke(e!==void 0),s.map(t=>function(o,u){let h=o.updateTime?ar(o.updateTime):ar(u);return h.isEqual(be.min())&&(h=ar(u)),new fx(h,o.transformResults||[])}(t,e))):[]}function Dx(s,e){return{documents:[zv(s,e.path)]}}function Vx(s,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=zv(s,o);const u=function(_){if(_.length!==0)return Hv(Wn.create(_,"and"))}(e.filters);u&&(t.structuredQuery.where=u);const h=function(_){if(_.length!==0)return _.map(E=>function(D){return{field:io(D.field),direction:Mx(D.dir)}}(E))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const m=Ad(s,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(e.endAt)),{_t:t,parent:o}}function Lx(s){let e=Rx(s.parent);const t=s.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Ke(i===1);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];t.where&&(u=function(k){const D=$v(k);return D instanceof Wn&&_v(D)?D.getFilters():[D]}(t.where));let h=[];t.orderBy&&(h=function(k){return k.map(D=>function($){return new Hu(oo($.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}($.direction))}(D))}(t.orderBy));let m=null;t.limit&&(m=function(k){let D;return D=typeof k=="object"?k.value:k,ic(D)?null:D}(t.limit));let g=null;t.startAt&&(g=function(k){const D=!!k.before,U=k.values||[];return new $u(U,D)}(t.startAt));let _=null;return t.endAt&&(_=function(k){const D=!k.before,U=k.values||[];return new $u(U,D)}(t.endAt)),ex(e,o,h,u,m,"F",g,_)}function Ox(s,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function $v(s){return s.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=oo(t.unaryFilter.field);return gt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=oo(t.unaryFilter.field);return gt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=oo(t.unaryFilter.field);return gt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=oo(t.unaryFilter.field);return gt.create(h,"!=",{nullValue:"NULL_VALUE"});default:return Ne()}}(s):s.fieldFilter!==void 0?function(t){return gt.create(oo(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ne()}}(t.fieldFilter.op),t.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(t){return Wn.create(t.compositeFilter.filters.map(i=>$v(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ne()}}(t.compositeFilter.op))}(s):Ne()}function Mx(s){return xx[s]}function jx(s){return Sx[s]}function Fx(s){return Cx[s]}function io(s){return{fieldPath:s.canonicalString()}}function oo(s){return Dt.fromServerFormat(s.fieldPath)}function Hv(s){return s instanceof gt?function(t){if(t.op==="=="){if(bg(t.value))return{unaryFilter:{field:io(t.field),op:"IS_NAN"}};if(Ng(t.value))return{unaryFilter:{field:io(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(bg(t.value))return{unaryFilter:{field:io(t.field),op:"IS_NOT_NAN"}};if(Ng(t.value))return{unaryFilter:{field:io(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:io(t.field),op:jx(t.op),value:t.value}}}(s):s instanceof Wn?function(t){const i=t.getFilters().map(o=>Hv(o));return i.length===1?i[0]:{compositeFilter:{op:Fx(t.op),filters:i}}}(s):Ne()}function Ux(s){const e=[];return s.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function qv(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,t,i,o,u=be.min(),h=be.min(),m=Ot.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new ms(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e){this.ct=e}}function Bx(s){const e=Lx({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Cd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(){this.un=new Hx}addToCollectionParentIndex(e,t){return this.un.add(t),J.resolve()}getCollectionParents(e,t){return J.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return J.resolve()}deleteFieldIndex(e,t){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,t){return J.resolve()}getDocumentsMatchingTarget(e,t){return J.resolve(null)}getIndexType(e,t){return J.resolve(0)}getFieldIndexes(e,t){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,t){return J.resolve(Ts.min())}getMinOffsetFromCollectionGroup(e,t){return J.resolve(Ts.min())}updateCollectionGroup(e,t,i){return J.resolve()}updateIndexEntries(e,t){return J.resolve()}}class Hx{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Vt(et.comparator),u=!o.has(i);return this.index[t]=o.add(i),u}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Vt(et.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new _o(0)}static kn(){return new _o(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(){this.changes=new So(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?J.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(i!==null&&Na(i.mutation,o,vn.empty(),Tt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Oe()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Oe()){const o=ti();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,i).next(u=>{let h=xa();return u.forEach((m,g)=>{h=h.insert(m,g.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const i=ti();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Oe()))}populateOverlays(e,t,i){const o=[];return i.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((h,m)=>{t.set(h,m)})})}computeViews(e,t,i,o){let u=Or();const h=Pa(),m=function(){return Pa()}();return t.forEach((g,_)=>{const E=i.get(_.key);o.has(_.key)&&(E===void 0||E.mutation instanceof Ss)?u=u.insert(_.key,_):E!==void 0?(h.set(_.key,E.mutation.getFieldMask()),Na(E.mutation,_,E.mutation.getFieldMask(),Tt.now())):h.set(_.key,vn.empty())}),this.recalculateAndSaveOverlays(e,u).next(g=>(g.forEach((_,E)=>h.set(_,E)),t.forEach((_,E)=>{var k;return m.set(_,new Wx(E,(k=h.get(_))!==null&&k!==void 0?k:null))}),m))}recalculateAndSaveOverlays(e,t){const i=Pa();let o=new it((h,m)=>h-m),u=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const m of h)m.keys().forEach(g=>{const _=t.get(g);if(_===null)return;let E=i.get(g)||vn.empty();E=m.applyToLocalView(_,E),i.set(g,E);const k=(o.get(m.batchId)||Oe()).add(g);o=o.insert(m.batchId,k)})}).next(()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),_=g.key,E=g.value,k=kv();E.forEach(D=>{if(!u.has(D)){const U=Vv(t.get(D),i.get(D));U!==null&&k.set(D,U),u=u.add(D)}}),h.push(this.documentOverlayCache.saveOverlays(e,_,k))}return J.waitFor(h)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,o){return function(h){return Te.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Iv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next(u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-u.size):J.resolve(ti());let m=-1,g=u;return h.next(_=>J.forEach(_,(E,k)=>(m<k.largestBatchId&&(m=k.largestBatchId),u.get(E)?J.resolve():this.remoteDocumentCache.getEntry(e,E).next(D=>{g=g.insert(E,D)}))).next(()=>this.populateOverlays(e,_,u)).next(()=>this.computeViews(e,g,_,Oe())).next(E=>({batchId:m,changes:Av(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next(i=>{let o=xa();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const u=t.collectionGroup;let h=xa();return this.indexManager.getCollectionParents(e,u).next(m=>J.forEach(m,g=>{const _=function(k,D){return new Qa(D,null,k.explicitOrderBy.slice(),k.filters.slice(),k.limit,k.limitType,k.startAt,k.endAt)}(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,_,i,o).next(E=>{E.forEach((k,D)=>{h=h.insert(k,D)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,i,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,u,o))).next(h=>{u.forEach((g,_)=>{const E=_.getKey();h.get(E)===null&&(h=h.insert(E,$t.newInvalidDocument(E)))});let m=xa();return h.forEach((g,_)=>{const E=u.get(g);E!==void 0&&Na(E.mutation,_,vn.empty(),Tt.now()),lc(t,_)&&(m=m.insert(g,_))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return J.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:ar(o.createTime)}}(t)),J.resolve()}getNamedQuery(e,t){return J.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(o){return{name:o.name,query:Bx(o.bundledQuery),readTime:ar(o.readTime)}}(t)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(){this.overlays=new it(Te.comparator),this.Ir=new Map}getOverlay(e,t){return J.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ti();return J.forEach(t,o=>this.getOverlay(e,o).next(u=>{u!==null&&i.set(o,u)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((o,u)=>{this.ht(e,t,u)}),J.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Ir.get(i);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ir.delete(i)),J.resolve()}getOverlaysForCollection(e,t,i){const o=ti(),u=t.length+1,h=new Te(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,_=g.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===u&&g.largestBatchId>i&&o.set(g.getKey(),g)}return J.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let u=new it((_,E)=>_-E);const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>i){let E=u.get(_.largestBatchId);E===null&&(E=ti(),u=u.insert(_.largestBatchId,E)),E.set(_.getKey(),_)}}const m=ti(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((_,E)=>m.set(_,E)),!(m.size()>=o)););return J.resolve(m)}ht(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.Ir.get(o.largestBatchId).delete(i.key);this.Ir.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new vx(t,i));let u=this.Ir.get(t);u===void 0&&(u=Oe(),this.Ir.set(t,u)),this.Ir.set(t,u.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(){this.Tr=new Vt(At.Er),this.dr=new Vt(At.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const i=new At(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Vr(new At(e,t))}mr(e,t){e.forEach(i=>this.removeReference(i,t))}gr(e){const t=new Te(new et([])),i=new At(t,e),o=new At(t,e+1),u=[];return this.dr.forEachInRange([i,o],h=>{this.Vr(h),u.push(h.key)}),u}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Te(new et([])),i=new At(t,e),o=new At(t,e+1);let u=Oe();return this.dr.forEachInRange([i,o],h=>{u=u.add(h.key)}),u}containsKey(e){const t=new At(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class At{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Te.comparator(e.key,t.key)||He(e.wr,t.wr)}static Ar(e,t){return He(e.wr,t.wr)||Te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Vt(At.Er)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const u=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new yx(u,t,i,o);this.mutationQueue.push(h);for(const m of o)this.br=this.br.add(new At(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return J.resolve(h)}lookupMutationBatch(e,t){return J.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.vr(i),u=o<0?0:o;return J.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new At(t,0),o=new At(t,Number.POSITIVE_INFINITY),u=[];return this.br.forEachInRange([i,o],h=>{const m=this.Dr(h.wr);u.push(m)}),J.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Vt(He);return t.forEach(o=>{const u=new At(o,0),h=new At(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([u,h],m=>{i=i.add(m.wr)})}),J.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let u=i;Te.isDocumentKey(u)||(u=u.child(""));const h=new At(new Te(u),0);let m=new Vt(He);return this.br.forEachWhile(g=>{const _=g.key.path;return!!i.isPrefixOf(_)&&(_.length===o&&(m=m.add(g.wr)),!0)},h),J.resolve(this.Cr(m))}Cr(e){const t=[];return e.forEach(i=>{const o=this.Dr(i);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Ke(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return J.forEach(t.mutations,o=>{const u=new At(o.key,t.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,t){const i=new At(t,0),o=this.br.firstAfterOrEqual(i);return J.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e){this.Mr=e,this.docs=function(){return new it(Te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),u=o?o.size:0,h=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return J.resolve(i?i.document.mutableCopy():$t.newInvalidDocument(t))}getEntries(e,t){let i=Or();return t.forEach(o=>{const u=this.docs.get(o);i=i.insert(o,u?u.document.mutableCopy():$t.newInvalidDocument(o))}),J.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let u=Or();const h=t.path,m=new Te(h.child("")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:_,value:{document:E}}=g.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||LI(VI(E),i)<=0||(o.has(E.key)||lc(t,E))&&(u=u.insert(E.key,E.mutableCopy()))}return J.resolve(u)}getAllFromCollectionGroup(e,t,i,o){Ne()}Or(e,t){return J.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new Zx(this)}getSize(e){return J.resolve(this.size)}}class Zx extends qx{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?t.push(this.cr.addEntry(e,o)):this.cr.removeEntry(i)}),J.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e){this.persistence=e,this.Nr=new So(t=>ef(t),tf),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.Lr=0,this.Br=new lf,this.targetCount=0,this.kr=_o.Bn()}forEachTarget(e,t){return this.Nr.forEach((i,o)=>t(o)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),J.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new _o(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,J.resolve()}updateTargetData(e,t){return this.Kn(t),J.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,t,i){let o=0;const u=[];return this.Nr.forEach((h,m)=>{m.sequenceNumber<=t&&i.get(m.targetId)===null&&(this.Nr.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),J.waitFor(u).next(()=>o)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,t){const i=this.Nr.get(t)||null;return J.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),J.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(h=>{u.push(o.markPotentiallyOrphaned(e,h))}),J.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),J.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Br.yr(t);return J.resolve(i)}containsKey(e,t){return J.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Yd(0),this.Kr=!1,this.Kr=!0,this.$r=new Yx,this.referenceDelegate=e(this),this.Ur=new eS(this),this.indexManager=new $x,this.remoteDocumentCache=function(o){return new Jx(o)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new zx(t),this.Gr=new Gx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Qx,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new Xx(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){ye("MemoryPersistence","Starting transaction:",e);const o=new nS(this.Qr.next());return this.referenceDelegate.zr(),i(o).next(u=>this.referenceDelegate.jr(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Hr(e,t){return J.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,t)))}}class nS extends MI{constructor(e){super(),this.currentSequenceNumber=e}}class uf{constructor(e){this.persistence=e,this.Jr=new lf,this.Yr=null}static Zr(e){return new uf(e)}get Xr(){if(this.Yr)return this.Yr;throw Ne()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),J.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),J.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),J.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(o=>this.Xr.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Xr.add(u.toString()))}).next(()=>i.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.Xr,i=>{const o=Te.fromPath(i);return this.ei(e,o).next(u=>{u||t.removeEntry(o,be.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return J.or([()=>J.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=o}static Wi(e,t){let i=Oe(),o=Oe();for(const u of t.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new cf(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return ow()?8:jI(Wt())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,o){const u={result:null};return this.Yi(e,t).next(h=>{u.result=h}).next(()=>{if(!u.result)return this.Zi(e,t,o,i).next(h=>{u.result=h})}).next(()=>{if(u.result)return;const h=new rS;return this.Xi(e,t,h).next(m=>{if(u.result=m,this.zi)return this.es(e,t,h,m.size)})}).next(()=>u.result)}es(e,t,i,o){return i.documentReadCount<this.ji?(Ta()<=je.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",so(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),J.resolve()):(Ta()<=je.DEBUG&&ye("QueryEngine","Query:",so(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Hi*o?(Ta()<=je.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",so(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,or(t))):J.resolve())}Yi(e,t){if(Og(t))return J.resolve(null);let i=or(t);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Cd(t,null,"F"),i=or(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(u=>{const h=Oe(...u);return this.Ji.getDocuments(e,h).next(m=>this.indexManager.getMinOffset(e,i).next(g=>{const _=this.ts(t,m);return this.ns(t,_,h,g.readTime)?this.Yi(e,Cd(t,null,"F")):this.rs(e,_,t,g)}))})))}Zi(e,t,i,o){return Og(t)||o.isEqual(be.min())?J.resolve(null):this.Ji.getDocuments(e,i).next(u=>{const h=this.ts(t,u);return this.ns(t,h,i,o)?J.resolve(null):(Ta()<=je.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),so(t)),this.rs(e,h,t,DI(o,-1)).next(m=>m))})}ts(e,t){let i=new Vt(Sv(e));return t.forEach((o,u)=>{lc(e,u)&&(i=i.add(u))}),i}ns(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Xi(e,t,i){return Ta()<=je.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",so(t)),this.Ji.getDocumentsMatchingQuery(e,t,Ts.min(),i)}rs(e,t,i,o){return this.Ji.getDocumentsMatchingQuery(e,i,o).next(u=>(t.forEach(h=>{u=u.insert(h.key,h)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,t,i,o){this.persistence=e,this.ss=t,this.serializer=o,this.os=new it(He),this._s=new So(u=>ef(u),tf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Kx(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function oS(s,e,t,i){return new iS(s,e,t,i)}async function Wv(s,e){const t=De(s);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next(u=>(o=u,t.ls(e),t.mutationQueue.getAllMutationBatches(i))).next(u=>{const h=[],m=[];let g=Oe();for(const _ of o){h.push(_.batchId);for(const E of _.mutations)g=g.add(E.key)}for(const _ of u){m.push(_.batchId);for(const E of _.mutations)g=g.add(E.key)}return t.localDocuments.getDocuments(i,g).next(_=>({hs:_,removedBatchIds:h,addedBatchIds:m}))})})}function aS(s,e){const t=De(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),u=t.cs.newChangeBuffer({trackRemovals:!0});return function(m,g,_,E){const k=_.batch,D=k.keys();let U=J.resolve();return D.forEach($=>{U=U.next(()=>E.getEntry(g,$)).next(W=>{const O=_.docVersions.get($);Ke(O!==null),W.version.compareTo(O)<0&&(k.applyToRemoteDocument(W,_),W.isValidDocument()&&(W.setReadTime(_.commitVersion),E.addEntry(W)))})}),U.next(()=>m.mutationQueue.removeMutationBatch(g,k))}(t,i,e,u).next(()=>u.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(m){let g=Oe();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(g=g.add(m.batch.mutations[_].key));return g}(e))).next(()=>t.localDocuments.getDocuments(i,o))})}function Kv(s){const e=De(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function lS(s,e){const t=De(s),i=e.snapshotVersion;let o=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=t.cs.newChangeBuffer({trackRemovals:!0});o=t.os;const m=[];e.targetChanges.forEach((E,k)=>{const D=o.get(k);if(!D)return;m.push(t.Ur.removeMatchingKeys(u,E.removedDocuments,k).next(()=>t.Ur.addMatchingKeys(u,E.addedDocuments,k)));let U=D.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(k)!==null?U=U.withResumeToken(Ot.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):E.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(E.resumeToken,i)),o=o.insert(k,U),function(W,O,q){return W.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=3e8?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(D,U,E)&&m.push(t.Ur.updateTargetData(u,U))});let g=Or(),_=Oe();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,E))}),m.push(uS(u,h,e.documentUpdates).next(E=>{g=E.Ps,_=E.Is})),!i.isEqual(be.min())){const E=t.Ur.getLastRemoteSnapshotVersion(u).next(k=>t.Ur.setTargetsMetadata(u,u.currentSequenceNumber,i));m.push(E)}return J.waitFor(m).next(()=>h.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,g,_)).next(()=>g)}).then(u=>(t.os=o,u))}function uS(s,e,t){let i=Oe(),o=Oe();return t.forEach(u=>i=i.add(u)),e.getEntries(s,i).next(u=>{let h=Or();return t.forEach((m,g)=>{const _=u.get(m);g.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(be.min())?(e.removeEntry(m,g.readTime),h=h.insert(m,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(g),h=h.insert(m,g)):ye("LocalStore","Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",g.version)}),{Ps:h,Is:o}})}function cS(s,e){const t=De(s);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function hS(s,e){const t=De(s);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return t.Ur.getTargetData(i,e).next(u=>u?(o=u,J.resolve(o)):t.Ur.allocateTargetId(i).next(h=>(o=new ms(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=t.os.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i})}async function Nd(s,e,t){const i=De(s),o=i.os.get(e),u=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",u,h=>i.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!Ga(h))throw h;ye("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}i.os=i.os.remove(e),i._s.delete(o.target)}function Kg(s,e,t){const i=De(s);let o=be.min(),u=Oe();return i.persistence.runTransaction("Execute query","readwrite",h=>function(g,_,E){const k=De(g),D=k._s.get(E);return D!==void 0?J.resolve(k.os.get(D)):k.Ur.getTargetData(_,E)}(i,h,or(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(h,m.targetId).next(g=>{u=g})}).next(()=>i.ss.getDocumentsMatchingQuery(h,e,t?o:be.min(),t?u:Oe())).next(m=>(dS(i,nx(e),m),{documents:m,Ts:u})))}function dS(s,e,t){let i=s.us.get(e)||be.min();t.forEach((o,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)}),s.us.set(e,i)}class Gg{constructor(){this.activeTargetIds=lx()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fS{constructor(){this.so=new Gg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Gg,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ye("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ye("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tu=null;function ud(){return Tu===null?Tu=function(){return 268435456+Math.round(2147483648*Math.random())}():Tu++,"0x"+Tu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt="WebChannelConnection";class yS extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${o}/databases/${u}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${u}`}get Fo(){return!1}Mo(t,i,o,u,h){const m=ud(),g=this.xo(t,i.toUriEncodedString());ye("RestConnection",`Sending RPC '${t}' ${m}:`,g,o);const _={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(_,u,h),this.No(t,g,_,o).then(E=>(ye("RestConnection",`Received RPC '${t}' ${m}: `,E),E),E=>{throw mo("RestConnection",`RPC '${t}' ${m} failed with error: `,E,"url: ",g,"request:",o),E})}Lo(t,i,o,u,h,m){return this.Mo(t,i,o,u,h)}Oo(t,i,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xo}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((u,h)=>t[h]=u),o&&o.headers.forEach((u,h)=>t[h]=u)}xo(t,i){const o=mS[t];return`${this.Do}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,o){const u=ud();return new Promise((h,m)=>{const g=new av;g.setWithCredentials(!0),g.listenOnce(lv.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Au.NO_ERROR:const E=g.getResponseJson();ye(zt,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),h(E);break;case Au.TIMEOUT:ye(zt,`RPC '${e}' ${u} timed out`),m(new de(G.DEADLINE_EXCEEDED,"Request time out"));break;case Au.HTTP_ERROR:const k=g.getStatus();if(ye(zt,`RPC '${e}' ${u} failed with status:`,k,"response text:",g.getResponseText()),k>0){let D=g.getResponseJson();Array.isArray(D)&&(D=D[0]);const U=D==null?void 0:D.error;if(U&&U.status&&U.message){const $=function(O){const q=O.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(q)>=0?q:G.UNKNOWN}(U.status);m(new de($,U.message))}else m(new de(G.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new de(G.UNAVAILABLE,"Connection failed."));break;default:Ne()}}finally{ye(zt,`RPC '${e}' ${u} completed.`)}});const _=JSON.stringify(o);ye(zt,`RPC '${e}' ${u} sending request:`,o),g.send(t,"POST",_,i,15)})}Bo(e,t,i){const o=ud(),u=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=hv(),m=cv(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(g.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Oo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const E=u.join("");ye(zt,`Creating RPC '${e}' stream ${o}: ${E}`,g);const k=h.createWebChannel(E,g);let D=!1,U=!1;const $=new gS({Io:O=>{U?ye(zt,`Not sending because RPC '${e}' stream ${o} is closed:`,O):(D||(ye(zt,`Opening RPC '${e}' stream ${o} transport.`),k.open(),D=!0),ye(zt,`RPC '${e}' stream ${o} sending:`,O),k.send(O))},To:()=>k.close()}),W=(O,q,Y)=>{O.listen(q,H=>{try{Y(H)}catch(ie){setTimeout(()=>{throw ie},0)}})};return W(k,Ia.EventType.OPEN,()=>{U||(ye(zt,`RPC '${e}' stream ${o} transport opened.`),$.yo())}),W(k,Ia.EventType.CLOSE,()=>{U||(U=!0,ye(zt,`RPC '${e}' stream ${o} transport closed`),$.So())}),W(k,Ia.EventType.ERROR,O=>{U||(U=!0,mo(zt,`RPC '${e}' stream ${o} transport errored:`,O),$.So(new de(G.UNAVAILABLE,"The operation could not be completed")))}),W(k,Ia.EventType.MESSAGE,O=>{var q;if(!U){const Y=O.data[0];Ke(!!Y);const H=Y,ie=H.error||((q=H[0])===null||q===void 0?void 0:q.error);if(ie){ye(zt,`RPC '${e}' stream ${o} received error:`,ie);const fe=ie.status;let te=function(S){const P=mt[S];if(P!==void 0)return Ov(P)}(fe),R=ie.message;te===void 0&&(te=G.INTERNAL,R="Unknown error status: "+fe+" with message "+ie.message),U=!0,$.So(new de(te,R)),k.close()}else ye(zt,`RPC '${e}' stream ${o} received:`,Y),$.bo(Y)}}),W(m,uv.STAT_EVENT,O=>{O.stat===wd.PROXY?ye(zt,`RPC '${e}' stream ${o} detected buffering proxy`):O.stat===wd.NOPROXY&&ye(zt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{$.wo()},0),$}}function cd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(s){return new Ax(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,t,i=1e3,o=1.5,u=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=o,this.Qo=u,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),o=Math.max(0,t-i);o>0&&ye("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e,t,i,o,u,h,m,g){this.ui=e,this.Ho=i,this.Jo=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Gv(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===G.RESOURCE_EXHAUSTED?(Lr(t.toString()),Lr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.Yo===t&&this.P_(i,o)},i=>{e(()=>{const o=new de(G.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(o)})})}P_(e,t){const i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(o=>{i(()=>this.I_(o))}),this.stream.onMessage(o=>{i(()=>++this.e_==1?this.E_(o):this.onNext(o))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ye("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(ye("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vS extends Qv{constructor(e,t,i,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=u}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=Px(this.serializer,e),i=function(u){if(!("targetChange"in u))return be.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?be.min():h.readTime?ar(h.readTime):be.min()}(e);return this.listener.d_(t,i)}A_(e){const t={};t.database=Pd(this.serializer),t.addTarget=function(u,h){let m;const g=h.target;if(m=xd(g)?{documents:Dx(u,g)}:{query:Vx(u,g)._t},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=Fv(u,h.resumeToken);const _=Ad(u,h.expectedCount);_!==null&&(m.expectedCount=_)}else if(h.snapshotVersion.compareTo(be.min())>0){m.readTime=Ku(u,h.snapshotVersion.toTimestamp());const _=Ad(u,h.expectedCount);_!==null&&(m.expectedCount=_)}return m}(this.serializer,e);const i=Ox(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){const t={};t.database=Pd(this.serializer),t.removeTarget=e,this.a_(t)}}class _S extends Qv{constructor(e,t,i,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=u}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=bx(e.writeResults,e.commitTime),i=ar(e.commitTime);return this.listener.g_(i,t)}p_(){const e={};e.database=Pd(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>Nx(this.serializer,i))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS extends class{}{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new de(G.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Mo(e,kd(t,i),o,u,h)).catch(u=>{throw u.name==="FirebaseError"?(u.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new de(G.UNKNOWN,u.toString())})}Lo(e,t,i,o,u){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.connection.Lo(e,kd(t,i),o,h,m,u)).catch(h=>{throw h.name==="FirebaseError"?(h.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new de(G.UNKNOWN,h.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class ES{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Lr(t),this.D_=!1):ye("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,t,i,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=u,this.k_._o(h=>{i.enqueueAndForget(async()=>{hi(this)&&(ye("RemoteStore","Restarting streams for network reachability change."),await async function(g){const _=De(g);_.L_.add(4),await Ja(_),_.q_.set("Unknown"),_.L_.delete(4),await fc(_)}(this))})}),this.q_=new ES(i,o)}}async function fc(s){if(hi(s))for(const e of s.B_)await e(!0)}async function Ja(s){for(const e of s.B_)await e(!1)}function Yv(s,e){const t=De(s);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),pf(t)?ff(t):Co(t).r_()&&df(t,e))}function hf(s,e){const t=De(s),i=Co(t);t.N_.delete(e),i.r_()&&Xv(t,e),t.N_.size===0&&(i.r_()?i.o_():hi(t)&&t.q_.set("Unknown"))}function df(s,e){if(s.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Co(s).A_(e)}function Xv(s,e){s.Q_.xe(e),Co(s).R_(e)}function ff(s){s.Q_=new Ix({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>s.N_.get(e)||null,tt:()=>s.datastore.serializer.databaseId}),Co(s).start(),s.q_.v_()}function pf(s){return hi(s)&&!Co(s).n_()&&s.N_.size>0}function hi(s){return De(s).L_.size===0}function Jv(s){s.Q_=void 0}async function IS(s){s.q_.set("Online")}async function xS(s){s.N_.forEach((e,t)=>{df(s,e)})}async function SS(s,e){Jv(s),pf(s)?(s.q_.M_(e),ff(s)):s.q_.set("Unknown")}async function CS(s,e,t){if(s.q_.set("Online"),e instanceof jv&&e.state===2&&e.cause)try{await async function(o,u){const h=u.cause;for(const m of u.targetIds)o.N_.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.N_.delete(m),o.Q_.removeTarget(m))}(s,e)}catch(i){ye("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Gu(s,i)}else if(e instanceof Pu?s.Q_.Ke(e):e instanceof Mv?s.Q_.He(e):s.Q_.We(e),!t.isEqual(be.min()))try{const i=await Kv(s.localStore);t.compareTo(i)>=0&&await function(u,h){const m=u.Q_.rt(h);return m.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.N_.get(_);E&&u.N_.set(_,E.withResumeToken(g.resumeToken,h))}}),m.targetMismatches.forEach((g,_)=>{const E=u.N_.get(g);if(!E)return;u.N_.set(g,E.withResumeToken(Ot.EMPTY_BYTE_STRING,E.snapshotVersion)),Xv(u,g);const k=new ms(E.target,g,_,E.sequenceNumber);df(u,k)}),u.remoteSyncer.applyRemoteEvent(m)}(s,t)}catch(i){ye("RemoteStore","Failed to raise snapshot:",i),await Gu(s,i)}}async function Gu(s,e,t){if(!Ga(e))throw e;s.L_.add(1),await Ja(s),s.q_.set("Offline"),t||(t=()=>Kv(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{ye("RemoteStore","Retrying IndexedDB access"),await t(),s.L_.delete(1),await fc(s)})}function Zv(s,e){return e().catch(t=>Gu(s,t,e))}async function pc(s){const e=De(s),t=xs(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;AS(e);)try{const o=await cS(e.localStore,i);if(o===null){e.O_.length===0&&t.o_();break}i=o.batchId,kS(e,o)}catch(o){await Gu(e,o)}e_(e)&&t_(e)}function AS(s){return hi(s)&&s.O_.length<10}function kS(s,e){s.O_.push(e);const t=xs(s);t.r_()&&t.V_&&t.m_(e.mutations)}function e_(s){return hi(s)&&!xs(s).n_()&&s.O_.length>0}function t_(s){xs(s).start()}async function RS(s){xs(s).p_()}async function PS(s){const e=xs(s);for(const t of s.O_)e.m_(t.mutations)}async function NS(s,e,t){const i=s.O_.shift(),o=sf.from(i,e,t);await Zv(s,()=>s.remoteSyncer.applySuccessfulWrite(o)),await pc(s)}async function bS(s,e){e&&xs(s).V_&&await async function(i,o){if(function(h){return wx(h)&&h!==G.ABORTED}(o.code)){const u=i.O_.shift();xs(i).s_(),await Zv(i,()=>i.remoteSyncer.rejectFailedWrite(u.batchId,o)),await pc(i)}}(s,e),e_(s)&&t_(s)}async function Yg(s,e){const t=De(s);t.asyncQueue.verifyOperationInProgress(),ye("RemoteStore","RemoteStore received new credentials");const i=hi(t);t.L_.add(3),await Ja(t),i&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await fc(t)}async function DS(s,e){const t=De(s);e?(t.L_.delete(2),await fc(t)):e||(t.L_.add(2),await Ja(t),t.q_.set("Unknown"))}function Co(s){return s.K_||(s.K_=function(t,i,o){const u=De(t);return u.w_(),new vS(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(s.datastore,s.asyncQueue,{Eo:IS.bind(null,s),Ro:xS.bind(null,s),mo:SS.bind(null,s),d_:CS.bind(null,s)}),s.B_.push(async e=>{e?(s.K_.s_(),pf(s)?ff(s):s.q_.set("Unknown")):(await s.K_.stop(),Jv(s))})),s.K_}function xs(s){return s.U_||(s.U_=function(t,i,o){const u=De(t);return u.w_(),new _S(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(s.datastore,s.asyncQueue,{Eo:()=>Promise.resolve(),Ro:RS.bind(null,s),mo:bS.bind(null,s),f_:PS.bind(null,s),g_:NS.bind(null,s)}),s.B_.push(async e=>{e?(s.U_.s_(),await pc(s)):(await s.U_.stop(),s.O_.length>0&&(ye("RemoteStore",`Stopping write stream with ${s.O_.length} pending writes`),s.O_=[]))})),s.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,t,i,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=u,this.deferred=new Nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,u){const h=Date.now()+i,m=new mf(e,t,h,o,u);return m.start(i),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gf(s,e){if(Lr("AsyncQueue",`${e}: ${s}`),Ga(s))return new de(G.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Te.comparator(t.key,i.key):(t,i)=>Te.comparator(t.key,i.key),this.keyedMap=xa(),this.sortedSet=new it(this.comparator)}static emptySet(e){return new ho(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ho)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=i.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new ho;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(){this.W_=new it(Te.comparator)}track(e){const t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Ne():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,i)=>{e.push(i)}),e}}class wo{constructor(e,t,i,o,u,h,m,g,_){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(e,t,i,o,u){const h=[];return t.forEach(m=>{h.push({type:0,doc:m})}),new wo(e,t,ho.emptySet(t),h,i,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ac(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class LS{constructor(){this.queries=Jg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){const o=De(t),u=o.queries;o.queries=Jg(),u.forEach((h,m)=>{for(const g of m.j_)g.onError(i)})})(this,new de(G.ABORTED,"Firestore shutting down"))}}function Jg(){return new So(s=>xv(s),ac)}async function yf(s,e){const t=De(s);let i=3;const o=e.query;let u=t.queries.get(o);u?!u.H_()&&e.J_()&&(i=2):(u=new VS,i=e.J_()?0:1);try{switch(i){case 0:u.z_=await t.onListen(o,!0);break;case 1:u.z_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const m=gf(h,`Initialization of query '${so(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,u),u.j_.push(e),e.Z_(t.onlineState),u.z_&&e.X_(u.z_)&&_f(t)}async function vf(s,e){const t=De(s),i=e.query;let o=3;const u=t.queries.get(i);if(u){const h=u.j_.indexOf(e);h>=0&&(u.j_.splice(h,1),u.j_.length===0?o=e.J_()?0:1:!u.H_()&&e.J_()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function OS(s,e){const t=De(s);let i=!1;for(const o of e){const u=o.query,h=t.queries.get(u);if(h){for(const m of h.j_)m.X_(o)&&(i=!0);h.z_=o}}i&&_f(t)}function MS(s,e,t){const i=De(s),o=i.queries.get(e);if(o)for(const u of o.j_)u.onError(t);i.queries.delete(e)}function _f(s){s.Y_.forEach(e=>{e.next()})}var bd,Zg;(Zg=bd||(bd={})).ea="default",Zg.Cache="cache";class wf{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new wo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=wo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==bd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e){this.key=e}}class r_{constructor(e){this.key=e}}class jS{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Oe(),this.mutatedKeys=Oe(),this.Aa=Sv(e),this.Ra=new ho(this.Aa)}get Va(){return this.Ta}ma(e,t){const i=t?t.fa:new Xg,o=t?t.Ra:this.Ra;let u=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,k)=>{const D=o.get(E),U=lc(this.query,k)?k:null,$=!!D&&this.mutatedKeys.has(D.key),W=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let O=!1;D&&U?D.data.isEqual(U.data)?$!==W&&(i.track({type:3,doc:U}),O=!0):this.ga(D,U)||(i.track({type:2,doc:U}),O=!0,(g&&this.Aa(U,g)>0||_&&this.Aa(U,_)<0)&&(m=!0)):!D&&U?(i.track({type:0,doc:U}),O=!0):D&&!U&&(i.track({type:1,doc:D}),O=!0,(g||_)&&(m=!0)),O&&(U?(h=h.add(U),u=W?u.add(E):u.delete(E)):(h=h.delete(E),u=u.delete(E)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),u=u.delete(E.key),i.track({type:1,doc:E})}return{Ra:h,fa:i,ns:m,mutatedKeys:u}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const u=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const h=e.fa.G_();h.sort((E,k)=>function(U,$){const W=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne()}};return W(U)-W($)}(E.type,k.type)||this.Aa(E.doc,k.doc)),this.pa(i),o=o!=null&&o;const m=t&&!o?this.ya():[],g=this.da.size===0&&this.current&&!o?1:0,_=g!==this.Ea;return this.Ea=g,h.length!==0||_?{snapshot:new wo(this.query,e.Ra,u,h,e.mutatedKeys,g===0,_,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:m}:{wa:m}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Xg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Oe(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const t=[];return e.forEach(i=>{this.da.has(i)||t.push(new r_(i))}),this.da.forEach(i=>{e.has(i)||t.push(new n_(i))}),t}ba(e){this.Ta=e.Ts,this.da=Oe();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return wo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class FS{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class US{constructor(e){this.key=e,this.va=!1}}class zS{constructor(e,t,i,o,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Ca={},this.Fa=new So(m=>xv(m),ac),this.Ma=new Map,this.xa=new Set,this.Oa=new it(Te.comparator),this.Na=new Map,this.La=new lf,this.Ba={},this.ka=new Map,this.qa=_o.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function BS(s,e,t=!0){const i=u_(s);let o;const u=i.Fa.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Da()):o=await s_(i,e,t,!0),o}async function $S(s,e){const t=u_(s);await s_(t,e,!0,!1)}async function s_(s,e,t,i){const o=await hS(s.localStore,or(e)),u=o.targetId,h=s.sharedClientState.addLocalQueryTarget(u,t);let m;return i&&(m=await HS(s,e,u,h==="current",o.resumeToken)),s.isPrimaryClient&&t&&Yv(s.remoteStore,o),m}async function HS(s,e,t,i,o){s.Ka=(k,D,U)=>async function(W,O,q,Y){let H=O.view.ma(q);H.ns&&(H=await Kg(W.localStore,O.query,!1).then(({documents:R})=>O.view.ma(R,H)));const ie=Y&&Y.targetChanges.get(O.targetId),fe=Y&&Y.targetMismatches.get(O.targetId)!=null,te=O.view.applyChanges(H,W.isPrimaryClient,ie,fe);return ty(W,O.targetId,te.wa),te.snapshot}(s,k,D,U);const u=await Kg(s.localStore,e,!0),h=new jS(e,u.Ts),m=h.ma(u.documents),g=Xa.createSynthesizedTargetChangeForCurrentChange(t,i&&s.onlineState!=="Offline",o),_=h.applyChanges(m,s.isPrimaryClient,g);ty(s,t,_.wa);const E=new FS(e,t,h);return s.Fa.set(e,E),s.Ma.has(t)?s.Ma.get(t).push(e):s.Ma.set(t,[e]),_.snapshot}async function qS(s,e,t){const i=De(s),o=i.Fa.get(e),u=i.Ma.get(o.targetId);if(u.length>1)return i.Ma.set(o.targetId,u.filter(h=>!ac(h,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Nd(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),t&&hf(i.remoteStore,o.targetId),Dd(i,o.targetId)}).catch(Ka)):(Dd(i,o.targetId),await Nd(i.localStore,o.targetId,!0))}async function WS(s,e){const t=De(s),i=t.Fa.get(e),o=t.Ma.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),hf(t.remoteStore,i.targetId))}async function KS(s,e,t){const i=eC(s);try{const o=await function(h,m){const g=De(h),_=Tt.now(),E=m.reduce((U,$)=>U.add($.key),Oe());let k,D;return g.persistence.runTransaction("Locally write mutations","readwrite",U=>{let $=Or(),W=Oe();return g.cs.getEntries(U,E).next(O=>{$=O,$.forEach((q,Y)=>{Y.isValidDocument()||(W=W.add(q))})}).next(()=>g.localDocuments.getOverlayedDocuments(U,$)).next(O=>{k=O;const q=[];for(const Y of m){const H=mx(Y,k.get(Y.key).overlayedDocument);H!=null&&q.push(new Ss(Y.key,H,gv(H.value.mapValue),Pn.exists(!0)))}return g.mutationQueue.addMutationBatch(U,_,q,m)}).next(O=>{D=O;const q=O.applyToLocalDocumentSet(k,W);return g.documentOverlayCache.saveOverlays(U,O.batchId,q)})}).then(()=>({batchId:D.batchId,changes:Av(k)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(h,m,g){let _=h.Ba[h.currentUser.toKey()];_||(_=new it(He)),_=_.insert(m,g),h.Ba[h.currentUser.toKey()]=_}(i,o.batchId,t),await Za(i,o.changes),await pc(i.remoteStore)}catch(o){const u=gf(o,"Failed to persist write");t.reject(u)}}async function i_(s,e){const t=De(s);try{const i=await lS(t.localStore,e);e.targetChanges.forEach((o,u)=>{const h=t.Na.get(u);h&&(Ke(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.va=!0:o.modifiedDocuments.size>0?Ke(h.va):o.removedDocuments.size>0&&(Ke(h.va),h.va=!1))}),await Za(t,i,e)}catch(i){await Ka(i)}}function ey(s,e,t){const i=De(s);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Fa.forEach((u,h)=>{const m=h.view.Z_(e);m.snapshot&&o.push(m.snapshot)}),function(h,m){const g=De(h);g.onlineState=m;let _=!1;g.queries.forEach((E,k)=>{for(const D of k.j_)D.Z_(m)&&(_=!0)}),_&&_f(g)}(i.eventManager,e),o.length&&i.Ca.d_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function GS(s,e,t){const i=De(s);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Na.get(e),u=o&&o.key;if(u){let h=new it(Te.comparator);h=h.insert(u,$t.newNoDocument(u,be.min()));const m=Oe().add(u),g=new hc(be.min(),new Map,new it(He),h,m);await i_(i,g),i.Oa=i.Oa.remove(u),i.Na.delete(e),Ef(i)}else await Nd(i.localStore,e,!1).then(()=>Dd(i,e,t)).catch(Ka)}async function QS(s,e){const t=De(s),i=e.batch.batchId;try{const o=await aS(t.localStore,e);a_(t,i,null),o_(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Za(t,o)}catch(o){await Ka(o)}}async function YS(s,e,t){const i=De(s);try{const o=await function(h,m){const g=De(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let E;return g.mutationQueue.lookupMutationBatch(_,m).next(k=>(Ke(k!==null),E=k.keys(),g.mutationQueue.removeMutationBatch(_,k))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,E,m)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,E)).next(()=>g.localDocuments.getDocuments(_,E))})}(i.localStore,e);a_(i,e,t),o_(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Za(i,o)}catch(o){await Ka(o)}}function o_(s,e){(s.ka.get(e)||[]).forEach(t=>{t.resolve()}),s.ka.delete(e)}function a_(s,e,t){const i=De(s);let o=i.Ba[i.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),i.Ba[i.currentUser.toKey()]=o}}function Dd(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Ma.get(e))s.Fa.delete(i),t&&s.Ca.$a(i,t);s.Ma.delete(e),s.isPrimaryClient&&s.La.gr(e).forEach(i=>{s.La.containsKey(i)||l_(s,i)})}function l_(s,e){s.xa.delete(e.path.canonicalString());const t=s.Oa.get(e);t!==null&&(hf(s.remoteStore,t),s.Oa=s.Oa.remove(e),s.Na.delete(t),Ef(s))}function ty(s,e,t){for(const i of t)i instanceof n_?(s.La.addReference(i.key,e),XS(s,i)):i instanceof r_?(ye("SyncEngine","Document no longer in limbo: "+i.key),s.La.removeReference(i.key,e),s.La.containsKey(i.key)||l_(s,i.key)):Ne()}function XS(s,e){const t=e.key,i=t.path.canonicalString();s.Oa.get(t)||s.xa.has(i)||(ye("SyncEngine","New document in limbo: "+t),s.xa.add(i),Ef(s))}function Ef(s){for(;s.xa.size>0&&s.Oa.size<s.maxConcurrentLimboResolutions;){const e=s.xa.values().next().value;s.xa.delete(e);const t=new Te(et.fromString(e)),i=s.qa.next();s.Na.set(i,new US(t)),s.Oa=s.Oa.insert(t,i),Yv(s.remoteStore,new ms(or(oc(t.path)),i,"TargetPurposeLimboResolution",Yd.oe))}}async function Za(s,e,t){const i=De(s),o=[],u=[],h=[];i.Fa.isEmpty()||(i.Fa.forEach((m,g)=>{h.push(i.Ka(g,e,t).then(_=>{var E;if((_||t)&&i.isPrimaryClient){const k=_?!_.fromCache:(E=t==null?void 0:t.targetChanges.get(g.targetId))===null||E===void 0?void 0:E.current;i.sharedClientState.updateQueryState(g.targetId,k?"current":"not-current")}if(_){o.push(_);const k=cf.Wi(g.targetId,_);u.push(k)}}))}),await Promise.all(h),i.Ca.d_(o),await async function(g,_){const E=De(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",k=>J.forEach(_,D=>J.forEach(D.$i,U=>E.persistence.referenceDelegate.addReference(k,D.targetId,U)).next(()=>J.forEach(D.Ui,U=>E.persistence.referenceDelegate.removeReference(k,D.targetId,U)))))}catch(k){if(!Ga(k))throw k;ye("LocalStore","Failed to update sequence numbers: "+k)}for(const k of _){const D=k.targetId;if(!k.fromCache){const U=E.os.get(D),$=U.snapshotVersion,W=U.withLastLimboFreeSnapshotVersion($);E.os=E.os.insert(D,W)}}}(i.localStore,u))}async function JS(s,e){const t=De(s);if(!t.currentUser.isEqual(e)){ye("SyncEngine","User change. New user:",e.toKey());const i=await Wv(t.localStore,e);t.currentUser=e,function(u,h){u.ka.forEach(m=>{m.forEach(g=>{g.reject(new de(G.CANCELLED,h))})}),u.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Za(t,i.hs)}}function ZS(s,e){const t=De(s),i=t.Na.get(e);if(i&&i.va)return Oe().add(i.key);{let o=Oe();const u=t.Ma.get(e);if(!u)return o;for(const h of u){const m=t.Fa.get(h);o=o.unionWith(m.view.Va)}return o}}function u_(s){const e=De(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=i_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=GS.bind(null,e),e.Ca.d_=OS.bind(null,e.eventManager),e.Ca.$a=MS.bind(null,e.eventManager),e}function eC(s){const e=De(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=QS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YS.bind(null,e),e}class Qu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return oS(this.persistence,new sS,e.initialUser,this.serializer)}Ga(e){return new tS(uf.Zr,this.serializer)}Wa(e){return new fS}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qu.provider={build:()=>new Qu};class Vd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ey(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=JS.bind(null,this.syncEngine),await DS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new LS}()}createDatastore(e){const t=dc(e.databaseInfo.databaseId),i=function(u){return new yS(u)}(e.databaseInfo);return function(u,h,m,g){return new wS(u,h,m,g)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,o,u,h,m){return new TS(i,o,u,h,m)}(this.localStore,this.datastore,e.asyncQueue,t=>ey(this.syncEngine,t,0),function(){return Qg.D()?new Qg:new pS}())}createSyncEngine(e,t){return function(o,u,h,m,g,_,E){const k=new zS(o,u,h,m,g,_);return E&&(k.Qa=!0),k}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const u=De(o);ye("RemoteStore","RemoteStore shutting down."),u.L_.add(5),await Ja(u),u.k_.shutdown(),u.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Vd.provider={build:()=>new Vd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Lr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,t,i,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=Bt.UNAUTHENTICATED,this.clientId=fv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,async h=>{ye("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(i,h=>(ye("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=gf(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function hd(s,e){s.asyncQueue.verifyOperationInProgress(),ye("FirestoreClient","Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let i=t.initialUser;s.setCredentialChangeListener(async o=>{i.isEqual(o)||(await Wv(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}async function ny(s,e){s.asyncQueue.verifyOperationInProgress();const t=await nC(s);ye("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener(i=>Yg(e.remoteStore,i)),s.setAppCheckTokenChangeListener((i,o)=>Yg(e.remoteStore,o)),s._onlineComponents=e}async function nC(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ye("FirestoreClient","Using user provided OfflineComponentProvider");try{await hd(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===G.FAILED_PRECONDITION||o.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;mo("Error using user provided cache. Falling back to memory cache: "+t),await hd(s,new Qu)}}else ye("FirestoreClient","Using default OfflineComponentProvider"),await hd(s,new Qu);return s._offlineComponents}async function c_(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ye("FirestoreClient","Using user provided OnlineComponentProvider"),await ny(s,s._uninitializedComponentsProvider._online)):(ye("FirestoreClient","Using default OnlineComponentProvider"),await ny(s,new Vd))),s._onlineComponents}function rC(s){return c_(s).then(e=>e.syncEngine)}async function Yu(s){const e=await c_(s),t=e.eventManager;return t.onListen=BS.bind(null,e.syncEngine),t.onUnlisten=qS.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=$S.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=WS.bind(null,e.syncEngine),t}function sC(s,e,t={}){const i=new Nr;return s.asyncQueue.enqueueAndForget(async()=>function(u,h,m,g,_){const E=new Tf({next:D=>{E.Za(),h.enqueueAndForget(()=>vf(u,k));const U=D.docs.has(m);!U&&D.fromCache?_.reject(new de(G.UNAVAILABLE,"Failed to get document because the client is offline.")):U&&D.fromCache&&g&&g.source==="server"?_.reject(new de(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(D)},error:D=>_.reject(D)}),k=new wf(oc(m.path),E,{includeMetadataChanges:!0,_a:!0});return yf(u,k)}(await Yu(s),s.asyncQueue,e,t,i)),i.promise}function iC(s,e,t={}){const i=new Nr;return s.asyncQueue.enqueueAndForget(async()=>function(u,h,m,g,_){const E=new Tf({next:D=>{E.Za(),h.enqueueAndForget(()=>vf(u,k)),D.fromCache&&g.source==="server"?_.reject(new de(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(D)},error:D=>_.reject(D)}),k=new wf(m,E,{includeMetadataChanges:!0,_a:!0});return yf(u,k)}(await Yu(s),s.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(s,e,t){if(!t)throw new de(G.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function oC(s,e,t,i){if(e===!0&&i===!0)throw new de(G.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function sy(s){if(!Te.isDocumentKey(s))throw new de(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function iy(s){if(Te.isDocumentKey(s))throw new de(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function mc(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ne()}function un(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new de(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=mc(s);throw new de(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new de(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new de(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=h_((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new de(G.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new de(G.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new de(G.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oy(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new xI;switch(i.type){case"firstParty":return new kI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new de(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=ry.get(t);i&&(ye("ComponentProvider","Removing Datastore"),ry.delete(t),i.terminate())}(this),Promise.resolve()}}function aC(s,e,t,i={}){var o;const u=(s=un(s,gc))._getSettings(),h=`${e}:${t}`;if(u.host!=="firestore.googleapis.com"&&u.host!==h&&mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),s._setSettings(Object.assign(Object.assign({},u),{host:h,ssl:!1})),i.mockUserToken){let m,g;if(typeof i.mockUserToken=="string")m=i.mockUserToken,g=Bt.MOCK_USER;else{m=Z0(i.mockUserToken,(o=s._app)===null||o===void 0?void 0:o.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new de(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Bt(_)}s._authCredentials=new SI(new dv(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new di(this.firestore,e,this._query)}}class Ht{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ws(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ht(this.firestore,e,this._key)}}class ws extends di{constructor(e,t,i){super(e,t,oc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ht(this.firestore,null,new Te(e))}withConverter(e){return new ws(this.firestore,e,this._path)}}function ht(s,e,...t){if(s=Lt(s),d_("collection","path",e),s instanceof gc){const i=et.fromString(e,...t);return iy(i),new ws(s,null,i)}{if(!(s instanceof Ht||s instanceof ws))throw new de(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(et.fromString(e,...t));return iy(i),new ws(s.firestore,null,i)}}function qt(s,e,...t){if(s=Lt(s),arguments.length===1&&(e=fv.newId()),d_("doc","path",e),s instanceof gc){const i=et.fromString(e,...t);return sy(i),new Ht(s,null,new Te(i))}{if(!(s instanceof Ht||s instanceof ws))throw new de(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(et.fromString(e,...t));return sy(i),new Ht(s.firestore,s instanceof ws?s.converter:null,new Te(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Gv(this,"async_queue_retry"),this.Vu=()=>{const i=cd();i&&ye("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const t=cd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=cd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Nr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ga(e))throw e;ye("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const o=function(h){let m=h.message||"";return h.stack&&(m=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),m}(i);throw Lr("INTERNAL UNHANDLED ERROR: ",o),i}).then(i=>(this.du=!1,i))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const o=mf.createAndSchedule(this,e,t,i,u=>this.yu(u));return this.Tu.push(o),o}fu(){this.Eu&&Ne()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function ly(s){return function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const u of i)if(u in o&&typeof o[u]=="function")return!0;return!1}(s,["next","error","complete"])}class Mr extends gc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new ay,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ay(e),this._firestoreClient=void 0,await e}}}function lC(s,e){const t=typeof s=="object"?s:xy(),i=typeof s=="string"?s:"(default)",o=Ud(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const u=X0("firestore");u&&aC(o,...u)}return o}function yc(s){if(s._terminated)throw new de(G.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||uC(s),s._firestoreClient}function uC(s){var e,t,i;const o=s._freezeSettings(),u=function(m,g,_,E){return new zI(m,g,_,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,h_(E.experimentalLongPollingOptions),E.useFetchStreams)}(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,o);s._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(s._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),s._firestoreClient=new tC(s._authCredentials,s._appCheckCredentials,s._queue,u,s._componentsProvider&&function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Eo(Ot.fromBase64String(e))}catch(t){throw new de(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Eo(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC=/^__.*__$/;class hC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Ss(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ya(e,this.data,t,this.fieldTransforms)}}class f_{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Ss(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function p_(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne()}}class Cf{constructor(e,t,i,o,u,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,u===void 0&&this.vu(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Cf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.Ou(e),o}Nu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Xu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(p_(this.Cu)&&cC.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class dC{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||dc(e)}Qu(e,t,i,o=!1){return new Cf({Cu:e,methodName:t,qu:i,path:Dt.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _c(s){const e=s._freezeSettings(),t=dc(s._databaseId);return new dC(s._databaseId,!!e.ignoreUndefinedProperties,t)}function m_(s,e,t,i,o,u={}){const h=s.Qu(u.merge||u.mergeFields?2:0,e,t,o);Af("Data must be an object, but it was:",h,i);const m=g_(i,h);let g,_;if(u.merge)g=new vn(h.fieldMask),_=h.fieldTransforms;else if(u.mergeFields){const E=[];for(const k of u.mergeFields){const D=Ld(e,k,t);if(!h.contains(D))throw new de(G.INVALID_ARGUMENT,`Field '${D}' is specified in your field mask but missing from your input data.`);v_(E,D)||E.push(D)}g=new vn(E),_=h.fieldTransforms.filter(k=>g.covers(k.field))}else g=null,_=h.fieldTransforms;return new hC(new ln(m),g,_)}class wc extends If{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wc}}function fC(s,e,t,i){const o=s.Qu(1,e,t);Af("Data must be an object, but it was:",o,i);const u=[],h=ln.empty();ci(i,(g,_)=>{const E=kf(e,g,t);_=Lt(_);const k=o.Nu(E);if(_ instanceof wc)u.push(E);else{const D=el(_,k);D!=null&&(u.push(E),h.set(E,D))}});const m=new vn(u);return new f_(h,m,o.fieldTransforms)}function pC(s,e,t,i,o,u){const h=s.Qu(1,e,t),m=[Ld(e,i,t)],g=[o];if(u.length%2!=0)throw new de(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let D=0;D<u.length;D+=2)m.push(Ld(e,u[D])),g.push(u[D+1]);const _=[],E=ln.empty();for(let D=m.length-1;D>=0;--D)if(!v_(_,m[D])){const U=m[D];let $=g[D];$=Lt($);const W=h.Nu(U);if($ instanceof wc)_.push(U);else{const O=el($,W);O!=null&&(_.push(U),E.set(U,O))}}const k=new vn(_);return new f_(E,k,h.fieldTransforms)}function mC(s,e,t,i=!1){return el(t,s.Qu(i?4:3,e))}function el(s,e){if(y_(s=Lt(s)))return Af("Unsupported field value:",e,s),g_(s,e);if(s instanceof If)return function(i,o){if(!p_(o.Cu))throw o.Bu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,o){const u=[];let h=0;for(const m of i){let g=el(m,o.Lu(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}}(s,e)}return function(i,o){if((i=Lt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return ux(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=Tt.fromDate(i);return{timestampValue:Ku(o.serializer,u)}}if(i instanceof Tt){const u=new Tt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ku(o.serializer,u)}}if(i instanceof xf)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Eo)return{bytesValue:Fv(o.serializer,i._byteString)};if(i instanceof Ht){const u=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(u))throw o.Bu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:af(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Sf)return function(h,m){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:h.toArray().map(g=>{if(typeof g!="number")throw m.Bu("VectorValues must only contain numeric values.");return nf(m.serializer,g)})}}}}}}(i,o);throw o.Bu(`Unsupported field value: ${mc(i)}`)}(s,e)}function g_(s,e){const t={};return pv(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ci(s,(i,o)=>{const u=el(o,e.Mu(i));u!=null&&(t[i]=u)}),{mapValue:{fields:t}}}function y_(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Tt||s instanceof xf||s instanceof Eo||s instanceof Ht||s instanceof If||s instanceof Sf)}function Af(s,e,t){if(!y_(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const i=mc(t);throw i==="an object"?e.Bu(s+" a custom object"):e.Bu(s+" "+i)}}function Ld(s,e,t){if((e=Lt(e))instanceof vc)return e._internalPath;if(typeof e=="string")return kf(s,e);throw Xu("Field path arguments must be of type string or ",s,!1,void 0,t)}const gC=new RegExp("[~\\*/\\[\\]]");function kf(s,e,t){if(e.search(gC)>=0)throw Xu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new vc(...e.split("."))._internalPath}catch{throw Xu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Xu(s,e,t,i,o){const u=i&&!i.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${i}`),h&&(g+=` in document ${o}`),g+=")"),new de(G.INVALID_ARGUMENT,m+s+g)}function v_(s,e){return s.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(e,t,i,o,u){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new yC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Rf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class yC extends __{data(){return super.data()}}function Rf(s,e){return typeof e=="string"?kf(s,e):e instanceof vc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new de(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Pf{}class vC extends Pf{}function Xt(s,e,...t){let i=[];e instanceof Pf&&i.push(e),i=i.concat(t),function(u){const h=u.filter(g=>g instanceof Nf).length,m=u.filter(g=>g instanceof Ec).length;if(h>1||h>0&&m>0)throw new de(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const o of i)s=o._apply(s);return s}class Ec extends vC{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Ec(e,t,i)}_apply(e){const t=this._parse(e);return E_(e._query,t),new di(e.firestore,e.converter,Sd(e._query,t))}_parse(e){const t=_c(e.firestore);return function(u,h,m,g,_,E,k){let D;if(_.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new de(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){cy(k,E);const U=[];for(const $ of k)U.push(uy(g,u,$));D={arrayValue:{values:U}}}else D=uy(g,u,k)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||cy(k,E),D=mC(m,h,k,E==="in"||E==="not-in");return gt.create(_,E,D)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function at(s,e,t){const i=e,o=Rf("where",s);return Ec._create(o,i,t)}class Nf extends Pf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Nf(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:Wn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,u){let h=o;const m=u.getFlattenedFilters();for(const g of m)E_(h,g),h=Sd(h,g)}(e._query,t),new di(e.firestore,e.converter,Sd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function uy(s,e,t){if(typeof(t=Lt(t))=="string"){if(t==="")throw new de(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Iv(e)&&t.indexOf("/")!==-1)throw new de(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(et.fromString(t));if(!Te.isDocumentKey(i))throw new de(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Pg(s,new Te(i))}if(t instanceof Ht)return Pg(s,t._key);throw new de(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mc(t)}.`)}function cy(s,e){if(!Array.isArray(s)||s.length===0)throw new de(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function E_(s,e){const t=function(o,u){for(const h of o)for(const m of h.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(s.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new de(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class _C{convertValue(e,t="none"){switch(ai(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(oi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return ci(e,(o,u)=>{i[o]=this.convertValue(u,t)}),i}convertVectorValue(e){var t,i,o;const u=(o=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(h=>ct(h.doubleValue));return new Sf(u)}convertGeoPoint(e){return new xf(ct(e.latitude),ct(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Jd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(La(e));default:return null}}convertTimestamp(e){const t=Is(e);return new Tt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=et.fromString(e);Ke(qv(i));const o=new Oa(i.get(1),i.get(3)),u=new Te(i.popFirst(5));return o.isEqual(t)||Lr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(s,e,t){let i;return i=s?s.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class I_ extends __{constructor(e,t,i,o,u,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Nu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Rf("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Nu extends I_{data(e={}){return super.data(e)}}class x_{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ca(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Nu(this._firestore,this._userDataWriter,i.key,i,new Ca(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(m=>{const g=new Nu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Ca(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const g=new Nu(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Ca(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,E=-1;return m.type!==0&&(_=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),E=h.indexOf(m.doc.key)),{type:wC(m.type),doc:g,oldIndex:_,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function wC(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(s){s=un(s,Ht);const e=un(s.firestore,Mr);return sC(yc(e),s._key).then(t=>S_(e,s,t))}class bf extends _C{constructor(e){super(),this.firestore=e}convertBytes(e){return new Eo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,t)}}function lr(s){s=un(s,di);const e=un(s.firestore,Mr),t=yc(e),i=new bf(e);return w_(s._query),iC(t,s._query).then(o=>new x_(e,i,s,o))}function bu(s,e,t){s=un(s,Ht);const i=un(s.firestore,Mr),o=T_(s.converter,e);return Tc(i,[m_(_c(i),"setDoc",s._key,o,s.converter!==null,t).toMutation(s._key,Pn.none())])}function tl(s,e,t,...i){s=un(s,Ht);const o=un(s.firestore,Mr),u=_c(o);let h;return h=typeof(e=Lt(e))=="string"||e instanceof vc?pC(u,"updateDoc",s._key,e,t,i):fC(u,"updateDoc",s._key,e),Tc(o,[h.toMutation(s._key,Pn.exists(!0))])}function Df(s){return Tc(un(s.firestore,Mr),[new rf(s._key,Pn.none())])}function Vf(s,e){const t=un(s.firestore,Mr),i=qt(s),o=T_(s.converter,e);return Tc(t,[m_(_c(s.firestore),"addDoc",i._key,o,s.converter!==null,{}).toMutation(i._key,Pn.exists(!1))]).then(()=>i)}function li(s,...e){var t,i,o;s=Lt(s);let u={includeMetadataChanges:!1,source:"default"},h=0;typeof e[h]!="object"||ly(e[h])||(u=e[h],h++);const m={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(ly(e[h])){const k=e[h];e[h]=(t=k.next)===null||t===void 0?void 0:t.bind(k),e[h+1]=(i=k.error)===null||i===void 0?void 0:i.bind(k),e[h+2]=(o=k.complete)===null||o===void 0?void 0:o.bind(k)}let g,_,E;if(s instanceof Ht)_=un(s.firestore,Mr),E=oc(s._key.path),g={next:k=>{e[h]&&e[h](S_(_,s,k))},error:e[h+1],complete:e[h+2]};else{const k=un(s,di);_=un(k.firestore,Mr),E=k._query;const D=new bf(_);g={next:U=>{e[h]&&e[h](new x_(_,D,k,U))},error:e[h+1],complete:e[h+2]},w_(s._query)}return function(D,U,$,W){const O=new Tf(W),q=new wf(U,O,$);return D.asyncQueue.enqueueAndForget(async()=>yf(await Yu(D),q)),()=>{O.Za(),D.asyncQueue.enqueueAndForget(async()=>vf(await Yu(D),q))}}(yc(_),E,m,g)}function Tc(s,e){return function(i,o){const u=new Nr;return i.asyncQueue.enqueueAndForget(async()=>KS(await rC(i),o,u)),u.promise}(yc(s),e)}function S_(s,e,t){const i=t.docs.get(e._key),o=new bf(s);return new I_(s,o,e._key,i,new Ca(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){xo=o})(To),po(new ri("firestore",(i,{instanceIdentifier:o,options:u})=>{const h=i.getProvider("app").getImmediate(),m=new Mr(new CI(i.getProvider("auth-internal")),new PI(i.getProvider("app-check-internal")),function(_,E){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new de(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oa(_.options.projectId,E)}(h,o),h);return u=Object.assign({useFetchStreams:t},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),vs(Sg,"4.7.3",e),vs(Sg,"4.7.3","esm2017")})();/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),C_=(...s)=>s.filter((e,t,i)=>!!e&&i.indexOf(e)===t).join(" ");/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var TC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=ne.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:u,iconNode:h,...m},g)=>ne.createElement("svg",{ref:g,...TC,width:e,height:e,stroke:s,strokeWidth:i?Number(t)*24/Number(e):t,className:C_("lucide",o),...m},[...h.map(([_,E])=>ne.createElement(_,E)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=(s,e)=>{const t=ne.forwardRef(({className:i,...o},u)=>ne.createElement(IC,{ref:u,iconNode:e,className:C_(`lucide-${EC(s)}`,i),...o}));return t.displayName=`${s}`,t};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=cn("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=cn("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hy=cn("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zu=cn("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_=cn("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=cn("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=cn("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=cn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=cn("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=cn("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dy=cn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=cn("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lf=cn("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=cn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),P_={apiKey:"AIzaSyCCS1fFfmH4Y4tXn6Rv7w4baNYrz5VSFLg",authDomain:"gym-check-in-d1bf5.firebaseapp.com",projectId:"gym-check-in-d1bf5",storageBucket:"gym-check-in-d1bf5.firebasestorage.app",messagingSenderId:"667813844333",appId:"1:667813844333:web:84e6746664e0540c933664",measurementId:"G-K7WD5R8DDB"},N_=P_.projectId,RC=null;let Du,cs,fo;try{Du=Iy(P_),cs=lC(Du),fo=TI(Du)}catch(s){console.error("Firebase initialization error:",s)}const ui=`/artifacts/${N_}/public/data`,Qe=s=>`/artifacts/${N_}/users/${s}`,ze={ATHLETES:"athletes",COACHES:"coaches",CURRENT_CHECKINS:"current_checkins",HISTORICAL_CHECKIN_LOGS:"historical_checkin_logs",APP_METADATA:"app_metadata"},fy={coaches:[{id:"coach-alex",name:"Coach Alex",email:"alex@cheergym.com",phone:"555-111-2222",teams:["Sparkle Squad","Power Pumas"],classes:["Tumble Basics"],isApproved:!0,passcode:"1234"},{id:"coach-jessica",name:"Coach Jessica",email:"jessica@cheergym.com",phone:"555-333-4444",teams:["Power Pumas"],classes:["Jump Drills"],isApproved:!0,passcode:"0000"}],athletes:[{id:"athlete-1",name:"Emily Smith",teams:["Sparkle Squad","Power Pumas"],classes:["Tumble Basics"],skills:[{name:"Back Handspring",status:"Working On"}],improvementAreas:"Needs stronger jumps.",coachNotes:[],parentName:"Sarah Smith",parentPhone:"555-123-4567",parentEmail:"sarah@example.com",emergencyContactName:"John Smith",emergencyContactPhone:"555-765-4321",isApproved:!0,addedByCoach:"Coach Alex",profilePicture:"https://placehold.co/100x100/A0DAFB/FFFFFF?text=ES"},{id:"athlete-2",name:"Mia Johnson",teams:["Sparkle Squad"],classes:["Jump Drills"],skills:[{name:"Round-off",status:"Mastered"}],improvementAreas:"More flexibility.",coachNotes:[],parentName:"David Johnson",parentPhone:"555-987-6543",parentEmail:"david@example.com",emergencyContactName:"Laura Johnson",emergencyContactPhone:"555-432-1098",isApproved:!0,addedByCoach:"Coach Jessica",profilePicture:"https://placehold.co/100x100/F0B27A/FFFFFF?text=MJ"},{id:"athlete-3",name:"Olivia Brown",teams:["Power Pumas"],classes:["Tumble Basics"],skills:[{name:"Flyer Skills",status:"Not Started"}],improvementAreas:"Build confidence.",coachNotes:[],parentName:"Robert Brown",parentPhone:"555-555-1212",parentEmail:"robert@example.com",emergencyContactName:"Maria Brown",emergencyContactPhone:"555-212-5555",isApproved:!0,addedByCoach:"Coach Alex",profilePicture:"https://placehold.co/100x100/96CEB4/FFFFFF?text=OB"},{id:"athlete-pending-1",name:"Sophia Miller",teams:["Sparkle Squad"],classes:[],skills:[],improvementAreas:"",coachNotes:[],parentName:"Chris Miller",parentPhone:"555-100-2000",parentEmail:"chris@example.com",emergencyContactName:"Pat Miller",emergencyContactPhone:"555-200-1000",isApproved:!1,addedByCoach:"Coach Alex",profilePicture:"https://placehold.co/100x100/DBE2EF/36454F?text=SM"}]},Od="cheer123",PC=()=>v.jsxs("div",{className:"flex justify-center items-center p-4",children:[v.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"}),v.jsx("span",{className:"ml-2 text-gray-700",children:"Loading..."})]}),za=({isOpen:s,title:e,children:t,onClose:i,showCloseButton:o=!0})=>s?v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:v.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-auto relative transform transition-all scale-100 opacity-100",children:[v.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:e}),t,o&&v.jsx("button",{onClick:i,className:"absolute top-3 right-3 text-gray-500 hover:text-gray-700 focus:outline-none",children:v.jsx(Ic,{size:20})})]})}):null,NC=({message:s,type:e,onClose:t})=>{const i=e==="success"?"bg-green-500":"bg-red-500",o=e==="success"?v.jsx(k_,{size:20}):v.jsx(SC,{size:20});return s?v.jsxs("div",{className:`fixed bottom-4 right-4 ${i} text-white px-4 py-3 rounded-lg shadow-lg flex items-center z-50`,role:"alert",children:[o,v.jsx("span",{className:"ml-2",children:s}),v.jsx("button",{onClick:t,className:"ml-4 text-white opacity-90 hover:opacity-100",children:v.jsx(Ic,{size:16})})]}):null};function bC(){const[s,e]=ne.useState(!1),[t,i]=ne.useState(null),[o,u]=ne.useState("none"),[h,m]=ne.useState(!1),[g,_]=ne.useState(!1),[E,k]=ne.useState(""),[D,U]=ne.useState("success"),$=ne.useCallback((Y,H="success",ie=3e3)=>{k(Y),U(H),_(!0);const fe=setTimeout(()=>{_(!1),k("")},ie);return()=>clearTimeout(fe)},[]);ne.useEffect(()=>{if(!Du||!fo){console.error("Firebase app or auth not initialized.");return}const Y=hT(fo,async H=>{if(H)i(H.uid),await W(H.uid);else try{RC||await iT(fo)}catch(ie){console.error("Error signing in:",ie),$(`Authentication failed: ${ie.message}`,"error")}m(!0)});return()=>Y()},[]);const W=async Y=>{var ie;if(!cs||!Y)return;const H=qt(cs,Qe(Y),ze.APP_METADATA,"seed_status");try{const fe=await Ju(H);if(!fe.exists()||!((ie=fe.data())!=null&&ie.seeded)){console.log("Seeding initial data...");const te=[];for(const R of fy.coaches)te.push(bu(qt(cs,Qe(Y),ze.COACHES,R.id),R));for(const R of fy.athletes)te.push(bu(qt(cs,Qe(Y),ze.ATHLETES,R.id),R));await Promise.all(te),await bu(H,{seeded:!0,timestamp:new Date}),console.log("Initial data seeded successfully.")}else console.log("Data already seeded.")}catch(fe){console.error("Error seeding initial data:",fe),$(`Error seeding data: ${fe.message}`,"error")}},O=async Y=>{if(!cs||!t)return $("App not ready. Please wait.","error"),!1;if(Y===Od)return e(!0),u("admin"),$("Logged in as Admin!"),!0;try{const H=ht(cs,Qe(t),ze.COACHES),ie=Xt(H,at("passcode","==",Y),at("isApproved","==",!0));return(await lr(ie)).empty?($("Invalid Passcode.","error"),!1):(e(!0),u("coach"),$("Logged in as Coach!"),!0)}catch(H){return console.error("Error during login:",H),$(`Login error: ${H.message}`,"error"),!1}},q=()=>{e(!1),u("none"),$("Logged out successfully.")};return h?v.jsxs("div",{className:"min-h-screen bg-gray-100 font-sans text-gray-900 flex flex-col items-center justify-center p-4",children:[s?v.jsx(VC,{currentUserId:t,userRole:o,onLogout:q,db:cs,showAppToast:$}):v.jsx(DC,{onLogin:O}),v.jsx(NC,{message:E,type:D,onClose:()=>_(!1)}),s&&v.jsxs("div",{className:"absolute bottom-2 left-2 text-xs text-gray-500 bg-white bg-opacity-75 p-1 rounded",children:["User ID: ",t]})]}):v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-400 to-indigo-600",children:v.jsx(PC,{})})}const DC=({onLogin:s})=>{const[e,t]=ne.useState(""),[i,o]=ne.useState(!1),u=async h=>{h.preventDefault(),o(!0),await s(e)||t(""),o(!1)};return v.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-2xl w-full max-w-sm border border-gray-200",children:[v.jsx("h2",{className:"text-3xl font-extrabold text-center text-indigo-700 mb-6",children:"Cheer Gym Portal"}),v.jsxs("form",{onSubmit:u,className:"space-y-6",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"passcode",className:"block text-sm font-medium text-gray-700 mb-1",children:"Enter Passcode"}),v.jsx("input",{type:"password",id:"passcode",className:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-lg tracking-widest text-center",value:e,onChange:h=>t(h.target.value),required:!0,maxLength:"10"})]}),v.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-indigo-500 to-purple-600 text-white py-3 px-6 rounded-lg font-semibold text-lg shadow-md hover:from-indigo-600 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-300 ease-in-out transform hover:scale-105",disabled:i,children:i?"Logging In...":"Login"})]})]})},VC=({currentUserId:s,userRole:e,onLogout:t,db:i,showAppToast:o})=>{const[u,h]=ne.useState("check-in");return ne.useEffect(()=>{h(e==="coach"||e==="admin"?"coach-dashboard":"check-in")},[e]),v.jsxs("div",{className:"w-full max-w-6xl mx-auto bg-white rounded-xl shadow-2xl border border-gray-200 min-h-[80vh] flex flex-col",children:[v.jsxs("header",{className:"p-4 bg-gradient-to-r from-indigo-600 to-purple-700 text-white rounded-t-xl shadow-md flex justify-between items-center",children:[v.jsx("h1",{className:"text-3xl font-extrabold",children:"Cheer Portal"}),v.jsxs("div",{className:"flex items-center space-x-4",children:[e!=="none"&&v.jsxs("span",{className:"text-sm font-medium opacity-80 capitalize",children:["Logged in as ",e]}),v.jsx("button",{onClick:t,className:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105",children:"Logout"})]})]}),v.jsxs("nav",{className:"flex bg-gray-50 border-b border-gray-200",children:[v.jsxs("button",{onClick:()=>h("check-in"),className:`flex-1 py-3 px-4 text-center font-medium text-gray-700 hover:bg-gray-100 focus:outline-none transition-colors duration-200 ${u==="check-in"?"border-b-4 border-indigo-600 text-indigo-700 bg-gray-100":""}`,children:[v.jsx(Lf,{className:"inline-block mr-2",size:20})," Check-In"]}),(e==="coach"||e==="admin")&&v.jsxs("button",{onClick:()=>h("coach-dashboard"),className:`flex-1 py-3 px-4 text-center font-medium text-gray-700 hover:bg-gray-100 focus:outline-none transition-colors duration-200 ${u==="coach-dashboard"?"border-b-4 border-indigo-600 text-indigo-700 bg-gray-100":""}`,children:[v.jsx(AC,{className:"inline-block mr-2",size:20})," Coach Dashboard"]})]}),v.jsxs("main",{className:"flex-1 p-6 overflow-auto",children:[u==="check-in"&&v.jsx(LC,{db:i,currentUserId:s,showAppToast:o}),u==="coach-dashboard"&&(e==="coach"||e==="admin")&&v.jsx(OC,{db:i,currentUserId:s,userRole:e,showAppToast:o})]})]})},LC=({db:s,currentUserId:e,showAppToast:t})=>{const[i,o]=ne.useState(null),[u,h]=ne.useState(null),[m,g]=ne.useState([]),[_,E]=ne.useState([]),[k,D]=ne.useState([]),[U,$]=ne.useState([]),[W,O]=ne.useState(null),[q,Y]=ne.useState({}),H=ne.useRef({}),[ie,fe]=ne.useState(!1),te=1e3;ne.useEffect(()=>{if(!s||!e)return;(async()=>{try{const N=ht(s,Qe(e),ze.ATHLETES),I=Xt(N,at("isApproved","==",!0)),le=await lr(I),Ie=new Set,xe=new Set;le.forEach(Ae=>{const re=Ae.data();re.teams.forEach(pe=>Ie.add(pe)),re.classes.forEach(pe=>xe.add(pe))}),E(Array.from(Ie).sort()),D(Array.from(xe).sort())}catch(N){console.error("Error fetching entities:",N),t(`Error loading teams/classes: ${N.message}`,"error")}})()},[s,e,t]),ne.useEffect(()=>{if(!s||!e||!i||!u){g([]);return}const A=ht(s,Qe(e),ze.ATHLETES);let N;i==="Team"?N=Xt(A,at("teams","array-contains",u),at("isApproved","==",!0)):N=Xt(A,at("classes","array-contains",u),at("isApproved","==",!0));const I=li(N,le=>{const Ie=le.docs.map(xe=>({id:xe.id,...xe.data()}));g(Ie.sort((xe,Ae)=>xe.name.localeCompare(Ae.name)))},le=>{console.error("Error fetching athletes:",le),t(`Error loading athletes: ${le.message}`,"error")});return()=>I()},[s,e,i,u,t]),ne.useEffect(()=>{if(!s||!e||!i||!u){$([]);return}const A=ht(s,ui,ze.CURRENT_CHECKINS),N=Xt(A,at("checkInType","==",i.toLowerCase()),at("checkInEntity","==",u)),I=li(N,le=>{const Ie=le.docs.map(xe=>xe.data());$(Ie)},le=>{console.error("Error fetching current check-ins:",le),t(`Error loading check-ins: ${le.message}`,"error")});return()=>I()},[s,e,i,u,t]);const R=(A,N)=>{if(console.log(` [Hold Start] Athlete: ${N} (${A})`),!s||!e){console.warn(" Database or user ID not available."),t("App not ready.","error");return}H.current[A]&&clearInterval(H.current[A]),O(A),Y(le=>({...le,[A]:0}));const I=Date.now();H.current[A]=setInterval(()=>{const le=Date.now()-I,Ie=Math.min(100,le/te*100);Y(xe=>({...xe,[A]:Ie})),Ie>=100&&(clearInterval(H.current[A]),delete H.current[A],console.log(` [Hold Complete] Triggering check-in for ${N}`),S(A,N),O(null))},50)},x=A=>{H.current[A]&&(clearInterval(H.current[A]),delete H.current[A]),O(null),Y(N=>({...N,[A]:0}))},S=async(A,N)=>{if(console.log(` [Check-In Start] Athlete: ${N} (${A})`),!s||!e||!i||!u){console.warn(" Missing check-in prerequisites:",{db:s,currentUserId:e,selectedCategory:i,selectedEntity:u}),t("Selection incomplete for check-in.","error");return}const I=new Date,le=ht(s,ui,ze.CURRENT_CHECKINS),Ie=`${A}_${i.toLowerCase()}_${u}_${I.getTime()}`,xe={athleteId:A,athleteName:N,checkInType:i.toLowerCase(),checkInEntity:u,timestamp:I.toISOString()};try{await bu(qt(le,Ie),xe),console.log(` [Check-In Success] ${N} checked in`),t(`Checked in ${N} for ${u}!`)}catch(Ae){console.error(` [Check-In Error] ${N}:`,Ae),t(`Check-in failed: ${Ae.message}`,"error")}},P=A=>U.some(N=>N.athleteId===A&&N.checkInType===i.toLowerCase()&&N.checkInEntity===u);if(!i)return v.jsxs("div",{className:"flex flex-col items-center justify-center h-full space-y-6",children:[v.jsx("h2",{className:"text-3xl font-bold text-center text-gray-800",children:"Select Check-In Category"}),v.jsxs("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 w-full max-w-md",children:[v.jsxs("button",{onClick:()=>o("Team"),className:"flex-1 bg-indigo-500 text-white py-4 px-6 rounded-lg text-xl font-semibold shadow-lg hover:bg-indigo-600 transition duration-300 ease-in-out transform hover:scale-105",children:[v.jsx(Lf,{className:"inline-block mr-2",size:24})," Team"]}),v.jsxs("button",{onClick:()=>o("Class"),className:"flex-1 bg-purple-500 text-white py-4 px-6 rounded-lg text-xl font-semibold shadow-lg hover:bg-purple-600 transition duration-300 ease-in-out transform hover:scale-105",children:[v.jsx(A_,{className:"inline-block mr-2",size:24})," Class"]})]})]});if(!u){const A=i==="Team"?_:k;return v.jsxs("div",{className:"flex flex-col items-center h-full p-4",children:[v.jsxs("button",{onClick:()=>o(null),className:"self-start mb-4 bg-gray-200 text-gray-700 py-2 px-4 rounded-lg flex items-center hover:bg-gray-300 transition duration-200",children:[v.jsx(Zu,{size:20,className:"mr-2"})," Back"]}),v.jsxs("h2",{className:"text-3xl font-bold text-center text-gray-800 mb-6",children:["Select ",i]}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 w-full max-w-3xl",children:A.length===0?v.jsxs("p",{className:"text-center text-gray-600 col-span-full",children:["No ",i.toLowerCase(),"es available."]}):A.map(N=>v.jsx("button",{onClick:()=>h(N),className:"bg-white border border-gray-200 rounded-lg p-4 text-center font-medium shadow hover:shadow-md transition duration-200 transform hover:scale-105 text-lg",children:N},N))})]})}return v.jsxs("div",{className:"flex flex-col h-full p-4",children:[v.jsxs("button",{onClick:()=>h(null),className:"self-start mb-4 bg-gray-200 text-gray-700 py-2 px-4 rounded-lg flex items-center hover:bg-gray-300 transition duration-200",children:[v.jsx(Zu,{size:20,className:"mr-2"})," Back to ",i," Selection"]}),v.jsxs("h2",{className:"text-3xl font-bold text-center text-gray-800 mb-6",children:["Check-In for: ",v.jsx("span",{className:"text-indigo-600",children:u})]}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 w-full max-w-5xl mx-auto",children:m.length===0?v.jsxs("p",{className:"text-center text-gray-600 col-span-full",children:["No athletes found for this ",i.toLowerCase(),"."]}):m.map(A=>{const N=P(A.id),I=W===A.id,le=I&&q[A.id]||0;return v.jsxs("div",{className:`relative bg-white rounded-lg p-4 shadow-md overflow-hidden transition-all duration-300 ease-in-out
                  ${N?"border-2 border-green-500 bg-green-50":"border border-gray-200"}
                  ${I?"scale-105 shadow-xl":""}
                `,children:[I&&v.jsx("div",{className:"absolute inset-0 bg-indigo-200 opacity-50 z-0 transition-all duration-50",style:{width:`${le}%`}}),v.jsx("button",{className:`relative z-10 w-full text-left py-2 px-3 rounded-lg
                    ${N?"text-green-800":"text-gray-800"}
                    ${I?"pointer-events-none":"hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}
                  `,onMouseDown:()=>{fe(!0),console.log("[MouseDown] Start hold"),R(A.id,A.name)},onMouseUp:()=>{fe(!1),console.log("[MouseUp] End hold"),x(A.id)},onMouseLeave:()=>{ie?console.log("[MouseLeave] Mouse still down, not canceling hold."):(console.log("[MouseLeave] Cancel hold (mouse up)"),x(A.id))},onTouchStart:Ie=>{Ie.preventDefault(),console.log("[TouchStart] Start hold"),R(A.id,A.name)},onTouchEnd:()=>{console.log("[TouchEnd] End hold"),x(A.id)},onTouchCancel:()=>{console.log("[TouchCancel] Cancel hold"),x(A.id)},children:v.jsxs("div",{className:"flex items-center",children:[v.jsx("img",{src:A.profilePicture||`https://placehold.co/50x50/cccccc/333333?text=${A.name.charAt(0)}`,alt:A.name,className:"w-12 h-12 rounded-full mr-4 object-cover border border-gray-300"}),v.jsx("span",{className:"text-xl font-semibold truncate",children:A.name}),N&&v.jsx(k_,{className:"ml-auto text-green-600",size:24})]})})]},A.id)})})]})},OC=({db:s,currentUserId:e,userRole:t,showAppToast:i})=>{const[o,u]=ne.useState("attendance"),[h,m]=ne.useState(!1),[g,_]=ne.useState(0),E=ne.useRef(null),k=3e3,D=()=>{m(!0),_(0);const W=Date.now();E.current=setInterval(()=>{const O=Date.now()-W,q=Math.min(100,O/k*100);_(q),q===100&&(clearInterval(E.current),E.current=null,$(),m(!1))},50)},U=()=>{E.current&&(clearInterval(E.current),E.current=null),m(!1),_(0)},$=async()=>{if(!s||!e){i("App not ready.","error");return}i("Resetting daily check-ins...","info");try{const W=ht(s,ui,ze.CURRENT_CHECKINS),O=await lr(W),q=[],Y=[];if(O.forEach(H=>{const ie=H.data();q.push(ie),Y.push(Df(qt(W,H.id)))}),await Promise.all(Y),q.length>0){const H=ht(s,ui,ze.HISTORICAL_CHECKIN_LOGS);await Vf(H,{timestamp:new Date().toISOString(),resetByUserId:e,dailyCheckInEvents:q.map(({athleteId:ie,athleteName:fe,checkInType:te,checkInEntity:R,timestamp:x})=>({athleteId:ie,athleteName:fe,checkInType:te,checkInEntity:R,timestamp:x}))})}i("Daily check-ins reset and logged!")}catch(W){console.error("Error resetting daily check-ins:",W),i(`Failed to reset: ${W.message}`,"error")}};return v.jsxs("div",{className:"flex flex-col h-full",children:[v.jsx("div",{className:"flex justify-center mb-6",children:v.jsxs("button",{className:`relative bg-red-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transition-all duration-300 ease-in-out transform ${h?"scale-105":"hover:scale-105"} overflow-hidden`,onMouseDown:D,onMouseUp:U,onMouseLeave:U,onTouchStart:W=>{W.preventDefault(),D()},onTouchEnd:U,onTouchCancel:U,disabled:t!=="admin",children:[h&&v.jsx("div",{className:"absolute inset-0 bg-red-800 opacity-50 z-0 transition-all duration-50",style:{width:`${progress}%`}}),v.jsx("span",{className:"relative z-10",children:h?`Hold to Reset (${Math.round(g)}%)`:"Reset Daily Check-ins"}),t!=="admin"&&v.jsx("span",{className:"absolute inset-0 flex items-center justify-center text-xs bg-gray-500 bg-opacity-75 rounded-full z-20",children:"Admin Only"})]})}),v.jsxs("nav",{className:"flex bg-gray-50 border-b border-gray-200 rounded-t-lg overflow-hidden mb-6",children:[v.jsxs("button",{onClick:()=>u("attendance"),className:`flex-1 py-3 px-4 text-center font-medium text-gray-700 hover:bg-gray-100 focus:outline-none transition-colors duration-200 ${o==="attendance"?"border-b-4 border-indigo-600 text-indigo-700 bg-gray-100":""}`,children:[v.jsx(xC,{className:"inline-block mr-2",size:20})," Attendance"]}),v.jsxs("button",{onClick:()=>u("athlete-profiles"),className:`flex-1 py-3 px-4 text-center font-medium text-gray-700 hover:bg-gray-100 focus:outline-none transition-colors duration-200 ${o==="athlete-profiles"?"border-b-4 border-indigo-600 text-indigo-700 bg-gray-100":""}`,children:[v.jsx(kC,{className:"inline-block mr-2",size:20})," Athlete Profiles"]}),v.jsxs("button",{onClick:()=>u("coach-management"),className:`flex-1 py-3 px-4 text-center font-medium text-gray-700 hover:bg-gray-100 focus:outline-none transition-colors duration-200 ${o==="coach-management"?"border-b-4 border-indigo-600 text-indigo-700 bg-gray-100":""}`,children:[v.jsx(Lf,{className:"inline-block mr-2",size:20})," Coach Management"]}),v.jsxs("button",{onClick:()=>u("check-in-logs"),className:`flex-1 py-3 px-4 text-center font-medium text-gray-700 hover:bg-gray-100 focus:outline-none transition-colors duration-200 ${o==="check-in-logs"?"border-b-4 border-indigo-600 text-indigo-700 bg-gray-100":""}`,children:[v.jsx(A_,{className:"inline-block mr-2",size:20})," Check-in Logs"]})]}),v.jsxs("div",{className:"flex-1 overflow-auto bg-white rounded-b-xl p-4 shadow-inner",children:[o==="attendance"&&v.jsx(MC,{db:s,currentUserId:e,showAppToast:i}),o==="athlete-profiles"&&v.jsx(jC,{db:s,currentUserId:e,userRole:t,showAppToast:i}),o==="coach-management"&&v.jsx(FC,{db:s,currentUserId:e,userRole:t,showAppToast:i}),o==="check-in-logs"&&v.jsx(zC,{db:s,currentUserId:e,userRole:t,showAppToast:i})]})]})},MC=({db:s,currentUserId:e,showAppToast:t})=>{const[i,o]=ne.useState(null),[u,h]=ne.useState(null),[m,g]=ne.useState([]),[_,E]=ne.useState([]),[k,D]=ne.useState([]),[U,$]=ne.useState([]);ne.useEffect(()=>{if(!s||!e)return;(async()=>{try{const q=ht(s,Qe(e),ze.ATHLETES),Y=Xt(q,at("isApproved","==",!0)),H=await lr(Y),ie=new Set,fe=new Set;H.forEach(te=>{const R=te.data();R.teams.forEach(x=>ie.add(x)),R.classes.forEach(x=>fe.add(x))}),g(Array.from(ie).sort()),E(Array.from(fe).sort())}catch(q){console.error("Error fetching entities:",q),t(`Error loading teams/classes: ${q.message}`,"error")}})()},[s,e,t]),ne.useEffect(()=>{if(!s||!e||!i||!u){D([]);return}const O=ht(s,Qe(e),ze.ATHLETES);let q;i==="Team"?q=Xt(O,at("teams","array-contains",u),at("isApproved","==",!0)):q=Xt(O,at("classes","array-contains",u),at("isApproved","==",!0));const Y=li(q,H=>{const ie=H.docs.map(fe=>({id:fe.id,...fe.data()}));D(ie.sort((fe,te)=>fe.name.localeCompare(te.name)))},H=>{console.error("Error fetching athletes for attendance:",H),t(`Error loading athletes: ${H.message}`,"error")});return()=>Y()},[s,e,i,u,t]),ne.useEffect(()=>{if(!s||!e||!i||!u){$([]);return}const O=ht(s,ui,ze.CURRENT_CHECKINS),q=Xt(O,at("checkInType","==",i.toLowerCase()),at("checkInEntity","==",u)),Y=li(q,H=>{const ie=H.docs.map(fe=>fe.data());$(ie)},H=>{console.error("Error fetching current check-ins:",H),t(`Error loading check-ins: ${H.message}`,"error")});return()=>Y()},[s,e,i,u,t]);const W=O=>{const q=U.filter(Y=>Y.athleteId===O);if(q.length>0){const Y=q.reduce((H,ie)=>new Date(H.timestamp)>new Date(ie.timestamp)?H:ie);return{status:"Checked In",lastCheckinTime:new Date(Y.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),activities:q.map(H=>`${H.checkInEntity} (${new Date(H.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})`).join(", ")}}return{status:"Not Checked In",lastCheckinTime:"N/A",activities:"N/A"}};if(!i)return v.jsxs("div",{className:"flex flex-col items-center justify-center h-full space-y-6",children:[v.jsx("h3",{className:"text-2xl font-semibold text-gray-800",children:"Select Category to View Attendance"}),v.jsxs("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 w-full max-w-md",children:[v.jsx("button",{onClick:()=>o("Team"),className:"flex-1 bg-indigo-500 text-white py-3 px-6 rounded-lg text-lg font-semibold shadow-md hover:bg-indigo-600 transition",children:"Team"}),v.jsx("button",{onClick:()=>o("Class"),className:"flex-1 bg-purple-500 text-white py-3 px-6 rounded-lg text-lg font-semibold shadow-md hover:bg-purple-600 transition",children:"Class"})]})]});if(!u){const O=i==="Team"?m:_;return v.jsxs("div",{className:"flex flex-col h-full p-4",children:[v.jsxs("button",{onClick:()=>o(null),className:"self-start mb-4 bg-gray-200 text-gray-700 py-2 px-4 rounded-lg flex items-center hover:bg-gray-300 transition",children:[v.jsx(Zu,{size:20,className:"mr-2"})," Back"]}),v.jsxs("h3",{className:"text-2xl font-semibold text-center text-gray-800 mb-6",children:["Select ",i," to View"]}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 w-full max-w-3xl",children:O.length===0?v.jsxs("p",{className:"text-center text-gray-600 col-span-full",children:["No ",i.toLowerCase(),"es found."]}):O.map(q=>v.jsx("button",{onClick:()=>h(q),className:"bg-white border border-gray-200 rounded-lg p-3 text-center font-medium shadow hover:shadow-md transition",children:q},q))})]})}return v.jsxs("div",{className:"flex flex-col h-full p-4",children:[v.jsxs("button",{onClick:()=>h(null),className:"self-start mb-4 bg-gray-200 text-gray-700 py-2 px-4 rounded-lg flex items-center hover:bg-gray-300 transition",children:[v.jsx(Zu,{size:20,className:"mr-2"})," Back to ",i," Selection"]}),v.jsxs("h3",{className:"text-2xl font-bold text-center text-indigo-700 mb-6",children:["Attendance for ",u," (",i,")"]}),v.jsx("div",{className:"overflow-x-auto rounded-lg shadow-md border border-gray-200",children:v.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[v.jsx("thead",{className:"bg-gray-50",children:v.jsxs("tr",{children:[v.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Athlete Name"}),v.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),v.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Check-in Time"}),v.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Activities Today"})]})}),v.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.length===0?v.jsx("tr",{children:v.jsxs("td",{colSpan:"4",className:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500",children:["No athletes found for this ",i.toLowerCase(),"."]})}):k.map(O=>{const{status:q,lastCheckinTime:Y,activities:H}=W(O.id);return v.jsxs("tr",{className:q==="Checked In"?"bg-green-50":"",children:[v.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v.jsxs("div",{className:"flex items-center",children:[v.jsx("img",{src:O.profilePicture||`https://placehold.co/40x40/cccccc/333333?text=${O.name.charAt(0)}`,alt:O.name,className:"w-8 h-8 rounded-full mr-3 object-cover"}),v.jsx("div",{className:"text-sm font-medium text-gray-900",children:O.name})]})}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${q==="Checked In"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:q})}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Y}),v.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:H})]},O.id)})})]})})]})},jC=({db:s,currentUserId:e,userRole:t,showAppToast:i})=>{const[o,u]=ne.useState([]),[h,m]=ne.useState(""),[g,_]=ne.useState(!1),[E,k]=ne.useState(null),[D,U]=ne.useState(!1);ne.useEffect(()=>{if(!s||!e)return;const te=ht(s,Qe(e),ze.ATHLETES),R=li(te,x=>{const S=x.docs.map(P=>({id:P.id,...P.data()}));u(S.sort((P,A)=>P.name.localeCompare(A.name)))},x=>{console.error("Error fetching athletes for profiles:",x),i(`Error loading athletes: ${x.message}`,"error")});return()=>R()},[s,e,i]);const $=o.filter(te=>te.isApproved),W=o.filter(te=>!te.isApproved),O=$.filter(te=>te.name.toLowerCase().includes(h.toLowerCase())),q=async te=>{if(!s||!e||t!=="admin"){i("Permission denied. Only Admin can approve athletes.","error");return}i("Approving athlete...","info");try{const R=qt(s,Qe(e),ze.ATHLETES,te);await tl(R,{isApproved:!0}),i("Athlete approved successfully!")}catch(R){console.error("Error approving athlete:",R),i(`Failed to approve: ${R.message}`,"error")}},Y=async te=>{if(!s||!e||t!=="admin"){i("Permission denied. Only Admin can delete athletes.","error");return}if(window.confirm("Are you sure you want to delete this athlete? This action cannot be undone.")){i("Deleting athlete...","info");try{const R=qt(s,Qe(e),ze.ATHLETES,te);await Df(R),i("Athlete deleted successfully!")}catch(R){console.error("Error deleting athlete:",R),i(`Failed to delete: ${R.message}`,"error")}}},H=te=>{k(te),U(!1)},ie=()=>{k(null),U(!1)},fe=()=>{t==="admin"?U(te=>!te):i("Only Admin can edit athlete profiles.","error")};return v.jsxs("div",{className:"p-4",children:[v.jsx("h3",{className:"text-2xl font-bold text-center text-indigo-700 mb-6",children:"Athlete Profiles"}),v.jsxs("div",{className:"flex justify-between items-center mb-6 flex-wrap gap-4",children:[v.jsx("input",{type:"text",placeholder:"Search approved athletes by name...",className:"flex-1 min-w-[200px] px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500",value:h,onChange:te=>m(te.target.value)}),v.jsxs("button",{onClick:()=>_(!0),className:"bg-indigo-600 text-white py-2 px-5 rounded-lg font-semibold shadow-md hover:bg-indigo-700 transition duration-300 transform hover:scale-105 flex items-center",children:[v.jsx(Ua,{size:20,className:"mr-2"})," Add New Athlete"]})]}),W.length>0&&v.jsxs("div",{className:"mb-8 p-4 bg-yellow-50 border border-yellow-200 rounded-lg shadow-sm",children:[v.jsx("h4",{className:"text-xl font-semibold text-yellow-800 mb-4",children:"Pending Athletes for Approval"}),v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"min-w-full divide-y divide-yellow-200",children:[v.jsx("thead",{className:"bg-yellow-100",children:v.jsxs("tr",{children:[v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-yellow-700 uppercase tracking-wider",children:"Name"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-yellow-700 uppercase tracking-wider",children:"Added By"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-yellow-700 uppercase tracking-wider",children:"Actions"})]})}),v.jsx("tbody",{className:"bg-white divide-y divide-yellow-200",children:W.map(te=>v.jsxs("tr",{children:[v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:te.name}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:te.addedByCoach||"N/A"}),v.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[v.jsx("button",{onClick:()=>q(te.id),className:`text-green-600 hover:text-green-900 mr-3 ${t!=="admin"?"opacity-50 cursor-not-allowed":""}`,disabled:t!=="admin",children:"Approve"}),v.jsx("button",{onClick:()=>Y(te.id),className:`text-red-600 hover:text-red-900 ${t!=="admin"?"opacity-50 cursor-not-allowed":""}`,disabled:t!=="admin",children:"Delete"})]})]},te.id))})]})})]}),v.jsx("h4",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Approved Athletes"}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:O.length===0?v.jsx("p",{className:"col-span-full text-center text-gray-600",children:"No approved athletes found."}):O.map(te=>v.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 flex items-center space-x-4 hover:shadow-md transition cursor-pointer",onClick:()=>H(te),children:[v.jsx("img",{src:te.profilePicture||`https://placehold.co/60x60/cccccc/333333?text=${te.name.charAt(0)}`,alt:te.name,className:"w-16 h-16 rounded-full object-cover border-4 border-gray-300"}),v.jsxs("div",{children:[v.jsx("p",{className:"text-lg font-semibold text-gray-900",children:te.name}),v.jsxs("p",{className:"text-sm text-gray-600",children:[te.teams.join(", ")," / ",te.classes.join(", ")]})]})]},te.id))}),v.jsx(za,{isOpen:g,title:"Add New Athlete",onClose:()=>_(!1),showCloseButton:!0,children:v.jsx(py,{db:s,currentUserId:e,onClose:()=>_(!1),showAppToast:i,isNew:!0,isEditing:!0,setParentIsEditing:()=>{},userRole:t})}),E&&v.jsxs(za,{isOpen:!!E,title:D?"Edit Athlete Profile":"View Athlete Profile",onClose:ie,showCloseButton:!0,children:[v.jsx("div",{className:"flex justify-end mb-4",children:v.jsxs("button",{onClick:fe,className:`py-2 px-4 rounded-lg flex items-center transition duration-200
                ${D?"bg-red-500 text-white hover:bg-red-600":"bg-indigo-500 text-white hover:bg-indigo-600"}
                ${t!=="admin"?"opacity-50 cursor-not-allowed":""}
              `,disabled:t!=="admin",children:[D?v.jsx(Ic,{size:18,className:"mr-2"}):v.jsx(R_,{size:18,className:"mr-2"}),D?"Cancel Edit":"Edit Profile"]})}),v.jsx(py,{db:s,currentUserId:e,onClose:ie,showAppToast:i,isNew:!1,initialData:E,isEditing:D,setParentIsEditing:U,athleteId:E.id,userRole:t})]})]})},py=({db:s,currentUserId:e,onClose:t,showAppToast:i,isNew:o,initialData:u,isEditing:h,setParentIsEditing:m,athleteId:g,userRole:_})=>{const[E,k]=ne.useState(u||{name:"",teams:[],classes:[],skills:[],improvementAreas:"",coachNotes:[],parentName:"",parentPhone:"",parentEmail:"",emergencyContactName:"",emergencyContactPhone:"",isApproved:o?!1:(u==null?void 0:u.isApproved)||!1,addedByCoach:"",profilePicture:""}),[D,U]=ne.useState([]),[$,W]=ne.useState([]),[O,q]=ne.useState(""),[Y,H]=ne.useState("Not Started"),[ie,fe]=ne.useState(""),[te,R]=ne.useState(null),x=ne.useRef(null),S=ne.useRef(null),P=ne.useRef(null),[A,N]=ne.useState(!1);ne.useEffect(()=>{if(!s||!e)return;(async()=>{try{const ce=ht(s,Qe(e),ze.ATHLETES),_e=await lr(Xt(ce,at("isApproved","==",!0))),Re=new Set,Ve=new Set;_e.forEach(qe=>{var dt,Jt;(dt=qe.data().teams)==null||dt.forEach(_n=>Re.add(_n)),(Jt=qe.data().classes)==null||Jt.forEach(_n=>Ve.add(_n))}),U(Array.from(Re).sort()),W(Array.from(Ve).sort())}catch(ce){console.error("Error fetching all teams/classes:",ce)}})()},[s,e]);const I=Z=>{const{name:ce,value:_e,type:Re,checked:Ve}=Z.target;if(Re==="checkbox"){const{group:qe}=Z.target.dataset;let dt=[...E[qe]];Ve?dt.push(_e):dt=dt.filter(Jt=>Jt!==_e),k({...E,[qe]:dt})}else k({...E,[ce]:_e})},le=()=>{O.trim()&&(k({...E,skills:[...E.skills,{name:O.trim(),status:Y}]}),q(""),H("Not Started"))},Ie=(Z,ce)=>{const _e=[...E.skills];_e[Z].status=ce,k({...E,skills:_e})},xe=Z=>{const ce=E.skills.filter((_e,Re)=>Re!==Z);k({...E,skills:ce})},Ae=async()=>{var Z;if(ie.trim()){let ce="Unknown Coach";try{const _e=ht(s,Qe(e),ze.COACHES),Re=Xt(_e,at("passcode","==",Od)),Ve=await lr(Re);if(!Ve.empty)ce=Ve.docs[0].data().name;else{const qe=await Ju(qt(s,Qe(e),ze.COACHES,(Z=fo.currentUser)==null?void 0:Z.uid));qe.exists()&&(ce=qe.data().name)}}catch(_e){console.warn("Could not fetch coach name for note:",_e)}k({...E,coachNotes:[...E.coachNotes,{timestamp:new Date().toISOString(),note:ie.trim(),coachName:ce}]}),fe("")}},re=Z=>{const ce=E.coachNotes.filter((_e,Re)=>Re!==Z);k({...E,coachNotes:ce})},pe=Z=>{const ce=Z.target.files[0];if(ce){const _e=new FileReader;_e.onloadend=()=>{k({...E,profilePicture:_e.result}),R(null)},_e.readAsDataURL(ce)}},ae=()=>{k({...E,profilePicture:""})},L=async()=>{R("camera");try{const Z=await navigator.mediaDevices.getUserMedia({video:!0});S.current&&(S.current.srcObject=Z,S.current.play())}catch(Z){console.error("Error accessing camera:",Z),i(`Could not access camera: ${Z.message}. Please ensure permissions are granted.`,"error"),R(null)}},K=()=>{if(S.current&&P.current){const Z=P.current.getContext("2d");P.current.width=S.current.videoWidth,P.current.height=S.current.videoHeight,Z.drawImage(S.current,0,0,P.current.width,P.current.height);const ce=P.current.toDataURL("image/png");k({...E,profilePicture:ce}),S.current.srcObject&&S.current.srcObject.getTracks().forEach(_e=>_e.stop()),R(null)}},we=async Z=>{var ce;Z.preventDefault(),N(!0);try{const _e=ht(s,Qe(e),ze.ATHLETES);let Re="Unknown Coach";try{const Ve=ht(s,Qe(e),ze.COACHES),qe=Xt(Ve,at("passcode","==",Od)),dt=await lr(qe);if(!dt.empty)Re=dt.docs[0].data().name;else{const Jt=await Ju(qt(s,Qe(e),ze.COACHES,(ce=fo.currentUser)==null?void 0:ce.uid));Jt.exists()&&(Re=Jt.data().name)}}catch(Ve){console.warn("Could not fetch coach name for new athlete:",Ve)}if(o)await Vf(_e,{...E,addedByCoach:Re}),i("Athlete added successfully!");else{if(_!=="admin"){i("Permission denied. Only Admin can save edits.","error"),N(!1);return}const Ve=qt(s,Qe(e),ze.ATHLETES,g);await tl(Ve,E),i("Athlete updated successfully!"),m&&m(!1)}t()}catch(_e){console.error("Error saving athlete:",_e),i(`Failed to save athlete: ${_e.message}`,"error")}finally{N(!1)}},Ee=h||o;return v.jsxs("form",{onSubmit:we,className:"space-y-6 max-h-[80vh] overflow-y-auto pr-2",children:[v.jsxs("div",{className:"flex flex-col items-center mb-6",children:[v.jsx("img",{src:E.profilePicture||`https://placehold.co/120x120/cccccc/333333?text=${E.name.charAt(0)||"?"}`,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-4 border-indigo-200 shadow-md mb-4"}),Ee&&v.jsxs("div",{className:"flex space-x-2",children:[v.jsxs("button",{type:"button",onClick:()=>x.current.click(),className:"bg-gray-200 text-gray-700 py-2 px-4 rounded-lg flex items-center hover:bg-gray-300 transition",children:[v.jsx(CC,{size:18,className:"mr-2"})," Upload"]}),v.jsx("input",{type:"file",accept:"image/*",ref:x,onChange:pe,className:"hidden"}),v.jsxs("button",{type:"button",onClick:L,className:"bg-gray-200 text-gray-700 py-2 px-4 rounded-lg flex items-center hover:bg-gray-300 transition",children:[v.jsx(hy,{size:18,className:"mr-2"})," Camera"]}),E.profilePicture&&v.jsxs("button",{type:"button",onClick:ae,className:"bg-red-100 text-red-700 py-2 px-4 rounded-lg flex items-center hover:bg-red-200 transition",children:[v.jsx(dy,{size:18,className:"mr-2"})," Remove"]})]})]}),v.jsx(za,{isOpen:te==="camera",title:"Take a Photo",onClose:()=>{R(null),S.current&&S.current.srcObject&&S.current.srcObject.getTracks().forEach(Z=>Z.stop())},children:v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("video",{ref:S,autoPlay:!0,playsInline:!0,className:"w-full max-w-sm rounded-lg border border-gray-300"}),v.jsx("canvas",{ref:P,className:"hidden"}),v.jsxs("button",{type:"button",onClick:K,className:"mt-4 bg-indigo-500 text-white py-2 px-4 rounded-lg flex items-center hover:bg-indigo-600 transition",children:[v.jsx(hy,{size:20,className:"mr-2"})," Take Photo"]})]})}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Athlete Name"}),v.jsx("input",{type:"text",name:"name",value:E.name,onChange:I,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",disabled:!Ee})]}),o&&v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Added By Coach"}),v.jsx("p",{className:"mt-1 text-gray-500 text-sm italic",children:"Will be auto-filled by current coach."})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Teams"}),v.jsxs("div",{className:"mt-1 border border-gray-300 rounded-md p-2 max-h-40 overflow-y-auto bg-gray-50",children:[D.map(Z=>v.jsxs("div",{className:"flex items-center",children:[v.jsx("input",{type:"checkbox",id:`team-${Z}`,name:"teams",value:Z,"data-group":"teams",checked:E.teams.includes(Z),onChange:I,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded",disabled:!Ee}),v.jsx("label",{htmlFor:`team-${Z}`,className:"ml-2 text-sm text-gray-900",children:Z})]},Z)),D.length===0&&v.jsx("p",{className:"text-sm text-gray-500",children:"No teams available yet."})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Classes"}),v.jsxs("div",{className:"mt-1 border border-gray-300 rounded-md p-2 max-h-40 overflow-y-auto bg-gray-50",children:[$.map(Z=>v.jsxs("div",{className:"flex items-center",children:[v.jsx("input",{type:"checkbox",id:`class-${Z}`,name:"classes",value:Z,"data-group":"classes",checked:E.classes.includes(Z),onChange:I,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded",disabled:!Ee}),v.jsx("label",{htmlFor:`class-${Z}`,className:"ml-2 text-sm text-gray-900",children:Z})]},Z)),$.length===0&&v.jsx("p",{className:"text-sm text-gray-500",children:"No classes available yet."})]})]})]}),v.jsx("h4",{className:"text-lg font-semibold text-gray-800 mt-6 mb-2",children:"Contact Information"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"parentName",className:"block text-sm font-medium text-gray-700",children:"Parent/Guardian Name"}),v.jsx("input",{type:"text",name:"parentName",value:E.parentName,onChange:I,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",disabled:!Ee})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"parentPhone",className:"block text-sm font-medium text-gray-700",children:"Parent Phone"}),v.jsx("input",{type:"tel",name:"parentPhone",value:E.parentPhone,onChange:I,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",disabled:!Ee})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"parentEmail",className:"block text-sm font-medium text-gray-700",children:"Parent Email"}),v.jsx("input",{type:"email",name:"parentEmail",value:E.parentEmail,onChange:I,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",disabled:!Ee})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"emergencyContactName",className:"block text-sm font-medium text-gray-700",children:"Emergency Contact Name"}),v.jsx("input",{type:"text",name:"emergencyContactName",value:E.emergencyContactName,onChange:I,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",disabled:!Ee})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"emergencyContactPhone",className:"block text-sm font-medium text-gray-700",children:"Emergency Contact Phone"}),v.jsx("input",{type:"tel",name:"emergencyContactPhone",value:E.emergencyContactPhone,onChange:I,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",disabled:!Ee})]})]}),v.jsx("h4",{className:"text-lg font-semibold text-gray-800 mt-6 mb-2",children:"Skills"}),v.jsxs("div",{className:"space-y-3",children:[E.skills.map((Z,ce)=>v.jsxs("div",{className:"flex items-center space-x-3 bg-gray-50 p-3 rounded-lg border border-gray-200",children:[v.jsx("span",{className:"font-medium text-gray-900 flex-1",children:Z.name}),Ee?v.jsxs("select",{value:Z.status,onChange:_e=>Ie(ce,_e.target.value),className:"border border-gray-300 rounded-md shadow-sm p-1 text-sm",children:[v.jsx("option",{children:"Not Started"}),v.jsx("option",{children:"Working On"}),v.jsx("option",{children:"Needs Improvement"}),v.jsx("option",{children:"Mastered"})]}):v.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${Z.status==="Mastered"?"bg-green-100 text-green-800":Z.status==="Working On"?"bg-blue-100 text-blue-800":Z.status==="Needs Improvement"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:Z.status}),Ee&&v.jsx("button",{type:"button",onClick:()=>xe(ce),className:"text-red-500 hover:text-red-700",children:v.jsx(dy,{size:16})})]},ce)),Ee&&v.jsxs("div",{className:"flex space-x-2 mt-4",children:[v.jsx("input",{type:"text",placeholder:"New Skill Name",value:O,onChange:Z=>q(Z.target.value),className:"flex-1 border border-gray-300 rounded-md shadow-sm p-2"}),v.jsxs("select",{value:Y,onChange:Z=>H(Z.target.value),className:"border border-gray-300 rounded-md shadow-sm p-2",children:[v.jsx("option",{children:"Not Started"}),v.jsx("option",{children:"Working On"}),v.jsx("option",{children:"Needs Improvement"}),v.jsx("option",{children:"Mastered"})]}),v.jsx("button",{type:"button",onClick:le,className:"bg-indigo-500 text-white p-2 rounded-lg hover:bg-indigo-600 transition",children:v.jsx(Ua,{size:20})})]})]}),v.jsx("h4",{className:"text-lg font-semibold text-gray-800 mt-6 mb-2",children:"Improvement Areas"}),v.jsx("textarea",{name:"improvementAreas",value:E.improvementAreas,onChange:I,rows:"3",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:"Notes on areas for improvement...",disabled:!Ee}),v.jsx("h4",{className:"text-lg font-semibold text-gray-800 mt-6 mb-2",children:"Coach Notes"}),v.jsxs("div",{className:"space-y-3",children:[E.coachNotes.sort((Z,ce)=>new Date(ce.timestamp)-new Date(Z.timestamp)).map((Z,ce)=>v.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:[v.jsxs("p",{className:"text-sm text-gray-600",children:[v.jsx("span",{className:"font-medium",children:Z.coachName})," on ",new Date(Z.timestamp).toLocaleDateString()," at ",new Date(Z.timestamp).toLocaleTimeString()]}),v.jsx("p",{className:"text-gray-800 mt-1",children:Z.note}),Ee&&v.jsx("button",{type:"button",onClick:()=>re(ce),className:"text-red-500 hover:text-red-700 text-sm mt-2",children:"Remove Note"})]},ce)),Ee&&v.jsxs("div",{className:"flex space-x-2 mt-4",children:[v.jsx("textarea",{value:ie,onChange:Z=>fe(Z.target.value),rows:"2",placeholder:"Add new coach note...",className:"flex-1 border border-gray-300 rounded-md shadow-sm p-2"}),v.jsx("button",{type:"button",onClick:Ae,className:"bg-indigo-500 text-white p-2 rounded-lg hover:bg-indigo-600 transition",children:v.jsx(Ua,{size:20})})]})]}),(Ee||o)&&v.jsxs("div",{className:"flex justify-end space-x-4 mt-8",children:[v.jsx("button",{type:"button",onClick:t,className:"bg-gray-300 text-gray-800 py-2 px-5 rounded-lg font-semibold shadow-md hover:bg-gray-400 transition",disabled:A,children:"Cancel"}),v.jsx("button",{type:"submit",className:"bg-green-600 text-white py-2 px-5 rounded-lg font-semibold shadow-md hover:bg-green-700 transition",disabled:A||h&&_!=="admin",children:A?"Saving...":o?"Add Athlete":"Save Changes"})]})]})},FC=({db:s,currentUserId:e,userRole:t,showAppToast:i})=>{const[o,u]=ne.useState([]),[h,m]=ne.useState(!1),[g,_]=ne.useState(null),[E,k]=ne.useState(!1);ne.useEffect(()=>{if(!s||!e)return;const O=ht(s,Qe(e),ze.COACHES),q=li(O,Y=>{const H=Y.docs.map(ie=>({id:ie.id,...ie.data()}));u(H.sort((ie,fe)=>ie.name.localeCompare(fe.name)))},Y=>{console.error("Error fetching coaches:",Y),i(`Error loading coaches: ${Y.message}`,"error")});return()=>q()},[s,e,i]);const D=async O=>{if(t!=="admin"){i("Permission denied. Only Admin can approve coaches.","error");return}i("Approving coach...","info");try{const q=qt(s,Qe(e),ze.COACHES,O);await tl(q,{isApproved:!0}),i("Coach approved successfully!")}catch(q){console.error("Error approving coach:",q),i(`Failed to approve: ${q.message}`,"error")}},U=async O=>{if(t!=="admin"){i("Permission denied. Only Admin can delete coaches.","error");return}if(window.confirm("Are you sure you want to delete this coach? This action cannot be undone.")){i("Deleting coach...","info");try{const q=qt(s,Qe(e),ze.COACHES,O);await Df(q),i("Coach deleted successfully!")}catch(q){console.error("Error deleting coach:",q),i(`Failed to delete: ${q.message}`,"error")}}},$=O=>{t==="admin"?(_(O),k(!0)):i("Only Admin can edit coach profiles.","error")},W=()=>{_(null),k(!1)};return v.jsxs("div",{className:"p-4",children:[v.jsx("h3",{className:"text-2xl font-bold text-center text-indigo-700 mb-6",children:"Coach Management"}),v.jsx("div",{className:"flex justify-end mb-6",children:v.jsxs("button",{onClick:()=>m(!0),className:"bg-indigo-600 text-white py-2 px-5 rounded-lg font-semibold shadow-md hover:bg-indigo-700 transition duration-300 transform hover:scale-105 flex items-center",disabled:t!=="admin",children:[v.jsx(Ua,{size:20,className:"mr-2"})," Add New Coach",t!=="admin"&&v.jsx("span",{className:"ml-2 text-xs opacity-75",children:" (Admin Only)"})]})}),v.jsx("div",{className:"overflow-x-auto rounded-lg shadow-md border border-gray-200",children:v.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[v.jsx("thead",{className:"bg-gray-50",children:v.jsxs("tr",{children:[v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teams / Classes"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Passcode"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),v.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?v.jsx("tr",{children:v.jsx("td",{colSpan:"6",className:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500",children:"No coaches found."})}):o.map(O=>{var q,Y;return v.jsxs("tr",{children:[v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:O.name}),v.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[O.email,v.jsx("br",{}),O.phone]}),v.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["Teams: ",((q=O.teams)==null?void 0:q.join(", "))||"N/A",v.jsx("br",{}),"Classes: ",((Y=O.classes)==null?void 0:Y.join(", "))||"N/A"]}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${O.isApproved?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:O.isApproved?"Approved":"Pending"})}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:O.passcode}),v.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[!O.isApproved&&v.jsx("button",{onClick:()=>D(O.id),className:`text-green-600 hover:text-green-900 mr-3 ${t!=="admin"?"opacity-50 cursor-not-allowed":""}`,disabled:t!=="admin",children:"Approve"}),v.jsx("button",{onClick:()=>$(O),className:`text-indigo-600 hover:text-indigo-900 mr-3 ${t!=="admin"?"opacity-50 cursor-not-allowed":""}`,disabled:t!=="admin",children:"Edit"}),v.jsx("button",{onClick:()=>U(O.id),className:`text-red-600 hover:text-red-900 ${t!=="admin"?"opacity-50 cursor-not-allowed":""}`,disabled:t!=="admin",children:"Delete"})]})]},O.id)})})]})}),v.jsx(za,{isOpen:h||E,title:E?"Edit Coach":"Add New Coach",onClose:W,showCloseButton:!0,children:v.jsx(UC,{db:s,currentUserId:e,onClose:W,showAppToast:i,isNew:!E,initialData:g,userRole:t})})]})},UC=({db:s,currentUserId:e,onClose:t,showAppToast:i,isNew:o,initialData:u,userRole:h})=>{const[m,g]=ne.useState(u||{name:"",email:"",phone:"",teams:[],classes:[],isApproved:o?!1:(u==null?void 0:u.isApproved)||!1,passcode:""}),[_,E]=ne.useState([]),[k,D]=ne.useState([]),[U,$]=ne.useState(!1);ne.useEffect(()=>{if(!s||!e)return;(async()=>{try{const Y=ht(s,Qe(e),ze.ATHLETES),H=await lr(Xt(Y,at("isApproved","==",!0))),ie=new Set,fe=new Set;H.forEach(te=>{var R,x;(R=te.data().teams)==null||R.forEach(S=>ie.add(S)),(x=te.data().classes)==null||x.forEach(S=>fe.add(S))}),E(Array.from(ie).sort()),D(Array.from(fe).sort())}catch(Y){console.error("Error fetching all teams/classes for coach form:",Y)}})()},[s,e]);const W=q=>{const{name:Y,value:H,type:ie,checked:fe}=q.target;if(ie==="checkbox"){const{group:te}=q.target.dataset;let R=[...m[te]];fe?R.push(H):R=R.filter(x=>x!==H),g({...m,[te]:R})}else g({...m,[Y]:H})},O=async q=>{if(q.preventDefault(),h!=="admin"){i("Permission denied. Only Admin can add/edit coaches.","error");return}$(!0);try{const Y=ht(s,Qe(e),ze.COACHES);if(o)await Vf(Y,m),i("Coach added successfully!");else{const H=qt(s,Qe(e),ze.COACHES,u.id);await tl(H,m),i("Coach updated successfully!")}t()}catch(Y){console.error("Error saving coach:",Y),i(`Failed to save coach: ${Y.message}`,"error")}finally{$(!1)}};return v.jsxs("form",{onSubmit:O,className:"space-y-6",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Coach Name"}),v.jsx("input",{type:"text",name:"name",value:m.name,onChange:W,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),v.jsx("input",{type:"email",name:"email",value:m.email,onChange:W,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone"}),v.jsx("input",{type:"tel",name:"phone",value:m.phone,onChange:W,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"passcode",className:"block text-sm font-medium text-gray-700",children:"4-digit Passcode"}),v.jsx("input",{type:"text",name:"passcode",value:m.passcode,onChange:W,required:!0,maxLength:"4",pattern:"\\d{4}",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Assigned Teams"}),v.jsxs("div",{className:"mt-1 border border-gray-300 rounded-md p-2 max-h-40 overflow-y-auto bg-gray-50",children:[_.map(q=>v.jsxs("div",{className:"flex items-center",children:[v.jsx("input",{type:"checkbox",id:`coach-team-${q}`,name:"teams",value:q,"data-group":"teams",checked:m.teams.includes(q),onChange:W,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded"}),v.jsx("label",{htmlFor:`coach-team-${q}`,className:"ml-2 text-sm text-gray-900",children:q})]},q)),_.length===0&&v.jsx("p",{className:"text-sm text-gray-500",children:"No teams available yet."})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Assigned Classes"}),v.jsxs("div",{className:"mt-1 border border-gray-300 rounded-md p-2 max-h-40 overflow-y-auto bg-gray-50",children:[k.map(q=>v.jsxs("div",{className:"flex items-center",children:[v.jsx("input",{type:"checkbox",id:`coach-class-${q}`,name:"classes",value:q,"data-group":"classes",checked:m.classes.includes(q),onChange:W,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded"}),v.jsx("label",{htmlFor:`coach-class-${q}`,className:"ml-2 text-sm text-gray-900",children:q})]},q)),k.length===0&&v.jsx("p",{className:"text-sm text-gray-500",children:"No classes available yet."})]})]})]}),v.jsxs("div",{className:"flex justify-end space-x-4 mt-8",children:[v.jsx("button",{type:"button",onClick:t,className:"bg-gray-300 text-gray-800 py-2 px-5 rounded-lg font-semibold shadow-md hover:bg-gray-400 transition",disabled:U,children:"Cancel"}),v.jsx("button",{type:"submit",className:"bg-green-600 text-white py-2 px-5 rounded-lg font-semibold shadow-md hover:bg-green-700 transition",disabled:U,children:U?"Saving...":o?"Add Coach":"Save Changes"})]})]})},zC=({db:s,currentUserId:e,userRole:t,showAppToast:i})=>{const[o,u]=ne.useState([]),[h,m]=ne.useState(null),[g,_]=ne.useState(!1),[E,k]=ne.useState(""),[D,U]=ne.useState("All"),[$,W]=ne.useState("All"),[O,q]=ne.useState("All"),[Y,H]=ne.useState([]),[ie,fe]=ne.useState([]);ne.useEffect(()=>{if(!s||!e)return;const I=ht(s,ui,ze.HISTORICAL_CHECKIN_LOGS),le=li(I,Ie=>{const xe=Ie.docs.map(Ae=>({id:Ae.id,...Ae.data()}));u(xe.sort((Ae,re)=>new Date(re.timestamp)-new Date(Ae.timestamp)))},Ie=>{console.error("Error fetching historical logs:",Ie),i(`Error loading logs: ${Ie.message}`,"error")});return()=>le()},[s,e,i]),ne.useEffect(()=>{if(!s||!e)return;(async()=>{try{const le=ht(s,Qe(e),ze.ATHLETES),Ie=await lr(Xt(le,at("isApproved","==",!0))),xe=new Set,Ae=new Set;Ie.forEach(re=>{var pe,ae;(pe=re.data().teams)==null||pe.forEach(L=>xe.add(L)),(ae=re.data().classes)==null||ae.forEach(L=>Ae.add(L))}),H(Array.from(xe).sort()),fe(Array.from(Ae).sort())}catch(le){console.error("Error fetching all teams/classes for logs filter:",le)}})()},[s,e]);const te=I=>{m(I),_(!1)},R=()=>{m(null),_(!1)},x=()=>{t==="admin"?_(I=>!I):i("Only Admin can edit check-in logs.","error")},S=(I,le)=>{if(t!=="admin"){i("Permission denied. Only Admin can edit logs.","error");return}const Ie={...h};Ie.dailyCheckInEvents=Ie.dailyCheckInEvents.filter((xe,Ae)=>Ae!==le),m(Ie)},P=async(I,le,Ie,xe,Ae)=>{if(t!=="admin"){i("Permission denied. Only Admin can edit logs.","error");return}const re=await Ju(qt(s,Qe(e),ze.ATHLETES,le));if(!re.exists()){i("Athlete not found.","error");return}const pe=re.data().name,ae={athleteId:le,athleteName:pe,checkInType:Ie.toLowerCase(),checkInEntity:xe,timestamp:new Date(Ae).toISOString()},L={...h,dailyCheckInEvents:[...h.dailyCheckInEvents,ae]};m(L),i("Event added locally. Remember to save changes.","info")},A=async()=>{if(t!=="admin"){i("Permission denied. Only Admin can save log edits.","error");return}if(h){i("Saving log changes...","info");try{const I=qt(s,ui,ze.HISTORICAL_CHECKIN_LOGS,h.id);await tl(I,{dailyCheckInEvents:h.dailyCheckInEvents,lastEdited:new Date().toISOString()}),i("Log updated successfully!"),_(!1)}catch(I){console.error("Error saving log edits:",I),i(`Failed to save log: ${I.message}`,"error")}}},N=o.filter(I=>{let le=!0;if(O!=="All"&&$!=="All"?I.dailyCheckInEvents.some(xe=>xe.checkInEntity===O&&xe.checkInType===$.toLowerCase())||(le=!1):$!=="All"&&(I.dailyCheckinEvents.some(xe=>xe.checkInType===$.toLowerCase())||(le=!1)),E){const Ie=E.toLowerCase();I.dailyCheckInEvents.some(Ae=>Ae.athleteName.toLowerCase().includes(Ie))||(le=!1)}return D==="Missed"&&E?I.dailyCheckinEvents.some(xe=>xe.athleteName.toLowerCase().includes(E.toLowerCase()))&&(le=!1):D==="Checked In"&&E?I.dailyCheckinEvents.some(xe=>xe.athleteName.toLowerCase().includes(E.toLowerCase()))||(le=!1):D==="Checked In"&&!E&&I.dailyCheckinEvents.length===0&&(le=!1),le});return v.jsxs("div",{className:"p-4",children:[v.jsx("h3",{className:"text-2xl font-bold text-center text-indigo-700 mb-6",children:"Historical Check-in Logs"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6 p-4 bg-gray-50 rounded-lg shadow-sm border border-gray-200",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"filterAthlete",className:"block text-sm font-medium text-gray-700",children:"Athlete Name"}),v.jsx("input",{type:"text",id:"filterAthlete",value:E,onChange:I=>k(I.target.value),placeholder:"Filter by athlete name",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"filterStatus",className:"block text-sm font-medium text-gray-700",children:"Status"}),v.jsxs("select",{id:"filterStatus",value:D,onChange:I=>U(I.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",children:[v.jsx("option",{value:"All",children:"All"}),v.jsx("option",{value:"Checked In",children:"Checked In"}),v.jsx("option",{value:"Missed",children:"Missed (requires athlete name filter)"})]})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"filterCategory",className:"block text-sm font-medium text-gray-700",children:"Category"}),v.jsxs("select",{id:"filterCategory",value:$,onChange:I=>{W(I.target.value),q("All")},className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",children:[v.jsx("option",{value:"All",children:"All"}),v.jsx("option",{value:"Team",children:"Team"}),v.jsx("option",{value:"Class",children:"Class"})]})]}),($==="Team"||$==="Class")&&v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"filterEntity",className:"block text-sm font-medium text-gray-700",children:[$," Name"]}),v.jsxs("select",{id:"filterEntity",value:O,onChange:I=>q(I.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",children:[v.jsxs("option",{value:"All",children:["All ",$,"s"]}),($==="Team"?Y:ie).map(I=>v.jsx("option",{value:I,children:I},I))]})]})]}),v.jsx("div",{className:"overflow-x-auto rounded-lg shadow-md border border-gray-200",children:v.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[v.jsx("thead",{className:"bg-gray-50",children:v.jsxs("tr",{children:[v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reset Timestamp"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reset By User ID"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Entries Count"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),v.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.length===0?v.jsx("tr",{children:v.jsx("td",{colSpan:"4",className:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500",children:"No historical check-in logs found matching your filters."})}):N.map(I=>{var le;return v.jsxs("tr",{children:[v.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[new Date(I.timestamp).toLocaleString(),I.lastEdited&&v.jsxs("span",{className:"block text-xs text-gray-500 italic",children:["(Edited ",new Date(I.lastEdited).toLocaleString(),")"]})]}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:I.resetByUserId}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((le=I.dailyCheckInEvents)==null?void 0:le.length)||0}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:v.jsx("button",{onClick:()=>te(I),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"View Details"})})]},I.id)})})]})}),h&&v.jsxs(za,{isOpen:!!h,title:"Check-in Log Details",onClose:R,showCloseButton:!0,children:[v.jsx("div",{className:"flex justify-end mb-4",children:v.jsxs("button",{onClick:x,className:`py-2 px-4 rounded-lg flex items-center transition duration-200
                ${g?"bg-red-500 text-white hover:bg-red-600":"bg-indigo-500 text-white hover:bg-indigo-600"}
                ${t!=="admin"?"opacity-50 cursor-not-allowed":""}
              `,disabled:t!=="admin",children:[g?v.jsx(Ic,{size:18,className:"mr-2"}):v.jsx(R_,{size:18,className:"mr-2"}),g?"Cancel Edit":"Edit Log"]})}),v.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[v.jsxs("p",{className:"text-gray-700",children:[v.jsx("strong",{children:"Reset At:"})," ",new Date(h.timestamp).toLocaleString()]}),v.jsxs("p",{className:"text-gray-700",children:[v.jsx("strong",{children:"Reset By:"})," ",h.resetByUserId]}),h.lastEdited&&v.jsxs("p",{className:"text-gray-700",children:[v.jsx("strong",{children:"Last Edited:"})," ",new Date(h.lastEdited).toLocaleString()]}),v.jsx("h4",{className:"text-lg font-semibold text-gray-800 mt-6 mb-2",children:"Check-in Events"}),h.dailyCheckInEvents&&h.dailyCheckInEvents.length>0?v.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-200 shadow-sm",children:v.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[v.jsx("thead",{className:"bg-gray-50",children:v.jsxs("tr",{children:[v.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Athlete"}),v.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),v.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Entity"}),v.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),g&&v.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),v.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.dailyCheckInEvents.map((I,le)=>v.jsxs("tr",{children:[v.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:I.athleteName}),v.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:I.checkInType}),v.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:I.checkInEntity}),v.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:new Date(I.timestamp).toLocaleTimeString()}),g&&v.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:v.jsx("button",{onClick:()=>S(h.id,le),className:"text-red-600 hover:text-red-900",children:"Remove"})})]},le))})]})}):v.jsx("p",{className:"text-gray-600",children:"No check-in events recorded for this log."}),g&&v.jsx(BC,{db:s,currentUserId:e,onAddEvent:(I,le,Ie,xe)=>P(h.id,I,le,Ie,xe),showAppToast:i}),g&&v.jsxs("div",{className:"flex justify-end space-x-4 mt-8",children:[v.jsx("button",{type:"button",onClick:R,className:"bg-gray-300 text-gray-800 py-2 px-5 rounded-lg font-semibold shadow-md hover:bg-gray-400 transition",children:"Discard Changes"}),v.jsx("button",{type:"button",onClick:A,className:"bg-green-600 text-white py-2 px-5 rounded-lg font-semibold shadow-md hover:bg-green-700 transition",children:"Save Changes"})]})]})]})]})},BC=({db:s,currentUserId:e,onAddEvent:t,showAppToast:i})=>{const[o,u]=ne.useState(""),[h,m]=ne.useState(""),[g,_]=ne.useState(""),[E,k]=ne.useState(""),[D,U]=ne.useState([]),[$,W]=ne.useState([]),[O,q]=ne.useState([]);ne.useEffect(()=>{if(!s||!e)return;(async()=>{try{const ie=ht(s,Qe(e),ze.ATHLETES),fe=await lr(Xt(ie,at("isApproved","==",!0)));U(fe.docs.map(x=>({id:x.id,name:x.data().name})));const te=new Set,R=new Set;fe.docs.forEach(x=>{var S,P;(S=x.data().teams)==null||S.forEach(A=>te.add(A)),(P=x.data().classes)==null||P.forEach(A=>R.add(A))}),W(Array.from(te).sort()),q(Array.from(R).sort())}catch(ie){console.error("Error fetching data for AddCheckinEventForm:",ie),i(`Error loading data: ${ie.message}`,"error")}})()},[s,e,i]);const Y=H=>{if(H.preventDefault(),!o||!h||!g||!E){i("Please fill all fields.","error");return}t(o,h,g,E),u(""),m(""),_(""),k("")};return v.jsxs("div",{className:"mt-8 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[v.jsx("h5",{className:"text-md font-semibold text-blue-800 mb-4",children:"Manually Add Check-in Event"}),v.jsxs("form",{onSubmit:Y,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"addAthlete",className:"block text-sm font-medium text-gray-700",children:"Athlete"}),v.jsxs("select",{id:"addAthlete",value:o,onChange:H=>u(H.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",required:!0,children:[v.jsx("option",{value:"",children:"Select Athlete"}),D.map(H=>v.jsx("option",{value:H.id,children:H.name},H.id))]})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"addCategory",className:"block text-sm font-medium text-gray-700",children:"Category"}),v.jsxs("select",{id:"addCategory",value:h,onChange:H=>{m(H.target.value),_("")},className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",required:!0,children:[v.jsx("option",{value:"",children:"Select Category"}),v.jsx("option",{value:"Team",children:"Team"}),v.jsx("option",{value:"Class",children:"Class"})]})]}),(h==="Team"||h==="Class")&&v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"addEntity",className:"block text-sm font-medium text-gray-700",children:[h," Name"]}),v.jsxs("select",{id:"addEntity",value:g,onChange:H=>_(H.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",required:!0,children:[v.jsxs("option",{value:"",children:["Select ",h]}),(h==="Team"?$:O).map(H=>v.jsx("option",{value:H,children:H},H))]})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"addTimestamp",className:"block text-sm font-medium text-gray-700",children:"Timestamp"}),v.jsx("input",{type:"datetime-local",id:"addTimestamp",value:E,onChange:H=>k(H.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",required:!0})]}),v.jsx("div",{className:"md:col-span-2 flex justify-end",children:v.jsxs("button",{type:"submit",className:"bg-indigo-500 text-white py-2 px-4 rounded-lg font-semibold hover:bg-indigo-600 transition flex items-center",children:[v.jsx(Ua,{size:18,className:"mr-2"})," Add Event"]})})]})]})};$0.createRoot(document.getElementById("root")).render(v.jsx(ne.StrictMode,{children:v.jsx(bC,{})}));
