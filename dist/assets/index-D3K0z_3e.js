(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();var Yh={exports:{}},Ta={},Jh={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qm;function M0(){if(qm)return Le;qm=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),R=Symbol.iterator;function D(L){return L===null||typeof L!="object"?null:(L=R&&L[R]||L["@@iterator"],typeof L=="function"?L:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$=Object.assign,W={};function j(L,q,we){this.props=L,this.context=q,this.refs=W,this.updater=we||U}j.prototype.isReactComponent={},j.prototype.setState=function(L,q){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,q,"setState")},j.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function re(){}re.prototype=j.prototype;function G(L,q,we){this.props=L,this.context=q,this.refs=W,this.updater=we||U}var H=G.prototype=new re;H.constructor=G,$(H,j.prototype),H.isPureReactComponent=!0;var se=Array.isArray,ue=Object.prototype.hasOwnProperty,oe={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function I(L,q,we){var Ve,xe={},ne=null,me=null;if(q!=null)for(Ve in q.ref!==void 0&&(me=q.ref),q.key!==void 0&&(ne=""+q.key),q)ue.call(q,Ve)&&!P.hasOwnProperty(Ve)&&(xe[Ve]=q[Ve]);var Ee=arguments.length-2;if(Ee===1)xe.children=we;else if(1<Ee){for(var Ne=Array(Ee),Be=0;Be<Ee;Be++)Ne[Be]=arguments[Be+2];xe.children=Ne}if(L&&L.defaultProps)for(Ve in Ee=L.defaultProps,Ee)xe[Ve]===void 0&&(xe[Ve]=Ee[Ve]);return{$$typeof:s,type:L,key:ne,ref:me,props:xe,_owner:oe.current}}function S(L,q){return{$$typeof:s,type:L.type,key:q,ref:L.ref,props:L.props,_owner:L._owner}}function N(L){return typeof L=="object"&&L!==null&&L.$$typeof===s}function C(L){var q={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(we){return q[we]})}var k=/\/+/g;function x(L,q){return typeof L=="object"&&L!==null&&L.key!=null?C(""+L.key):q.toString(36)}function Q(L,q,we,Ve,xe){var ne=typeof L;(ne==="undefined"||ne==="boolean")&&(L=null);var me=!1;if(L===null)me=!0;else switch(ne){case"string":case"number":me=!0;break;case"object":switch(L.$$typeof){case s:case e:me=!0}}if(me)return me=L,xe=xe(me),L=Ve===""?"."+x(me,0):Ve,se(xe)?(we="",L!=null&&(we=L.replace(k,"$&/")+"/"),Q(xe,q,we,"",function(Be){return Be})):xe!=null&&(N(xe)&&(xe=S(xe,we+(!xe.key||me&&me.key===xe.key?"":(""+xe.key).replace(k,"$&/")+"/")+L)),q.push(xe)),1;if(me=0,Ve=Ve===""?".":Ve+":",se(L))for(var Ee=0;Ee<L.length;Ee++){ne=L[Ee];var Ne=Ve+x(ne,Ee);me+=Q(ne,q,we,Ne,xe)}else if(Ne=D(L),typeof Ne=="function")for(L=Ne.call(L),Ee=0;!(ne=L.next()).done;)ne=ne.value,Ne=Ve+x(ne,Ee++),me+=Q(ne,q,we,Ne,xe);else if(ne==="object")throw q=String(L),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.");return me}function he(L,q,we){if(L==null)return L;var Ve=[],xe=0;return Q(L,Ve,"","",function(ne){return q.call(we,ne,xe++)}),Ve}function Ie(L){if(L._status===-1){var q=L._result;q=q(),q.then(function(we){(L._status===0||L._status===-1)&&(L._status=1,L._result=we)},function(we){(L._status===0||L._status===-1)&&(L._status=2,L._result=we)}),L._status===-1&&(L._status=0,L._result=q)}if(L._status===1)return L._result.default;throw L._result}var ye={current:null},Z={transition:null},de={ReactCurrentDispatcher:ye,ReactCurrentBatchConfig:Z,ReactCurrentOwner:oe};function le(){throw Error("act(...) is not supported in production builds of React.")}return Le.Children={map:he,forEach:function(L,q,we){he(L,function(){q.apply(this,arguments)},we)},count:function(L){var q=0;return he(L,function(){q++}),q},toArray:function(L){return he(L,function(q){return q})||[]},only:function(L){if(!N(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Le.Component=j,Le.Fragment=t,Le.Profiler=o,Le.PureComponent=G,Le.StrictMode=i,Le.Suspense=g,Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=de,Le.act=le,Le.cloneElement=function(L,q,we){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var Ve=$({},L.props),xe=L.key,ne=L.ref,me=L._owner;if(q!=null){if(q.ref!==void 0&&(ne=q.ref,me=oe.current),q.key!==void 0&&(xe=""+q.key),L.type&&L.type.defaultProps)var Ee=L.type.defaultProps;for(Ne in q)ue.call(q,Ne)&&!P.hasOwnProperty(Ne)&&(Ve[Ne]=q[Ne]===void 0&&Ee!==void 0?Ee[Ne]:q[Ne])}var Ne=arguments.length-2;if(Ne===1)Ve.children=we;else if(1<Ne){Ee=Array(Ne);for(var Be=0;Be<Ne;Be++)Ee[Be]=arguments[Be+2];Ve.children=Ee}return{$$typeof:s,type:L.type,key:xe,ref:ne,props:Ve,_owner:me}},Le.createContext=function(L){return L={$$typeof:h,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:u,_context:L},L.Consumer=L},Le.createElement=I,Le.createFactory=function(L){var q=I.bind(null,L);return q.type=L,q},Le.createRef=function(){return{current:null}},Le.forwardRef=function(L){return{$$typeof:m,render:L}},Le.isValidElement=N,Le.lazy=function(L){return{$$typeof:E,_payload:{_status:-1,_result:L},_init:Ie}},Le.memo=function(L,q){return{$$typeof:_,type:L,compare:q===void 0?null:q}},Le.startTransition=function(L){var q=Z.transition;Z.transition={};try{L()}finally{Z.transition=q}},Le.unstable_act=le,Le.useCallback=function(L,q){return ye.current.useCallback(L,q)},Le.useContext=function(L){return ye.current.useContext(L)},Le.useDebugValue=function(){},Le.useDeferredValue=function(L){return ye.current.useDeferredValue(L)},Le.useEffect=function(L,q){return ye.current.useEffect(L,q)},Le.useId=function(){return ye.current.useId()},Le.useImperativeHandle=function(L,q,we){return ye.current.useImperativeHandle(L,q,we)},Le.useInsertionEffect=function(L,q){return ye.current.useInsertionEffect(L,q)},Le.useLayoutEffect=function(L,q){return ye.current.useLayoutEffect(L,q)},Le.useMemo=function(L,q){return ye.current.useMemo(L,q)},Le.useReducer=function(L,q,we){return ye.current.useReducer(L,q,we)},Le.useRef=function(L){return ye.current.useRef(L)},Le.useState=function(L){return ye.current.useState(L)},Le.useSyncExternalStore=function(L,q,we){return ye.current.useSyncExternalStore(L,q,we)},Le.useTransition=function(){return ye.current.useTransition()},Le.version="18.3.1",Le}var Wm;function Fd(){return Wm||(Wm=1,Jh.exports=M0()),Jh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Km;function j0(){if(Km)return Ta;Km=1;var s=Fd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function h(m,g,_){var E,R={},D=null,U=null;_!==void 0&&(D=""+_),g.key!==void 0&&(D=""+g.key),g.ref!==void 0&&(U=g.ref);for(E in g)i.call(g,E)&&!u.hasOwnProperty(E)&&(R[E]=g[E]);if(m&&m.defaultProps)for(E in g=m.defaultProps,g)R[E]===void 0&&(R[E]=g[E]);return{$$typeof:e,type:m,key:D,ref:U,props:R,_owner:o.current}}return Ta.Fragment=t,Ta.jsx=h,Ta.jsxs=h,Ta}var Gm;function F0(){return Gm||(Gm=1,Yh.exports=j0()),Yh.exports}var v=F0(),te=Fd(),_u={},Zh={exports:{}},an={},ed={exports:{}},td={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qm;function U0(){return Qm||(Qm=1,function(s){function e(Z,de){var le=Z.length;Z.push(de);e:for(;0<le;){var L=le-1>>>1,q=Z[L];if(0<o(q,de))Z[L]=de,Z[le]=q,le=L;else break e}}function t(Z){return Z.length===0?null:Z[0]}function i(Z){if(Z.length===0)return null;var de=Z[0],le=Z.pop();if(le!==de){Z[0]=le;e:for(var L=0,q=Z.length,we=q>>>1;L<we;){var Ve=2*(L+1)-1,xe=Z[Ve],ne=Ve+1,me=Z[ne];if(0>o(xe,le))ne<q&&0>o(me,xe)?(Z[L]=me,Z[ne]=le,L=ne):(Z[L]=xe,Z[Ve]=le,L=Ve);else if(ne<q&&0>o(me,le))Z[L]=me,Z[ne]=le,L=ne;else break e}}return de}function o(Z,de){var le=Z.sortIndex-de.sortIndex;return le!==0?le:Z.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();s.unstable_now=function(){return h.now()-m}}var g=[],_=[],E=1,R=null,D=3,U=!1,$=!1,W=!1,j=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H(Z){for(var de=t(_);de!==null;){if(de.callback===null)i(_);else if(de.startTime<=Z)i(_),de.sortIndex=de.expirationTime,e(g,de);else break;de=t(_)}}function se(Z){if(W=!1,H(Z),!$)if(t(g)!==null)$=!0,Ie(ue);else{var de=t(_);de!==null&&ye(se,de.startTime-Z)}}function ue(Z,de){$=!1,W&&(W=!1,re(I),I=-1),U=!0;var le=D;try{for(H(de),R=t(g);R!==null&&(!(R.expirationTime>de)||Z&&!C());){var L=R.callback;if(typeof L=="function"){R.callback=null,D=R.priorityLevel;var q=L(R.expirationTime<=de);de=s.unstable_now(),typeof q=="function"?R.callback=q:R===t(g)&&i(g),H(de)}else i(g);R=t(g)}if(R!==null)var we=!0;else{var Ve=t(_);Ve!==null&&ye(se,Ve.startTime-de),we=!1}return we}finally{R=null,D=le,U=!1}}var oe=!1,P=null,I=-1,S=5,N=-1;function C(){return!(s.unstable_now()-N<S)}function k(){if(P!==null){var Z=s.unstable_now();N=Z;var de=!0;try{de=P(!0,Z)}finally{de?x():(oe=!1,P=null)}}else oe=!1}var x;if(typeof G=="function")x=function(){G(k)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,he=Q.port2;Q.port1.onmessage=k,x=function(){he.postMessage(null)}}else x=function(){j(k,0)};function Ie(Z){P=Z,oe||(oe=!0,x())}function ye(Z,de){I=j(function(){Z(s.unstable_now())},de)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Z){Z.callback=null},s.unstable_continueExecution=function(){$||U||($=!0,Ie(ue))},s.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<Z?Math.floor(1e3/Z):5},s.unstable_getCurrentPriorityLevel=function(){return D},s.unstable_getFirstCallbackNode=function(){return t(g)},s.unstable_next=function(Z){switch(D){case 1:case 2:case 3:var de=3;break;default:de=D}var le=D;D=de;try{return Z()}finally{D=le}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(Z,de){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var le=D;D=Z;try{return de()}finally{D=le}},s.unstable_scheduleCallback=function(Z,de,le){var L=s.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?L+le:L):le=L,Z){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=le+q,Z={id:E++,callback:de,priorityLevel:Z,startTime:le,expirationTime:q,sortIndex:-1},le>L?(Z.sortIndex=le,e(_,Z),t(g)===null&&Z===t(_)&&(W?(re(I),I=-1):W=!0,ye(se,le-L))):(Z.sortIndex=q,e(g,Z),$||U||($=!0,Ie(ue))),Z},s.unstable_shouldYield=C,s.unstable_wrapCallback=function(Z){var de=D;return function(){var le=D;D=de;try{return Z.apply(this,arguments)}finally{D=le}}}}(td)),td}var Xm;function z0(){return Xm||(Xm=1,ed.exports=U0()),ed.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ym;function B0(){if(Ym)return an;Ym=1;var s=Fd(),e=z0();function t(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function u(n,r){h(n,r),h(n+"Capture",r)}function h(n,r){for(o[n]=r,n=0;n<r.length;n++)i.add(r[n])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E={},R={};function D(n){return g.call(R,n)?!0:g.call(E,n)?!1:_.test(n)?R[n]=!0:(E[n]=!0,!1)}function U(n,r,a,c){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function $(n,r,a,c){if(r===null||typeof r>"u"||U(n,r,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function W(n,r,a,c,d,p,w){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=c,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=n,this.type=r,this.sanitizeURL=p,this.removeEmptyString=w}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){j[n]=new W(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];j[r]=new W(r,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){j[n]=new W(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){j[n]=new W(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){j[n]=new W(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){j[n]=new W(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){j[n]=new W(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){j[n]=new W(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){j[n]=new W(n,5,!1,n.toLowerCase(),null,!1,!1)});var re=/[\-:]([a-z])/g;function G(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(re,G);j[r]=new W(r,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(re,G);j[r]=new W(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(re,G);j[r]=new W(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){j[n]=new W(n,1,!1,n.toLowerCase(),null,!1,!1)}),j.xlinkHref=new W("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){j[n]=new W(n,1,!1,n.toLowerCase(),null,!0,!0)});function H(n,r,a,c){var d=j.hasOwnProperty(r)?j[r]:null;(d!==null?d.type!==0:c||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&($(r,a,d,c)&&(a=null),c||d===null?D(r)&&(a===null?n.removeAttribute(r):n.setAttribute(r,""+a)):d.mustUseProperty?n[d.propertyName]=a===null?d.type===3?!1:"":a:(r=d.attributeName,c=d.attributeNamespace,a===null?n.removeAttribute(r):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,c?n.setAttributeNS(c,r,a):n.setAttribute(r,a))))}var se=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ue=Symbol.for("react.element"),oe=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),C=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),Q=Symbol.for("react.suspense_list"),he=Symbol.for("react.memo"),Ie=Symbol.for("react.lazy"),ye=Symbol.for("react.offscreen"),Z=Symbol.iterator;function de(n){return n===null||typeof n!="object"?null:(n=Z&&n[Z]||n["@@iterator"],typeof n=="function"?n:null)}var le=Object.assign,L;function q(n){if(L===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);L=r&&r[1]||""}return`
`+L+n}var we=!1;function Ve(n,r){if(!n||we)return"";we=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(z){var c=z}Reflect.construct(n,[],r)}else{try{r.call()}catch(z){c=z}n.call(r.prototype)}else{try{throw Error()}catch(z){c=z}n()}}catch(z){if(z&&c&&typeof z.stack=="string"){for(var d=z.stack.split(`
`),p=c.stack.split(`
`),w=d.length-1,A=p.length-1;1<=w&&0<=A&&d[w]!==p[A];)A--;for(;1<=w&&0<=A;w--,A--)if(d[w]!==p[A]){if(w!==1||A!==1)do if(w--,A--,0>A||d[w]!==p[A]){var b=`
`+d[w].replace(" at new "," at ");return n.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",n.displayName)),b}while(1<=w&&0<=A);break}}}finally{we=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?q(n):""}function xe(n){switch(n.tag){case 5:return q(n.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return n=Ve(n.type,!1),n;case 11:return n=Ve(n.type.render,!1),n;case 1:return n=Ve(n.type,!0),n;default:return""}}function ne(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case P:return"Fragment";case oe:return"Portal";case S:return"Profiler";case I:return"StrictMode";case x:return"Suspense";case Q:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case C:return(n.displayName||"Context")+".Consumer";case N:return(n._context.displayName||"Context")+".Provider";case k:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case he:return r=n.displayName||null,r!==null?r:ne(n.type)||"Memo";case Ie:r=n._payload,n=n._init;try{return ne(n(r))}catch{}}return null}function me(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ne(r);case 8:return r===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Ee(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Ne(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Be(n){var r=Ne(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),c=""+n[r];if(!n.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,p=a.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return d.call(this)},set:function(w){c=""+w,p.call(this,w)}}),Object.defineProperty(n,r,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function ot(n){n._valueTracker||(n._valueTracker=Be(n))}function kt(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return n&&(c=Ne(n)?n.checked?"true":"false":n.value),n=c,n!==a?(r.setValue(n),!0):!1}function hn(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function bn(n,r){var a=r.checked;return le({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function pi(n,r){var a=r.defaultValue==null?"":r.defaultValue,c=r.checked!=null?r.checked:r.defaultChecked;a=Ee(r.value!=null?r.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function ko(n,r){r=r.checked,r!=null&&H(n,"checked",r,!1)}function Ro(n,r){ko(n,r);var a=Ee(r.value),c=r.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?mi(n,r.type,a):r.hasOwnProperty("defaultValue")&&mi(n,r.type,Ee(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function sl(n,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var c=r.type;if(!(c!=="submit"&&c!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,a||r===n.value||(n.value=r),n.defaultValue=r}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function mi(n,r,a){(r!=="number"||hn(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var fr=Array.isArray;function pr(n,r,a,c){if(n=n.options,r){r={};for(var d=0;d<a.length;d++)r["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=r.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Ee(a),r=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}r!==null||n[d].disabled||(r=n[d])}r!==null&&(r.selected=!0)}}function Po(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(t(91));return le({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function gi(n,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(t(92));if(fr(a)){if(1<a.length)throw Error(t(93));a=a[0]}r=a}r==null&&(r=""),a=r}n._wrapperState={initialValue:Ee(a)}}function yi(n,r){var a=Ee(r.value),c=Ee(r.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),r.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function No(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function yt(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vt(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?yt(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var mr,bo=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,c,d){MSApp.execUnsafeLocalFunction(function(){return n(r,a,c,d)})}:n}(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for(mr=mr||document.createElement("div"),mr.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=mr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function $r(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var ks={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Rs=["Webkit","ms","Moz","O"];Object.keys(ks).forEach(function(n){Rs.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),ks[r]=ks[n]})});function Do(n,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||ks.hasOwnProperty(n)&&ks[n]?(""+r).trim():r+"px"}function Vo(n,r){n=n.style;for(var a in r)if(r.hasOwnProperty(a)){var c=a.indexOf("--")===0,d=Do(a,r[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,d):n[a]=d}}var Lo=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Oo(n,r){if(r){if(Lo[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(t(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(t(61))}if(r.style!=null&&typeof r.style!="object")throw Error(t(62))}}function Mo(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ps=null;function vi(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var _i=null,En=null,Qn=null;function wi(n){if(n=aa(n)){if(typeof _i!="function")throw Error(t(280));var r=n.stateNode;r&&(r=Vl(r),_i(n.stateNode,n.type,r))}}function Xn(n){En?Qn?Qn.push(n):Qn=[n]:En=n}function jo(){if(En){var n=En,r=Qn;if(Qn=En=null,wi(n),r)for(n=0;n<r.length;n++)wi(r[n])}}function Ns(n,r){return n(r)}function Fo(){}var gr=!1;function Uo(n,r,a){if(gr)return n(r,a);gr=!0;try{return Ns(n,r,a)}finally{gr=!1,(En!==null||Qn!==null)&&(Fo(),jo())}}function ut(n,r){var a=n.stateNode;if(a===null)return null;var c=Vl(a);if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,r,typeof a));return a}var Ei=!1;if(m)try{var Dn={};Object.defineProperty(Dn,"passive",{get:function(){Ei=!0}}),window.addEventListener("test",Dn,Dn),window.removeEventListener("test",Dn,Dn)}catch{Ei=!1}function bs(n,r,a,c,d,p,w,A,b){var z=Array.prototype.slice.call(arguments,3);try{r.apply(a,z)}catch(Y){this.onError(Y)}}var Ds=!1,Ti=null,Vn=!1,zo=null,Sc={onError:function(n){Ds=!0,Ti=n}};function Ii(n,r,a,c,d,p,w,A,b){Ds=!1,Ti=null,bs.apply(Sc,arguments)}function il(n,r,a,c,d,p,w,A,b){if(Ii.apply(this,arguments),Ds){if(Ds){var z=Ti;Ds=!1,Ti=null}else throw Error(t(198));Vn||(Vn=!0,zo=z)}}function Ln(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function Vs(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function On(n){if(Ln(n)!==n)throw Error(t(188))}function ol(n){var r=n.alternate;if(!r){if(r=Ln(n),r===null)throw Error(t(188));return r!==n?null:n}for(var a=n,c=r;;){var d=a.return;if(d===null)break;var p=d.alternate;if(p===null){if(c=d.return,c!==null){a=c;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===a)return On(d),n;if(p===c)return On(d),r;p=p.sibling}throw Error(t(188))}if(a.return!==c.return)a=d,c=p;else{for(var w=!1,A=d.child;A;){if(A===a){w=!0,a=d,c=p;break}if(A===c){w=!0,c=d,a=p;break}A=A.sibling}if(!w){for(A=p.child;A;){if(A===a){w=!0,a=p,c=d;break}if(A===c){w=!0,c=p,a=d;break}A=A.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:r}function Bo(n){return n=ol(n),n!==null?xi(n):null}function xi(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=xi(n);if(r!==null)return r;n=n.sibling}return null}var Si=e.unstable_scheduleCallback,$o=e.unstable_cancelCallback,al=e.unstable_shouldYield,Cc=e.unstable_requestPaint,Qe=e.unstable_now,ll=e.unstable_getCurrentPriorityLevel,Ls=e.unstable_ImmediatePriority,Hr=e.unstable_UserBlockingPriority,Tn=e.unstable_NormalPriority,Ho=e.unstable_LowPriority,ul=e.unstable_IdlePriority,Os=null,dn=null;function cl(n){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(Os,n,void 0,(n.current.flags&128)===128)}catch{}}var Gt=Math.clz32?Math.clz32:dl,qo=Math.log,hl=Math.LN2;function dl(n){return n>>>=0,n===0?32:31-(qo(n)/hl|0)|0}var Ci=64,Ai=4194304;function qr(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ms(n,r){var a=n.pendingLanes;if(a===0)return 0;var c=0,d=n.suspendedLanes,p=n.pingedLanes,w=a&268435455;if(w!==0){var A=w&~d;A!==0?c=qr(A):(p&=w,p!==0&&(c=qr(p)))}else w=a&~d,w!==0?c=qr(w):p!==0&&(c=qr(p));if(c===0)return 0;if(r!==0&&r!==c&&(r&d)===0&&(d=c&-c,p=r&-r,d>=p||d===16&&(p&4194240)!==0))return r;if((c&4)!==0&&(c|=a&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=c;0<r;)a=31-Gt(r),d=1<<a,c|=n[a],r&=~d;return c}function Ac(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yr(n,r){for(var a=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes;0<p;){var w=31-Gt(p),A=1<<w,b=d[w];b===-1?((A&a)===0||(A&c)!==0)&&(d[w]=Ac(A,r)):b<=r&&(n.expiredLanes|=A),p&=~A}}function fn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function js(){var n=Ci;return Ci<<=1,(Ci&4194240)===0&&(Ci=64),n}function Wr(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function Kr(n,r,a){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-Gt(r),n[r]=a}function Ge(n,r){var a=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var d=31-Gt(a),p=1<<d;r[d]=0,c[d]=-1,n[d]=-1,a&=~p}}function Gr(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var c=31-Gt(a),d=1<<c;d&r|n[c]&r&&(n[c]|=r),a&=~d}}var Me=0;function Qr(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var fl,ki,pl,ml,gl,Wo=!1,Yn=[],Rt=null,Mn=null,jn=null,Xr=new Map,In=new Map,Jn=[],kc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function yl(n,r){switch(n){case"focusin":case"focusout":Rt=null;break;case"dragenter":case"dragleave":Mn=null;break;case"mouseover":case"mouseout":jn=null;break;case"pointerover":case"pointerout":Xr.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":In.delete(r.pointerId)}}function Zt(n,r,a,c,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[d]},r!==null&&(r=aa(r),r!==null&&ki(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),n)}function Rc(n,r,a,c,d){switch(r){case"focusin":return Rt=Zt(Rt,n,r,a,c,d),!0;case"dragenter":return Mn=Zt(Mn,n,r,a,c,d),!0;case"mouseover":return jn=Zt(jn,n,r,a,c,d),!0;case"pointerover":var p=d.pointerId;return Xr.set(p,Zt(Xr.get(p)||null,n,r,a,c,d)),!0;case"gotpointercapture":return p=d.pointerId,In.set(p,Zt(In.get(p)||null,n,r,a,c,d)),!0}return!1}function vl(n){var r=$s(n.target);if(r!==null){var a=Ln(r);if(a!==null){if(r=a.tag,r===13){if(r=Vs(a),r!==null){n.blockedOn=r,gl(n.priority,function(){pl(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function vr(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=Ri(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Ps=c,a.target.dispatchEvent(c),Ps=null}else return r=aa(a),r!==null&&ki(r),n.blockedOn=a,!1;r.shift()}return!0}function Fs(n,r,a){vr(n)&&a.delete(r)}function _l(){Wo=!1,Rt!==null&&vr(Rt)&&(Rt=null),Mn!==null&&vr(Mn)&&(Mn=null),jn!==null&&vr(jn)&&(jn=null),Xr.forEach(Fs),In.forEach(Fs)}function Fn(n,r){n.blockedOn===r&&(n.blockedOn=null,Wo||(Wo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,_l)))}function Un(n){function r(d){return Fn(d,n)}if(0<Yn.length){Fn(Yn[0],n);for(var a=1;a<Yn.length;a++){var c=Yn[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Rt!==null&&Fn(Rt,n),Mn!==null&&Fn(Mn,n),jn!==null&&Fn(jn,n),Xr.forEach(r),In.forEach(r),a=0;a<Jn.length;a++)c=Jn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Jn.length&&(a=Jn[0],a.blockedOn===null);)vl(a),a.blockedOn===null&&Jn.shift()}var _r=se.ReactCurrentBatchConfig,Yr=!0;function tt(n,r,a,c){var d=Me,p=_r.transition;_r.transition=null;try{Me=1,Ko(n,r,a,c)}finally{Me=d,_r.transition=p}}function Pc(n,r,a,c){var d=Me,p=_r.transition;_r.transition=null;try{Me=4,Ko(n,r,a,c)}finally{Me=d,_r.transition=p}}function Ko(n,r,a,c){if(Yr){var d=Ri(n,r,a,c);if(d===null)zc(n,r,c,Us,a),yl(n,c);else if(Rc(d,n,r,a,c))c.stopPropagation();else if(yl(n,c),r&4&&-1<kc.indexOf(n)){for(;d!==null;){var p=aa(d);if(p!==null&&fl(p),p=Ri(n,r,a,c),p===null&&zc(n,r,c,Us,a),p===d)break;d=p}d!==null&&c.stopPropagation()}else zc(n,r,c,null,a)}}var Us=null;function Ri(n,r,a,c){if(Us=null,n=vi(c),n=$s(n),n!==null)if(r=Ln(n),r===null)n=null;else if(a=r.tag,a===13){if(n=Vs(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return Us=n,null}function Go(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ll()){case Ls:return 1;case Hr:return 4;case Tn:case Ho:return 16;case ul:return 536870912;default:return 16}default:return 16}}var pn=null,Pi=null,en=null;function Qo(){if(en)return en;var n,r=Pi,a=r.length,c,d="value"in pn?pn.value:pn.textContent,p=d.length;for(n=0;n<a&&r[n]===d[n];n++);var w=a-n;for(c=1;c<=w&&r[a-c]===d[p-c];c++);return en=d.slice(n,1<c?1-c:void 0)}function Ni(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Zn(){return!0}function Xo(){return!1}function Pt(n){function r(a,c,d,p,w){this._reactName=a,this._targetInst=d,this.type=c,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(p):p[A]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Zn:Xo,this.isPropagationStopped=Xo,this}return le(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Zn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Zn)},persist:function(){},isPersistent:Zn}),r}var zn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bi=Pt(zn),er=le({},zn,{view:0,detail:0}),Nc=Pt(er),Di,wr,Jr,zs=le({},er,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tr,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Jr&&(Jr&&n.type==="mousemove"?(Di=n.screenX-Jr.screenX,wr=n.screenY-Jr.screenY):wr=Di=0,Jr=n),Di)},movementY:function(n){return"movementY"in n?n.movementY:wr}}),Vi=Pt(zs),Yo=le({},zs,{dataTransfer:0}),wl=Pt(Yo),Li=le({},er,{relatedTarget:0}),Oi=Pt(Li),El=le({},zn,{animationName:0,elapsedTime:0,pseudoElement:0}),Er=Pt(El),Tl=le({},zn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Il=Pt(Tl),xl=le({},zn,{data:0}),Jo=Pt(xl),Mi={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cl(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Sl[n])?!!r[n]:!1}function tr(){return Cl}var l=le({},er,{key:function(n){if(n.key){var r=Mi[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Ni(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Qt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tr,charCode:function(n){return n.type==="keypress"?Ni(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ni(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),f=Pt(l),y=le({},zs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=Pt(y),O=le({},er,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tr}),B=Pt(O),ae=le({},zn,{propertyName:0,elapsedTime:0,pseudoElement:0}),We=Pt(ae),_t=le({},zs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Fe=Pt(_t),It=[9,13,27,32],ft=m&&"CompositionEvent"in window,xn=null;m&&"documentMode"in document&&(xn=document.documentMode);var mn=m&&"TextEvent"in window&&!xn,Bs=m&&(!ft||xn&&8<xn&&11>=xn),ji=" ",Ff=!1;function Uf(n,r){switch(n){case"keyup":return It.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Fi=!1;function V_(n,r){switch(n){case"compositionend":return zf(r);case"keypress":return r.which!==32?null:(Ff=!0,ji);case"textInput":return n=r.data,n===ji&&Ff?null:n;default:return null}}function L_(n,r){if(Fi)return n==="compositionend"||!ft&&Uf(n,r)?(n=Qo(),en=Pi=pn=null,Fi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Bs&&r.locale!=="ko"?null:r.data;default:return null}}var O_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bf(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!O_[n.type]:r==="textarea"}function $f(n,r,a,c){Xn(c),r=Nl(r,"onChange"),0<r.length&&(a=new bi("onChange","change",null,a,c),n.push({event:a,listeners:r}))}var Zo=null,ea=null;function M_(n){ap(n,0)}function Al(n){var r=Hi(n);if(kt(r))return n}function j_(n,r){if(n==="change")return r}var Hf=!1;if(m){var bc;if(m){var Dc="oninput"in document;if(!Dc){var qf=document.createElement("div");qf.setAttribute("oninput","return;"),Dc=typeof qf.oninput=="function"}bc=Dc}else bc=!1;Hf=bc&&(!document.documentMode||9<document.documentMode)}function Wf(){Zo&&(Zo.detachEvent("onpropertychange",Kf),ea=Zo=null)}function Kf(n){if(n.propertyName==="value"&&Al(ea)){var r=[];$f(r,ea,n,vi(n)),Uo(M_,r)}}function F_(n,r,a){n==="focusin"?(Wf(),Zo=r,ea=a,Zo.attachEvent("onpropertychange",Kf)):n==="focusout"&&Wf()}function U_(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Al(ea)}function z_(n,r){if(n==="click")return Al(r)}function B_(n,r){if(n==="input"||n==="change")return Al(r)}function $_(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Bn=typeof Object.is=="function"?Object.is:$_;function ta(n,r){if(Bn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var d=a[c];if(!g.call(r,d)||!Bn(n[d],r[d]))return!1}return!0}function Gf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Qf(n,r){var a=Gf(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=r&&c>=r)return{node:a,offset:r-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Gf(a)}}function Xf(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Xf(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Yf(){for(var n=window,r=hn();r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=hn(n.document)}return r}function Vc(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function H_(n){var r=Yf(),a=n.focusedElem,c=n.selectionRange;if(r!==a&&a&&a.ownerDocument&&Xf(a.ownerDocument.documentElement,a)){if(c!==null&&Vc(a)){if(r=c.start,n=c.end,n===void 0&&(n=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(n,a.value.length);else if(n=(r=a.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var d=a.textContent.length,p=Math.min(c.start,d);c=c.end===void 0?p:Math.min(c.end,d),!n.extend&&p>c&&(d=c,c=p,p=d),d=Qf(a,p);var w=Qf(a,c);d&&w&&(n.rangeCount!==1||n.anchorNode!==d.node||n.anchorOffset!==d.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(r=r.createRange(),r.setStart(d.node,d.offset),n.removeAllRanges(),p>c?(n.addRange(r),n.extend(w.node,w.offset)):(r.setEnd(w.node,w.offset),n.addRange(r)))}}for(r=[],n=a;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)n=r[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var q_=m&&"documentMode"in document&&11>=document.documentMode,Ui=null,Lc=null,na=null,Oc=!1;function Jf(n,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Oc||Ui==null||Ui!==hn(c)||(c=Ui,"selectionStart"in c&&Vc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),na&&ta(na,c)||(na=c,c=Nl(Lc,"onSelect"),0<c.length&&(r=new bi("onSelect","select",null,r,a),n.push({event:r,listeners:c}),r.target=Ui)))}function kl(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var zi={animationend:kl("Animation","AnimationEnd"),animationiteration:kl("Animation","AnimationIteration"),animationstart:kl("Animation","AnimationStart"),transitionend:kl("Transition","TransitionEnd")},Mc={},Zf={};m&&(Zf=document.createElement("div").style,"AnimationEvent"in window||(delete zi.animationend.animation,delete zi.animationiteration.animation,delete zi.animationstart.animation),"TransitionEvent"in window||delete zi.transitionend.transition);function Rl(n){if(Mc[n])return Mc[n];if(!zi[n])return n;var r=zi[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in Zf)return Mc[n]=r[a];return n}var ep=Rl("animationend"),tp=Rl("animationiteration"),np=Rl("animationstart"),rp=Rl("transitionend"),sp=new Map,ip="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zr(n,r){sp.set(n,r),u(r,[n])}for(var jc=0;jc<ip.length;jc++){var Fc=ip[jc],W_=Fc.toLowerCase(),K_=Fc[0].toUpperCase()+Fc.slice(1);Zr(W_,"on"+K_)}Zr(ep,"onAnimationEnd"),Zr(tp,"onAnimationIteration"),Zr(np,"onAnimationStart"),Zr("dblclick","onDoubleClick"),Zr("focusin","onFocus"),Zr("focusout","onBlur"),Zr(rp,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ra="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),G_=new Set("cancel close invalid load scroll toggle".split(" ").concat(ra));function op(n,r,a){var c=n.type||"unknown-event";n.currentTarget=a,il(c,r,void 0,n),n.currentTarget=null}function ap(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],d=c.event;c=c.listeners;e:{var p=void 0;if(r)for(var w=c.length-1;0<=w;w--){var A=c[w],b=A.instance,z=A.currentTarget;if(A=A.listener,b!==p&&d.isPropagationStopped())break e;op(d,A,z),p=b}else for(w=0;w<c.length;w++){if(A=c[w],b=A.instance,z=A.currentTarget,A=A.listener,b!==p&&d.isPropagationStopped())break e;op(d,A,z),p=b}}}if(Vn)throw n=zo,Vn=!1,zo=null,n}function Ye(n,r){var a=r[Kc];a===void 0&&(a=r[Kc]=new Set);var c=n+"__bubble";a.has(c)||(lp(r,n,2,!1),a.add(c))}function Uc(n,r,a){var c=0;r&&(c|=4),lp(a,n,c,r)}var Pl="_reactListening"+Math.random().toString(36).slice(2);function sa(n){if(!n[Pl]){n[Pl]=!0,i.forEach(function(a){a!=="selectionchange"&&(G_.has(a)||Uc(a,!1,n),Uc(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Pl]||(r[Pl]=!0,Uc("selectionchange",!1,r))}}function lp(n,r,a,c){switch(Go(r)){case 1:var d=tt;break;case 4:d=Pc;break;default:d=Ko}a=d.bind(null,r,a,n),d=void 0,!Ei||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(r,a,{capture:!0,passive:d}):n.addEventListener(r,a,!0):d!==void 0?n.addEventListener(r,a,{passive:d}):n.addEventListener(r,a,!1)}function zc(n,r,a,c,d){var p=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var A=c.stateNode.containerInfo;if(A===d||A.nodeType===8&&A.parentNode===d)break;if(w===4)for(w=c.return;w!==null;){var b=w.tag;if((b===3||b===4)&&(b=w.stateNode.containerInfo,b===d||b.nodeType===8&&b.parentNode===d))return;w=w.return}for(;A!==null;){if(w=$s(A),w===null)return;if(b=w.tag,b===5||b===6){c=p=w;continue e}A=A.parentNode}}c=c.return}Uo(function(){var z=p,Y=vi(a),ee=[];e:{var X=sp.get(n);if(X!==void 0){var ce=bi,ge=n;switch(n){case"keypress":if(Ni(a)===0)break e;case"keydown":case"keyup":ce=f;break;case"focusin":ge="focus",ce=Oi;break;case"focusout":ge="blur",ce=Oi;break;case"beforeblur":case"afterblur":ce=Oi;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=Vi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=wl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=B;break;case ep:case tp:case np:ce=Er;break;case rp:ce=We;break;case"scroll":ce=Nc;break;case"wheel":ce=Fe;break;case"copy":case"cut":case"paste":ce=Il;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=T}var ve=(r&4)!==0,ct=!ve&&n==="scroll",M=ve?X!==null?X+"Capture":null:X;ve=[];for(var V=z,F;V!==null;){F=V;var ie=F.stateNode;if(F.tag===5&&ie!==null&&(F=ie,M!==null&&(ie=ut(V,M),ie!=null&&ve.push(ia(V,ie,F)))),ct)break;V=V.return}0<ve.length&&(X=new ce(X,ge,null,a,Y),ee.push({event:X,listeners:ve}))}}if((r&7)===0){e:{if(X=n==="mouseover"||n==="pointerover",ce=n==="mouseout"||n==="pointerout",X&&a!==Ps&&(ge=a.relatedTarget||a.fromElement)&&($s(ge)||ge[Tr]))break e;if((ce||X)&&(X=Y.window===Y?Y:(X=Y.ownerDocument)?X.defaultView||X.parentWindow:window,ce?(ge=a.relatedTarget||a.toElement,ce=z,ge=ge?$s(ge):null,ge!==null&&(ct=Ln(ge),ge!==ct||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(ce=null,ge=z),ce!==ge)){if(ve=Vi,ie="onMouseLeave",M="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(ve=T,ie="onPointerLeave",M="onPointerEnter",V="pointer"),ct=ce==null?X:Hi(ce),F=ge==null?X:Hi(ge),X=new ve(ie,V+"leave",ce,a,Y),X.target=ct,X.relatedTarget=F,ie=null,$s(Y)===z&&(ve=new ve(M,V+"enter",ge,a,Y),ve.target=F,ve.relatedTarget=ct,ie=ve),ct=ie,ce&&ge)t:{for(ve=ce,M=ge,V=0,F=ve;F;F=Bi(F))V++;for(F=0,ie=M;ie;ie=Bi(ie))F++;for(;0<V-F;)ve=Bi(ve),V--;for(;0<F-V;)M=Bi(M),F--;for(;V--;){if(ve===M||M!==null&&ve===M.alternate)break t;ve=Bi(ve),M=Bi(M)}ve=null}else ve=null;ce!==null&&up(ee,X,ce,ve,!1),ge!==null&&ct!==null&&up(ee,ct,ge,ve,!0)}}e:{if(X=z?Hi(z):window,ce=X.nodeName&&X.nodeName.toLowerCase(),ce==="select"||ce==="input"&&X.type==="file")var Te=j_;else if(Bf(X))if(Hf)Te=B_;else{Te=U_;var Ce=F_}else(ce=X.nodeName)&&ce.toLowerCase()==="input"&&(X.type==="checkbox"||X.type==="radio")&&(Te=z_);if(Te&&(Te=Te(n,z))){$f(ee,Te,a,Y);break e}Ce&&Ce(n,X,z),n==="focusout"&&(Ce=X._wrapperState)&&Ce.controlled&&X.type==="number"&&mi(X,"number",X.value)}switch(Ce=z?Hi(z):window,n){case"focusin":(Bf(Ce)||Ce.contentEditable==="true")&&(Ui=Ce,Lc=z,na=null);break;case"focusout":na=Lc=Ui=null;break;case"mousedown":Oc=!0;break;case"contextmenu":case"mouseup":case"dragend":Oc=!1,Jf(ee,a,Y);break;case"selectionchange":if(q_)break;case"keydown":case"keyup":Jf(ee,a,Y)}var Ae;if(ft)e:{switch(n){case"compositionstart":var ke="onCompositionStart";break e;case"compositionend":ke="onCompositionEnd";break e;case"compositionupdate":ke="onCompositionUpdate";break e}ke=void 0}else Fi?Uf(n,a)&&(ke="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(ke="onCompositionStart");ke&&(Bs&&a.locale!=="ko"&&(Fi||ke!=="onCompositionStart"?ke==="onCompositionEnd"&&Fi&&(Ae=Qo()):(pn=Y,Pi="value"in pn?pn.value:pn.textContent,Fi=!0)),Ce=Nl(z,ke),0<Ce.length&&(ke=new Jo(ke,n,null,a,Y),ee.push({event:ke,listeners:Ce}),Ae?ke.data=Ae:(Ae=zf(a),Ae!==null&&(ke.data=Ae)))),(Ae=mn?V_(n,a):L_(n,a))&&(z=Nl(z,"onBeforeInput"),0<z.length&&(Y=new Jo("onBeforeInput","beforeinput",null,a,Y),ee.push({event:Y,listeners:z}),Y.data=Ae))}ap(ee,r)})}function ia(n,r,a){return{instance:n,listener:r,currentTarget:a}}function Nl(n,r){for(var a=r+"Capture",c=[];n!==null;){var d=n,p=d.stateNode;d.tag===5&&p!==null&&(d=p,p=ut(n,a),p!=null&&c.unshift(ia(n,p,d)),p=ut(n,r),p!=null&&c.push(ia(n,p,d))),n=n.return}return c}function Bi(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function up(n,r,a,c,d){for(var p=r._reactName,w=[];a!==null&&a!==c;){var A=a,b=A.alternate,z=A.stateNode;if(b!==null&&b===c)break;A.tag===5&&z!==null&&(A=z,d?(b=ut(a,p),b!=null&&w.unshift(ia(a,b,A))):d||(b=ut(a,p),b!=null&&w.push(ia(a,b,A)))),a=a.return}w.length!==0&&n.push({event:r,listeners:w})}var Q_=/\r\n?/g,X_=/\u0000|\uFFFD/g;function cp(n){return(typeof n=="string"?n:""+n).replace(Q_,`
`).replace(X_,"")}function bl(n,r,a){if(r=cp(r),cp(n)!==r&&a)throw Error(t(425))}function Dl(){}var Bc=null,$c=null;function Hc(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var qc=typeof setTimeout=="function"?setTimeout:void 0,Y_=typeof clearTimeout=="function"?clearTimeout:void 0,hp=typeof Promise=="function"?Promise:void 0,J_=typeof queueMicrotask=="function"?queueMicrotask:typeof hp<"u"?function(n){return hp.resolve(null).then(n).catch(Z_)}:qc;function Z_(n){setTimeout(function(){throw n})}function Wc(n,r){var a=r,c=0;do{var d=a.nextSibling;if(n.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(c===0){n.removeChild(d),Un(r);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=d}while(a);Un(r)}function es(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function dp(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return n;r--}else a==="/$"&&r++}n=n.previousSibling}return null}var $i=Math.random().toString(36).slice(2),nr="__reactFiber$"+$i,oa="__reactProps$"+$i,Tr="__reactContainer$"+$i,Kc="__reactEvents$"+$i,e0="__reactListeners$"+$i,t0="__reactHandles$"+$i;function $s(n){var r=n[nr];if(r)return r;for(var a=n.parentNode;a;){if(r=a[Tr]||a[nr]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=dp(n);n!==null;){if(a=n[nr])return a;n=dp(n)}return r}n=a,a=n.parentNode}return null}function aa(n){return n=n[nr]||n[Tr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Hi(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Vl(n){return n[oa]||null}var Gc=[],qi=-1;function ts(n){return{current:n}}function Je(n){0>qi||(n.current=Gc[qi],Gc[qi]=null,qi--)}function Xe(n,r){qi++,Gc[qi]=n.current,n.current=r}var ns={},jt=ts(ns),tn=ts(!1),Hs=ns;function Wi(n,r){var a=n.type.contextTypes;if(!a)return ns;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===r)return c.__reactInternalMemoizedMaskedChildContext;var d={},p;for(p in a)d[p]=r[p];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=d),d}function nn(n){return n=n.childContextTypes,n!=null}function Ll(){Je(tn),Je(jt)}function fp(n,r,a){if(jt.current!==ns)throw Error(t(168));Xe(jt,r),Xe(tn,a)}function pp(n,r,a){var c=n.stateNode;if(r=r.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var d in c)if(!(d in r))throw Error(t(108,me(n)||"Unknown",d));return le({},a,c)}function Ol(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ns,Hs=jt.current,Xe(jt,n),Xe(tn,tn.current),!0}function mp(n,r,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=pp(n,r,Hs),c.__reactInternalMemoizedMergedChildContext=n,Je(tn),Je(jt),Xe(jt,n)):Je(tn),Xe(tn,a)}var Ir=null,Ml=!1,Qc=!1;function gp(n){Ir===null?Ir=[n]:Ir.push(n)}function n0(n){Ml=!0,gp(n)}function rs(){if(!Qc&&Ir!==null){Qc=!0;var n=0,r=Me;try{var a=Ir;for(Me=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}Ir=null,Ml=!1}catch(d){throw Ir!==null&&(Ir=Ir.slice(n+1)),Si(Ls,rs),d}finally{Me=r,Qc=!1}}return null}var Ki=[],Gi=0,jl=null,Fl=0,Sn=[],Cn=0,qs=null,xr=1,Sr="";function Ws(n,r){Ki[Gi++]=Fl,Ki[Gi++]=jl,jl=n,Fl=r}function yp(n,r,a){Sn[Cn++]=xr,Sn[Cn++]=Sr,Sn[Cn++]=qs,qs=n;var c=xr;n=Sr;var d=32-Gt(c)-1;c&=~(1<<d),a+=1;var p=32-Gt(r)+d;if(30<p){var w=d-d%5;p=(c&(1<<w)-1).toString(32),c>>=w,d-=w,xr=1<<32-Gt(r)+d|a<<d|c,Sr=p+n}else xr=1<<p|a<<d|c,Sr=n}function Xc(n){n.return!==null&&(Ws(n,1),yp(n,1,0))}function Yc(n){for(;n===jl;)jl=Ki[--Gi],Ki[Gi]=null,Fl=Ki[--Gi],Ki[Gi]=null;for(;n===qs;)qs=Sn[--Cn],Sn[Cn]=null,Sr=Sn[--Cn],Sn[Cn]=null,xr=Sn[--Cn],Sn[Cn]=null}var gn=null,yn=null,nt=!1,$n=null;function vp(n,r){var a=Pn(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=n,r=n.deletions,r===null?(n.deletions=[a],n.flags|=16):r.push(a)}function _p(n,r){switch(n.tag){case 5:var a=n.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,gn=n,yn=es(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,gn=n,yn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=qs!==null?{id:xr,overflow:Sr}:null,n.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=Pn(18,null,null,0),a.stateNode=r,a.return=n,n.child=a,gn=n,yn=null,!0):!1;default:return!1}}function Jc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Zc(n){if(nt){var r=yn;if(r){var a=r;if(!_p(n,r)){if(Jc(n))throw Error(t(418));r=es(a.nextSibling);var c=gn;r&&_p(n,r)?vp(c,a):(n.flags=n.flags&-4097|2,nt=!1,gn=n)}}else{if(Jc(n))throw Error(t(418));n.flags=n.flags&-4097|2,nt=!1,gn=n}}}function wp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;gn=n}function Ul(n){if(n!==gn)return!1;if(!nt)return wp(n),nt=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!Hc(n.type,n.memoizedProps)),r&&(r=yn)){if(Jc(n))throw Ep(),Error(t(418));for(;r;)vp(n,r),r=es(r.nextSibling)}if(wp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(r===0){yn=es(n.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}n=n.nextSibling}yn=null}}else yn=gn?es(n.stateNode.nextSibling):null;return!0}function Ep(){for(var n=yn;n;)n=es(n.nextSibling)}function Qi(){yn=gn=null,nt=!1}function eh(n){$n===null?$n=[n]:$n.push(n)}var r0=se.ReactCurrentBatchConfig;function la(n,r,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var d=c,p=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(w){var A=d.refs;w===null?delete A[p]:A[p]=w},r._stringRef=p,r)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function zl(n,r){throw n=Object.prototype.toString.call(r),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function Tp(n){var r=n._init;return r(n._payload)}function Ip(n){function r(M,V){if(n){var F=M.deletions;F===null?(M.deletions=[V],M.flags|=16):F.push(V)}}function a(M,V){if(!n)return null;for(;V!==null;)r(M,V),V=V.sibling;return null}function c(M,V){for(M=new Map;V!==null;)V.key!==null?M.set(V.key,V):M.set(V.index,V),V=V.sibling;return M}function d(M,V){return M=hs(M,V),M.index=0,M.sibling=null,M}function p(M,V,F){return M.index=F,n?(F=M.alternate,F!==null?(F=F.index,F<V?(M.flags|=2,V):F):(M.flags|=2,V)):(M.flags|=1048576,V)}function w(M){return n&&M.alternate===null&&(M.flags|=2),M}function A(M,V,F,ie){return V===null||V.tag!==6?(V=qh(F,M.mode,ie),V.return=M,V):(V=d(V,F),V.return=M,V)}function b(M,V,F,ie){var Te=F.type;return Te===P?Y(M,V,F.props.children,ie,F.key):V!==null&&(V.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===Ie&&Tp(Te)===V.type)?(ie=d(V,F.props),ie.ref=la(M,V,F),ie.return=M,ie):(ie=hu(F.type,F.key,F.props,null,M.mode,ie),ie.ref=la(M,V,F),ie.return=M,ie)}function z(M,V,F,ie){return V===null||V.tag!==4||V.stateNode.containerInfo!==F.containerInfo||V.stateNode.implementation!==F.implementation?(V=Wh(F,M.mode,ie),V.return=M,V):(V=d(V,F.children||[]),V.return=M,V)}function Y(M,V,F,ie,Te){return V===null||V.tag!==7?(V=ei(F,M.mode,ie,Te),V.return=M,V):(V=d(V,F),V.return=M,V)}function ee(M,V,F){if(typeof V=="string"&&V!==""||typeof V=="number")return V=qh(""+V,M.mode,F),V.return=M,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case ue:return F=hu(V.type,V.key,V.props,null,M.mode,F),F.ref=la(M,null,V),F.return=M,F;case oe:return V=Wh(V,M.mode,F),V.return=M,V;case Ie:var ie=V._init;return ee(M,ie(V._payload),F)}if(fr(V)||de(V))return V=ei(V,M.mode,F,null),V.return=M,V;zl(M,V)}return null}function X(M,V,F,ie){var Te=V!==null?V.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return Te!==null?null:A(M,V,""+F,ie);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case ue:return F.key===Te?b(M,V,F,ie):null;case oe:return F.key===Te?z(M,V,F,ie):null;case Ie:return Te=F._init,X(M,V,Te(F._payload),ie)}if(fr(F)||de(F))return Te!==null?null:Y(M,V,F,ie,null);zl(M,F)}return null}function ce(M,V,F,ie,Te){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return M=M.get(F)||null,A(V,M,""+ie,Te);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case ue:return M=M.get(ie.key===null?F:ie.key)||null,b(V,M,ie,Te);case oe:return M=M.get(ie.key===null?F:ie.key)||null,z(V,M,ie,Te);case Ie:var Ce=ie._init;return ce(M,V,F,Ce(ie._payload),Te)}if(fr(ie)||de(ie))return M=M.get(F)||null,Y(V,M,ie,Te,null);zl(V,ie)}return null}function ge(M,V,F,ie){for(var Te=null,Ce=null,Ae=V,ke=V=0,Ct=null;Ae!==null&&ke<F.length;ke++){Ae.index>ke?(Ct=Ae,Ae=null):Ct=Ae.sibling;var $e=X(M,Ae,F[ke],ie);if($e===null){Ae===null&&(Ae=Ct);break}n&&Ae&&$e.alternate===null&&r(M,Ae),V=p($e,V,ke),Ce===null?Te=$e:Ce.sibling=$e,Ce=$e,Ae=Ct}if(ke===F.length)return a(M,Ae),nt&&Ws(M,ke),Te;if(Ae===null){for(;ke<F.length;ke++)Ae=ee(M,F[ke],ie),Ae!==null&&(V=p(Ae,V,ke),Ce===null?Te=Ae:Ce.sibling=Ae,Ce=Ae);return nt&&Ws(M,ke),Te}for(Ae=c(M,Ae);ke<F.length;ke++)Ct=ce(Ae,M,ke,F[ke],ie),Ct!==null&&(n&&Ct.alternate!==null&&Ae.delete(Ct.key===null?ke:Ct.key),V=p(Ct,V,ke),Ce===null?Te=Ct:Ce.sibling=Ct,Ce=Ct);return n&&Ae.forEach(function(ds){return r(M,ds)}),nt&&Ws(M,ke),Te}function ve(M,V,F,ie){var Te=de(F);if(typeof Te!="function")throw Error(t(150));if(F=Te.call(F),F==null)throw Error(t(151));for(var Ce=Te=null,Ae=V,ke=V=0,Ct=null,$e=F.next();Ae!==null&&!$e.done;ke++,$e=F.next()){Ae.index>ke?(Ct=Ae,Ae=null):Ct=Ae.sibling;var ds=X(M,Ae,$e.value,ie);if(ds===null){Ae===null&&(Ae=Ct);break}n&&Ae&&ds.alternate===null&&r(M,Ae),V=p(ds,V,ke),Ce===null?Te=ds:Ce.sibling=ds,Ce=ds,Ae=Ct}if($e.done)return a(M,Ae),nt&&Ws(M,ke),Te;if(Ae===null){for(;!$e.done;ke++,$e=F.next())$e=ee(M,$e.value,ie),$e!==null&&(V=p($e,V,ke),Ce===null?Te=$e:Ce.sibling=$e,Ce=$e);return nt&&Ws(M,ke),Te}for(Ae=c(M,Ae);!$e.done;ke++,$e=F.next())$e=ce(Ae,M,ke,$e.value,ie),$e!==null&&(n&&$e.alternate!==null&&Ae.delete($e.key===null?ke:$e.key),V=p($e,V,ke),Ce===null?Te=$e:Ce.sibling=$e,Ce=$e);return n&&Ae.forEach(function(O0){return r(M,O0)}),nt&&Ws(M,ke),Te}function ct(M,V,F,ie){if(typeof F=="object"&&F!==null&&F.type===P&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case ue:e:{for(var Te=F.key,Ce=V;Ce!==null;){if(Ce.key===Te){if(Te=F.type,Te===P){if(Ce.tag===7){a(M,Ce.sibling),V=d(Ce,F.props.children),V.return=M,M=V;break e}}else if(Ce.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===Ie&&Tp(Te)===Ce.type){a(M,Ce.sibling),V=d(Ce,F.props),V.ref=la(M,Ce,F),V.return=M,M=V;break e}a(M,Ce);break}else r(M,Ce);Ce=Ce.sibling}F.type===P?(V=ei(F.props.children,M.mode,ie,F.key),V.return=M,M=V):(ie=hu(F.type,F.key,F.props,null,M.mode,ie),ie.ref=la(M,V,F),ie.return=M,M=ie)}return w(M);case oe:e:{for(Ce=F.key;V!==null;){if(V.key===Ce)if(V.tag===4&&V.stateNode.containerInfo===F.containerInfo&&V.stateNode.implementation===F.implementation){a(M,V.sibling),V=d(V,F.children||[]),V.return=M,M=V;break e}else{a(M,V);break}else r(M,V);V=V.sibling}V=Wh(F,M.mode,ie),V.return=M,M=V}return w(M);case Ie:return Ce=F._init,ct(M,V,Ce(F._payload),ie)}if(fr(F))return ge(M,V,F,ie);if(de(F))return ve(M,V,F,ie);zl(M,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,V!==null&&V.tag===6?(a(M,V.sibling),V=d(V,F),V.return=M,M=V):(a(M,V),V=qh(F,M.mode,ie),V.return=M,M=V),w(M)):a(M,V)}return ct}var Xi=Ip(!0),xp=Ip(!1),Bl=ts(null),$l=null,Yi=null,th=null;function nh(){th=Yi=$l=null}function rh(n){var r=Bl.current;Je(Bl),n._currentValue=r}function sh(n,r,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===a)break;n=n.return}}function Ji(n,r){$l=n,th=Yi=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&r)!==0&&(rn=!0),n.firstContext=null)}function An(n){var r=n._currentValue;if(th!==n)if(n={context:n,memoizedValue:r,next:null},Yi===null){if($l===null)throw Error(t(308));Yi=n,$l.dependencies={lanes:0,firstContext:n}}else Yi=Yi.next=n;return r}var Ks=null;function ih(n){Ks===null?Ks=[n]:Ks.push(n)}function Sp(n,r,a,c){var d=r.interleaved;return d===null?(a.next=a,ih(r)):(a.next=d.next,d.next=a),r.interleaved=a,Cr(n,c)}function Cr(n,r){n.lanes|=r;var a=n.alternate;for(a!==null&&(a.lanes|=r),a=n,n=n.return;n!==null;)n.childLanes|=r,a=n.alternate,a!==null&&(a.childLanes|=r),a=n,n=n.return;return a.tag===3?a.stateNode:null}var ss=!1;function oh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cp(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ar(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function is(n,r,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(ze&2)!==0){var d=c.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),c.pending=r,Cr(n,a)}return d=c.interleaved,d===null?(r.next=r,ih(c)):(r.next=d.next,d.next=r),c.interleaved=r,Cr(n,a)}function Hl(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,Gr(n,a)}}function Ap(n,r){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var d=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?d=p=w:p=p.next=w,a=a.next}while(a!==null);p===null?d=p=r:p=p.next=r}else d=p=r;a={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}function ql(n,r,a,c){var d=n.updateQueue;ss=!1;var p=d.firstBaseUpdate,w=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var b=A,z=b.next;b.next=null,w===null?p=z:w.next=z,w=b;var Y=n.alternate;Y!==null&&(Y=Y.updateQueue,A=Y.lastBaseUpdate,A!==w&&(A===null?Y.firstBaseUpdate=z:A.next=z,Y.lastBaseUpdate=b))}if(p!==null){var ee=d.baseState;w=0,Y=z=b=null,A=p;do{var X=A.lane,ce=A.eventTime;if((c&X)===X){Y!==null&&(Y=Y.next={eventTime:ce,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var ge=n,ve=A;switch(X=r,ce=a,ve.tag){case 1:if(ge=ve.payload,typeof ge=="function"){ee=ge.call(ce,ee,X);break e}ee=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=ve.payload,X=typeof ge=="function"?ge.call(ce,ee,X):ge,X==null)break e;ee=le({},ee,X);break e;case 2:ss=!0}}A.callback!==null&&A.lane!==0&&(n.flags|=64,X=d.effects,X===null?d.effects=[A]:X.push(A))}else ce={eventTime:ce,lane:X,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Y===null?(z=Y=ce,b=ee):Y=Y.next=ce,w|=X;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;X=A,A=X.next,X.next=null,d.lastBaseUpdate=X,d.shared.pending=null}}while(!0);if(Y===null&&(b=ee),d.baseState=b,d.firstBaseUpdate=z,d.lastBaseUpdate=Y,r=d.shared.interleaved,r!==null){d=r;do w|=d.lane,d=d.next;while(d!==r)}else p===null&&(d.shared.lanes=0);Xs|=w,n.lanes=w,n.memoizedState=ee}}function kp(n,r,a){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var c=n[r],d=c.callback;if(d!==null){if(c.callback=null,c=a,typeof d!="function")throw Error(t(191,d));d.call(c)}}}var ua={},rr=ts(ua),ca=ts(ua),ha=ts(ua);function Gs(n){if(n===ua)throw Error(t(174));return n}function ah(n,r){switch(Xe(ha,r),Xe(ca,n),Xe(rr,ua),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:vt(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=vt(r,n)}Je(rr),Xe(rr,r)}function Zi(){Je(rr),Je(ca),Je(ha)}function Rp(n){Gs(ha.current);var r=Gs(rr.current),a=vt(r,n.type);r!==a&&(Xe(ca,n),Xe(rr,a))}function lh(n){ca.current===n&&(Je(rr),Je(ca))}var rt=ts(0);function Wl(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var uh=[];function ch(){for(var n=0;n<uh.length;n++)uh[n]._workInProgressVersionPrimary=null;uh.length=0}var Kl=se.ReactCurrentDispatcher,hh=se.ReactCurrentBatchConfig,Qs=0,st=null,wt=null,xt=null,Gl=!1,da=!1,fa=0,s0=0;function Ft(){throw Error(t(321))}function dh(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!Bn(n[a],r[a]))return!1;return!0}function fh(n,r,a,c,d,p){if(Qs=p,st=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Kl.current=n===null||n.memoizedState===null?l0:u0,n=a(c,d),da){p=0;do{if(da=!1,fa=0,25<=p)throw Error(t(301));p+=1,xt=wt=null,r.updateQueue=null,Kl.current=c0,n=a(c,d)}while(da)}if(Kl.current=Yl,r=wt!==null&&wt.next!==null,Qs=0,xt=wt=st=null,Gl=!1,r)throw Error(t(300));return n}function ph(){var n=fa!==0;return fa=0,n}function sr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?st.memoizedState=xt=n:xt=xt.next=n,xt}function kn(){if(wt===null){var n=st.alternate;n=n!==null?n.memoizedState:null}else n=wt.next;var r=xt===null?st.memoizedState:xt.next;if(r!==null)xt=r,wt=n;else{if(n===null)throw Error(t(310));wt=n,n={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},xt===null?st.memoizedState=xt=n:xt=xt.next=n}return xt}function pa(n,r){return typeof r=="function"?r(n):r}function mh(n){var r=kn(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=wt,d=c.baseQueue,p=a.pending;if(p!==null){if(d!==null){var w=d.next;d.next=p.next,p.next=w}c.baseQueue=d=p,a.pending=null}if(d!==null){p=d.next,c=c.baseState;var A=w=null,b=null,z=p;do{var Y=z.lane;if((Qs&Y)===Y)b!==null&&(b=b.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),c=z.hasEagerState?z.eagerState:n(c,z.action);else{var ee={lane:Y,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};b===null?(A=b=ee,w=c):b=b.next=ee,st.lanes|=Y,Xs|=Y}z=z.next}while(z!==null&&z!==p);b===null?w=c:b.next=A,Bn(c,r.memoizedState)||(rn=!0),r.memoizedState=c,r.baseState=w,r.baseQueue=b,a.lastRenderedState=c}if(n=a.interleaved,n!==null){d=n;do p=d.lane,st.lanes|=p,Xs|=p,d=d.next;while(d!==n)}else d===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function gh(n){var r=kn(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,d=a.pending,p=r.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do p=n(p,w.action),w=w.next;while(w!==d);Bn(p,r.memoizedState)||(rn=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),a.lastRenderedState=p}return[p,c]}function Pp(){}function Np(n,r){var a=st,c=kn(),d=r(),p=!Bn(c.memoizedState,d);if(p&&(c.memoizedState=d,rn=!0),c=c.queue,yh(Vp.bind(null,a,c,n),[n]),c.getSnapshot!==r||p||xt!==null&&xt.memoizedState.tag&1){if(a.flags|=2048,ma(9,Dp.bind(null,a,c,d,r),void 0,null),St===null)throw Error(t(349));(Qs&30)!==0||bp(a,r,d)}return d}function bp(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=st.updateQueue,r===null?(r={lastEffect:null,stores:null},st.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function Dp(n,r,a,c){r.value=a,r.getSnapshot=c,Lp(r)&&Op(n)}function Vp(n,r,a){return a(function(){Lp(r)&&Op(n)})}function Lp(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!Bn(n,a)}catch{return!0}}function Op(n){var r=Cr(n,1);r!==null&&Kn(r,n,1,-1)}function Mp(n){var r=sr();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pa,lastRenderedState:n},r.queue=n,n=n.dispatch=a0.bind(null,st,n),[r.memoizedState,n]}function ma(n,r,a,c){return n={tag:n,create:r,destroy:a,deps:c,next:null},r=st.updateQueue,r===null?(r={lastEffect:null,stores:null},st.updateQueue=r,r.lastEffect=n.next=n):(a=r.lastEffect,a===null?r.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,r.lastEffect=n)),n}function jp(){return kn().memoizedState}function Ql(n,r,a,c){var d=sr();st.flags|=n,d.memoizedState=ma(1|r,a,void 0,c===void 0?null:c)}function Xl(n,r,a,c){var d=kn();c=c===void 0?null:c;var p=void 0;if(wt!==null){var w=wt.memoizedState;if(p=w.destroy,c!==null&&dh(c,w.deps)){d.memoizedState=ma(r,a,p,c);return}}st.flags|=n,d.memoizedState=ma(1|r,a,p,c)}function Fp(n,r){return Ql(8390656,8,n,r)}function yh(n,r){return Xl(2048,8,n,r)}function Up(n,r){return Xl(4,2,n,r)}function zp(n,r){return Xl(4,4,n,r)}function Bp(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function $p(n,r,a){return a=a!=null?a.concat([n]):null,Xl(4,4,Bp.bind(null,r,n),a)}function vh(){}function Hp(n,r){var a=kn();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&dh(r,c[1])?c[0]:(a.memoizedState=[n,r],n)}function qp(n,r){var a=kn();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&dh(r,c[1])?c[0]:(n=n(),a.memoizedState=[n,r],n)}function Wp(n,r,a){return(Qs&21)===0?(n.baseState&&(n.baseState=!1,rn=!0),n.memoizedState=a):(Bn(a,r)||(a=js(),st.lanes|=a,Xs|=a,n.baseState=!0),r)}function i0(n,r){var a=Me;Me=a!==0&&4>a?a:4,n(!0);var c=hh.transition;hh.transition={};try{n(!1),r()}finally{Me=a,hh.transition=c}}function Kp(){return kn().memoizedState}function o0(n,r,a){var c=us(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Gp(n))Qp(r,a);else if(a=Sp(n,r,a,c),a!==null){var d=Yt();Kn(a,n,c,d),Xp(a,r,c)}}function a0(n,r,a){var c=us(n),d={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Gp(n))Qp(r,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var w=r.lastRenderedState,A=p(w,a);if(d.hasEagerState=!0,d.eagerState=A,Bn(A,w)){var b=r.interleaved;b===null?(d.next=d,ih(r)):(d.next=b.next,b.next=d),r.interleaved=d;return}}catch{}finally{}a=Sp(n,r,d,c),a!==null&&(d=Yt(),Kn(a,n,c,d),Xp(a,r,c))}}function Gp(n){var r=n.alternate;return n===st||r!==null&&r===st}function Qp(n,r){da=Gl=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function Xp(n,r,a){if((a&4194240)!==0){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,Gr(n,a)}}var Yl={readContext:An,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},l0={readContext:An,useCallback:function(n,r){return sr().memoizedState=[n,r===void 0?null:r],n},useContext:An,useEffect:Fp,useImperativeHandle:function(n,r,a){return a=a!=null?a.concat([n]):null,Ql(4194308,4,Bp.bind(null,r,n),a)},useLayoutEffect:function(n,r){return Ql(4194308,4,n,r)},useInsertionEffect:function(n,r){return Ql(4,2,n,r)},useMemo:function(n,r){var a=sr();return r=r===void 0?null:r,n=n(),a.memoizedState=[n,r],n},useReducer:function(n,r,a){var c=sr();return r=a!==void 0?a(r):r,c.memoizedState=c.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},c.queue=n,n=n.dispatch=o0.bind(null,st,n),[c.memoizedState,n]},useRef:function(n){var r=sr();return n={current:n},r.memoizedState=n},useState:Mp,useDebugValue:vh,useDeferredValue:function(n){return sr().memoizedState=n},useTransition:function(){var n=Mp(!1),r=n[0];return n=i0.bind(null,n[1]),sr().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,a){var c=st,d=sr();if(nt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=r(),St===null)throw Error(t(349));(Qs&30)!==0||bp(c,r,a)}d.memoizedState=a;var p={value:a,getSnapshot:r};return d.queue=p,Fp(Vp.bind(null,c,p,n),[n]),c.flags|=2048,ma(9,Dp.bind(null,c,p,a,r),void 0,null),a},useId:function(){var n=sr(),r=St.identifierPrefix;if(nt){var a=Sr,c=xr;a=(c&~(1<<32-Gt(c)-1)).toString(32)+a,r=":"+r+"R"+a,a=fa++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=s0++,r=":"+r+"r"+a.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},u0={readContext:An,useCallback:Hp,useContext:An,useEffect:yh,useImperativeHandle:$p,useInsertionEffect:Up,useLayoutEffect:zp,useMemo:qp,useReducer:mh,useRef:jp,useState:function(){return mh(pa)},useDebugValue:vh,useDeferredValue:function(n){var r=kn();return Wp(r,wt.memoizedState,n)},useTransition:function(){var n=mh(pa)[0],r=kn().memoizedState;return[n,r]},useMutableSource:Pp,useSyncExternalStore:Np,useId:Kp,unstable_isNewReconciler:!1},c0={readContext:An,useCallback:Hp,useContext:An,useEffect:yh,useImperativeHandle:$p,useInsertionEffect:Up,useLayoutEffect:zp,useMemo:qp,useReducer:gh,useRef:jp,useState:function(){return gh(pa)},useDebugValue:vh,useDeferredValue:function(n){var r=kn();return wt===null?r.memoizedState=n:Wp(r,wt.memoizedState,n)},useTransition:function(){var n=gh(pa)[0],r=kn().memoizedState;return[n,r]},useMutableSource:Pp,useSyncExternalStore:Np,useId:Kp,unstable_isNewReconciler:!1};function Hn(n,r){if(n&&n.defaultProps){r=le({},r),n=n.defaultProps;for(var a in n)r[a]===void 0&&(r[a]=n[a]);return r}return r}function _h(n,r,a,c){r=n.memoizedState,a=a(c,r),a=a==null?r:le({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Jl={isMounted:function(n){return(n=n._reactInternals)?Ln(n)===n:!1},enqueueSetState:function(n,r,a){n=n._reactInternals;var c=Yt(),d=us(n),p=Ar(c,d);p.payload=r,a!=null&&(p.callback=a),r=is(n,p,d),r!==null&&(Kn(r,n,d,c),Hl(r,n,d))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var c=Yt(),d=us(n),p=Ar(c,d);p.tag=1,p.payload=r,a!=null&&(p.callback=a),r=is(n,p,d),r!==null&&(Kn(r,n,d,c),Hl(r,n,d))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=Yt(),c=us(n),d=Ar(a,c);d.tag=2,r!=null&&(d.callback=r),r=is(n,d,c),r!==null&&(Kn(r,n,c,a),Hl(r,n,c))}};function Yp(n,r,a,c,d,p,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,w):r.prototype&&r.prototype.isPureReactComponent?!ta(a,c)||!ta(d,p):!0}function Jp(n,r,a){var c=!1,d=ns,p=r.contextType;return typeof p=="object"&&p!==null?p=An(p):(d=nn(r)?Hs:jt.current,c=r.contextTypes,p=(c=c!=null)?Wi(n,d):ns),r=new r(a,p),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Jl,n.stateNode=r,r._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=d,n.__reactInternalMemoizedMaskedChildContext=p),r}function Zp(n,r,a,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==n&&Jl.enqueueReplaceState(r,r.state,null)}function wh(n,r,a,c){var d=n.stateNode;d.props=a,d.state=n.memoizedState,d.refs={},oh(n);var p=r.contextType;typeof p=="object"&&p!==null?d.context=An(p):(p=nn(r)?Hs:jt.current,d.context=Wi(n,p)),d.state=n.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(_h(n,r,p,a),d.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(r=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),r!==d.state&&Jl.enqueueReplaceState(d,d.state,null),ql(n,a,d,c),d.state=n.memoizedState),typeof d.componentDidMount=="function"&&(n.flags|=4194308)}function eo(n,r){try{var a="",c=r;do a+=xe(c),c=c.return;while(c);var d=a}catch(p){d=`
Error generating stack: `+p.message+`
`+p.stack}return{value:n,source:r,stack:d,digest:null}}function Eh(n,r,a){return{value:n,source:null,stack:a??null,digest:r??null}}function Th(n,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var h0=typeof WeakMap=="function"?WeakMap:Map;function em(n,r,a){a=Ar(-1,a),a.tag=3,a.payload={element:null};var c=r.value;return a.callback=function(){iu||(iu=!0,Mh=c),Th(n,r)},a}function tm(n,r,a){a=Ar(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var d=r.value;a.payload=function(){return c(d)},a.callback=function(){Th(n,r)}}var p=n.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){Th(n,r),typeof c!="function"&&(as===null?as=new Set([this]):as.add(this));var w=r.stack;this.componentDidCatch(r.value,{componentStack:w!==null?w:""})}),a}function nm(n,r,a){var c=n.pingCache;if(c===null){c=n.pingCache=new h0;var d=new Set;c.set(r,d)}else d=c.get(r),d===void 0&&(d=new Set,c.set(r,d));d.has(a)||(d.add(a),n=S0.bind(null,n,r,a),r.then(n,n))}function rm(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function sm(n,r,a,c,d){return(n.mode&1)===0?(n===r?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=Ar(-1,1),r.tag=2,is(a,r,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=d,n)}var d0=se.ReactCurrentOwner,rn=!1;function Xt(n,r,a,c){r.child=n===null?xp(r,null,a,c):Xi(r,n.child,a,c)}function im(n,r,a,c,d){a=a.render;var p=r.ref;return Ji(r,d),c=fh(n,r,a,c,p,d),a=ph(),n!==null&&!rn?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~d,kr(n,r,d)):(nt&&a&&Xc(r),r.flags|=1,Xt(n,r,c,d),r.child)}function om(n,r,a,c,d){if(n===null){var p=a.type;return typeof p=="function"&&!Hh(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=p,am(n,r,p,c,d)):(n=hu(a.type,null,c,r,r.mode,d),n.ref=r.ref,n.return=r,r.child=n)}if(p=n.child,(n.lanes&d)===0){var w=p.memoizedProps;if(a=a.compare,a=a!==null?a:ta,a(w,c)&&n.ref===r.ref)return kr(n,r,d)}return r.flags|=1,n=hs(p,c),n.ref=r.ref,n.return=r,r.child=n}function am(n,r,a,c,d){if(n!==null){var p=n.memoizedProps;if(ta(p,c)&&n.ref===r.ref)if(rn=!1,r.pendingProps=c=p,(n.lanes&d)!==0)(n.flags&131072)!==0&&(rn=!0);else return r.lanes=n.lanes,kr(n,r,d)}return Ih(n,r,a,c,d)}function lm(n,r,a){var c=r.pendingProps,d=c.children,p=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(no,vn),vn|=a;else{if((a&1073741824)===0)return n=p!==null?p.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,Xe(no,vn),vn|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:a,Xe(no,vn),vn|=c}else p!==null?(c=p.baseLanes|a,r.memoizedState=null):c=a,Xe(no,vn),vn|=c;return Xt(n,r,d,a),r.child}function um(n,r){var a=r.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function Ih(n,r,a,c,d){var p=nn(a)?Hs:jt.current;return p=Wi(r,p),Ji(r,d),a=fh(n,r,a,c,p,d),c=ph(),n!==null&&!rn?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~d,kr(n,r,d)):(nt&&c&&Xc(r),r.flags|=1,Xt(n,r,a,d),r.child)}function cm(n,r,a,c,d){if(nn(a)){var p=!0;Ol(r)}else p=!1;if(Ji(r,d),r.stateNode===null)eu(n,r),Jp(r,a,c),wh(r,a,c,d),c=!0;else if(n===null){var w=r.stateNode,A=r.memoizedProps;w.props=A;var b=w.context,z=a.contextType;typeof z=="object"&&z!==null?z=An(z):(z=nn(a)?Hs:jt.current,z=Wi(r,z));var Y=a.getDerivedStateFromProps,ee=typeof Y=="function"||typeof w.getSnapshotBeforeUpdate=="function";ee||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==c||b!==z)&&Zp(r,w,c,z),ss=!1;var X=r.memoizedState;w.state=X,ql(r,c,w,d),b=r.memoizedState,A!==c||X!==b||tn.current||ss?(typeof Y=="function"&&(_h(r,a,Y,c),b=r.memoizedState),(A=ss||Yp(r,a,A,c,X,b,z))?(ee||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(r.flags|=4194308)):(typeof w.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=b),w.props=c,w.state=b,w.context=z,c=A):(typeof w.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{w=r.stateNode,Cp(n,r),A=r.memoizedProps,z=r.type===r.elementType?A:Hn(r.type,A),w.props=z,ee=r.pendingProps,X=w.context,b=a.contextType,typeof b=="object"&&b!==null?b=An(b):(b=nn(a)?Hs:jt.current,b=Wi(r,b));var ce=a.getDerivedStateFromProps;(Y=typeof ce=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==ee||X!==b)&&Zp(r,w,c,b),ss=!1,X=r.memoizedState,w.state=X,ql(r,c,w,d);var ge=r.memoizedState;A!==ee||X!==ge||tn.current||ss?(typeof ce=="function"&&(_h(r,a,ce,c),ge=r.memoizedState),(z=ss||Yp(r,a,z,c,X,ge,b)||!1)?(Y||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,ge,b),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,ge,b)),typeof w.componentDidUpdate=="function"&&(r.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof w.componentDidUpdate!="function"||A===n.memoizedProps&&X===n.memoizedState||(r.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&X===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=ge),w.props=c,w.state=ge,w.context=b,c=z):(typeof w.componentDidUpdate!="function"||A===n.memoizedProps&&X===n.memoizedState||(r.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&X===n.memoizedState||(r.flags|=1024),c=!1)}return xh(n,r,a,c,p,d)}function xh(n,r,a,c,d,p){um(n,r);var w=(r.flags&128)!==0;if(!c&&!w)return d&&mp(r,a,!1),kr(n,r,p);c=r.stateNode,d0.current=r;var A=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return r.flags|=1,n!==null&&w?(r.child=Xi(r,n.child,null,p),r.child=Xi(r,null,A,p)):Xt(n,r,A,p),r.memoizedState=c.state,d&&mp(r,a,!0),r.child}function hm(n){var r=n.stateNode;r.pendingContext?fp(n,r.pendingContext,r.pendingContext!==r.context):r.context&&fp(n,r.context,!1),ah(n,r.containerInfo)}function dm(n,r,a,c,d){return Qi(),eh(d),r.flags|=256,Xt(n,r,a,c),r.child}var Sh={dehydrated:null,treeContext:null,retryLane:0};function Ch(n){return{baseLanes:n,cachePool:null,transitions:null}}function fm(n,r,a){var c=r.pendingProps,d=rt.current,p=!1,w=(r.flags&128)!==0,A;if((A=w)||(A=n!==null&&n.memoizedState===null?!1:(d&2)!==0),A?(p=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(d|=1),Xe(rt,d&1),n===null)return Zc(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((r.mode&1)===0?r.lanes=1:n.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(w=c.children,n=c.fallback,p?(c=r.mode,p=r.child,w={mode:"hidden",children:w},(c&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=w):p=du(w,c,0,null),n=ei(n,c,a,null),p.return=r,n.return=r,p.sibling=n,r.child=p,r.child.memoizedState=Ch(a),r.memoizedState=Sh,n):Ah(r,w));if(d=n.memoizedState,d!==null&&(A=d.dehydrated,A!==null))return f0(n,r,w,c,A,d,a);if(p){p=c.fallback,w=r.mode,d=n.child,A=d.sibling;var b={mode:"hidden",children:c.children};return(w&1)===0&&r.child!==d?(c=r.child,c.childLanes=0,c.pendingProps=b,r.deletions=null):(c=hs(d,b),c.subtreeFlags=d.subtreeFlags&14680064),A!==null?p=hs(A,p):(p=ei(p,w,a,null),p.flags|=2),p.return=r,c.return=r,c.sibling=p,r.child=c,c=p,p=r.child,w=n.child.memoizedState,w=w===null?Ch(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},p.memoizedState=w,p.childLanes=n.childLanes&~a,r.memoizedState=Sh,c}return p=n.child,n=p.sibling,c=hs(p,{mode:"visible",children:c.children}),(r.mode&1)===0&&(c.lanes=a),c.return=r,c.sibling=null,n!==null&&(a=r.deletions,a===null?(r.deletions=[n],r.flags|=16):a.push(n)),r.child=c,r.memoizedState=null,c}function Ah(n,r){return r=du({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function Zl(n,r,a,c){return c!==null&&eh(c),Xi(r,n.child,null,a),n=Ah(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function f0(n,r,a,c,d,p,w){if(a)return r.flags&256?(r.flags&=-257,c=Eh(Error(t(422))),Zl(n,r,w,c)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(p=c.fallback,d=r.mode,c=du({mode:"visible",children:c.children},d,0,null),p=ei(p,d,w,null),p.flags|=2,c.return=r,p.return=r,c.sibling=p,r.child=c,(r.mode&1)!==0&&Xi(r,n.child,null,w),r.child.memoizedState=Ch(w),r.memoizedState=Sh,p);if((r.mode&1)===0)return Zl(n,r,w,null);if(d.data==="$!"){if(c=d.nextSibling&&d.nextSibling.dataset,c)var A=c.dgst;return c=A,p=Error(t(419)),c=Eh(p,c,void 0),Zl(n,r,w,c)}if(A=(w&n.childLanes)!==0,rn||A){if(c=St,c!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(c.suspendedLanes|w))!==0?0:d,d!==0&&d!==p.retryLane&&(p.retryLane=d,Cr(n,d),Kn(c,n,d,-1))}return $h(),c=Eh(Error(t(421))),Zl(n,r,w,c)}return d.data==="$?"?(r.flags|=128,r.child=n.child,r=C0.bind(null,n),d._reactRetry=r,null):(n=p.treeContext,yn=es(d.nextSibling),gn=r,nt=!0,$n=null,n!==null&&(Sn[Cn++]=xr,Sn[Cn++]=Sr,Sn[Cn++]=qs,xr=n.id,Sr=n.overflow,qs=r),r=Ah(r,c.children),r.flags|=4096,r)}function pm(n,r,a){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),sh(n.return,r,a)}function kh(n,r,a,c,d){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:d}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=d)}function mm(n,r,a){var c=r.pendingProps,d=c.revealOrder,p=c.tail;if(Xt(n,r,c.children,a),c=rt.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&pm(n,a,r);else if(n.tag===19)pm(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Xe(rt,c),(r.mode&1)===0)r.memoizedState=null;else switch(d){case"forwards":for(a=r.child,d=null;a!==null;)n=a.alternate,n!==null&&Wl(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),kh(r,!1,d,a,p);break;case"backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(n=d.alternate,n!==null&&Wl(n)===null){r.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}kh(r,!0,a,null,p);break;case"together":kh(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function eu(n,r){(r.mode&1)===0&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function kr(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),Xs|=r.lanes,(a&r.childLanes)===0)return null;if(n!==null&&r.child!==n.child)throw Error(t(153));if(r.child!==null){for(n=r.child,a=hs(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=hs(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function p0(n,r,a){switch(r.tag){case 3:hm(r),Qi();break;case 5:Rp(r);break;case 1:nn(r.type)&&Ol(r);break;case 4:ah(r,r.stateNode.containerInfo);break;case 10:var c=r.type._context,d=r.memoizedProps.value;Xe(Bl,c._currentValue),c._currentValue=d;break;case 13:if(c=r.memoizedState,c!==null)return c.dehydrated!==null?(Xe(rt,rt.current&1),r.flags|=128,null):(a&r.child.childLanes)!==0?fm(n,r,a):(Xe(rt,rt.current&1),n=kr(n,r,a),n!==null?n.sibling:null);Xe(rt,rt.current&1);break;case 19:if(c=(a&r.childLanes)!==0,(n.flags&128)!==0){if(c)return mm(n,r,a);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Xe(rt,rt.current),c)break;return null;case 22:case 23:return r.lanes=0,lm(n,r,a)}return kr(n,r,a)}var gm,Rh,ym,vm;gm=function(n,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Rh=function(){},ym=function(n,r,a,c){var d=n.memoizedProps;if(d!==c){n=r.stateNode,Gs(rr.current);var p=null;switch(a){case"input":d=bn(n,d),c=bn(n,c),p=[];break;case"select":d=le({},d,{value:void 0}),c=le({},c,{value:void 0}),p=[];break;case"textarea":d=Po(n,d),c=Po(n,c),p=[];break;default:typeof d.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=Dl)}Oo(a,c);var w;a=null;for(z in d)if(!c.hasOwnProperty(z)&&d.hasOwnProperty(z)&&d[z]!=null)if(z==="style"){var A=d[z];for(w in A)A.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(o.hasOwnProperty(z)?p||(p=[]):(p=p||[]).push(z,null));for(z in c){var b=c[z];if(A=d!=null?d[z]:void 0,c.hasOwnProperty(z)&&b!==A&&(b!=null||A!=null))if(z==="style")if(A){for(w in A)!A.hasOwnProperty(w)||b&&b.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in b)b.hasOwnProperty(w)&&A[w]!==b[w]&&(a||(a={}),a[w]=b[w])}else a||(p||(p=[]),p.push(z,a)),a=b;else z==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,A=A?A.__html:void 0,b!=null&&A!==b&&(p=p||[]).push(z,b)):z==="children"?typeof b!="string"&&typeof b!="number"||(p=p||[]).push(z,""+b):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(o.hasOwnProperty(z)?(b!=null&&z==="onScroll"&&Ye("scroll",n),p||A===b||(p=[])):(p=p||[]).push(z,b))}a&&(p=p||[]).push("style",a);var z=p;(r.updateQueue=z)&&(r.flags|=4)}},vm=function(n,r,a,c){a!==c&&(r.flags|=4)};function ga(n,r){if(!nt)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Ut(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(r)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags&14680064,c|=d.flags&14680064,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=a,r}function m0(n,r,a){var c=r.pendingProps;switch(Yc(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(r),null;case 1:return nn(r.type)&&Ll(),Ut(r),null;case 3:return c=r.stateNode,Zi(),Je(tn),Je(jt),ch(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Ul(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,$n!==null&&(Uh($n),$n=null))),Rh(n,r),Ut(r),null;case 5:lh(r);var d=Gs(ha.current);if(a=r.type,n!==null&&r.stateNode!=null)ym(n,r,a,c,d),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!c){if(r.stateNode===null)throw Error(t(166));return Ut(r),null}if(n=Gs(rr.current),Ul(r)){c=r.stateNode,a=r.type;var p=r.memoizedProps;switch(c[nr]=r,c[oa]=p,n=(r.mode&1)!==0,a){case"dialog":Ye("cancel",c),Ye("close",c);break;case"iframe":case"object":case"embed":Ye("load",c);break;case"video":case"audio":for(d=0;d<ra.length;d++)Ye(ra[d],c);break;case"source":Ye("error",c);break;case"img":case"image":case"link":Ye("error",c),Ye("load",c);break;case"details":Ye("toggle",c);break;case"input":pi(c,p),Ye("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},Ye("invalid",c);break;case"textarea":gi(c,p),Ye("invalid",c)}Oo(a,p),d=null;for(var w in p)if(p.hasOwnProperty(w)){var A=p[w];w==="children"?typeof A=="string"?c.textContent!==A&&(p.suppressHydrationWarning!==!0&&bl(c.textContent,A,n),d=["children",A]):typeof A=="number"&&c.textContent!==""+A&&(p.suppressHydrationWarning!==!0&&bl(c.textContent,A,n),d=["children",""+A]):o.hasOwnProperty(w)&&A!=null&&w==="onScroll"&&Ye("scroll",c)}switch(a){case"input":ot(c),sl(c,p,!0);break;case"textarea":ot(c),No(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=Dl)}c=d,r.updateQueue=c,c!==null&&(r.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=yt(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[nr]=r,n[oa]=c,gm(n,r,!1,!1),r.stateNode=n;e:{switch(w=Mo(a,c),a){case"dialog":Ye("cancel",n),Ye("close",n),d=c;break;case"iframe":case"object":case"embed":Ye("load",n),d=c;break;case"video":case"audio":for(d=0;d<ra.length;d++)Ye(ra[d],n);d=c;break;case"source":Ye("error",n),d=c;break;case"img":case"image":case"link":Ye("error",n),Ye("load",n),d=c;break;case"details":Ye("toggle",n),d=c;break;case"input":pi(n,c),d=bn(n,c),Ye("invalid",n);break;case"option":d=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},d=le({},c,{value:void 0}),Ye("invalid",n);break;case"textarea":gi(n,c),d=Po(n,c),Ye("invalid",n);break;default:d=c}Oo(a,d),A=d;for(p in A)if(A.hasOwnProperty(p)){var b=A[p];p==="style"?Vo(n,b):p==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&bo(n,b)):p==="children"?typeof b=="string"?(a!=="textarea"||b!=="")&&$r(n,b):typeof b=="number"&&$r(n,""+b):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?b!=null&&p==="onScroll"&&Ye("scroll",n):b!=null&&H(n,p,b,w))}switch(a){case"input":ot(n),sl(n,c,!1);break;case"textarea":ot(n),No(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Ee(c.value));break;case"select":n.multiple=!!c.multiple,p=c.value,p!=null?pr(n,!!c.multiple,p,!1):c.defaultValue!=null&&pr(n,!!c.multiple,c.defaultValue,!0);break;default:typeof d.onClick=="function"&&(n.onclick=Dl)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Ut(r),null;case 6:if(n&&r.stateNode!=null)vm(n,r,n.memoizedProps,c);else{if(typeof c!="string"&&r.stateNode===null)throw Error(t(166));if(a=Gs(ha.current),Gs(rr.current),Ul(r)){if(c=r.stateNode,a=r.memoizedProps,c[nr]=r,(p=c.nodeValue!==a)&&(n=gn,n!==null))switch(n.tag){case 3:bl(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&bl(c.nodeValue,a,(n.mode&1)!==0)}p&&(r.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[nr]=r,r.stateNode=c}return Ut(r),null;case 13:if(Je(rt),c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(nt&&yn!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Ep(),Qi(),r.flags|=98560,p=!1;else if(p=Ul(r),c!==null&&c.dehydrated!==null){if(n===null){if(!p)throw Error(t(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[nr]=r}else Qi(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ut(r),p=!1}else $n!==null&&(Uh($n),$n=null),p=!0;if(!p)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=a,r):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(r.child.flags|=8192,(r.mode&1)!==0&&(n===null||(rt.current&1)!==0?Et===0&&(Et=3):$h())),r.updateQueue!==null&&(r.flags|=4),Ut(r),null);case 4:return Zi(),Rh(n,r),n===null&&sa(r.stateNode.containerInfo),Ut(r),null;case 10:return rh(r.type._context),Ut(r),null;case 17:return nn(r.type)&&Ll(),Ut(r),null;case 19:if(Je(rt),p=r.memoizedState,p===null)return Ut(r),null;if(c=(r.flags&128)!==0,w=p.rendering,w===null)if(c)ga(p,!1);else{if(Et!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(w=Wl(n),w!==null){for(r.flags|=128,ga(p,!1),c=w.updateQueue,c!==null&&(r.updateQueue=c,r.flags|=4),r.subtreeFlags=0,c=a,a=r.child;a!==null;)p=a,n=c,p.flags&=14680066,w=p.alternate,w===null?(p.childLanes=0,p.lanes=n,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=w.childLanes,p.lanes=w.lanes,p.child=w.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=w.memoizedProps,p.memoizedState=w.memoizedState,p.updateQueue=w.updateQueue,p.type=w.type,n=w.dependencies,p.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Xe(rt,rt.current&1|2),r.child}n=n.sibling}p.tail!==null&&Qe()>ro&&(r.flags|=128,c=!0,ga(p,!1),r.lanes=4194304)}else{if(!c)if(n=Wl(w),n!==null){if(r.flags|=128,c=!0,a=n.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),ga(p,!0),p.tail===null&&p.tailMode==="hidden"&&!w.alternate&&!nt)return Ut(r),null}else 2*Qe()-p.renderingStartTime>ro&&a!==1073741824&&(r.flags|=128,c=!0,ga(p,!1),r.lanes=4194304);p.isBackwards?(w.sibling=r.child,r.child=w):(a=p.last,a!==null?a.sibling=w:r.child=w,p.last=w)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=Qe(),r.sibling=null,a=rt.current,Xe(rt,c?a&1|2:a&1),r):(Ut(r),null);case 22:case 23:return Bh(),c=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(r.flags|=8192),c&&(r.mode&1)!==0?(vn&1073741824)!==0&&(Ut(r),r.subtreeFlags&6&&(r.flags|=8192)):Ut(r),null;case 24:return null;case 25:return null}throw Error(t(156,r.tag))}function g0(n,r){switch(Yc(r),r.tag){case 1:return nn(r.type)&&Ll(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Zi(),Je(tn),Je(jt),ch(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 5:return lh(r),null;case 13:if(Je(rt),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(t(340));Qi()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return Je(rt),null;case 4:return Zi(),null;case 10:return rh(r.type._context),null;case 22:case 23:return Bh(),null;case 24:return null;default:return null}}var tu=!1,zt=!1,y0=typeof WeakSet=="function"?WeakSet:Set,fe=null;function to(n,r){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){at(n,r,c)}else a.current=null}function Ph(n,r,a){try{a()}catch(c){at(n,r,c)}}var _m=!1;function v0(n,r){if(Bc=Yr,n=Yf(),Vc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var d=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var w=0,A=-1,b=-1,z=0,Y=0,ee=n,X=null;t:for(;;){for(var ce;ee!==a||d!==0&&ee.nodeType!==3||(A=w+d),ee!==p||c!==0&&ee.nodeType!==3||(b=w+c),ee.nodeType===3&&(w+=ee.nodeValue.length),(ce=ee.firstChild)!==null;)X=ee,ee=ce;for(;;){if(ee===n)break t;if(X===a&&++z===d&&(A=w),X===p&&++Y===c&&(b=w),(ce=ee.nextSibling)!==null)break;ee=X,X=ee.parentNode}ee=ce}a=A===-1||b===-1?null:{start:A,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for($c={focusedElem:n,selectionRange:a},Yr=!1,fe=r;fe!==null;)if(r=fe,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,fe=n;else for(;fe!==null;){r=fe;try{var ge=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var ve=ge.memoizedProps,ct=ge.memoizedState,M=r.stateNode,V=M.getSnapshotBeforeUpdate(r.elementType===r.type?ve:Hn(r.type,ve),ct);M.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var F=r.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ie){at(r,r.return,ie)}if(n=r.sibling,n!==null){n.return=r.return,fe=n;break}fe=r.return}return ge=_m,_m=!1,ge}function ya(n,r,a){var c=r.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var d=c=c.next;do{if((d.tag&n)===n){var p=d.destroy;d.destroy=void 0,p!==void 0&&Ph(r,a,p)}d=d.next}while(d!==c)}}function nu(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==r)}}function Nh(n){var r=n.ref;if(r!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof r=="function"?r(n):r.current=n}}function wm(n){var r=n.alternate;r!==null&&(n.alternate=null,wm(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[nr],delete r[oa],delete r[Kc],delete r[e0],delete r[t0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Em(n){return n.tag===5||n.tag===3||n.tag===4}function Tm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Em(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function bh(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(n,r):a.insertBefore(n,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(n,a)):(r=a,r.appendChild(n)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Dl));else if(c!==4&&(n=n.child,n!==null))for(bh(n,r,a),n=n.sibling;n!==null;)bh(n,r,a),n=n.sibling}function Dh(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(Dh(n,r,a),n=n.sibling;n!==null;)Dh(n,r,a),n=n.sibling}var Nt=null,qn=!1;function os(n,r,a){for(a=a.child;a!==null;)Im(n,r,a),a=a.sibling}function Im(n,r,a){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(Os,a)}catch{}switch(a.tag){case 5:zt||to(a,r);case 6:var c=Nt,d=qn;Nt=null,os(n,r,a),Nt=c,qn=d,Nt!==null&&(qn?(n=Nt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Nt.removeChild(a.stateNode));break;case 18:Nt!==null&&(qn?(n=Nt,a=a.stateNode,n.nodeType===8?Wc(n.parentNode,a):n.nodeType===1&&Wc(n,a),Un(n)):Wc(Nt,a.stateNode));break;case 4:c=Nt,d=qn,Nt=a.stateNode.containerInfo,qn=!0,os(n,r,a),Nt=c,qn=d;break;case 0:case 11:case 14:case 15:if(!zt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){d=c=c.next;do{var p=d,w=p.destroy;p=p.tag,w!==void 0&&((p&2)!==0||(p&4)!==0)&&Ph(a,r,w),d=d.next}while(d!==c)}os(n,r,a);break;case 1:if(!zt&&(to(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(A){at(a,r,A)}os(n,r,a);break;case 21:os(n,r,a);break;case 22:a.mode&1?(zt=(c=zt)||a.memoizedState!==null,os(n,r,a),zt=c):os(n,r,a);break;default:os(n,r,a)}}function xm(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new y0),r.forEach(function(c){var d=A0.bind(null,n,c);a.has(c)||(a.add(c),c.then(d,d))})}}function Wn(n,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var d=a[c];try{var p=n,w=r,A=w;e:for(;A!==null;){switch(A.tag){case 5:Nt=A.stateNode,qn=!1;break e;case 3:Nt=A.stateNode.containerInfo,qn=!0;break e;case 4:Nt=A.stateNode.containerInfo,qn=!0;break e}A=A.return}if(Nt===null)throw Error(t(160));Im(p,w,d),Nt=null,qn=!1;var b=d.alternate;b!==null&&(b.return=null),d.return=null}catch(z){at(d,r,z)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Sm(r,n),r=r.sibling}function Sm(n,r){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Wn(r,n),ir(n),c&4){try{ya(3,n,n.return),nu(3,n)}catch(ve){at(n,n.return,ve)}try{ya(5,n,n.return)}catch(ve){at(n,n.return,ve)}}break;case 1:Wn(r,n),ir(n),c&512&&a!==null&&to(a,a.return);break;case 5:if(Wn(r,n),ir(n),c&512&&a!==null&&to(a,a.return),n.flags&32){var d=n.stateNode;try{$r(d,"")}catch(ve){at(n,n.return,ve)}}if(c&4&&(d=n.stateNode,d!=null)){var p=n.memoizedProps,w=a!==null?a.memoizedProps:p,A=n.type,b=n.updateQueue;if(n.updateQueue=null,b!==null)try{A==="input"&&p.type==="radio"&&p.name!=null&&ko(d,p),Mo(A,w);var z=Mo(A,p);for(w=0;w<b.length;w+=2){var Y=b[w],ee=b[w+1];Y==="style"?Vo(d,ee):Y==="dangerouslySetInnerHTML"?bo(d,ee):Y==="children"?$r(d,ee):H(d,Y,ee,z)}switch(A){case"input":Ro(d,p);break;case"textarea":yi(d,p);break;case"select":var X=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!p.multiple;var ce=p.value;ce!=null?pr(d,!!p.multiple,ce,!1):X!==!!p.multiple&&(p.defaultValue!=null?pr(d,!!p.multiple,p.defaultValue,!0):pr(d,!!p.multiple,p.multiple?[]:"",!1))}d[oa]=p}catch(ve){at(n,n.return,ve)}}break;case 6:if(Wn(r,n),ir(n),c&4){if(n.stateNode===null)throw Error(t(162));d=n.stateNode,p=n.memoizedProps;try{d.nodeValue=p}catch(ve){at(n,n.return,ve)}}break;case 3:if(Wn(r,n),ir(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Un(r.containerInfo)}catch(ve){at(n,n.return,ve)}break;case 4:Wn(r,n),ir(n);break;case 13:Wn(r,n),ir(n),d=n.child,d.flags&8192&&(p=d.memoizedState!==null,d.stateNode.isHidden=p,!p||d.alternate!==null&&d.alternate.memoizedState!==null||(Oh=Qe())),c&4&&xm(n);break;case 22:if(Y=a!==null&&a.memoizedState!==null,n.mode&1?(zt=(z=zt)||Y,Wn(r,n),zt=z):Wn(r,n),ir(n),c&8192){if(z=n.memoizedState!==null,(n.stateNode.isHidden=z)&&!Y&&(n.mode&1)!==0)for(fe=n,Y=n.child;Y!==null;){for(ee=fe=Y;fe!==null;){switch(X=fe,ce=X.child,X.tag){case 0:case 11:case 14:case 15:ya(4,X,X.return);break;case 1:to(X,X.return);var ge=X.stateNode;if(typeof ge.componentWillUnmount=="function"){c=X,a=X.return;try{r=c,ge.props=r.memoizedProps,ge.state=r.memoizedState,ge.componentWillUnmount()}catch(ve){at(c,a,ve)}}break;case 5:to(X,X.return);break;case 22:if(X.memoizedState!==null){km(ee);continue}}ce!==null?(ce.return=X,fe=ce):km(ee)}Y=Y.sibling}e:for(Y=null,ee=n;;){if(ee.tag===5){if(Y===null){Y=ee;try{d=ee.stateNode,z?(p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(A=ee.stateNode,b=ee.memoizedProps.style,w=b!=null&&b.hasOwnProperty("display")?b.display:null,A.style.display=Do("display",w))}catch(ve){at(n,n.return,ve)}}}else if(ee.tag===6){if(Y===null)try{ee.stateNode.nodeValue=z?"":ee.memoizedProps}catch(ve){at(n,n.return,ve)}}else if((ee.tag!==22&&ee.tag!==23||ee.memoizedState===null||ee===n)&&ee.child!==null){ee.child.return=ee,ee=ee.child;continue}if(ee===n)break e;for(;ee.sibling===null;){if(ee.return===null||ee.return===n)break e;Y===ee&&(Y=null),ee=ee.return}Y===ee&&(Y=null),ee.sibling.return=ee.return,ee=ee.sibling}}break;case 19:Wn(r,n),ir(n),c&4&&xm(n);break;case 21:break;default:Wn(r,n),ir(n)}}function ir(n){var r=n.flags;if(r&2){try{e:{for(var a=n.return;a!==null;){if(Em(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var d=c.stateNode;c.flags&32&&($r(d,""),c.flags&=-33);var p=Tm(n);Dh(n,p,d);break;case 3:case 4:var w=c.stateNode.containerInfo,A=Tm(n);bh(n,A,w);break;default:throw Error(t(161))}}catch(b){at(n,n.return,b)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function _0(n,r,a){fe=n,Cm(n)}function Cm(n,r,a){for(var c=(n.mode&1)!==0;fe!==null;){var d=fe,p=d.child;if(d.tag===22&&c){var w=d.memoizedState!==null||tu;if(!w){var A=d.alternate,b=A!==null&&A.memoizedState!==null||zt;A=tu;var z=zt;if(tu=w,(zt=b)&&!z)for(fe=d;fe!==null;)w=fe,b=w.child,w.tag===22&&w.memoizedState!==null?Rm(d):b!==null?(b.return=w,fe=b):Rm(d);for(;p!==null;)fe=p,Cm(p),p=p.sibling;fe=d,tu=A,zt=z}Am(n)}else(d.subtreeFlags&8772)!==0&&p!==null?(p.return=d,fe=p):Am(n)}}function Am(n){for(;fe!==null;){var r=fe;if((r.flags&8772)!==0){var a=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:zt||nu(5,r);break;case 1:var c=r.stateNode;if(r.flags&4&&!zt)if(a===null)c.componentDidMount();else{var d=r.elementType===r.type?a.memoizedProps:Hn(r.type,a.memoizedProps);c.componentDidUpdate(d,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&kp(r,p,c);break;case 3:var w=r.updateQueue;if(w!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}kp(r,w,a)}break;case 5:var A=r.stateNode;if(a===null&&r.flags&4){a=A;var b=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&a.focus();break;case"img":b.src&&(a.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var z=r.alternate;if(z!==null){var Y=z.memoizedState;if(Y!==null){var ee=Y.dehydrated;ee!==null&&Un(ee)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}zt||r.flags&512&&Nh(r)}catch(X){at(r,r.return,X)}}if(r===n){fe=null;break}if(a=r.sibling,a!==null){a.return=r.return,fe=a;break}fe=r.return}}function km(n){for(;fe!==null;){var r=fe;if(r===n){fe=null;break}var a=r.sibling;if(a!==null){a.return=r.return,fe=a;break}fe=r.return}}function Rm(n){for(;fe!==null;){var r=fe;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{nu(4,r)}catch(b){at(r,a,b)}break;case 1:var c=r.stateNode;if(typeof c.componentDidMount=="function"){var d=r.return;try{c.componentDidMount()}catch(b){at(r,d,b)}}var p=r.return;try{Nh(r)}catch(b){at(r,p,b)}break;case 5:var w=r.return;try{Nh(r)}catch(b){at(r,w,b)}}}catch(b){at(r,r.return,b)}if(r===n){fe=null;break}var A=r.sibling;if(A!==null){A.return=r.return,fe=A;break}fe=r.return}}var w0=Math.ceil,ru=se.ReactCurrentDispatcher,Vh=se.ReactCurrentOwner,Rn=se.ReactCurrentBatchConfig,ze=0,St=null,pt=null,bt=0,vn=0,no=ts(0),Et=0,va=null,Xs=0,su=0,Lh=0,_a=null,sn=null,Oh=0,ro=1/0,Rr=null,iu=!1,Mh=null,as=null,ou=!1,ls=null,au=0,wa=0,jh=null,lu=-1,uu=0;function Yt(){return(ze&6)!==0?Qe():lu!==-1?lu:lu=Qe()}function us(n){return(n.mode&1)===0?1:(ze&2)!==0&&bt!==0?bt&-bt:r0.transition!==null?(uu===0&&(uu=js()),uu):(n=Me,n!==0||(n=window.event,n=n===void 0?16:Go(n.type)),n)}function Kn(n,r,a,c){if(50<wa)throw wa=0,jh=null,Error(t(185));Kr(n,a,c),((ze&2)===0||n!==St)&&(n===St&&((ze&2)===0&&(su|=a),Et===4&&cs(n,bt)),on(n,c),a===1&&ze===0&&(r.mode&1)===0&&(ro=Qe()+500,Ml&&rs()))}function on(n,r){var a=n.callbackNode;yr(n,r);var c=Ms(n,n===St?bt:0);if(c===0)a!==null&&$o(a),n.callbackNode=null,n.callbackPriority=0;else if(r=c&-c,n.callbackPriority!==r){if(a!=null&&$o(a),r===1)n.tag===0?n0(Nm.bind(null,n)):gp(Nm.bind(null,n)),J_(function(){(ze&6)===0&&rs()}),a=null;else{switch(Qr(c)){case 1:a=Ls;break;case 4:a=Hr;break;case 16:a=Tn;break;case 536870912:a=ul;break;default:a=Tn}a=Fm(a,Pm.bind(null,n))}n.callbackPriority=r,n.callbackNode=a}}function Pm(n,r){if(lu=-1,uu=0,(ze&6)!==0)throw Error(t(327));var a=n.callbackNode;if(so()&&n.callbackNode!==a)return null;var c=Ms(n,n===St?bt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||r)r=cu(n,c);else{r=c;var d=ze;ze|=2;var p=Dm();(St!==n||bt!==r)&&(Rr=null,ro=Qe()+500,Js(n,r));do try{I0();break}catch(A){bm(n,A)}while(!0);nh(),ru.current=p,ze=d,pt!==null?r=0:(St=null,bt=0,r=Et)}if(r!==0){if(r===2&&(d=fn(n),d!==0&&(c=d,r=Fh(n,d))),r===1)throw a=va,Js(n,0),cs(n,c),on(n,Qe()),a;if(r===6)cs(n,c);else{if(d=n.current.alternate,(c&30)===0&&!E0(d)&&(r=cu(n,c),r===2&&(p=fn(n),p!==0&&(c=p,r=Fh(n,p))),r===1))throw a=va,Js(n,0),cs(n,c),on(n,Qe()),a;switch(n.finishedWork=d,n.finishedLanes=c,r){case 0:case 1:throw Error(t(345));case 2:Zs(n,sn,Rr);break;case 3:if(cs(n,c),(c&130023424)===c&&(r=Oh+500-Qe(),10<r)){if(Ms(n,0)!==0)break;if(d=n.suspendedLanes,(d&c)!==c){Yt(),n.pingedLanes|=n.suspendedLanes&d;break}n.timeoutHandle=qc(Zs.bind(null,n,sn,Rr),r);break}Zs(n,sn,Rr);break;case 4:if(cs(n,c),(c&4194240)===c)break;for(r=n.eventTimes,d=-1;0<c;){var w=31-Gt(c);p=1<<w,w=r[w],w>d&&(d=w),c&=~p}if(c=d,c=Qe()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*w0(c/1960))-c,10<c){n.timeoutHandle=qc(Zs.bind(null,n,sn,Rr),c);break}Zs(n,sn,Rr);break;case 5:Zs(n,sn,Rr);break;default:throw Error(t(329))}}}return on(n,Qe()),n.callbackNode===a?Pm.bind(null,n):null}function Fh(n,r){var a=_a;return n.current.memoizedState.isDehydrated&&(Js(n,r).flags|=256),n=cu(n,r),n!==2&&(r=sn,sn=a,r!==null&&Uh(r)),n}function Uh(n){sn===null?sn=n:sn.push.apply(sn,n)}function E0(n){for(var r=n;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var d=a[c],p=d.getSnapshot;d=d.value;try{if(!Bn(p(),d))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function cs(n,r){for(r&=~Lh,r&=~su,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var a=31-Gt(r),c=1<<a;n[a]=-1,r&=~c}}function Nm(n){if((ze&6)!==0)throw Error(t(327));so();var r=Ms(n,0);if((r&1)===0)return on(n,Qe()),null;var a=cu(n,r);if(n.tag!==0&&a===2){var c=fn(n);c!==0&&(r=c,a=Fh(n,c))}if(a===1)throw a=va,Js(n,0),cs(n,r),on(n,Qe()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,Zs(n,sn,Rr),on(n,Qe()),null}function zh(n,r){var a=ze;ze|=1;try{return n(r)}finally{ze=a,ze===0&&(ro=Qe()+500,Ml&&rs())}}function Ys(n){ls!==null&&ls.tag===0&&(ze&6)===0&&so();var r=ze;ze|=1;var a=Rn.transition,c=Me;try{if(Rn.transition=null,Me=1,n)return n()}finally{Me=c,Rn.transition=a,ze=r,(ze&6)===0&&rs()}}function Bh(){vn=no.current,Je(no)}function Js(n,r){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Y_(a)),pt!==null)for(a=pt.return;a!==null;){var c=a;switch(Yc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Ll();break;case 3:Zi(),Je(tn),Je(jt),ch();break;case 5:lh(c);break;case 4:Zi();break;case 13:Je(rt);break;case 19:Je(rt);break;case 10:rh(c.type._context);break;case 22:case 23:Bh()}a=a.return}if(St=n,pt=n=hs(n.current,null),bt=vn=r,Et=0,va=null,Lh=su=Xs=0,sn=_a=null,Ks!==null){for(r=0;r<Ks.length;r++)if(a=Ks[r],c=a.interleaved,c!==null){a.interleaved=null;var d=c.next,p=a.pending;if(p!==null){var w=p.next;p.next=d,c.next=w}a.pending=c}Ks=null}return n}function bm(n,r){do{var a=pt;try{if(nh(),Kl.current=Yl,Gl){for(var c=st.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}Gl=!1}if(Qs=0,xt=wt=st=null,da=!1,fa=0,Vh.current=null,a===null||a.return===null){Et=1,va=r,pt=null;break}e:{var p=n,w=a.return,A=a,b=r;if(r=bt,A.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var z=b,Y=A,ee=Y.tag;if((Y.mode&1)===0&&(ee===0||ee===11||ee===15)){var X=Y.alternate;X?(Y.updateQueue=X.updateQueue,Y.memoizedState=X.memoizedState,Y.lanes=X.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var ce=rm(w);if(ce!==null){ce.flags&=-257,sm(ce,w,A,p,r),ce.mode&1&&nm(p,z,r),r=ce,b=z;var ge=r.updateQueue;if(ge===null){var ve=new Set;ve.add(b),r.updateQueue=ve}else ge.add(b);break e}else{if((r&1)===0){nm(p,z,r),$h();break e}b=Error(t(426))}}else if(nt&&A.mode&1){var ct=rm(w);if(ct!==null){(ct.flags&65536)===0&&(ct.flags|=256),sm(ct,w,A,p,r),eh(eo(b,A));break e}}p=b=eo(b,A),Et!==4&&(Et=2),_a===null?_a=[p]:_a.push(p),p=w;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var M=em(p,b,r);Ap(p,M);break e;case 1:A=b;var V=p.type,F=p.stateNode;if((p.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(as===null||!as.has(F)))){p.flags|=65536,r&=-r,p.lanes|=r;var ie=tm(p,A,r);Ap(p,ie);break e}}p=p.return}while(p!==null)}Lm(a)}catch(Te){r=Te,pt===a&&a!==null&&(pt=a=a.return);continue}break}while(!0)}function Dm(){var n=ru.current;return ru.current=Yl,n===null?Yl:n}function $h(){(Et===0||Et===3||Et===2)&&(Et=4),St===null||(Xs&268435455)===0&&(su&268435455)===0||cs(St,bt)}function cu(n,r){var a=ze;ze|=2;var c=Dm();(St!==n||bt!==r)&&(Rr=null,Js(n,r));do try{T0();break}catch(d){bm(n,d)}while(!0);if(nh(),ze=a,ru.current=c,pt!==null)throw Error(t(261));return St=null,bt=0,Et}function T0(){for(;pt!==null;)Vm(pt)}function I0(){for(;pt!==null&&!al();)Vm(pt)}function Vm(n){var r=jm(n.alternate,n,vn);n.memoizedProps=n.pendingProps,r===null?Lm(n):pt=r,Vh.current=null}function Lm(n){var r=n;do{var a=r.alternate;if(n=r.return,(r.flags&32768)===0){if(a=m0(a,r,vn),a!==null){pt=a;return}}else{if(a=g0(a,r),a!==null){a.flags&=32767,pt=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Et=6,pt=null;return}}if(r=r.sibling,r!==null){pt=r;return}pt=r=n}while(r!==null);Et===0&&(Et=5)}function Zs(n,r,a){var c=Me,d=Rn.transition;try{Rn.transition=null,Me=1,x0(n,r,a,c)}finally{Rn.transition=d,Me=c}return null}function x0(n,r,a,c){do so();while(ls!==null);if((ze&6)!==0)throw Error(t(327));a=n.finishedWork;var d=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var p=a.lanes|a.childLanes;if(Ge(n,p),n===St&&(pt=St=null,bt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||ou||(ou=!0,Fm(Tn,function(){return so(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=Rn.transition,Rn.transition=null;var w=Me;Me=1;var A=ze;ze|=4,Vh.current=null,v0(n,a),Sm(a,n),H_($c),Yr=!!Bc,$c=Bc=null,n.current=a,_0(a),Cc(),ze=A,Me=w,Rn.transition=p}else n.current=a;if(ou&&(ou=!1,ls=n,au=d),p=n.pendingLanes,p===0&&(as=null),cl(a.stateNode),on(n,Qe()),r!==null)for(c=n.onRecoverableError,a=0;a<r.length;a++)d=r[a],c(d.value,{componentStack:d.stack,digest:d.digest});if(iu)throw iu=!1,n=Mh,Mh=null,n;return(au&1)!==0&&n.tag!==0&&so(),p=n.pendingLanes,(p&1)!==0?n===jh?wa++:(wa=0,jh=n):wa=0,rs(),null}function so(){if(ls!==null){var n=Qr(au),r=Rn.transition,a=Me;try{if(Rn.transition=null,Me=16>n?16:n,ls===null)var c=!1;else{if(n=ls,ls=null,au=0,(ze&6)!==0)throw Error(t(331));var d=ze;for(ze|=4,fe=n.current;fe!==null;){var p=fe,w=p.child;if((fe.flags&16)!==0){var A=p.deletions;if(A!==null){for(var b=0;b<A.length;b++){var z=A[b];for(fe=z;fe!==null;){var Y=fe;switch(Y.tag){case 0:case 11:case 15:ya(8,Y,p)}var ee=Y.child;if(ee!==null)ee.return=Y,fe=ee;else for(;fe!==null;){Y=fe;var X=Y.sibling,ce=Y.return;if(wm(Y),Y===z){fe=null;break}if(X!==null){X.return=ce,fe=X;break}fe=ce}}}var ge=p.alternate;if(ge!==null){var ve=ge.child;if(ve!==null){ge.child=null;do{var ct=ve.sibling;ve.sibling=null,ve=ct}while(ve!==null)}}fe=p}}if((p.subtreeFlags&2064)!==0&&w!==null)w.return=p,fe=w;else e:for(;fe!==null;){if(p=fe,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:ya(9,p,p.return)}var M=p.sibling;if(M!==null){M.return=p.return,fe=M;break e}fe=p.return}}var V=n.current;for(fe=V;fe!==null;){w=fe;var F=w.child;if((w.subtreeFlags&2064)!==0&&F!==null)F.return=w,fe=F;else e:for(w=V;fe!==null;){if(A=fe,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:nu(9,A)}}catch(Te){at(A,A.return,Te)}if(A===w){fe=null;break e}var ie=A.sibling;if(ie!==null){ie.return=A.return,fe=ie;break e}fe=A.return}}if(ze=d,rs(),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(Os,n)}catch{}c=!0}return c}finally{Me=a,Rn.transition=r}}return!1}function Om(n,r,a){r=eo(a,r),r=em(n,r,1),n=is(n,r,1),r=Yt(),n!==null&&(Kr(n,1,r),on(n,r))}function at(n,r,a){if(n.tag===3)Om(n,n,a);else for(;r!==null;){if(r.tag===3){Om(r,n,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(as===null||!as.has(c))){n=eo(a,n),n=tm(r,n,1),r=is(r,n,1),n=Yt(),r!==null&&(Kr(r,1,n),on(r,n));break}}r=r.return}}function S0(n,r,a){var c=n.pingCache;c!==null&&c.delete(r),r=Yt(),n.pingedLanes|=n.suspendedLanes&a,St===n&&(bt&a)===a&&(Et===4||Et===3&&(bt&130023424)===bt&&500>Qe()-Oh?Js(n,0):Lh|=a),on(n,r)}function Mm(n,r){r===0&&((n.mode&1)===0?r=1:(r=Ai,Ai<<=1,(Ai&130023424)===0&&(Ai=4194304)));var a=Yt();n=Cr(n,r),n!==null&&(Kr(n,r,a),on(n,a))}function C0(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),Mm(n,a)}function A0(n,r){var a=0;switch(n.tag){case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(r),Mm(n,a)}var jm;jm=function(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps||tn.current)rn=!0;else{if((n.lanes&a)===0&&(r.flags&128)===0)return rn=!1,p0(n,r,a);rn=(n.flags&131072)!==0}else rn=!1,nt&&(r.flags&1048576)!==0&&yp(r,Fl,r.index);switch(r.lanes=0,r.tag){case 2:var c=r.type;eu(n,r),n=r.pendingProps;var d=Wi(r,jt.current);Ji(r,a),d=fh(null,r,c,n,d,a);var p=ph();return r.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,nn(c)?(p=!0,Ol(r)):p=!1,r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,oh(r),d.updater=Jl,r.stateNode=d,d._reactInternals=r,wh(r,c,n,a),r=xh(null,r,c,!0,p,a)):(r.tag=0,nt&&p&&Xc(r),Xt(null,r,d,a),r=r.child),r;case 16:c=r.elementType;e:{switch(eu(n,r),n=r.pendingProps,d=c._init,c=d(c._payload),r.type=c,d=r.tag=R0(c),n=Hn(c,n),d){case 0:r=Ih(null,r,c,n,a);break e;case 1:r=cm(null,r,c,n,a);break e;case 11:r=im(null,r,c,n,a);break e;case 14:r=om(null,r,c,Hn(c.type,n),a);break e}throw Error(t(306,c,""))}return r;case 0:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Hn(c,d),Ih(n,r,c,d,a);case 1:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Hn(c,d),cm(n,r,c,d,a);case 3:e:{if(hm(r),n===null)throw Error(t(387));c=r.pendingProps,p=r.memoizedState,d=p.element,Cp(n,r),ql(r,c,null,a);var w=r.memoizedState;if(c=w.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){d=eo(Error(t(423)),r),r=dm(n,r,c,a,d);break e}else if(c!==d){d=eo(Error(t(424)),r),r=dm(n,r,c,a,d);break e}else for(yn=es(r.stateNode.containerInfo.firstChild),gn=r,nt=!0,$n=null,a=xp(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Qi(),c===d){r=kr(n,r,a);break e}Xt(n,r,c,a)}r=r.child}return r;case 5:return Rp(r),n===null&&Zc(r),c=r.type,d=r.pendingProps,p=n!==null?n.memoizedProps:null,w=d.children,Hc(c,d)?w=null:p!==null&&Hc(c,p)&&(r.flags|=32),um(n,r),Xt(n,r,w,a),r.child;case 6:return n===null&&Zc(r),null;case 13:return fm(n,r,a);case 4:return ah(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=Xi(r,null,c,a):Xt(n,r,c,a),r.child;case 11:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Hn(c,d),im(n,r,c,d,a);case 7:return Xt(n,r,r.pendingProps,a),r.child;case 8:return Xt(n,r,r.pendingProps.children,a),r.child;case 12:return Xt(n,r,r.pendingProps.children,a),r.child;case 10:e:{if(c=r.type._context,d=r.pendingProps,p=r.memoizedProps,w=d.value,Xe(Bl,c._currentValue),c._currentValue=w,p!==null)if(Bn(p.value,w)){if(p.children===d.children&&!tn.current){r=kr(n,r,a);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var A=p.dependencies;if(A!==null){w=p.child;for(var b=A.firstContext;b!==null;){if(b.context===c){if(p.tag===1){b=Ar(-1,a&-a),b.tag=2;var z=p.updateQueue;if(z!==null){z=z.shared;var Y=z.pending;Y===null?b.next=b:(b.next=Y.next,Y.next=b),z.pending=b}}p.lanes|=a,b=p.alternate,b!==null&&(b.lanes|=a),sh(p.return,a,r),A.lanes|=a;break}b=b.next}}else if(p.tag===10)w=p.type===r.type?null:p.child;else if(p.tag===18){if(w=p.return,w===null)throw Error(t(341));w.lanes|=a,A=w.alternate,A!==null&&(A.lanes|=a),sh(w,a,r),w=p.sibling}else w=p.child;if(w!==null)w.return=p;else for(w=p;w!==null;){if(w===r){w=null;break}if(p=w.sibling,p!==null){p.return=w.return,w=p;break}w=w.return}p=w}Xt(n,r,d.children,a),r=r.child}return r;case 9:return d=r.type,c=r.pendingProps.children,Ji(r,a),d=An(d),c=c(d),r.flags|=1,Xt(n,r,c,a),r.child;case 14:return c=r.type,d=Hn(c,r.pendingProps),d=Hn(c.type,d),om(n,r,c,d,a);case 15:return am(n,r,r.type,r.pendingProps,a);case 17:return c=r.type,d=r.pendingProps,d=r.elementType===c?d:Hn(c,d),eu(n,r),r.tag=1,nn(c)?(n=!0,Ol(r)):n=!1,Ji(r,a),Jp(r,c,d),wh(r,c,d,a),xh(null,r,c,!0,n,a);case 19:return mm(n,r,a);case 22:return lm(n,r,a)}throw Error(t(156,r.tag))};function Fm(n,r){return Si(n,r)}function k0(n,r,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(n,r,a,c){return new k0(n,r,a,c)}function Hh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function R0(n){if(typeof n=="function")return Hh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===k)return 11;if(n===he)return 14}return 2}function hs(n,r){var a=n.alternate;return a===null?(a=Pn(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function hu(n,r,a,c,d,p){var w=2;if(c=n,typeof n=="function")Hh(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case P:return ei(a.children,d,p,r);case I:w=8,d|=8;break;case S:return n=Pn(12,a,r,d|2),n.elementType=S,n.lanes=p,n;case x:return n=Pn(13,a,r,d),n.elementType=x,n.lanes=p,n;case Q:return n=Pn(19,a,r,d),n.elementType=Q,n.lanes=p,n;case ye:return du(a,d,p,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case N:w=10;break e;case C:w=9;break e;case k:w=11;break e;case he:w=14;break e;case Ie:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return r=Pn(w,a,r,d),r.elementType=n,r.type=c,r.lanes=p,r}function ei(n,r,a,c){return n=Pn(7,n,c,r),n.lanes=a,n}function du(n,r,a,c){return n=Pn(22,n,c,r),n.elementType=ye,n.lanes=a,n.stateNode={isHidden:!1},n}function qh(n,r,a){return n=Pn(6,n,null,r),n.lanes=a,n}function Wh(n,r,a){return r=Pn(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function P0(n,r,a,c,d){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wr(0),this.expirationTimes=Wr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wr(0),this.identifierPrefix=c,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function Kh(n,r,a,c,d,p,w,A,b){return n=new P0(n,r,a,A,b),r===1?(r=1,p===!0&&(r|=8)):r=0,p=Pn(3,null,null,r),n.current=p,p.stateNode=n,p.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},oh(p),n}function N0(n,r,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oe,key:c==null?null:""+c,children:n,containerInfo:r,implementation:a}}function Um(n){if(!n)return ns;n=n._reactInternals;e:{if(Ln(n)!==n||n.tag!==1)throw Error(t(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(nn(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(nn(a))return pp(n,a,r)}return r}function zm(n,r,a,c,d,p,w,A,b){return n=Kh(a,c,!0,n,d,p,w,A,b),n.context=Um(null),a=n.current,c=Yt(),d=us(a),p=Ar(c,d),p.callback=r??null,is(a,p,d),n.current.lanes=d,Kr(n,d,c),on(n,c),n}function fu(n,r,a,c){var d=r.current,p=Yt(),w=us(d);return a=Um(a),r.context===null?r.context=a:r.pendingContext=a,r=Ar(p,w),r.payload={element:n},c=c===void 0?null:c,c!==null&&(r.callback=c),n=is(d,r,w),n!==null&&(Kn(n,d,w,p),Hl(n,d,w)),w}function pu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Bm(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function Gh(n,r){Bm(n,r),(n=n.alternate)&&Bm(n,r)}function b0(){return null}var $m=typeof reportError=="function"?reportError:function(n){console.error(n)};function Qh(n){this._internalRoot=n}mu.prototype.render=Qh.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(t(409));fu(n,r,null,null)},mu.prototype.unmount=Qh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;Ys(function(){fu(null,n,null,null)}),r[Tr]=null}};function mu(n){this._internalRoot=n}mu.prototype.unstable_scheduleHydration=function(n){if(n){var r=ml();n={blockedOn:null,target:n,priority:r};for(var a=0;a<Jn.length&&r!==0&&r<Jn[a].priority;a++);Jn.splice(a,0,n),a===0&&vl(n)}};function Xh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function gu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Hm(){}function D0(n,r,a,c,d){if(d){if(typeof c=="function"){var p=c;c=function(){var z=pu(w);p.call(z)}}var w=zm(r,c,n,0,null,!1,!1,"",Hm);return n._reactRootContainer=w,n[Tr]=w.current,sa(n.nodeType===8?n.parentNode:n),Ys(),w}for(;d=n.lastChild;)n.removeChild(d);if(typeof c=="function"){var A=c;c=function(){var z=pu(b);A.call(z)}}var b=Kh(n,0,!1,null,null,!1,!1,"",Hm);return n._reactRootContainer=b,n[Tr]=b.current,sa(n.nodeType===8?n.parentNode:n),Ys(function(){fu(r,b,a,c)}),b}function yu(n,r,a,c,d){var p=a._reactRootContainer;if(p){var w=p;if(typeof d=="function"){var A=d;d=function(){var b=pu(w);A.call(b)}}fu(r,w,n,d)}else w=D0(a,r,n,d,c);return pu(w)}fl=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var a=qr(r.pendingLanes);a!==0&&(Gr(r,a|1),on(r,Qe()),(ze&6)===0&&(ro=Qe()+500,rs()))}break;case 13:Ys(function(){var c=Cr(n,1);if(c!==null){var d=Yt();Kn(c,n,1,d)}}),Gh(n,1)}},ki=function(n){if(n.tag===13){var r=Cr(n,134217728);if(r!==null){var a=Yt();Kn(r,n,134217728,a)}Gh(n,134217728)}},pl=function(n){if(n.tag===13){var r=us(n),a=Cr(n,r);if(a!==null){var c=Yt();Kn(a,n,r,c)}Gh(n,r)}},ml=function(){return Me},gl=function(n,r){var a=Me;try{return Me=n,r()}finally{Me=a}},_i=function(n,r,a){switch(r){case"input":if(Ro(n,a),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==n&&c.form===n.form){var d=Vl(c);if(!d)throw Error(t(90));kt(c),Ro(c,d)}}}break;case"textarea":yi(n,a);break;case"select":r=a.value,r!=null&&pr(n,!!a.multiple,r,!1)}},Ns=zh,Fo=Ys;var V0={usingClientEntryPoint:!1,Events:[aa,Hi,Vl,Xn,jo,zh]},Ea={findFiberByHostInstance:$s,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},L0={bundleType:Ea.bundleType,version:Ea.version,rendererPackageName:Ea.rendererPackageName,rendererConfig:Ea.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:se.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Bo(n),n===null?null:n.stateNode},findFiberByHostInstance:Ea.findFiberByHostInstance||b0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vu.isDisabled&&vu.supportsFiber)try{Os=vu.inject(L0),dn=vu}catch{}}return an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V0,an.createPortal=function(n,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xh(r))throw Error(t(200));return N0(n,r,null,a)},an.createRoot=function(n,r){if(!Xh(n))throw Error(t(299));var a=!1,c="",d=$m;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(d=r.onRecoverableError)),r=Kh(n,1,!1,null,null,a,!1,c,d),n[Tr]=r.current,sa(n.nodeType===8?n.parentNode:n),new Qh(r)},an.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Bo(r),n=n===null?null:n.stateNode,n},an.flushSync=function(n){return Ys(n)},an.hydrate=function(n,r,a){if(!gu(r))throw Error(t(200));return yu(null,n,r,!0,a)},an.hydrateRoot=function(n,r,a){if(!Xh(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,d=!1,p="",w=$m;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),r=zm(r,null,n,1,a??null,d,!1,p,w),n[Tr]=r.current,sa(n),c)for(n=0;n<c.length;n++)a=c[n],d=a._getVersion,d=d(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,d]:r.mutableSourceEagerHydrationData.push(a,d);return new mu(r)},an.render=function(n,r,a){if(!gu(r))throw Error(t(200));return yu(null,n,r,!1,a)},an.unmountComponentAtNode=function(n){if(!gu(n))throw Error(t(40));return n._reactRootContainer?(Ys(function(){yu(null,null,n,!1,function(){n._reactRootContainer=null,n[Tr]=null})}),!0):!1},an.unstable_batchedUpdates=zh,an.unstable_renderSubtreeIntoContainer=function(n,r,a,c){if(!gu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return yu(n,r,a,!1,c)},an.version="18.3.1-next-f1338f8080-20240426",an}var Jm;function $0(){if(Jm)return Zh.exports;Jm=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Zh.exports=B0(),Zh.exports}var Zm;function H0(){if(Zm)return _u;Zm=1;var s=$0();return _u.createRoot=s.createRoot,_u.hydrateRoot=s.hydrateRoot,_u}var q0=H0(),eg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y=function(s){const e=[];let t=0;for(let i=0;i<s.length;i++){let o=s.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},W0=function(s){const e=[];let t=0,i=0;for(;t<s.length;){const o=s[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[t++];e[i++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[t++],h=s[t++],m=s[t++],g=((o&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const u=s[t++],h=s[t++];e[i++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},wy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<s.length;o+=3){const u=s[o],h=o+1<s.length,m=h?s[o+1]:0,g=o+2<s.length,_=g?s[o+2]:0,E=u>>2,R=(u&3)<<4|m>>4;let D=(m&15)<<2|_>>6,U=_&63;g||(U=64,h||(D=64)),i.push(t[E],t[R],t[D],t[U])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(_y(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):W0(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<s.length;){const u=t[s.charAt(o++)],m=o<s.length?t[s.charAt(o)]:0;++o;const _=o<s.length?t[s.charAt(o)]:64;++o;const R=o<s.length?t[s.charAt(o)]:64;if(++o,u==null||m==null||_==null||R==null)throw new K0;const D=u<<2|m>>4;if(i.push(D),_!==64){const U=m<<4&240|_>>2;if(i.push(U),R!==64){const $=_<<6&192|R;i.push($)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class K0 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const G0=function(s){const e=_y(s);return wy.encodeByteArray(e,!0)},Ou=function(s){return G0(s).replace(/\./g,"")},Ey=function(s){try{return wy.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0=()=>Q0().__FIREBASE_DEFAULTS__,Y0=()=>{if(typeof process>"u"||typeof eg>"u")return;const s=eg.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},J0=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Ey(s[1]);return e&&JSON.parse(e)},nc=()=>{try{return X0()||Y0()||J0()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Ty=s=>{var e,t;return(t=(e=nc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[s]},Z0=s=>{const e=Ty(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Iy=()=>{var s;return(s=nc())===null||s===void 0?void 0:s.config},xy=s=>{var e;return(e=nc())===null||e===void 0?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},s);return[Ou(JSON.stringify(t)),Ou(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kt())}function rw(){var s;const e=(s=nc())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iw(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function ow(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aw(){const s=Kt();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function lw(){return!rw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uw(){try{return typeof indexedDB=="object"}catch{return!1}}function cw(){return new Promise((s,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="FirebaseError";class Br extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=hw,Object.setPrototypeOf(this,Br.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ba.prototype.create)}}class Ba{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?dw(u,i):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new Br(o,m,i)}}function dw(s,e){return s.replace(fw,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const fw=/\{\$([^}]+)}/g;function pw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Mu(s,e){if(s===e)return!0;const t=Object.keys(s),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const u=s[o],h=e[o];if(tg(u)&&tg(h)){if(!Mu(u,h))return!1}else if(u!==h)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function tg(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(s){const e=[];for(const[t,i]of Object.entries(s))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function mw(s,e){const t=new gw(s,e);return t.subscribe.bind(t)}class gw{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");yw(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=nd),o.error===void 0&&(o.error=nd),o.complete===void 0&&(o.complete=nd);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yw(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function nd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ot(s){return s&&s._delegate?s._delegate:s}class si{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new ew;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ww(e))try{this.getOrInitializeService({instanceIdentifier:ti})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});i.resolve(u)}catch{}}}}clearInstance(e=ti){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ti){return this.instances.has(e)}getOptions(e=ti){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);i===m&&h.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),u=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;u.add(e),this.onInitCallbacks.set(o,u);const h=this.instances.get(o);return h&&e(h,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:_w(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ti){return this.component?this.component.multipleInstances?e:ti:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _w(s){return s===ti?void 0:s}function ww(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new vw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(je||(je={}));const Tw={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},Iw=je.INFO,xw={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},Sw=(s,e,...t)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),o=xw[e];if(o)console[o](`[${i}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ud{constructor(e){this.name=e,this._logLevel=Iw,this._logHandler=Sw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Tw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const Cw=(s,e)=>e.some(t=>s instanceof t);let ng,rg;function Aw(){return ng||(ng=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kw(){return rg||(rg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Sy=new WeakMap,pd=new WeakMap,Cy=new WeakMap,rd=new WeakMap,zd=new WeakMap;function Rw(s){const e=new Promise((t,i)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{t(ws(s.result)),o()},h=()=>{i(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&Sy.set(t,s)}).catch(()=>{}),zd.set(e,s),e}function Pw(s){if(pd.has(s))return;const e=new Promise((t,i)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{t(),o()},h=()=>{i(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});pd.set(s,e)}let md={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return pd.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Cy.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ws(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function Nw(s){md=s(md)}function bw(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=s.call(sd(this),e,...t);return Cy.set(i,e.sort?e.sort():[e]),ws(i)}:kw().includes(s)?function(...e){return s.apply(sd(this),e),ws(Sy.get(this))}:function(...e){return ws(s.apply(sd(this),e))}}function Dw(s){return typeof s=="function"?bw(s):(s instanceof IDBTransaction&&Pw(s),Cw(s,Aw())?new Proxy(s,md):s)}function ws(s){if(s instanceof IDBRequest)return Rw(s);if(rd.has(s))return rd.get(s);const e=Dw(s);return e!==s&&(rd.set(s,e),zd.set(e,s)),e}const sd=s=>zd.get(s);function Vw(s,e,{blocked:t,upgrade:i,blocking:o,terminated:u}={}){const h=indexedDB.open(s,e),m=ws(h);return i&&h.addEventListener("upgradeneeded",g=>{i(ws(h.result),g.oldVersion,g.newVersion,ws(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}const Lw=["get","getKey","getAll","getAllKeys","count"],Ow=["put","add","delete","clear"],id=new Map;function sg(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(id.get(e))return id.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=Ow.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||Lw.includes(t)))return;const u=async function(h,...m){const g=this.transaction(h,o?"readwrite":"readonly");let _=g.store;return i&&(_=_.index(m.shift())),(await Promise.all([_[t](...m),o&&g.done]))[0]};return id.set(e,u),u}Nw(s=>({...s,get:(e,t,i)=>sg(e,t)||s.get(e,t,i),has:(e,t)=>!!sg(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(jw(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function jw(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gd="@firebase/app",ig="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr=new Ud("@firebase/app"),Fw="@firebase/app-compat",Uw="@firebase/analytics-compat",zw="@firebase/analytics",Bw="@firebase/app-check-compat",$w="@firebase/app-check",Hw="@firebase/auth",qw="@firebase/auth-compat",Ww="@firebase/database",Kw="@firebase/data-connect",Gw="@firebase/database-compat",Qw="@firebase/functions",Xw="@firebase/functions-compat",Yw="@firebase/installations",Jw="@firebase/installations-compat",Zw="@firebase/messaging",eE="@firebase/messaging-compat",tE="@firebase/performance",nE="@firebase/performance-compat",rE="@firebase/remote-config",sE="@firebase/remote-config-compat",iE="@firebase/storage",oE="@firebase/storage-compat",aE="@firebase/firestore",lE="@firebase/vertexai-preview",uE="@firebase/firestore-compat",cE="firebase",hE="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd="[DEFAULT]",dE={[gd]:"fire-core",[Fw]:"fire-core-compat",[zw]:"fire-analytics",[Uw]:"fire-analytics-compat",[$w]:"fire-app-check",[Bw]:"fire-app-check-compat",[Hw]:"fire-auth",[qw]:"fire-auth-compat",[Ww]:"fire-rtdb",[Kw]:"fire-data-connect",[Gw]:"fire-rtdb-compat",[Qw]:"fire-fn",[Xw]:"fire-fn-compat",[Yw]:"fire-iid",[Jw]:"fire-iid-compat",[Zw]:"fire-fcm",[eE]:"fire-fcm-compat",[tE]:"fire-perf",[nE]:"fire-perf-compat",[rE]:"fire-rc",[sE]:"fire-rc-compat",[iE]:"fire-gcs",[oE]:"fire-gcs-compat",[aE]:"fire-fst",[uE]:"fire-fst-compat",[lE]:"fire-vertex","fire-js":"fire-js",[cE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ju=new Map,fE=new Map,vd=new Map;function og(s,e){try{s.container.addComponent(e)}catch(t){Lr.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function po(s){const e=s.name;if(vd.has(e))return Lr.debug(`There were multiple attempts to register component ${e}.`),!1;vd.set(e,s);for(const t of ju.values())og(t,s);for(const t of fE.values())og(t,s);return!0}function Bd(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function or(s){return s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Es=new Ba("app","Firebase",pE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new si("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Es.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io=hE;function Ay(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const i=Object.assign({name:yd,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw Es.create("bad-app-name",{appName:String(o)});if(t||(t=Iy()),!t)throw Es.create("no-options");const u=ju.get(o);if(u){if(Mu(t,u.options)&&Mu(i,u.config))return u;throw Es.create("duplicate-app",{appName:o})}const h=new Ew(o);for(const g of vd.values())h.addComponent(g);const m=new mE(t,i,h);return ju.set(o,m),m}function ky(s=yd){const e=ju.get(s);if(!e&&s===yd&&Iy())return Ay();if(!e)throw Es.create("no-app",{appName:s});return e}function Ts(s,e,t){var i;let o=(i=dE[s])!==null&&i!==void 0?i:s;t&&(o+=`-${t}`);const u=o.match(/\s|\//),h=e.match(/\s|\//);if(u||h){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&h&&m.push("and"),h&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Lr.warn(m.join(" "));return}po(new si(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE="firebase-heartbeat-database",yE=1,Da="firebase-heartbeat-store";let od=null;function Ry(){return od||(od=Vw(gE,yE,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Da)}catch(t){console.warn(t)}}}}).catch(s=>{throw Es.create("idb-open",{originalErrorMessage:s.message})})),od}async function vE(s){try{const t=(await Ry()).transaction(Da),i=await t.objectStore(Da).get(Py(s));return await t.done,i}catch(e){if(e instanceof Br)Lr.warn(e.message);else{const t=Es.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Lr.warn(t.message)}}}async function ag(s,e){try{const i=(await Ry()).transaction(Da,"readwrite");await i.objectStore(Da).put(e,Py(s)),await i.done}catch(t){if(t instanceof Br)Lr.warn(t.message);else{const i=Es.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Lr.warn(i.message)}}}function Py(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E=1024,wE=30*24*60*60*1e3;class EE{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new IE(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=lg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u)?void 0:(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const m=new Date(h.date).valueOf();return Date.now()-m<=wE}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Lr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=lg(),{heartbeatsToSend:i,unsentEntries:o}=TE(this._heartbeatsCache.heartbeats),u=Ou(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(t){return Lr.warn(t),""}}}function lg(){return new Date().toISOString().substring(0,10)}function TE(s,e=_E){const t=[];let i=s.slice();for(const o of s){const u=t.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),ug(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),ug(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class IE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uw()?cw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await vE(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return ag(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return ag(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function ug(s){return Ou(JSON.stringify({version:2,heartbeats:s})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xE(s){po(new si("platform-logger",e=>new Mw(e),"PRIVATE")),po(new si("heartbeat",e=>new EE(e),"PRIVATE")),Ts(gd,ig,s),Ts(gd,ig,"esm2017"),Ts("fire-js","")}xE("");var SE="firebase",CE="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ts(SE,CE,"app");function $d(s,e){var t={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&e.indexOf(i)<0&&(t[i]=s[i]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(s);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(s,i[o])&&(t[i[o]]=s[i[o]]);return t}function Ny(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AE=Ny,by=new Ba("auth","Firebase",Ny());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu=new Ud("@firebase/auth");function kE(s,...e){Fu.logLevel<=je.WARN&&Fu.warn(`Auth (${Io}): ${s}`,...e)}function Su(s,...e){Fu.logLevel<=je.ERROR&&Fu.error(`Auth (${Io}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(s,...e){throw Hd(s,...e)}function ar(s,...e){return Hd(s,...e)}function Dy(s,e,t){const i=Object.assign(Object.assign({},AE()),{[e]:t});return new Ba("auth","Firebase",i).create(e,{appName:s.name})}function Dr(s){return Dy(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Hd(s,...e){if(typeof s!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(t,...i)}return by.create(s,...e)}function Re(s,e,...t){if(!s)throw Hd(e,...t)}function Pr(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Su(e),new Error(e)}function Mr(s,e){s||Pr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function RE(){return cg()==="http:"||cg()==="https:"}function cg(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(RE()||iw()||"connection"in navigator)?navigator.onLine:!0}function NE(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,t){this.shortDelay=e,this.longDelay=t,Mr(t>e,"Short delay should be less than long delay!"),this.isMobile=nw()||ow()}get(){return PE()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qd(s,e){Mr(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE=new Ha(3e4,6e4);function qa(s,e){return s.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:s.tenantId}):e}async function xo(s,e,t,i,o={}){return Ly(s,o,async()=>{let u={},h={};i&&(e==="GET"?h=i:u={body:JSON.stringify(i)});const m=$a(Object.assign({key:s.config.apiKey},h)).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const _=Object.assign({method:e,headers:g},u);return sw()||(_.referrerPolicy="no-referrer"),Vy.fetch()(Oy(s,s.config.apiHost,t,m),_)})}async function Ly(s,e,t){s._canInitEmulator=!1;const i=Object.assign(Object.assign({},bE),e);try{const o=new VE(s),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw wu(s,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const m=u.ok?h.errorMessage:h.error.message,[g,_]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw wu(s,"credential-already-in-use",h);if(g==="EMAIL_EXISTS")throw wu(s,"email-already-in-use",h);if(g==="USER_DISABLED")throw wu(s,"user-disabled",h);const E=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw Dy(s,E,_);Or(s,E)}}catch(o){if(o instanceof Br)throw o;Or(s,"network-request-failed",{message:String(o)})}}async function Wd(s,e,t,i,o={}){const u=await xo(s,e,t,i,o);return"mfaPendingCredential"in u&&Or(s,"multi-factor-auth-required",{_serverResponse:u}),u}function Oy(s,e,t,i){const o=`${e}${t}?${i}`;return s.config.emulator?qd(s.config,o):`${s.config.apiScheme}://${o}`}class VE{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(ar(this.auth,"network-request-failed")),DE.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function wu(s,e,t){const i={appName:s.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=ar(s,e,i);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LE(s,e){return xo(s,"POST","/v1/accounts:delete",e)}async function My(s,e){return xo(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ka(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function OE(s,e=!1){const t=Ot(s),i=await t.getIdToken(e),o=Kd(i);Re(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u==null?void 0:u.sign_in_provider;return{claims:o,token:i,authTime:ka(ad(o.auth_time)),issuedAtTime:ka(ad(o.iat)),expirationTime:ka(ad(o.exp)),signInProvider:h||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function ad(s){return Number(s)*1e3}function Kd(s){const[e,t,i]=s.split(".");if(e===void 0||t===void 0||i===void 0)return Su("JWT malformed, contained fewer than 3 sections"),null;try{const o=Ey(t);return o?JSON.parse(o):(Su("Failed to decode base64 JWT payload"),null)}catch(o){return Su("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function hg(s){const e=Kd(s);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Va(s,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Br&&ME(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function ME({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ka(this.lastLoginAt),this.creationTime=ka(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uu(s){var e;const t=s.auth,i=await s.getIdToken(),o=await Va(s,My(t,{idToken:i}));Re(o==null?void 0:o.users.length,t,"internal-error");const u=o.users[0];s._notifyReloadListener(u);const h=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?jy(u.providerUserInfo):[],m=UE(s.providerData,h),g=s.isAnonymous,_=!(s.email&&u.passwordHash)&&!(m!=null&&m.length),E=g?_:!1,R={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new wd(u.createdAt,u.lastLoginAt),isAnonymous:E};Object.assign(s,R)}async function FE(s){const e=Ot(s);await Uu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function UE(s,e){return[...s.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function jy(s){return s.map(e=>{var{providerId:t}=e,i=$d(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zE(s,e){const t=await Ly(s,{},async()=>{const i=$a({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,h=Oy(s,o,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",Vy.fetch()(h,{method:"POST",headers:m,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function BE(s,e){return xo(s,"POST","/v2/accounts:revokeToken",qa(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const t=hg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:u}=await zE(e,t);this.updateTokensAndExpiration(i,o,Number(u))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:u}=t,h=new uo;return i&&(Re(typeof i=="string","internal-error",{appName:e}),h.refreshToken=i),o&&(Re(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(Re(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new uo,this.toJSON())}_performRefresh(){return Pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(s,e){Re(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Nr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,u=$d(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new wd(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const t=await Va(this,this.stsTokenManager.getToken(this.auth,e));return Re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return OE(this,e)}reload(){return FE(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Nr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Uu(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(or(this.auth.app))return Promise.reject(Dr(this.auth));const e=await this.getIdToken();return await Va(this,LE(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,u,h,m,g,_,E;const R=(i=t.displayName)!==null&&i!==void 0?i:void 0,D=(o=t.email)!==null&&o!==void 0?o:void 0,U=(u=t.phoneNumber)!==null&&u!==void 0?u:void 0,$=(h=t.photoURL)!==null&&h!==void 0?h:void 0,W=(m=t.tenantId)!==null&&m!==void 0?m:void 0,j=(g=t._redirectEventId)!==null&&g!==void 0?g:void 0,re=(_=t.createdAt)!==null&&_!==void 0?_:void 0,G=(E=t.lastLoginAt)!==null&&E!==void 0?E:void 0,{uid:H,emailVerified:se,isAnonymous:ue,providerData:oe,stsTokenManager:P}=t;Re(H&&P,e,"internal-error");const I=uo.fromJSON(this.name,P);Re(typeof H=="string",e,"internal-error"),fs(R,e.name),fs(D,e.name),Re(typeof se=="boolean",e,"internal-error"),Re(typeof ue=="boolean",e,"internal-error"),fs(U,e.name),fs($,e.name),fs(W,e.name),fs(j,e.name),fs(re,e.name),fs(G,e.name);const S=new Nr({uid:H,auth:e,email:D,emailVerified:se,displayName:R,isAnonymous:ue,photoURL:$,phoneNumber:U,tenantId:W,stsTokenManager:I,createdAt:re,lastLoginAt:G});return oe&&Array.isArray(oe)&&(S.providerData=oe.map(N=>Object.assign({},N))),j&&(S._redirectEventId=j),S}static async _fromIdTokenResponse(e,t,i=!1){const o=new uo;o.updateFromServerResponse(t);const u=new Nr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Uu(u),u}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Re(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?jy(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new uo;m.updateFromIdToken(i);const g=new Nr({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new wd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(g,_),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg=new Map;function br(s){Mr(s instanceof Function,"Expected a class definition");let e=dg.get(s);return e?(Mr(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,dg.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Fy.type="NONE";const fg=Fy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(s,e,t){return`firebase:${s}:${e}:${t}`}class co{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:u}=this.auth;this.fullUserKey=Cu(this.userKey,o.apiKey,u),this.fullPersistenceKey=Cu("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Nr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new co(br(fg),e,i);const o=(await Promise.all(t.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let u=o[0]||br(fg);const h=Cu(i,e.config.apiKey,e.name);let m=null;for(const _ of t)try{const E=await _._get(h);if(E){const R=Nr._fromJSON(e,E);_!==u&&(m=R),u=_;break}}catch{}const g=o.filter(_=>_._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new co(u,e,i):(u=g[0],m&&await u._set(h,m.toJSON()),await Promise.all(t.map(async _=>{if(_!==u)try{await _._remove(h)}catch{}})),new co(u,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($y(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Uy(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qy(e))return"Blackberry";if(Wy(e))return"Webos";if(zy(e))return"Safari";if((e.includes("chrome/")||By(e))&&!e.includes("edge/"))return"Chrome";if(Hy(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Uy(s=Kt()){return/firefox\//i.test(s)}function zy(s=Kt()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function By(s=Kt()){return/crios\//i.test(s)}function $y(s=Kt()){return/iemobile/i.test(s)}function Hy(s=Kt()){return/android/i.test(s)}function qy(s=Kt()){return/blackberry/i.test(s)}function Wy(s=Kt()){return/webos/i.test(s)}function Gd(s=Kt()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function $E(s=Kt()){var e;return Gd(s)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function HE(){return aw()&&document.documentMode===10}function Ky(s=Kt()){return Gd(s)||Hy(s)||Wy(s)||qy(s)||/windows phone/i.test(s)||$y(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gy(s,e=[]){let t;switch(s){case"Browser":t=pg(Kt());break;case"Worker":t=`${pg(Kt())}-${s}`;break;default:t=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Io}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=u=>new Promise((h,m)=>{try{const g=e(u);h(g)}catch(g){m(g)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WE(s,e={}){return xo(s,"GET","/v2/passwordPolicy",qa(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE=6;class GE{constructor(e){var t,i,o,u;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:KE,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,u,h,m;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(t=g.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),g.isValid&&(g.isValid=(i=g.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(u=g.containsUppercaseLetter)!==null&&u!==void 0?u:!0),g.isValid&&(g.isValid=(h=g.containsNumericCharacter)!==null&&h!==void 0?h:!0),g.isValid&&(g.isValid=(m=g.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),g}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mg(this),this.idTokenSubscription=new mg(this),this.beforeStateQueue=new qE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=by,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=br(t)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await co.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await My(this,{idToken:e}),i=await Nr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(or(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(m,m))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,m=o==null?void 0:o._redirectEventId,g=await this.tryRedirectSignIn(e);(!h||h===m)&&(g!=null&&g.user)&&(o=g.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Uu(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=NE()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(or(this.app))return Promise.reject(Dr(this));const t=e?Ot(e):null;return t&&Re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return or(this.app)?Promise.reject(Dr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return or(this.app)?Promise.reject(Dr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(br(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await WE(this),t=new GE(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ba("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await BE(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&br(e)||this._popupRedirectResolver;Re(t,this,"argument-error"),this.redirectPersistenceManager=await co.create(this,[br(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(m,this,"internal-error"),m.then(()=>{h||u(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,o);return()=>{h=!0,g()}}else{const g=e.addObserver(t);return()=>{h=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Gy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&kE(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Wa(s){return Ot(s)}class mg{constructor(e){this.auth=e,this.observer=null,this.addObserver=mw(t=>this.observer=t)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function XE(s){Qd=s}function YE(s){return Qd.loadJS(s)}function JE(){return Qd.gapiScript}function ZE(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(s,e){const t=Bd(s,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(Mu(u,e??{}))return o;Or(o,"already-initialized")}return t.initialize({options:e})}function tT(s,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(br);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function nT(s,e,t){const i=Wa(s);Re(i._canInitEmulator,i,"emulator-config-failed"),Re(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,u=Qy(e),{host:h,port:m}=rT(e),g=m===null?"":`:${m}`;i.config.emulator={url:`${u}//${h}${g}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:h,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})}),sT()}function Qy(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function rT(s){const e=Qy(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const u=o[1];return{host:u,port:gg(i.substr(u.length+1))}}else{const[u,h]=i.split(":");return{host:u,port:gg(h)}}}function gg(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function sT(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Pr("not implemented")}_getIdTokenResponse(e){return Pr("not implemented")}_linkToIdToken(e,t){return Pr("not implemented")}_getReauthenticationResolver(e){return Pr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ho(s,e){return Wd(s,"POST","/v1/accounts:signInWithIdp",qa(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="http://localhost";class ii extends Xy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ii(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Or("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,u=$d(t,["providerId","signInMethod"]);if(!i||!o)return null;const h=new ii(i,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return ho(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,ho(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ho(e,t)}buildRequest(){const e={requestUri:iT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$a(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka extends Yy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends Ka{constructor(){super("facebook.com")}static credential(e){return ii._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ms.credential(e.oauthAccessToken)}catch{return null}}}ms.FACEBOOK_SIGN_IN_METHOD="facebook.com";ms.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs extends Ka{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ii._fromParams({providerId:gs.PROVIDER_ID,signInMethod:gs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return gs.credentialFromTaggedObject(e)}static credentialFromError(e){return gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return gs.credential(t,i)}catch{return null}}}gs.GOOGLE_SIGN_IN_METHOD="google.com";gs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends Ka{constructor(){super("github.com")}static credential(e){return ii._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ys.credential(e.oauthAccessToken)}catch{return null}}}ys.GITHUB_SIGN_IN_METHOD="github.com";ys.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends Ka{constructor(){super("twitter.com")}static credential(e,t){return ii._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return vs.credential(t,i)}catch{return null}}}vs.TWITTER_SIGN_IN_METHOD="twitter.com";vs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oT(s,e){return Wd(s,"POST","/v1/accounts:signUp",qa(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const u=await Nr._fromIdTokenResponse(e,i,o),h=yg(i);return new jr({user:u,providerId:h,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=yg(i);return new jr({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function yg(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aT(s){var e;if(or(s.app))return Promise.reject(Dr(s));const t=Wa(s);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new jr({user:t.currentUser,providerId:null,operationType:"signIn"});const i=await oT(t,{returnSecureToken:!0}),o=await jr._fromIdTokenResponse(t,"signIn",i,!0);return await t._updateCurrentUser(o.user),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu extends Br{constructor(e,t,i,o){var u;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,zu.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new zu(e,t,i,o)}}function Jy(s,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?zu._fromErrorAndOperation(s,u,e,i):u})}async function lT(s,e,t=!1){const i=await Va(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return jr._forOperation(s,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uT(s,e,t=!1){const{auth:i}=s;if(or(i.app))return Promise.reject(Dr(i));const o="reauthenticate";try{const u=await Va(s,Jy(i,o,e,s),t);Re(u.idToken,i,"internal-error");const h=Kd(u.idToken);Re(h,i,"internal-error");const{sub:m}=h;return Re(s.uid===m,i,"user-mismatch"),jr._forOperation(s,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Or(i,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cT(s,e,t=!1){if(or(s.app))return Promise.reject(Dr(s));const i="signIn",o=await Jy(s,i,e),u=await jr._fromIdTokenResponse(s,i,o);return t||await s._updateCurrentUser(u.user),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hT(s,e){return Wd(s,"POST","/v1/accounts:signInWithCustomToken",qa(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dT(s,e){if(or(s.app))return Promise.reject(Dr(s));const t=Wa(s),i=await hT(t,{token:e,returnSecureToken:!0}),o=await jr._fromIdTokenResponse(t,"signIn",i);return await t._updateCurrentUser(o.user),o}function fT(s,e,t,i){return Ot(s).onIdTokenChanged(e,t,i)}function pT(s,e,t){return Ot(s).beforeAuthStateChanged(e,t)}function mT(s,e,t,i){return Ot(s).onAuthStateChanged(e,t,i)}const Bu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Bu,"1"),this.storage.removeItem(Bu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT=1e3,yT=10;class ev extends Zy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ky(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,m,g)=>{this.notifyListeners(h,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(i);!t&&this.localCache[i]===h||this.notifyListeners(i,h)},u=this.storage.getItem(i);HE()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,yT):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},gT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ev.type="LOCAL";const vT=ev;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv extends Zy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}tv.type="SESSION";const nv=tv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new rc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:u}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const m=Array.from(h).map(async _=>_(t.origin,u)),g=await _T(m);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(s="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((m,g)=>{const _=Xd("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},i);h={messageChannel:o,onMessage(R){const D=R;if(D.data.eventId===_)switch(D.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(D.data.response);break;default:clearTimeout(E),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:_,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(){return window}function ET(s){lr().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(){return typeof lr().WorkerGlobalScope<"u"&&typeof lr().importScripts=="function"}async function TT(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function IT(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function xT(){return rv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="firebaseLocalStorageDb",ST=1,$u="firebaseLocalStorage",iv="fbase_key";class Ga{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function sc(s,e){return s.transaction([$u],e?"readwrite":"readonly").objectStore($u)}function CT(){const s=indexedDB.deleteDatabase(sv);return new Ga(s).toPromise()}function Ed(){const s=indexedDB.open(sv,ST);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore($u,{keyPath:iv})}catch(o){t(o)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains($u)?e(i):(i.close(),await CT(),e(await Ed()))})})}async function vg(s,e,t){const i=sc(s,!0).put({[iv]:e,value:t});return new Ga(i).toPromise()}async function AT(s,e){const t=sc(s,!1).get(e),i=await new Ga(t).toPromise();return i===void 0?null:i.value}function _g(s,e){const t=sc(s,!0).delete(e);return new Ga(t).toPromise()}const kT=800,RT=3;class ov{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ed(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>RT)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return rv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rc._getInstance(xT()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await TT(),!this.activeServiceWorker)return;this.sender=new wT(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||IT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ed();return await vg(e,Bu,"1"),await _g(e,Bu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>vg(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>AT(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>_g(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=sc(o,!1).getAll();return new Ga(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ov.type="LOCAL";const PT=ov;new Ha(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(s,e){return e?br(e):(Re(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd extends Xy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ho(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ho(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ho(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function bT(s){return cT(s.auth,new Yd(s),s.bypassAuthState)}function DT(s){const{auth:e,user:t}=s;return Re(t,e,"internal-error"),uT(t,new Yd(s),s.bypassAuthState)}async function VT(s){const{auth:e,user:t}=s;return Re(t,e,"internal-error"),lT(t,new Yd(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,t,i,o,u=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:u,error:h,type:m}=e;if(h){this.reject(h);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(_){this.reject(_)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bT;case"linkViaPopup":case"linkViaRedirect":return VT;case"reauthViaPopup":case"reauthViaRedirect":return DT;default:Or(this.auth,"internal-error")}}resolve(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT=new Ha(2e3,1e4);class lo extends av{constructor(e,t,i,o,u){super(e,t,o,u),this.provider=i,this.authWindow=null,this.pollId=null,lo.currentPopupAction&&lo.currentPopupAction.cancel(),lo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){Mr(this.filter.length===1,"Popup operations only handle one event");const e=Xd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ar(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ar(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,lo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ar(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,LT.get())};e()}}lo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT="pendingRedirect",Au=new Map;class MT extends av{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Au.get(this.auth._key());if(!e){try{const i=await jT(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Au.set(this.auth._key(),e)}return this.bypassAuthState||Au.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jT(s,e){const t=zT(e),i=UT(s);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function FT(s,e){Au.set(s._key(),e)}function UT(s){return br(s._redirectPersistence)}function zT(s){return Cu(OT,s.config.apiKey,s.name)}async function BT(s,e,t=!1){if(or(s.app))return Promise.reject(Dr(s));const i=Wa(s),o=NT(i,e),h=await new MT(i,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await i._persistUserIfCurrent(h.user),await i._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T=10*60*1e3;class HT{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qT(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!lv(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(ar(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$T&&this.cachedEventUids.clear(),this.cachedEventUids.has(wg(e))}saveEventToCache(e){this.cachedEventUids.add(wg(e)),this.lastProcessedEventTime=Date.now()}}function wg(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function lv({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function qT(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lv(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WT(s,e={}){return xo(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,GT=/^https?/;async function QT(s){if(s.config.emulator)return;const{authorizedDomains:e}=await WT(s);for(const t of e)try{if(XT(t))return}catch{}Or(s,"unauthorized-domain")}function XT(s){const e=_d(),{protocol:t,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&i===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===i}if(!GT.test(t))return!1;if(KT.test(s))return i===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT=new Ha(3e4,6e4);function Eg(){const s=lr().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function JT(s){return new Promise((e,t)=>{var i,o,u;function h(){Eg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Eg(),t(ar(s,"network-request-failed"))},timeout:YT.get()})}if(!((o=(i=lr().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=lr().gapi)===null||u===void 0)&&u.load)h();else{const m=ZE("iframefcb");return lr()[m]=()=>{gapi.load?h():t(ar(s,"network-request-failed"))},YE(`${JE()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw ku=null,e})}let ku=null;function ZT(s){return ku=ku||JT(s),ku}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=new Ha(5e3,15e3),tI="__/auth/iframe",nI="emulator/auth/iframe",rI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iI(s){const e=s.config;Re(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?qd(e,nI):`https://${s.config.authDomain}/${tI}`,i={apiKey:e.apiKey,appName:s.name,v:Io},o=sI.get(s.config.apiHost);o&&(i.eid=o);const u=s._getFrameworks();return u.length&&(i.fw=u.join(",")),`${t}?${$a(i).slice(1)}`}async function oI(s){const e=await ZT(s),t=lr().gapi;return Re(t,s,"internal-error"),e.open({where:document.body,url:iI(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rI,dontclear:!0},i=>new Promise(async(o,u)=>{await i.restyle({setHideOnLeave:!1});const h=ar(s,"network-request-failed"),m=lr().setTimeout(()=>{u(h)},eI.get());function g(){lr().clearTimeout(m),o(i)}i.ping(g).then(g,()=>{u(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lI=500,uI=600,cI="_blank",hI="http://localhost";class Tg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dI(s,e,t,i=lI,o=uI){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const g=Object.assign(Object.assign({},aI),{width:i.toString(),height:o.toString(),top:u,left:h}),_=Kt().toLowerCase();t&&(m=By(_)?cI:t),Uy(_)&&(e=e||hI,g.scrollbars="yes");const E=Object.entries(g).reduce((D,[U,$])=>`${D}${U}=${$},`,"");if($E(_)&&m!=="_self")return fI(e||"",m),new Tg(null);const R=window.open(e||"",m,E);Re(R,s,"popup-blocked");try{R.focus()}catch{}return new Tg(R)}function fI(s,e){const t=document.createElement("a");t.href=s,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI="__/auth/handler",mI="emulator/auth/handler",gI=encodeURIComponent("fac");async function Ig(s,e,t,i,o,u){Re(s.config.authDomain,s,"auth-domain-config-required"),Re(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:i,v:Io,eventId:o};if(e instanceof Yy){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",pw(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,R]of Object.entries({}))h[E]=R}if(e instanceof Ka){const E=e.getScopes().filter(R=>R!=="");E.length>0&&(h.scopes=E.join(","))}s.tenantId&&(h.tid=s.tenantId);const m=h;for(const E of Object.keys(m))m[E]===void 0&&delete m[E];const g=await s._getAppCheckToken(),_=g?`#${gI}=${encodeURIComponent(g)}`:"";return`${yI(s)}?${$a(m).slice(1)}${_}`}function yI({config:s}){return s.emulator?qd(s,mI):`https://${s.authDomain}/${pI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld="webStorageSupport";class vI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nv,this._completeRedirectFn=BT,this._overrideRedirectResult=FT}async _openPopup(e,t,i,o){var u;Mr((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const h=await Ig(e,t,i,_d(),o);return dI(e,h,Xd())}async _openRedirect(e,t,i,o){await this._originValidation(e);const u=await Ig(e,t,i,_d(),o);return ET(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(Mr(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await oI(e),i=new HT(e);return t.register("authEvent",o=>(Re(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ld,{type:ld},o=>{var u;const h=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[ld];h!==void 0&&t(!!h),Or(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=QT(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ky()||zy()||Gd()}}const _I=vI;var xg="@firebase/auth",Sg="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TI(s){po(new si("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=i.options;Re(h&&!h.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:h,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gy(s)},_=new QE(i,o,u,g);return tT(_,t),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),po(new si("auth-internal",e=>{const t=Wa(e.getProvider("auth").getImmediate());return(i=>new wI(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ts(xg,Sg,EI(s)),Ts(xg,Sg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=5*60,xI=xy("authIdTokenMaxAge")||II;let Cg=null;const SI=s=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>xI)return;const o=t==null?void 0:t.token;Cg!==o&&(Cg=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function CI(s=ky()){const e=Bd(s,"auth");if(e.isInitialized())return e.getImmediate();const t=eT(s,{popupRedirectResolver:_I,persistence:[PT,vT,nv]}),i=xy("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const h=SI(u.toString());pT(t,h,()=>h(t.currentUser)),fT(t,m=>h(m))}}const o=Ty("auth");return o&&nT(t,`http://${o}`),t}function AI(){var s,e;return(e=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&e!==void 0?e:document}XE({loadJS(s){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=o=>{const u=ar("internal-error");u.customData=o,t(u)},i.type="text/javascript",i.charset="UTF-8",AI().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TI("Browser");var Ag=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ri,uv;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,I){function S(){}S.prototype=I.prototype,P.D=I.prototype,P.prototype=new S,P.prototype.constructor=P,P.C=function(N,C,k){for(var x=Array(arguments.length-2),Q=2;Q<arguments.length;Q++)x[Q-2]=arguments[Q];return I.prototype[C].apply(N,x)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,I,S){S||(S=0);var N=Array(16);if(typeof I=="string")for(var C=0;16>C;++C)N[C]=I.charCodeAt(S++)|I.charCodeAt(S++)<<8|I.charCodeAt(S++)<<16|I.charCodeAt(S++)<<24;else for(C=0;16>C;++C)N[C]=I[S++]|I[S++]<<8|I[S++]<<16|I[S++]<<24;I=P.g[0],S=P.g[1],C=P.g[2];var k=P.g[3],x=I+(k^S&(C^k))+N[0]+3614090360&4294967295;I=S+(x<<7&4294967295|x>>>25),x=k+(C^I&(S^C))+N[1]+3905402710&4294967295,k=I+(x<<12&4294967295|x>>>20),x=C+(S^k&(I^S))+N[2]+606105819&4294967295,C=k+(x<<17&4294967295|x>>>15),x=S+(I^C&(k^I))+N[3]+3250441966&4294967295,S=C+(x<<22&4294967295|x>>>10),x=I+(k^S&(C^k))+N[4]+4118548399&4294967295,I=S+(x<<7&4294967295|x>>>25),x=k+(C^I&(S^C))+N[5]+1200080426&4294967295,k=I+(x<<12&4294967295|x>>>20),x=C+(S^k&(I^S))+N[6]+2821735955&4294967295,C=k+(x<<17&4294967295|x>>>15),x=S+(I^C&(k^I))+N[7]+4249261313&4294967295,S=C+(x<<22&4294967295|x>>>10),x=I+(k^S&(C^k))+N[8]+1770035416&4294967295,I=S+(x<<7&4294967295|x>>>25),x=k+(C^I&(S^C))+N[9]+2336552879&4294967295,k=I+(x<<12&4294967295|x>>>20),x=C+(S^k&(I^S))+N[10]+4294925233&4294967295,C=k+(x<<17&4294967295|x>>>15),x=S+(I^C&(k^I))+N[11]+2304563134&4294967295,S=C+(x<<22&4294967295|x>>>10),x=I+(k^S&(C^k))+N[12]+1804603682&4294967295,I=S+(x<<7&4294967295|x>>>25),x=k+(C^I&(S^C))+N[13]+4254626195&4294967295,k=I+(x<<12&4294967295|x>>>20),x=C+(S^k&(I^S))+N[14]+2792965006&4294967295,C=k+(x<<17&4294967295|x>>>15),x=S+(I^C&(k^I))+N[15]+1236535329&4294967295,S=C+(x<<22&4294967295|x>>>10),x=I+(C^k&(S^C))+N[1]+4129170786&4294967295,I=S+(x<<5&4294967295|x>>>27),x=k+(S^C&(I^S))+N[6]+3225465664&4294967295,k=I+(x<<9&4294967295|x>>>23),x=C+(I^S&(k^I))+N[11]+643717713&4294967295,C=k+(x<<14&4294967295|x>>>18),x=S+(k^I&(C^k))+N[0]+3921069994&4294967295,S=C+(x<<20&4294967295|x>>>12),x=I+(C^k&(S^C))+N[5]+3593408605&4294967295,I=S+(x<<5&4294967295|x>>>27),x=k+(S^C&(I^S))+N[10]+38016083&4294967295,k=I+(x<<9&4294967295|x>>>23),x=C+(I^S&(k^I))+N[15]+3634488961&4294967295,C=k+(x<<14&4294967295|x>>>18),x=S+(k^I&(C^k))+N[4]+3889429448&4294967295,S=C+(x<<20&4294967295|x>>>12),x=I+(C^k&(S^C))+N[9]+568446438&4294967295,I=S+(x<<5&4294967295|x>>>27),x=k+(S^C&(I^S))+N[14]+3275163606&4294967295,k=I+(x<<9&4294967295|x>>>23),x=C+(I^S&(k^I))+N[3]+4107603335&4294967295,C=k+(x<<14&4294967295|x>>>18),x=S+(k^I&(C^k))+N[8]+1163531501&4294967295,S=C+(x<<20&4294967295|x>>>12),x=I+(C^k&(S^C))+N[13]+2850285829&4294967295,I=S+(x<<5&4294967295|x>>>27),x=k+(S^C&(I^S))+N[2]+4243563512&4294967295,k=I+(x<<9&4294967295|x>>>23),x=C+(I^S&(k^I))+N[7]+1735328473&4294967295,C=k+(x<<14&4294967295|x>>>18),x=S+(k^I&(C^k))+N[12]+2368359562&4294967295,S=C+(x<<20&4294967295|x>>>12),x=I+(S^C^k)+N[5]+4294588738&4294967295,I=S+(x<<4&4294967295|x>>>28),x=k+(I^S^C)+N[8]+2272392833&4294967295,k=I+(x<<11&4294967295|x>>>21),x=C+(k^I^S)+N[11]+1839030562&4294967295,C=k+(x<<16&4294967295|x>>>16),x=S+(C^k^I)+N[14]+4259657740&4294967295,S=C+(x<<23&4294967295|x>>>9),x=I+(S^C^k)+N[1]+2763975236&4294967295,I=S+(x<<4&4294967295|x>>>28),x=k+(I^S^C)+N[4]+1272893353&4294967295,k=I+(x<<11&4294967295|x>>>21),x=C+(k^I^S)+N[7]+4139469664&4294967295,C=k+(x<<16&4294967295|x>>>16),x=S+(C^k^I)+N[10]+3200236656&4294967295,S=C+(x<<23&4294967295|x>>>9),x=I+(S^C^k)+N[13]+681279174&4294967295,I=S+(x<<4&4294967295|x>>>28),x=k+(I^S^C)+N[0]+3936430074&4294967295,k=I+(x<<11&4294967295|x>>>21),x=C+(k^I^S)+N[3]+3572445317&4294967295,C=k+(x<<16&4294967295|x>>>16),x=S+(C^k^I)+N[6]+76029189&4294967295,S=C+(x<<23&4294967295|x>>>9),x=I+(S^C^k)+N[9]+3654602809&4294967295,I=S+(x<<4&4294967295|x>>>28),x=k+(I^S^C)+N[12]+3873151461&4294967295,k=I+(x<<11&4294967295|x>>>21),x=C+(k^I^S)+N[15]+530742520&4294967295,C=k+(x<<16&4294967295|x>>>16),x=S+(C^k^I)+N[2]+3299628645&4294967295,S=C+(x<<23&4294967295|x>>>9),x=I+(C^(S|~k))+N[0]+4096336452&4294967295,I=S+(x<<6&4294967295|x>>>26),x=k+(S^(I|~C))+N[7]+1126891415&4294967295,k=I+(x<<10&4294967295|x>>>22),x=C+(I^(k|~S))+N[14]+2878612391&4294967295,C=k+(x<<15&4294967295|x>>>17),x=S+(k^(C|~I))+N[5]+4237533241&4294967295,S=C+(x<<21&4294967295|x>>>11),x=I+(C^(S|~k))+N[12]+1700485571&4294967295,I=S+(x<<6&4294967295|x>>>26),x=k+(S^(I|~C))+N[3]+2399980690&4294967295,k=I+(x<<10&4294967295|x>>>22),x=C+(I^(k|~S))+N[10]+4293915773&4294967295,C=k+(x<<15&4294967295|x>>>17),x=S+(k^(C|~I))+N[1]+2240044497&4294967295,S=C+(x<<21&4294967295|x>>>11),x=I+(C^(S|~k))+N[8]+1873313359&4294967295,I=S+(x<<6&4294967295|x>>>26),x=k+(S^(I|~C))+N[15]+4264355552&4294967295,k=I+(x<<10&4294967295|x>>>22),x=C+(I^(k|~S))+N[6]+2734768916&4294967295,C=k+(x<<15&4294967295|x>>>17),x=S+(k^(C|~I))+N[13]+1309151649&4294967295,S=C+(x<<21&4294967295|x>>>11),x=I+(C^(S|~k))+N[4]+4149444226&4294967295,I=S+(x<<6&4294967295|x>>>26),x=k+(S^(I|~C))+N[11]+3174756917&4294967295,k=I+(x<<10&4294967295|x>>>22),x=C+(I^(k|~S))+N[2]+718787259&4294967295,C=k+(x<<15&4294967295|x>>>17),x=S+(k^(C|~I))+N[9]+3951481745&4294967295,P.g[0]=P.g[0]+I&4294967295,P.g[1]=P.g[1]+(C+(x<<21&4294967295|x>>>11))&4294967295,P.g[2]=P.g[2]+C&4294967295,P.g[3]=P.g[3]+k&4294967295}i.prototype.u=function(P,I){I===void 0&&(I=P.length);for(var S=I-this.blockSize,N=this.B,C=this.h,k=0;k<I;){if(C==0)for(;k<=S;)o(this,P,k),k+=this.blockSize;if(typeof P=="string"){for(;k<I;)if(N[C++]=P.charCodeAt(k++),C==this.blockSize){o(this,N),C=0;break}}else for(;k<I;)if(N[C++]=P[k++],C==this.blockSize){o(this,N),C=0;break}}this.h=C,this.o+=I},i.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var I=1;I<P.length-8;++I)P[I]=0;var S=8*this.o;for(I=P.length-8;I<P.length;++I)P[I]=S&255,S/=256;for(this.u(P),P=Array(16),I=S=0;4>I;++I)for(var N=0;32>N;N+=8)P[S++]=this.g[I]>>>N&255;return P};function u(P,I){var S=m;return Object.prototype.hasOwnProperty.call(S,P)?S[P]:S[P]=I(P)}function h(P,I){this.h=I;for(var S=[],N=!0,C=P.length-1;0<=C;C--){var k=P[C]|0;N&&k==I||(S[C]=k,N=!1)}this.g=S}var m={};function g(P){return-128<=P&&128>P?u(P,function(I){return new h([I|0],0>I?-1:0)}):new h([P|0],0>P?-1:0)}function _(P){if(isNaN(P)||!isFinite(P))return R;if(0>P)return j(_(-P));for(var I=[],S=1,N=0;P>=S;N++)I[N]=P/S|0,S*=4294967296;return new h(I,0)}function E(P,I){if(P.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(P.charAt(0)=="-")return j(E(P.substring(1),I));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=_(Math.pow(I,8)),N=R,C=0;C<P.length;C+=8){var k=Math.min(8,P.length-C),x=parseInt(P.substring(C,C+k),I);8>k?(k=_(Math.pow(I,k)),N=N.j(k).add(_(x))):(N=N.j(S),N=N.add(_(x)))}return N}var R=g(0),D=g(1),U=g(16777216);s=h.prototype,s.m=function(){if(W(this))return-j(this).m();for(var P=0,I=1,S=0;S<this.g.length;S++){var N=this.i(S);P+=(0<=N?N:4294967296+N)*I,I*=4294967296}return P},s.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if($(this))return"0";if(W(this))return"-"+j(this).toString(P);for(var I=_(Math.pow(P,6)),S=this,N="";;){var C=se(S,I).g;S=re(S,C.j(I));var k=((0<S.g.length?S.g[0]:S.h)>>>0).toString(P);if(S=C,$(S))return k+N;for(;6>k.length;)k="0"+k;N=k+N}},s.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function $(P){if(P.h!=0)return!1;for(var I=0;I<P.g.length;I++)if(P.g[I]!=0)return!1;return!0}function W(P){return P.h==-1}s.l=function(P){return P=re(this,P),W(P)?-1:$(P)?0:1};function j(P){for(var I=P.g.length,S=[],N=0;N<I;N++)S[N]=~P.g[N];return new h(S,~P.h).add(D)}s.abs=function(){return W(this)?j(this):this},s.add=function(P){for(var I=Math.max(this.g.length,P.g.length),S=[],N=0,C=0;C<=I;C++){var k=N+(this.i(C)&65535)+(P.i(C)&65535),x=(k>>>16)+(this.i(C)>>>16)+(P.i(C)>>>16);N=x>>>16,k&=65535,x&=65535,S[C]=x<<16|k}return new h(S,S[S.length-1]&-2147483648?-1:0)};function re(P,I){return P.add(j(I))}s.j=function(P){if($(this)||$(P))return R;if(W(this))return W(P)?j(this).j(j(P)):j(j(this).j(P));if(W(P))return j(this.j(j(P)));if(0>this.l(U)&&0>P.l(U))return _(this.m()*P.m());for(var I=this.g.length+P.g.length,S=[],N=0;N<2*I;N++)S[N]=0;for(N=0;N<this.g.length;N++)for(var C=0;C<P.g.length;C++){var k=this.i(N)>>>16,x=this.i(N)&65535,Q=P.i(C)>>>16,he=P.i(C)&65535;S[2*N+2*C]+=x*he,G(S,2*N+2*C),S[2*N+2*C+1]+=k*he,G(S,2*N+2*C+1),S[2*N+2*C+1]+=x*Q,G(S,2*N+2*C+1),S[2*N+2*C+2]+=k*Q,G(S,2*N+2*C+2)}for(N=0;N<I;N++)S[N]=S[2*N+1]<<16|S[2*N];for(N=I;N<2*I;N++)S[N]=0;return new h(S,0)};function G(P,I){for(;(P[I]&65535)!=P[I];)P[I+1]+=P[I]>>>16,P[I]&=65535,I++}function H(P,I){this.g=P,this.h=I}function se(P,I){if($(I))throw Error("division by zero");if($(P))return new H(R,R);if(W(P))return I=se(j(P),I),new H(j(I.g),j(I.h));if(W(I))return I=se(P,j(I)),new H(j(I.g),I.h);if(30<P.g.length){if(W(P)||W(I))throw Error("slowDivide_ only works with positive integers.");for(var S=D,N=I;0>=N.l(P);)S=ue(S),N=ue(N);var C=oe(S,1),k=oe(N,1);for(N=oe(N,2),S=oe(S,2);!$(N);){var x=k.add(N);0>=x.l(P)&&(C=C.add(S),k=x),N=oe(N,1),S=oe(S,1)}return I=re(P,C.j(I)),new H(C,I)}for(C=R;0<=P.l(I);){for(S=Math.max(1,Math.floor(P.m()/I.m())),N=Math.ceil(Math.log(S)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),k=_(S),x=k.j(I);W(x)||0<x.l(P);)S-=N,k=_(S),x=k.j(I);$(k)&&(k=D),C=C.add(k),P=re(P,x)}return new H(C,P)}s.A=function(P){return se(this,P).h},s.and=function(P){for(var I=Math.max(this.g.length,P.g.length),S=[],N=0;N<I;N++)S[N]=this.i(N)&P.i(N);return new h(S,this.h&P.h)},s.or=function(P){for(var I=Math.max(this.g.length,P.g.length),S=[],N=0;N<I;N++)S[N]=this.i(N)|P.i(N);return new h(S,this.h|P.h)},s.xor=function(P){for(var I=Math.max(this.g.length,P.g.length),S=[],N=0;N<I;N++)S[N]=this.i(N)^P.i(N);return new h(S,this.h^P.h)};function ue(P){for(var I=P.g.length+1,S=[],N=0;N<I;N++)S[N]=P.i(N)<<1|P.i(N-1)>>>31;return new h(S,P.h)}function oe(P,I){var S=I>>5;I%=32;for(var N=P.g.length-S,C=[],k=0;k<N;k++)C[k]=0<I?P.i(k+S)>>>I|P.i(k+S+1)<<32-I:P.i(k+S);return new h(C,P.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,uv=i,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=_,h.fromString=E,ri=h}).apply(typeof Ag<"u"?Ag:typeof self<"u"?self:typeof window<"u"?window:{});var Eu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cv,xa,hv,Ru,Td,dv,fv,pv;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,y){return l==Array.prototype||l==Object.prototype||(l[f]=y.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Eu=="object"&&Eu];for(var f=0;f<l.length;++f){var y=l[f];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=t(this);function o(l,f){if(f)e:{var y=i;l=l.split(".");for(var T=0;T<l.length-1;T++){var O=l[T];if(!(O in y))break e;y=y[O]}l=l[l.length-1],T=y[l],f=f(T),f!=T&&f!=null&&e(y,l,{configurable:!0,writable:!0,value:f})}}function u(l,f){l instanceof String&&(l+="");var y=0,T=!1,O={next:function(){if(!T&&y<l.length){var B=y++;return{value:f(B,l[B]),done:!1}}return T=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}o("Array.prototype.values",function(l){return l||function(){return u(this,function(f,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},m=this||self;function g(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function _(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function E(l,f,y){return l.call.apply(l.bind,arguments)}function R(l,f,y){if(!l)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,T),l.apply(f,O)}}return function(){return l.apply(f,arguments)}}function D(l,f,y){return D=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?E:R,D.apply(null,arguments)}function U(l,f){var y=Array.prototype.slice.call(arguments,1);return function(){var T=y.slice();return T.push.apply(T,arguments),l.apply(this,T)}}function $(l,f){function y(){}y.prototype=f.prototype,l.aa=f.prototype,l.prototype=new y,l.prototype.constructor=l,l.Qb=function(T,O,B){for(var ae=Array(arguments.length-2),We=2;We<arguments.length;We++)ae[We-2]=arguments[We];return f.prototype[O].apply(T,ae)}}function W(l){const f=l.length;if(0<f){const y=Array(f);for(let T=0;T<f;T++)y[T]=l[T];return y}return[]}function j(l,f){for(let y=1;y<arguments.length;y++){const T=arguments[y];if(g(T)){const O=l.length||0,B=T.length||0;l.length=O+B;for(let ae=0;ae<B;ae++)l[O+ae]=T[ae]}else l.push(T)}}class re{constructor(f,y){this.i=f,this.j=y,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function G(l){return/^[\s\xa0]*$/.test(l)}function H(){var l=m.navigator;return l&&(l=l.userAgent)?l:""}function se(l){return se[" "](l),l}se[" "]=function(){};var ue=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function oe(l,f,y){for(const T in l)f.call(y,l[T],T,l)}function P(l,f){for(const y in l)f.call(void 0,l[y],y,l)}function I(l){const f={};for(const y in l)f[y]=l[y];return f}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(l,f){let y,T;for(let O=1;O<arguments.length;O++){T=arguments[O];for(y in T)l[y]=T[y];for(let B=0;B<S.length;B++)y=S[B],Object.prototype.hasOwnProperty.call(T,y)&&(l[y]=T[y])}}function C(l){var f=1;l=l.split(":");const y=[];for(;0<f&&l.length;)y.push(l.shift()),f--;return l.length&&y.push(l.join(":")),y}function k(l){m.setTimeout(()=>{throw l},0)}function x(){var l=de;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class Q{constructor(){this.h=this.g=null}add(f,y){const T=he.get();T.set(f,y),this.h?this.h.next=T:this.g=T,this.h=T}}var he=new re(()=>new Ie,l=>l.reset());class Ie{constructor(){this.next=this.g=this.h=null}set(f,y){this.h=f,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let ye,Z=!1,de=new Q,le=()=>{const l=m.Promise.resolve(void 0);ye=()=>{l.then(L)}};var L=()=>{for(var l;l=x();){try{l.h.call(l.g)}catch(y){k(y)}var f=he;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}Z=!1};function q(){this.s=this.s,this.C=this.C}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function we(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}we.prototype.h=function(){this.defaultPrevented=!0};var Ve=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const y=()=>{};m.addEventListener("test",y,f),m.removeEventListener("test",y,f)}catch{}return l}();function xe(l,f){if(we.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var y=this.type=l.type,T=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(ue){e:{try{se(f.nodeName);var O=!0;break e}catch{}O=!1}O||(f=null)}}else y=="mouseover"?f=l.fromElement:y=="mouseout"&&(f=l.toElement);this.relatedTarget=f,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:ne[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&xe.aa.h.call(this)}}$(xe,we);var ne={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var me="closure_listenable_"+(1e6*Math.random()|0),Ee=0;function Ne(l,f,y,T,O){this.listener=l,this.proxy=null,this.src=f,this.type=y,this.capture=!!T,this.ha=O,this.key=++Ee,this.da=this.fa=!1}function Be(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ot(l){this.src=l,this.g={},this.h=0}ot.prototype.add=function(l,f,y,T,O){var B=l.toString();l=this.g[B],l||(l=this.g[B]=[],this.h++);var ae=hn(l,f,T,O);return-1<ae?(f=l[ae],y||(f.fa=!1)):(f=new Ne(f,this.src,B,!!T,O),f.fa=y,l.push(f)),f};function kt(l,f){var y=f.type;if(y in l.g){var T=l.g[y],O=Array.prototype.indexOf.call(T,f,void 0),B;(B=0<=O)&&Array.prototype.splice.call(T,O,1),B&&(Be(f),l.g[y].length==0&&(delete l.g[y],l.h--))}}function hn(l,f,y,T){for(var O=0;O<l.length;++O){var B=l[O];if(!B.da&&B.listener==f&&B.capture==!!y&&B.ha==T)return O}return-1}var bn="closure_lm_"+(1e6*Math.random()|0),pi={};function ko(l,f,y,T,O){if(Array.isArray(f)){for(var B=0;B<f.length;B++)ko(l,f[B],y,T,O);return null}return y=No(y),l&&l[me]?l.K(f,y,_(T)?!!T.capture:!1,O):Ro(l,f,y,!1,T,O)}function Ro(l,f,y,T,O,B){if(!f)throw Error("Invalid event type");var ae=_(O)?!!O.capture:!!O,We=gi(l);if(We||(l[bn]=We=new ot(l)),y=We.add(f,y,T,ae,B),y.proxy)return y;if(T=sl(),y.proxy=T,T.src=l,T.listener=y,l.addEventListener)Ve||(O=ae),O===void 0&&(O=!1),l.addEventListener(f.toString(),T,O);else if(l.attachEvent)l.attachEvent(pr(f.toString()),T);else if(l.addListener&&l.removeListener)l.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return y}function sl(){function l(y){return f.call(l.src,l.listener,y)}const f=Po;return l}function mi(l,f,y,T,O){if(Array.isArray(f))for(var B=0;B<f.length;B++)mi(l,f[B],y,T,O);else T=_(T)?!!T.capture:!!T,y=No(y),l&&l[me]?(l=l.i,f=String(f).toString(),f in l.g&&(B=l.g[f],y=hn(B,y,T,O),-1<y&&(Be(B[y]),Array.prototype.splice.call(B,y,1),B.length==0&&(delete l.g[f],l.h--)))):l&&(l=gi(l))&&(f=l.g[f.toString()],l=-1,f&&(l=hn(f,y,T,O)),(y=-1<l?f[l]:null)&&fr(y))}function fr(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[me])kt(f.i,l);else{var y=l.type,T=l.proxy;f.removeEventListener?f.removeEventListener(y,T,l.capture):f.detachEvent?f.detachEvent(pr(y),T):f.addListener&&f.removeListener&&f.removeListener(T),(y=gi(f))?(kt(y,l),y.h==0&&(y.src=null,f[bn]=null)):Be(l)}}}function pr(l){return l in pi?pi[l]:pi[l]="on"+l}function Po(l,f){if(l.da)l=!0;else{f=new xe(f,this);var y=l.listener,T=l.ha||l.src;l.fa&&fr(l),l=y.call(T,f)}return l}function gi(l){return l=l[bn],l instanceof ot?l:null}var yi="__closure_events_fn_"+(1e9*Math.random()>>>0);function No(l){return typeof l=="function"?l:(l[yi]||(l[yi]=function(f){return l.handleEvent(f)}),l[yi])}function yt(){q.call(this),this.i=new ot(this),this.M=this,this.F=null}$(yt,q),yt.prototype[me]=!0,yt.prototype.removeEventListener=function(l,f,y,T){mi(this,l,f,y,T)};function vt(l,f){var y,T=l.F;if(T)for(y=[];T;T=T.F)y.push(T);if(l=l.M,T=f.type||f,typeof f=="string")f=new we(f,l);else if(f instanceof we)f.target=f.target||l;else{var O=f;f=new we(T,l),N(f,O)}if(O=!0,y)for(var B=y.length-1;0<=B;B--){var ae=f.g=y[B];O=mr(ae,T,!0,f)&&O}if(ae=f.g=l,O=mr(ae,T,!0,f)&&O,O=mr(ae,T,!1,f)&&O,y)for(B=0;B<y.length;B++)ae=f.g=y[B],O=mr(ae,T,!1,f)&&O}yt.prototype.N=function(){if(yt.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var y=l.g[f],T=0;T<y.length;T++)Be(y[T]);delete l.g[f],l.h--}}this.F=null},yt.prototype.K=function(l,f,y,T){return this.i.add(String(l),f,!1,y,T)},yt.prototype.L=function(l,f,y,T){return this.i.add(String(l),f,!0,y,T)};function mr(l,f,y,T){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var O=!0,B=0;B<f.length;++B){var ae=f[B];if(ae&&!ae.da&&ae.capture==y){var We=ae.listener,_t=ae.ha||ae.src;ae.fa&&kt(l.i,ae),O=We.call(_t,T)!==!1&&O}}return O&&!T.defaultPrevented}function bo(l,f,y){if(typeof l=="function")y&&(l=D(l,y));else if(l&&typeof l.handleEvent=="function")l=D(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:m.setTimeout(l,f||0)}function $r(l){l.g=bo(()=>{l.g=null,l.i&&(l.i=!1,$r(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class ks extends q{constructor(f,y){super(),this.m=f,this.l=y,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:$r(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rs(l){q.call(this),this.h=l,this.g={}}$(Rs,q);var Do=[];function Vo(l){oe(l.g,function(f,y){this.g.hasOwnProperty(y)&&fr(f)},l),l.g={}}Rs.prototype.N=function(){Rs.aa.N.call(this),Vo(this)},Rs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Lo=m.JSON.stringify,Oo=m.JSON.parse,Mo=class{stringify(l){return m.JSON.stringify(l,void 0)}parse(l){return m.JSON.parse(l,void 0)}};function Ps(){}Ps.prototype.h=null;function vi(l){return l.h||(l.h=l.i())}function _i(){}var En={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Qn(){we.call(this,"d")}$(Qn,we);function wi(){we.call(this,"c")}$(wi,we);var Xn={},jo=null;function Ns(){return jo=jo||new yt}Xn.La="serverreachability";function Fo(l){we.call(this,Xn.La,l)}$(Fo,we);function gr(l){const f=Ns();vt(f,new Fo(f))}Xn.STAT_EVENT="statevent";function Uo(l,f){we.call(this,Xn.STAT_EVENT,l),this.stat=f}$(Uo,we);function ut(l){const f=Ns();vt(f,new Uo(f,l))}Xn.Ma="timingevent";function Ei(l,f){we.call(this,Xn.Ma,l),this.size=f}$(Ei,we);function Dn(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){l()},f)}function bs(){this.g=!0}bs.prototype.xa=function(){this.g=!1};function Ds(l,f,y,T,O,B){l.info(function(){if(l.g)if(B)for(var ae="",We=B.split("&"),_t=0;_t<We.length;_t++){var Fe=We[_t].split("=");if(1<Fe.length){var It=Fe[0];Fe=Fe[1];var ft=It.split("_");ae=2<=ft.length&&ft[1]=="type"?ae+(It+"="+Fe+"&"):ae+(It+"=redacted&")}}else ae=null;else ae=B;return"XMLHTTP REQ ("+T+") [attempt "+O+"]: "+f+`
`+y+`
`+ae})}function Ti(l,f,y,T,O,B,ae){l.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+O+"]: "+f+`
`+y+`
`+B+" "+ae})}function Vn(l,f,y,T){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+Sc(l,y)+(T?" "+T:"")})}function zo(l,f){l.info(function(){return"TIMEOUT: "+f})}bs.prototype.info=function(){};function Sc(l,f){if(!l.g)return f;if(!f)return null;try{var y=JSON.parse(f);if(y){for(l=0;l<y.length;l++)if(Array.isArray(y[l])){var T=y[l];if(!(2>T.length)){var O=T[1];if(Array.isArray(O)&&!(1>O.length)){var B=O[0];if(B!="noop"&&B!="stop"&&B!="close")for(var ae=1;ae<O.length;ae++)O[ae]=""}}}}return Lo(y)}catch{return f}}var Ii={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},il={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ln;function Vs(){}$(Vs,Ps),Vs.prototype.g=function(){return new XMLHttpRequest},Vs.prototype.i=function(){return{}},Ln=new Vs;function On(l,f,y,T){this.j=l,this.i=f,this.l=y,this.R=T||1,this.U=new Rs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ol}function ol(){this.i=null,this.g="",this.h=!1}var Bo={},xi={};function Si(l,f,y){l.L=1,l.v=Gr(fn(f)),l.m=y,l.P=!0,$o(l,null)}function $o(l,f){l.F=Date.now(),Qe(l),l.A=fn(l.v);var y=l.A,T=l.R;Array.isArray(T)||(T=[String(T)]),Xr(y.i,"t",T),l.C=0,y=l.j.J,l.h=new ol,l.g=xl(l.j,y?f:null,!l.m),0<l.O&&(l.M=new ks(D(l.Y,l,l.g),l.O)),f=l.U,y=l.g,T=l.ca;var O="readystatechange";Array.isArray(O)||(O&&(Do[0]=O.toString()),O=Do);for(var B=0;B<O.length;B++){var ae=ko(y,O[B],T||f.handleEvent,!1,f.h||f);if(!ae)break;f.g[ae.key]=ae}f=l.H?I(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),gr(),Ds(l.i,l.u,l.A,l.l,l.R,l.m)}On.prototype.ca=function(l){l=l.target;const f=this.M;f&&en(l)==3?f.j():this.Y(l)},On.prototype.Y=function(l){try{if(l==this.g)e:{const ft=en(this.g);var f=this.g.Ba();const xn=this.g.Z();if(!(3>ft)&&(ft!=3||this.g&&(this.h.h||this.g.oa()||Qo(this.g)))){this.J||ft!=4||f==7||(f==8||0>=xn?gr(3):gr(2)),Ls(this);var y=this.g.Z();this.X=y;t:if(al(this)){var T=Qo(this.g);l="";var O=T.length,B=en(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Tn(this),Hr(this);var ae="";break t}this.h.i=new m.TextDecoder}for(f=0;f<O;f++)this.h.h=!0,l+=this.h.i.decode(T[f],{stream:!(B&&f==O-1)});T.length=0,this.h.g+=l,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=y==200,Ti(this.i,this.u,this.A,this.l,this.R,ft,y),this.o){if(this.T&&!this.K){t:{if(this.g){var We,_t=this.g;if((We=_t.g?_t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(We)){var Fe=We;break t}}Fe=null}if(y=Fe)Vn(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ho(this,y);else{this.o=!1,this.s=3,ut(12),Tn(this),Hr(this);break e}}if(this.P){y=!0;let mn;for(;!this.J&&this.C<ae.length;)if(mn=Cc(this,ae),mn==xi){ft==4&&(this.s=4,ut(14),y=!1),Vn(this.i,this.l,null,"[Incomplete Response]");break}else if(mn==Bo){this.s=4,ut(15),Vn(this.i,this.l,ae,"[Invalid Chunk]"),y=!1;break}else Vn(this.i,this.l,mn,null),Ho(this,mn);if(al(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ft!=4||ae.length!=0||this.h.h||(this.s=1,ut(16),y=!1),this.o=this.o&&y,!y)Vn(this.i,this.l,ae,"[Invalid Chunked Response]"),Tn(this),Hr(this);else if(0<ae.length&&!this.W){this.W=!0;var It=this.j;It.g==this&&It.ba&&!It.M&&(It.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),Yo(It),It.M=!0,ut(11))}}else Vn(this.i,this.l,ae,null),Ho(this,ae);ft==4&&Tn(this),this.o&&!this.J&&(ft==4?Oi(this.j,this):(this.o=!1,Qe(this)))}else Ni(this.g),y==400&&0<ae.indexOf("Unknown SID")?(this.s=3,ut(12)):(this.s=0,ut(13)),Tn(this),Hr(this)}}}catch{}finally{}};function al(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Cc(l,f){var y=l.C,T=f.indexOf(`
`,y);return T==-1?xi:(y=Number(f.substring(y,T)),isNaN(y)?Bo:(T+=1,T+y>f.length?xi:(f=f.slice(T,T+y),l.C=T+y,f)))}On.prototype.cancel=function(){this.J=!0,Tn(this)};function Qe(l){l.S=Date.now()+l.I,ll(l,l.I)}function ll(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Dn(D(l.ba,l),f)}function Ls(l){l.B&&(m.clearTimeout(l.B),l.B=null)}On.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(zo(this.i,this.A),this.L!=2&&(gr(),ut(17)),Tn(this),this.s=2,Hr(this)):ll(this,this.S-l)};function Hr(l){l.j.G==0||l.J||Oi(l.j,l)}function Tn(l){Ls(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,Vo(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function Ho(l,f){try{var y=l.j;if(y.G!=0&&(y.g==l||Gt(y.h,l))){if(!l.K&&Gt(y.h,l)&&y.G==3){try{var T=y.Da.g.parse(f)}catch{T=null}if(Array.isArray(T)&&T.length==3){var O=T;if(O[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<l.F)Li(y),zn(y);else break e;Vi(y),ut(18)}}else y.za=O[1],0<y.za-y.T&&37500>O[2]&&y.F&&y.v==0&&!y.C&&(y.C=Dn(D(y.Za,y),6e3));if(1>=cl(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Er(y,11)}else if((l.K||y.g==l)&&Li(y),!G(f))for(O=y.Da.g.parse(f),f=0;f<O.length;f++){let Fe=O[f];if(y.T=Fe[0],Fe=Fe[1],y.G==2)if(Fe[0]=="c"){y.K=Fe[1],y.ia=Fe[2];const It=Fe[3];It!=null&&(y.la=It,y.j.info("VER="+y.la));const ft=Fe[4];ft!=null&&(y.Aa=ft,y.j.info("SVER="+y.Aa));const xn=Fe[5];xn!=null&&typeof xn=="number"&&0<xn&&(T=1.5*xn,y.L=T,y.j.info("backChannelRequestTimeoutMs_="+T)),T=y;const mn=l.g;if(mn){const Bs=mn.g?mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bs){var B=T.h;B.g||Bs.indexOf("spdy")==-1&&Bs.indexOf("quic")==-1&&Bs.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(qo(B,B.h),B.h=null))}if(T.D){const ji=mn.g?mn.g.getResponseHeader("X-HTTP-Session-Id"):null;ji&&(T.ya=ji,Ge(T.I,T.D,ji))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-l.F,y.j.info("Handshake RTT: "+y.R+"ms")),T=y;var ae=l;if(T.qa=Il(T,T.J?T.ia:null,T.W),ae.K){hl(T.h,ae);var We=ae,_t=T.L;_t&&(We.I=_t),We.B&&(Ls(We),Qe(We)),T.g=ae}else zs(T);0<y.i.length&&er(y)}else Fe[0]!="stop"&&Fe[0]!="close"||Er(y,7);else y.G==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?Er(y,7):Pt(y):Fe[0]!="noop"&&y.l&&y.l.ta(Fe),y.v=0)}}gr(4)}catch{}}var ul=class{constructor(l,f){this.g=l,this.map=f}};function Os(l){this.l=l||10,m.PerformanceNavigationTiming?(l=m.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function dn(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function cl(l){return l.h?1:l.g?l.g.size:0}function Gt(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function qo(l,f){l.g?l.g.add(f):l.h=f}function hl(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}Os.prototype.cancel=function(){if(this.i=dl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function dl(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const y of l.g.values())f=f.concat(y.D);return f}return W(l.i)}function Ci(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(g(l)){for(var f=[],y=l.length,T=0;T<y;T++)f.push(l[T]);return f}f=[],y=0;for(T in l)f[y++]=l[T];return f}function Ai(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(g(l)||typeof l=="string"){var f=[];l=l.length;for(var y=0;y<l;y++)f.push(y);return f}f=[],y=0;for(const T in l)f[y++]=T;return f}}}function qr(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(g(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var y=Ai(l),T=Ci(l),O=T.length,B=0;B<O;B++)f.call(void 0,T[B],y&&y[B],l)}var Ms=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ac(l,f){if(l){l=l.split("&");for(var y=0;y<l.length;y++){var T=l[y].indexOf("="),O=null;if(0<=T){var B=l[y].substring(0,T);O=l[y].substring(T+1)}else B=l[y];f(B,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function yr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof yr){this.h=l.h,js(this,l.j),this.o=l.o,this.g=l.g,Wr(this,l.s),this.l=l.l;var f=l.i,y=new Yn;y.i=f.i,f.g&&(y.g=new Map(f.g),y.h=f.h),Kr(this,y),this.m=l.m}else l&&(f=String(l).match(Ms))?(this.h=!1,js(this,f[1]||"",!0),this.o=Me(f[2]||""),this.g=Me(f[3]||"",!0),Wr(this,f[4]),this.l=Me(f[5]||"",!0),Kr(this,f[6]||"",!0),this.m=Me(f[7]||"")):(this.h=!1,this.i=new Yn(null,this.h))}yr.prototype.toString=function(){var l=[],f=this.j;f&&l.push(Qr(f,ki,!0),":");var y=this.g;return(y||f=="file")&&(l.push("//"),(f=this.o)&&l.push(Qr(f,ki,!0),"@"),l.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&l.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(Qr(y,y.charAt(0)=="/"?ml:pl,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",Qr(y,Wo)),l.join("")};function fn(l){return new yr(l)}function js(l,f,y){l.j=y?Me(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function Wr(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function Kr(l,f,y){f instanceof Yn?(l.i=f,Jn(l.i,l.h)):(y||(f=Qr(f,gl)),l.i=new Yn(f,l.h))}function Ge(l,f,y){l.i.set(f,y)}function Gr(l){return Ge(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Me(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Qr(l,f,y){return typeof l=="string"?(l=encodeURI(l).replace(f,fl),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function fl(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ki=/[#\/\?@]/g,pl=/[#\?:]/g,ml=/[#\?]/g,gl=/[#\?@]/g,Wo=/#/g;function Yn(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function Rt(l){l.g||(l.g=new Map,l.h=0,l.i&&Ac(l.i,function(f,y){l.add(decodeURIComponent(f.replace(/\+/g," ")),y)}))}s=Yn.prototype,s.add=function(l,f){Rt(this),this.i=null,l=In(this,l);var y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(f),this.h+=1,this};function Mn(l,f){Rt(l),f=In(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function jn(l,f){return Rt(l),f=In(l,f),l.g.has(f)}s.forEach=function(l,f){Rt(this),this.g.forEach(function(y,T){y.forEach(function(O){l.call(f,O,T,this)},this)},this)},s.na=function(){Rt(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),y=[];for(let T=0;T<f.length;T++){const O=l[T];for(let B=0;B<O.length;B++)y.push(f[T])}return y},s.V=function(l){Rt(this);let f=[];if(typeof l=="string")jn(this,l)&&(f=f.concat(this.g.get(In(this,l))));else{l=Array.from(this.g.values());for(let y=0;y<l.length;y++)f=f.concat(l[y])}return f},s.set=function(l,f){return Rt(this),this.i=null,l=In(this,l),jn(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},s.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function Xr(l,f,y){Mn(l,f),0<y.length&&(l.i=null,l.g.set(In(l,f),W(y)),l.h+=y.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var y=0;y<f.length;y++){var T=f[y];const B=encodeURIComponent(String(T)),ae=this.V(T);for(T=0;T<ae.length;T++){var O=B;ae[T]!==""&&(O+="="+encodeURIComponent(String(ae[T]))),l.push(O)}}return this.i=l.join("&")};function In(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function Jn(l,f){f&&!l.j&&(Rt(l),l.i=null,l.g.forEach(function(y,T){var O=T.toLowerCase();T!=O&&(Mn(this,T),Xr(this,O,y))},l)),l.j=f}function kc(l,f){const y=new bs;if(m.Image){const T=new Image;T.onload=U(Zt,y,"TestLoadImage: loaded",!0,f,T),T.onerror=U(Zt,y,"TestLoadImage: error",!1,f,T),T.onabort=U(Zt,y,"TestLoadImage: abort",!1,f,T),T.ontimeout=U(Zt,y,"TestLoadImage: timeout",!1,f,T),m.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=l}else f(!1)}function yl(l,f){const y=new bs,T=new AbortController,O=setTimeout(()=>{T.abort(),Zt(y,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:T.signal}).then(B=>{clearTimeout(O),B.ok?Zt(y,"TestPingServer: ok",!0,f):Zt(y,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),Zt(y,"TestPingServer: error",!1,f)})}function Zt(l,f,y,T,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),T(y)}catch{}}function Rc(){this.g=new Mo}function vl(l,f,y){const T=y||"";try{qr(l,function(O,B){let ae=O;_(O)&&(ae=Lo(O)),f.push(T+B+"="+encodeURIComponent(ae))})}catch(O){throw f.push(T+"type="+encodeURIComponent("_badmap")),O}}function vr(l){this.l=l.Ub||null,this.j=l.eb||!1}$(vr,Ps),vr.prototype.g=function(){return new Fs(this.l,this.j)},vr.prototype.i=function(l){return function(){return l}}({});function Fs(l,f){yt.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}$(Fs,yt),s=Fs.prototype,s.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Un(this)},s.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||m).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fn(this)),this.readyState=0},s.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Un(this)),this.g&&(this.readyState=3,Un(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_l(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function _l(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}s.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Fn(this):Un(this),this.readyState==3&&_l(this)}},s.Ra=function(l){this.g&&(this.response=this.responseText=l,Fn(this))},s.Qa=function(l){this.g&&(this.response=l,Fn(this))},s.ga=function(){this.g&&Fn(this)};function Fn(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Un(l)}s.setRequestHeader=function(l,f){this.u.append(l,f)},s.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var y=f.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=f.next();return l.join(`\r
`)};function Un(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Fs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function _r(l){let f="";return oe(l,function(y,T){f+=T,f+=":",f+=y,f+=`\r
`}),f}function Yr(l,f,y){e:{for(T in y){var T=!1;break e}T=!0}T||(y=_r(y),typeof l=="string"?y!=null&&encodeURIComponent(String(y)):Ge(l,f,y))}function tt(l){yt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}$(tt,yt);var Pc=/^https?$/i,Ko=["POST","PUT"];s=tt.prototype,s.Ha=function(l){this.J=l},s.ea=function(l,f,y,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ln.g(),this.v=this.o?vi(this.o):vi(Ln),this.g.onreadystatechange=D(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(B){Us(this,B);return}if(l=y||"",y=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var O in T)y.set(O,T[O]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const B of T.keys())y.set(B,T.get(B));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(y.keys()).find(B=>B.toLowerCase()=="content-type"),O=m.FormData&&l instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Ko,f,void 0))||T||O||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,ae]of y)this.g.setRequestHeader(B,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Pi(this),this.u=!0,this.g.send(l),this.u=!1}catch(B){Us(this,B)}};function Us(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,Ri(l),pn(l)}function Ri(l){l.A||(l.A=!0,vt(l,"complete"),vt(l,"error"))}s.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,vt(this,"complete"),vt(this,"abort"),pn(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pn(this,!0)),tt.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Go(this):this.bb())},s.bb=function(){Go(this)};function Go(l){if(l.h&&typeof h<"u"&&(!l.v[1]||en(l)!=4||l.Z()!=2)){if(l.u&&en(l)==4)bo(l.Ea,0,l);else if(vt(l,"readystatechange"),en(l)==4){l.h=!1;try{const ae=l.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var y;if(!(y=f)){var T;if(T=ae===0){var O=String(l.D).match(Ms)[1]||null;!O&&m.self&&m.self.location&&(O=m.self.location.protocol.slice(0,-1)),T=!Pc.test(O?O.toLowerCase():"")}y=T}if(y)vt(l,"complete"),vt(l,"success");else{l.m=6;try{var B=2<en(l)?l.g.statusText:""}catch{B=""}l.l=B+" ["+l.Z()+"]",Ri(l)}}finally{pn(l)}}}}function pn(l,f){if(l.g){Pi(l);const y=l.g,T=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||vt(l,"ready");try{y.onreadystatechange=T}catch{}}}function Pi(l){l.I&&(m.clearTimeout(l.I),l.I=null)}s.isActive=function(){return!!this.g};function en(l){return l.g?l.g.readyState:0}s.Z=function(){try{return 2<en(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),Oo(f)}};function Qo(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Ni(l){const f={};l=(l.g&&2<=en(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<l.length;T++){if(G(l[T]))continue;var y=C(l[T]);const O=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const B=f[O]||[];f[O]=B,B.push(y)}P(f,function(T){return T.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zn(l,f,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||f}function Xo(l){this.Aa=0,this.i=[],this.j=new bs,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Zn("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Zn("baseRetryDelayMs",5e3,l),this.cb=Zn("retryDelaySeedMs",1e4,l),this.Wa=Zn("forwardChannelMaxRetries",2,l),this.wa=Zn("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Os(l&&l.concurrentRequestLimit),this.Da=new Rc,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Xo.prototype,s.la=8,s.G=1,s.connect=function(l,f,y,T){ut(0),this.W=l,this.H=f||{},y&&T!==void 0&&(this.H.OSID=y,this.H.OAID=T),this.F=this.X,this.I=Il(this,null,this.W),er(this)};function Pt(l){if(bi(l),l.G==3){var f=l.U++,y=fn(l.I);if(Ge(y,"SID",l.K),Ge(y,"RID",f),Ge(y,"TYPE","terminate"),wr(l,y),f=new On(l,l.j,f),f.L=2,f.v=Gr(fn(y)),y=!1,m.navigator&&m.navigator.sendBeacon)try{y=m.navigator.sendBeacon(f.v.toString(),"")}catch{}!y&&m.Image&&(new Image().src=f.v,y=!0),y||(f.g=xl(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Qe(f)}Tl(l)}function zn(l){l.g&&(Yo(l),l.g.cancel(),l.g=null)}function bi(l){zn(l),l.u&&(m.clearTimeout(l.u),l.u=null),Li(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&m.clearTimeout(l.s),l.s=null)}function er(l){if(!dn(l.h)&&!l.s){l.s=!0;var f=l.Ga;ye||le(),Z||(ye(),Z=!0),de.add(f,l),l.B=0}}function Nc(l,f){return cl(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Dn(D(l.Ga,l,f),El(l,l.B)),l.B++,!0)}s.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const O=new On(this,this.j,l);let B=this.o;if(this.S&&(B?(B=I(B),N(B,this.S)):B=this.S),this.m!==null||this.O||(O.H=B,B=null),this.P)e:{for(var f=0,y=0;y<this.i.length;y++){t:{var T=this.i[y];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(f+=T,4096<f){f=y;break e}if(f===4096||y===this.i.length-1){f=y+1;break e}}f=1e3}else f=1e3;f=Jr(this,O,f),y=fn(this.I),Ge(y,"RID",l),Ge(y,"CVER",22),this.D&&Ge(y,"X-HTTP-Session-Id",this.D),wr(this,y),B&&(this.O?f="headers="+encodeURIComponent(String(_r(B)))+"&"+f:this.m&&Yr(y,this.m,B)),qo(this.h,O),this.Ua&&Ge(y,"TYPE","init"),this.P?(Ge(y,"$req",f),Ge(y,"SID","null"),O.T=!0,Si(O,y,null)):Si(O,y,f),this.G=2}}else this.G==3&&(l?Di(this,l):this.i.length==0||dn(this.h)||Di(this))};function Di(l,f){var y;f?y=f.l:y=l.U++;const T=fn(l.I);Ge(T,"SID",l.K),Ge(T,"RID",y),Ge(T,"AID",l.T),wr(l,T),l.m&&l.o&&Yr(T,l.m,l.o),y=new On(l,l.j,y,l.B+1),l.m===null&&(y.H=l.o),f&&(l.i=f.D.concat(l.i)),f=Jr(l,y,1e3),y.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),qo(l.h,y),Si(y,T,f)}function wr(l,f){l.H&&oe(l.H,function(y,T){Ge(f,T,y)}),l.l&&qr({},function(y,T){Ge(f,T,y)})}function Jr(l,f,y){y=Math.min(l.i.length,y);var T=l.l?D(l.l.Na,l.l,l):null;e:{var O=l.i;let B=-1;for(;;){const ae=["count="+y];B==-1?0<y?(B=O[0].g,ae.push("ofs="+B)):B=0:ae.push("ofs="+B);let We=!0;for(let _t=0;_t<y;_t++){let Fe=O[_t].g;const It=O[_t].map;if(Fe-=B,0>Fe)B=Math.max(0,O[_t].g-100),We=!1;else try{vl(It,ae,"req"+Fe+"_")}catch{T&&T(It)}}if(We){T=ae.join("&");break e}}}return l=l.i.splice(0,y),f.D=l,T}function zs(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;ye||le(),Z||(ye(),Z=!0),de.add(f,l),l.v=0}}function Vi(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Dn(D(l.Fa,l),El(l,l.v)),l.v++,!0)}s.Fa=function(){if(this.u=null,wl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Dn(D(this.ab,this),l)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ut(10),zn(this),wl(this))};function Yo(l){l.A!=null&&(m.clearTimeout(l.A),l.A=null)}function wl(l){l.g=new On(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=fn(l.qa);Ge(f,"RID","rpc"),Ge(f,"SID",l.K),Ge(f,"AID",l.T),Ge(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ge(f,"TO",l.ja),Ge(f,"TYPE","xmlhttp"),wr(l,f),l.m&&l.o&&Yr(f,l.m,l.o),l.L&&(l.g.I=l.L);var y=l.g;l=l.ia,y.L=1,y.v=Gr(fn(f)),y.m=null,y.P=!0,$o(y,l)}s.Za=function(){this.C!=null&&(this.C=null,zn(this),Vi(this),ut(19))};function Li(l){l.C!=null&&(m.clearTimeout(l.C),l.C=null)}function Oi(l,f){var y=null;if(l.g==f){Li(l),Yo(l),l.g=null;var T=2}else if(Gt(l.h,f))y=f.D,hl(l.h,f),T=1;else return;if(l.G!=0){if(f.o)if(T==1){y=f.m?f.m.length:0,f=Date.now()-f.F;var O=l.B;T=Ns(),vt(T,new Ei(T,y)),er(l)}else zs(l);else if(O=f.s,O==3||O==0&&0<f.X||!(T==1&&Nc(l,f)||T==2&&Vi(l)))switch(y&&0<y.length&&(f=l.h,f.i=f.i.concat(y)),O){case 1:Er(l,5);break;case 4:Er(l,10);break;case 3:Er(l,6);break;default:Er(l,2)}}}function El(l,f){let y=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(y*=2),y*f}function Er(l,f){if(l.j.info("Error code "+f),f==2){var y=D(l.fb,l),T=l.Xa;const O=!T;T=new yr(T||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||js(T,"https"),Gr(T),O?kc(T.toString(),y):yl(T.toString(),y)}else ut(2);l.G=0,l.l&&l.l.sa(f),Tl(l),bi(l)}s.fb=function(l){l?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function Tl(l){if(l.G=0,l.ka=[],l.l){const f=dl(l.h);(f.length!=0||l.i.length!=0)&&(j(l.ka,f),j(l.ka,l.i),l.h.i.length=0,W(l.i),l.i.length=0),l.l.ra()}}function Il(l,f,y){var T=y instanceof yr?fn(y):new yr(y);if(T.g!="")f&&(T.g=f+"."+T.g),Wr(T,T.s);else{var O=m.location;T=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;var B=new yr(null);T&&js(B,T),f&&(B.g=f),O&&Wr(B,O),y&&(B.l=y),T=B}return y=l.D,f=l.ya,y&&f&&Ge(T,y,f),Ge(T,"VER",l.la),wr(l,T),T}function xl(l,f,y){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new tt(new vr({eb:y})):new tt(l.pa),f.Ha(l.J),f}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jo(){}s=Jo.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Mi(){}Mi.prototype.g=function(l,f){return new Qt(l,f)};function Qt(l,f){yt.call(this),this.g=new Xo(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!G(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!G(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new tr(this)}$(Qt,yt),Qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Qt.prototype.close=function(){Pt(this.g)},Qt.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.u&&(y={},y.__data__=Lo(l),l=y);f.i.push(new ul(f.Ya++,l)),f.G==3&&er(f)},Qt.prototype.N=function(){this.g.l=null,delete this.j,Pt(this.g),delete this.g,Qt.aa.N.call(this)};function Sl(l){Qn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const y in f){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}$(Sl,Qn);function Cl(){wi.call(this),this.status=1}$(Cl,wi);function tr(l){this.g=l}$(tr,Jo),tr.prototype.ua=function(){vt(this.g,"a")},tr.prototype.ta=function(l){vt(this.g,new Sl(l))},tr.prototype.sa=function(l){vt(this.g,new Cl)},tr.prototype.ra=function(){vt(this.g,"b")},Mi.prototype.createWebChannel=Mi.prototype.g,Qt.prototype.send=Qt.prototype.o,Qt.prototype.open=Qt.prototype.m,Qt.prototype.close=Qt.prototype.close,pv=function(){return new Mi},fv=function(){return Ns()},dv=Xn,Td={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ii.NO_ERROR=0,Ii.TIMEOUT=8,Ii.HTTP_ERROR=6,Ru=Ii,il.COMPLETE="complete",hv=il,_i.EventType=En,En.OPEN="a",En.CLOSE="b",En.ERROR="c",En.MESSAGE="d",yt.prototype.listen=yt.prototype.K,xa=_i,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,cv=tt}).apply(typeof Eu<"u"?Eu:typeof self<"u"?self:typeof window<"u"?window:{});const kg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $t=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let So="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi=new Ud("@firebase/firestore");function Ia(){return oi.logLevel}function _e(s,...e){if(oi.logLevel<=je.DEBUG){const t=e.map(Jd);oi.debug(`Firestore (${So}): ${s}`,...t)}}function Fr(s,...e){if(oi.logLevel<=je.ERROR){const t=e.map(Jd);oi.error(`Firestore (${So}): ${s}`,...t)}}function mo(s,...e){if(oi.logLevel<=je.WARN){const t=e.map(Jd);oi.warn(`Firestore (${So}): ${s}`,...t)}}function Jd(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(s="Unexpected state"){const e=`FIRESTORE (${So}) INTERNAL ASSERTION FAILED: `+s;throw Fr(e),new Error(e)}function Ke(s,e){s||Pe()}function De(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Br{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t($t.UNAUTHENTICATED))}shutdown(){}}class RI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class PI{constructor(e){this.t=e,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ke(this.o===void 0);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let u=new Vr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Vr,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const g=u;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},m=g=>{_e("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(g=>m(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(_e("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Vr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(_e("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ke(typeof i.accessToken=="string"),new mv(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string"),new $t(e)}}class NI{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class bI{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new NI(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t($t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class DI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class VI{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ke(this.o===void 0);const i=u=>{u.error!=null&&_e("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.R;return this.R=u.token,_e("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>i(u))};const o=u=>{_e("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):_e("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ke(typeof t.token=="string"),this.R=t.token,new DI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<s;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=LI(40);for(let u=0;u<o.length;++u)i.length<20&&o[u]<t&&(i+=e.charAt(o[u]%e.length))}return i}}function He(s,e){return s<e?-1:s>e?1:0}function go(s,e,t){return s.length===e.length&&s.every((i,o)=>t(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new pe(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Tt(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.timestamp=e}static fromTimestamp(e){return new be(e)}static min(){return new be(new Tt(0,0))}static max(){return new be(new Tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(e,t,i){t===void 0?t=0:t>e.length&&Pe(),i===void 0?i=e.length-t:i>e.length-t&&Pe(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return La.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof La?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const u=e.get(o),h=t.get(o);if(u<h)return-1;if(u>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ze extends La{construct(e,t,i){return new Ze(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new pe(K.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new Ze(t)}static emptyPath(){return new Ze([])}}const OI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vt extends La{construct(e,t,i){return new Vt(e,t,i)}static isValidIdentifier(e){return OI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Vt(["__name__"])}static fromServerFormat(e){const t=[];let i="",o=0;const u=()=>{if(i.length===0)throw new pe(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new pe(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new pe(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(i+=m,o++):(u(),o++)}if(u(),h)throw new pe(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vt(t)}static emptyPath(){return new Vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(Ze.fromString(e))}static fromName(e){return new Se(Ze.fromString(e).popFirst(5))}static empty(){return new Se(Ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ze.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new Ze(e.slice()))}}function MI(s,e){const t=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,o=be.fromTimestamp(i===1e9?new Tt(t+1,0):new Tt(t,i));return new xs(o,Se.empty(),e)}function jI(s){return new xs(s.readTime,s.key,-1)}class xs{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new xs(be.min(),Se.empty(),-1)}static max(){return new xs(be.max(),Se.empty(),-1)}}function FI(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=Se.comparator(s.documentKey,e.documentKey),t!==0?t:He(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qa(s){if(s.code!==K.FAILED_PRECONDITION||s.message!==UI)throw s;_e("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Pe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new J((i,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(i,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof J?t:J.resolve(t)}catch(t){return J.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):J.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):J.reject(t)}static resolve(e){return new J((t,i)=>{t(e)})}static reject(e){return new J((t,i)=>{i(e)})}static waitFor(e){return new J((t,i)=>{let o=0,u=0,h=!1;e.forEach(m=>{++o,m.next(()=>{++u,h&&u===o&&t()},g=>i(g))}),h=!0,u===o&&t()})}static or(e){let t=J.resolve(!1);for(const i of e)t=t.next(o=>o?J.resolve(o):i());return t}static forEach(e,t){const i=[];return e.forEach((o,u)=>{i.push(t.call(this,o,u))}),this.waitFor(i)}static mapArray(e,t){return new J((i,o)=>{const u=e.length,h=new Array(u);let m=0;for(let g=0;g<u;g++){const _=g;t(e[_]).next(E=>{h[_]=E,++m,m===u&&i(h)},E=>o(E))}})}static doWhile(e,t){return new J((i,o)=>{const u=()=>{e()===!0?t().next(()=>{u()},o):i()};u()})}}function BI(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Xa(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Zd.oe=-1;function ic(s){return s==null}function Hu(s){return s===0&&1/s==-1/0}function $I(s){return typeof s=="number"&&Number.isInteger(s)&&!Hu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function hi(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function yv(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,t){this.comparator=e,this.root=t||Dt.EMPTY}insert(e,t){return new it(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dt.BLACK,null,null))}remove(e){return new it(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Tu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Tu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Tu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Tu(this.root,e,this.comparator,!0)}}class Tu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?i(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dt{constructor(e,t,i,o,u){this.key=e,this.value=t,this.color=i??Dt.RED,this.left=o??Dt.EMPTY,this.right=u??Dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,u){return new Dt(e??this.key,t??this.value,i??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const u=i(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,i),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Dt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Pe();const e=this.left.check();if(e!==this.right.check())throw Pe();return e+(this.isRed()?0:1)}}Dt.EMPTY=null,Dt.RED=!0,Dt.BLACK=!1;Dt.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe()}get value(){throw Pe()}get color(){throw Pe()}get left(){throw Pe()}get right(){throw Pe()}copy(e,t,i,o,u){return this}insert(e,t,i){return new Dt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Pg(this.data.getIterator())}getIteratorFrom(e){return new Pg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=i.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Lt(this.comparator);return t.data=e,t}}class Pg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.fields=e,e.sort(Vt.comparator)}static empty(){return new wn([])}unionWith(e){let t=new Lt(Vt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new wn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return go(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new vv("Invalid base64 string: "+u):u}}(e);return new Mt(t)}static fromUint8Array(e){const t=function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u}(e);return new Mt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mt.EMPTY_BYTE_STRING=new Mt("");const HI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ss(s){if(Ke(!!s),typeof s=="string"){let e=0;const t=HI.exec(s);if(Ke(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ht(s.seconds),nanos:ht(s.nanos)}}function ht(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function ai(s){return typeof s=="string"?Mt.fromBase64String(s):Mt.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(s){var e,t;return((t=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function tf(s){const e=s.mapValue.fields.__previous_value__;return ef(e)?tf(e):e}function Oa(s){const e=Ss(s.mapValue.fields.__local_write_time__.timestampValue);return new Tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,t,i,o,u,h,m,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=_}}class Ma{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ma("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ma&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iu={mapValue:{}};function li(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?ef(s)?4:KI(s)?9007199254740991:WI(s)?10:11:Pe()}function dr(s,e){if(s===e)return!0;const t=li(s);if(t!==li(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Oa(s).isEqual(Oa(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=Ss(o.timestampValue),m=Ss(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(o,u){return ai(o.bytesValue).isEqual(ai(u.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(o,u){return ht(o.geoPointValue.latitude)===ht(u.geoPointValue.latitude)&&ht(o.geoPointValue.longitude)===ht(u.geoPointValue.longitude)}(s,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return ht(o.integerValue)===ht(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=ht(o.doubleValue),m=ht(u.doubleValue);return h===m?Hu(h)===Hu(m):isNaN(h)&&isNaN(m)}return!1}(s,e);case 9:return go(s.arrayValue.values||[],e.arrayValue.values||[],dr);case 10:case 11:return function(o,u){const h=o.mapValue.fields||{},m=u.mapValue.fields||{};if(Rg(h)!==Rg(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!dr(h[g],m[g])))return!1;return!0}(s,e);default:return Pe()}}function ja(s,e){return(s.values||[]).find(t=>dr(t,e))!==void 0}function yo(s,e){if(s===e)return 0;const t=li(s),i=li(e);if(t!==i)return He(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return He(s.booleanValue,e.booleanValue);case 2:return function(u,h){const m=ht(u.integerValue||u.doubleValue),g=ht(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1}(s,e);case 3:return Ng(s.timestampValue,e.timestampValue);case 4:return Ng(Oa(s),Oa(e));case 5:return He(s.stringValue,e.stringValue);case 6:return function(u,h){const m=ai(u),g=ai(h);return m.compareTo(g)}(s.bytesValue,e.bytesValue);case 7:return function(u,h){const m=u.split("/"),g=h.split("/");for(let _=0;_<m.length&&_<g.length;_++){const E=He(m[_],g[_]);if(E!==0)return E}return He(m.length,g.length)}(s.referenceValue,e.referenceValue);case 8:return function(u,h){const m=He(ht(u.latitude),ht(h.latitude));return m!==0?m:He(ht(u.longitude),ht(h.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return bg(s.arrayValue,e.arrayValue);case 10:return function(u,h){var m,g,_,E;const R=u.fields||{},D=h.fields||{},U=(m=R.value)===null||m===void 0?void 0:m.arrayValue,$=(g=D.value)===null||g===void 0?void 0:g.arrayValue,W=He(((_=U==null?void 0:U.values)===null||_===void 0?void 0:_.length)||0,((E=$==null?void 0:$.values)===null||E===void 0?void 0:E.length)||0);return W!==0?W:bg(U,$)}(s.mapValue,e.mapValue);case 11:return function(u,h){if(u===Iu.mapValue&&h===Iu.mapValue)return 0;if(u===Iu.mapValue)return 1;if(h===Iu.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),_=h.fields||{},E=Object.keys(_);g.sort(),E.sort();for(let R=0;R<g.length&&R<E.length;++R){const D=He(g[R],E[R]);if(D!==0)return D;const U=yo(m[g[R]],_[E[R]]);if(U!==0)return U}return He(g.length,E.length)}(s.mapValue,e.mapValue);default:throw Pe()}}function Ng(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return He(s,e);const t=Ss(s),i=Ss(e),o=He(t.seconds,i.seconds);return o!==0?o:He(t.nanos,i.nanos)}function bg(s,e){const t=s.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const u=yo(t[o],i[o]);if(u)return u}return He(t.length,i.length)}function vo(s){return Id(s)}function Id(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(t){const i=Ss(t);return`time(${i.seconds},${i.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(t){return ai(t).toBase64()}(s.bytesValue):"referenceValue"in s?function(t){return Se.fromName(t).toString()}(s.referenceValue):"geoPointValue"in s?function(t){return`geo(${t.latitude},${t.longitude})`}(s.geoPointValue):"arrayValue"in s?function(t){let i="[",o=!0;for(const u of t.values||[])o?o=!1:i+=",",i+=Id(u);return i+"]"}(s.arrayValue):"mapValue"in s?function(t){const i=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const h of i)u?u=!1:o+=",",o+=`${h}:${Id(t.fields[h])}`;return o+"}"}(s.mapValue):Pe()}function Dg(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function xd(s){return!!s&&"integerValue"in s}function nf(s){return!!s&&"arrayValue"in s}function Vg(s){return!!s&&"nullValue"in s}function Lg(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Pu(s){return!!s&&"mapValue"in s}function WI(s){var e,t;return((t=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Ra(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return hi(s.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Ra(i)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ra(s.arrayValue.values[t]);return e}return Object.assign({},s)}function KI(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Pu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ra(t)}setAll(e){let t=Vt.emptyPath(),i={},o=[];e.forEach((h,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=m.popLast()}h?i[m.lastSegment()]=Ra(h):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,i,o)}delete(e){const t=this.field(e.popLast());Pu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return dr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Pu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){hi(t,(o,u)=>e[o]=u);for(const o of i)delete e[o]}clone(){return new ln(Ra(this.value))}}function _v(s){const e=[];return hi(s.fields,(t,i)=>{const o=new Vt([t]);if(Pu(i)){const u=_v(i.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)}),new wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,t,i,o,u,h,m){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(e){return new Ht(e,0,be.min(),be.min(),be.min(),ln.empty(),0)}static newFoundDocument(e,t,i,o){return new Ht(e,1,t,be.min(),i,o,0)}static newNoDocument(e,t){return new Ht(e,2,t,be.min(),be.min(),ln.empty(),0)}static newUnknownDocument(e,t){return new Ht(e,3,t,be.min(),be.min(),ln.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,t){this.position=e,this.inclusive=t}}function Og(s,e,t){let i=0;for(let o=0;o<s.position.length;o++){const u=e[o],h=s.position[o];if(u.field.isKeyField()?i=Se.comparator(Se.fromName(h.referenceValue),t.key):i=yo(h,t.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function Mg(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!dr(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,t="asc"){this.field=e,this.dir=t}}function GI(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{}class gt extends wv{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new XI(e,t,i):t==="array-contains"?new ZI(e,i):t==="in"?new ex(e,i):t==="not-in"?new tx(e,i):t==="array-contains-any"?new nx(e,i):new gt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new YI(e,i):new JI(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(yo(t,this.value)):t!==null&&li(this.value)===li(t)&&this.matchesComparison(yo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gn extends wv{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Gn(e,t)}matches(e){return Ev(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Ev(s){return s.op==="and"}function Tv(s){return QI(s)&&Ev(s)}function QI(s){for(const e of s.filters)if(e instanceof Gn)return!1;return!0}function Sd(s){if(s instanceof gt)return s.field.canonicalString()+s.op.toString()+vo(s.value);if(Tv(s))return s.filters.map(e=>Sd(e)).join(",");{const e=s.filters.map(t=>Sd(t)).join(",");return`${s.op}(${e})`}}function Iv(s,e){return s instanceof gt?function(i,o){return o instanceof gt&&i.op===o.op&&i.field.isEqual(o.field)&&dr(i.value,o.value)}(s,e):s instanceof Gn?function(i,o){return o instanceof Gn&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((u,h,m)=>u&&Iv(h,o.filters[m]),!0):!1}(s,e):void Pe()}function xv(s){return s instanceof gt?function(t){return`${t.field.canonicalString()} ${t.op} ${vo(t.value)}`}(s):s instanceof Gn?function(t){return t.op.toString()+" {"+t.getFilters().map(xv).join(" ,")+"}"}(s):"Filter"}class XI extends gt{constructor(e,t,i){super(e,t,i),this.key=Se.fromName(i.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class YI extends gt{constructor(e,t){super(e,"in",t),this.keys=Sv("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class JI extends gt{constructor(e,t){super(e,"not-in",t),this.keys=Sv("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Sv(s,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Se.fromName(i.referenceValue))}class ZI extends gt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return nf(t)&&ja(t.arrayValue,this.value)}}class ex extends gt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ja(this.value.arrayValue,t)}}class tx extends gt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ja(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!ja(this.value.arrayValue,t)}}class nx extends gt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!nf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>ja(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e,t=null,i=[],o=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.ue=null}}function jg(s,e=null,t=[],i=[],o=null,u=null,h=null){return new rx(s,e,t,i,o,u,h)}function rf(s){const e=De(s);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Sd(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(u){return u.field.canonicalString()+u.dir}(i)).join(","),ic(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>vo(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>vo(i)).join(",")),e.ue=t}return e.ue}function sf(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!GI(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!Iv(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Mg(s.startAt,e.startAt)&&Mg(s.endAt,e.endAt)}function Cd(s){return Se.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,t=null,i=[],o=[],u=null,h="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=g,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function sx(s,e,t,i,o,u,h,m){return new Ya(s,e,t,i,o,u,h,m)}function oc(s){return new Ya(s)}function Fg(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Cv(s){return s.collectionGroup!==null}function Pa(s){const e=De(s);if(e.ce===null){e.ce=[];const t=new Set;for(const u of e.explicitOrderBy)e.ce.push(u),t.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new Lt(Vt.comparator);return h.filters.forEach(g=>{g.getFlattenedFilters().forEach(_=>{_.isInequality()&&(m=m.add(_.field))})}),m})(e).forEach(u=>{t.has(u.canonicalString())||u.isKeyField()||e.ce.push(new Wu(u,i))}),t.has(Vt.keyField().canonicalString())||e.ce.push(new Wu(Vt.keyField(),i))}return e.ce}function ur(s){const e=De(s);return e.le||(e.le=ix(e,Pa(s))),e.le}function ix(s,e){if(s.limitType==="F")return jg(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new Wu(o.field,u)});const t=s.endAt?new qu(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new qu(s.startAt.position,s.startAt.inclusive):null;return jg(s.path,s.collectionGroup,e,s.filters,s.limit,t,i)}}function Ad(s,e){const t=s.filters.concat([e]);return new Ya(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function kd(s,e,t){return new Ya(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function ac(s,e){return sf(ur(s),ur(e))&&s.limitType===e.limitType}function Av(s){return`${rf(ur(s))}|lt:${s.limitType}`}function io(s){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(o=>xv(o)).join(", ")}]`),ic(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>vo(o)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>vo(o)).join(",")),`Target(${i})`}(ur(s))}; limitType=${s.limitType})`}function lc(s,e){return e.isFoundDocument()&&function(i,o){const u=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):Se.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)}(s,e)&&function(i,o){for(const u of Pa(i))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(s,e)&&function(i,o){for(const u of i.filters)if(!u.matches(o))return!1;return!0}(s,e)&&function(i,o){return!(i.startAt&&!function(h,m,g){const _=Og(h,m,g);return h.inclusive?_<=0:_<0}(i.startAt,Pa(i),o)||i.endAt&&!function(h,m,g){const _=Og(h,m,g);return h.inclusive?_>=0:_>0}(i.endAt,Pa(i),o))}(s,e)}function ox(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function kv(s){return(e,t)=>{let i=!1;for(const o of Pa(s)){const u=ax(o,e,t);if(u!==0)return u;i=i||o.field.isKeyField()}return 0}}function ax(s,e,t){const i=s.field.isKeyField()?Se.comparator(e.key,t.key):function(u,h,m){const g=h.data.field(u),_=m.data.field(u);return g!==null&&_!==null?yo(g,_):Pe()}(s.field,e,t);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return Pe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,u]of i)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){hi(this.inner,(t,i)=>{for(const[o,u]of i)e(o,u)})}isEmpty(){return yv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=new it(Se.comparator);function Ur(){return lx}const Rv=new it(Se.comparator);function Sa(...s){let e=Rv;for(const t of s)e=e.insert(t.key,t);return e}function Pv(s){let e=Rv;return s.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function ni(){return Na()}function Nv(){return Na()}function Na(){return new Co(s=>s.toString(),(s,e)=>s.isEqual(e))}const ux=new it(Se.comparator),cx=new Lt(Se.comparator);function Oe(...s){let e=cx;for(const t of s)e=e.add(t);return e}const hx=new Lt(He);function dx(){return hx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hu(e)?"-0":e}}function bv(s){return{integerValue:""+s}}function fx(s,e){return $I(e)?bv(e):of(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(){this._=void 0}}function px(s,e,t){return s instanceof Ku?function(o,u){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&ef(u)&&(u=tf(u)),u&&(h.fields.__previous_value__=u),{mapValue:h}}(t,e):s instanceof Fa?Vv(s,e):s instanceof Ua?Lv(s,e):function(o,u){const h=Dv(o,u),m=Ug(h)+Ug(o.Pe);return xd(h)&&xd(o.Pe)?bv(m):of(o.serializer,m)}(s,e)}function mx(s,e,t){return s instanceof Fa?Vv(s,e):s instanceof Ua?Lv(s,e):t}function Dv(s,e){return s instanceof Gu?function(i){return xd(i)||function(u){return!!u&&"doubleValue"in u}(i)}(e)?e:{integerValue:0}:null}class Ku extends uc{}class Fa extends uc{constructor(e){super(),this.elements=e}}function Vv(s,e){const t=Ov(e);for(const i of s.elements)t.some(o=>dr(o,i))||t.push(i);return{arrayValue:{values:t}}}class Ua extends uc{constructor(e){super(),this.elements=e}}function Lv(s,e){let t=Ov(e);for(const i of s.elements)t=t.filter(o=>!dr(o,i));return{arrayValue:{values:t}}}class Gu extends uc{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Ug(s){return ht(s.integerValue||s.doubleValue)}function Ov(s){return nf(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function gx(s,e){return s.field.isEqual(e.field)&&function(i,o){return i instanceof Fa&&o instanceof Fa||i instanceof Ua&&o instanceof Ua?go(i.elements,o.elements,dr):i instanceof Gu&&o instanceof Gu?dr(i.Pe,o.Pe):i instanceof Ku&&o instanceof Ku}(s.transform,e.transform)}class yx{constructor(e,t){this.version=e,this.transformResults=t}}class Nn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Nn}static exists(e){return new Nn(void 0,e)}static updateTime(e){return new Nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nu(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class cc{}function Mv(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new af(s.key,Nn.none()):new Ja(s.key,s.data,Nn.none());{const t=s.data,i=ln.empty();let o=new Lt(Vt.comparator);for(let u of e.fields)if(!o.has(u)){let h=t.field(u);h===null&&u.length>1&&(u=u.popLast(),h=t.field(u)),h===null?i.delete(u):i.set(u,h),o=o.add(u)}return new As(s.key,i,new wn(o.toArray()),Nn.none())}}function vx(s,e,t){s instanceof Ja?function(o,u,h){const m=o.value.clone(),g=Bg(o.fieldTransforms,u,h.transformResults);m.setAll(g),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()}(s,e,t):s instanceof As?function(o,u,h){if(!Nu(o.precondition,u))return void u.convertToUnknownDocument(h.version);const m=Bg(o.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(jv(o)),g.setAll(m),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()}(s,e,t):function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function ba(s,e,t,i){return s instanceof Ja?function(u,h,m,g){if(!Nu(u.precondition,h))return m;const _=u.value.clone(),E=$g(u.fieldTransforms,g,h);return _.setAll(E),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),null}(s,e,t,i):s instanceof As?function(u,h,m,g){if(!Nu(u.precondition,h))return m;const _=$g(u.fieldTransforms,g,h),E=h.data;return E.setAll(jv(u)),E.setAll(_),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(R=>R.field))}(s,e,t,i):function(u,h,m){return Nu(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m}(s,e,t)}function _x(s,e){let t=null;for(const i of s.fieldTransforms){const o=e.data.field(i.field),u=Dv(i.transform,o||null);u!=null&&(t===null&&(t=ln.empty()),t.set(i.field,u))}return t||null}function zg(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&go(i,o,(u,h)=>gx(u,h))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Ja extends cc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class As extends cc{constructor(e,t,i,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function jv(s){const e=new Map;return s.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=s.data.field(t);e.set(t,i)}}),e}function Bg(s,e,t){const i=new Map;Ke(s.length===t.length);for(let o=0;o<t.length;o++){const u=s[o],h=u.transform,m=e.data.field(u.field);i.set(u.field,mx(h,m,t[o]))}return i}function $g(s,e,t){const i=new Map;for(const o of s){const u=o.transform,h=t.data.field(o.field);i.set(o.field,px(u,h,e))}return i}class af extends cc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wx extends cc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&vx(u,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=ba(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=ba(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Nv();return this.mutations.forEach(o=>{const u=e.get(o.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=t.has(o.key)?null:m;const g=Mv(h,m);g!==null&&i.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(be.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Oe())}isEqual(e){return this.batchId===e.batchId&&go(this.mutations,e.mutations,(t,i)=>zg(t,i))&&go(this.baseMutations,e.baseMutations,(t,i)=>zg(t,i))}}class lf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Ke(e.mutations.length===i.length);let o=function(){return ux}();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,i[h].version);return new lf(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,Ue;function xx(s){switch(s){default:return Pe();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function Fv(s){if(s===void 0)return Fr("GRPC error has no .code"),K.UNKNOWN;switch(s){case mt.OK:return K.OK;case mt.CANCELLED:return K.CANCELLED;case mt.UNKNOWN:return K.UNKNOWN;case mt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case mt.INTERNAL:return K.INTERNAL;case mt.UNAVAILABLE:return K.UNAVAILABLE;case mt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case mt.NOT_FOUND:return K.NOT_FOUND;case mt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case mt.ABORTED:return K.ABORTED;case mt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case mt.DATA_LOSS:return K.DATA_LOSS;default:return Pe()}}(Ue=mt||(mt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx=new ri([4294967295,4294967295],0);function Hg(s){const e=Sx().encode(s),t=new uv;return t.update(e),new Uint8Array(t.digest())}function qg(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ri([t,i],0),new ri([o,u],0)]}class uf{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ca(`Invalid padding: ${t}`);if(i<0)throw new Ca(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ca(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ca(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ri.fromNumber(this.Ie)}Ee(e,t,i){let o=e.add(t.multiply(ri.fromNumber(i)));return o.compare(Cx)===1&&(o=new ri([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=Hg(e),[i,o]=qg(t);for(let u=0;u<this.hashCount;u++){const h=this.Ee(i,o,u);if(!this.de(h))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new uf(u,o,t);return i.forEach(m=>h.insert(m)),h}insert(e){if(this.Ie===0)return;const t=Hg(e),[i,o]=qg(t);for(let u=0;u<this.hashCount;u++){const h=this.Ee(i,o,u);this.Ae(h)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ca extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,t,i,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Za.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new hc(be.min(),o,new it(He),Ur(),Oe())}}class Za{constructor(e,t,i,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Za(i,t,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,t,i,o){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=o}}class Uv{constructor(e,t){this.targetId=e,this.me=t}}class zv{constructor(e,t,i=Mt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Wg{constructor(){this.fe=0,this.ge=Gg(),this.pe=Mt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Oe(),t=Oe(),i=Oe();return this.ge.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Pe()}}),new Za(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=Gg()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ke(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Ax{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ur(),this.qe=Kg(),this.Qe=new it(He)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:Pe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,o)=>{this.ze(o)&&t(o)})}He(e){const t=e.targetId,i=e.me.count,o=this.Je(t);if(o){const u=o.target;if(Cd(u))if(i===0){const h=new Se(u.path);this.Ue(t,h,Ht.newNoDocument(h,be.min()))}else Ke(i===1);else{const h=this.Ye(t);if(h!==i){const m=this.Ze(e),g=m?this.Xe(m,e,h):1;if(g!==0){this.je(t);const _=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,_)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:u=0}=t;let h,m;try{h=ai(i).toUint8Array()}catch(g){if(g instanceof vv)return mo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new uf(h,o,u)}catch(g){return mo(g instanceof Ca?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.Ie===0?null:m}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let o=0;return i.forEach(u=>{const h=this.Le.tt(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.Ue(t,u,null),o++)}),o}rt(e){const t=new Map;this.Be.forEach((u,h)=>{const m=this.Je(h);if(m){if(u.current&&Cd(m.target)){const g=new Se(m.target.path);this.ke.get(g)!==null||this.it(h,g)||this.Ue(h,g,Ht.newNoDocument(g,e))}u.be&&(t.set(h,u.ve()),u.Ce())}});let i=Oe();this.qe.forEach((u,h)=>{let m=!0;h.forEachWhile(g=>{const _=this.Je(g);return!_||_.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(i=i.add(u))}),this.ke.forEach((u,h)=>h.setReadTime(e));const o=new hc(e,t,this.Qe,this.ke,i);return this.ke=Ur(),this.qe=Kg(),this.Qe=new it(He),o}$e(e,t){if(!this.ze(e))return;const i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,t)?o.Fe(t,1):o.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Wg,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Lt(He),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||_e("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Wg),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Kg(){return new it(Se.comparator)}function Gg(){return new it(Se.comparator)}const kx={asc:"ASCENDING",desc:"DESCENDING"},Rx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Px={and:"AND",or:"OR"};class Nx{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Rd(s,e){return s.useProto3Json||ic(e)?e:{value:e}}function Qu(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Bv(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function bx(s,e){return Qu(s,e.toTimestamp())}function cr(s){return Ke(!!s),be.fromTimestamp(function(t){const i=Ss(t);return new Tt(i.seconds,i.nanos)}(s))}function cf(s,e){return Pd(s,e).canonicalString()}function Pd(s,e){const t=function(o){return new Ze(["projects",o.projectId,"databases",o.database])}(s).child("documents");return e===void 0?t:t.child(e)}function $v(s){const e=Ze.fromString(s);return Ke(Gv(e)),e}function Nd(s,e){return cf(s.databaseId,e.path)}function ud(s,e){const t=$v(e);if(t.get(1)!==s.databaseId.projectId)throw new pe(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new pe(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new Se(qv(t))}function Hv(s,e){return cf(s.databaseId,e)}function Dx(s){const e=$v(s);return e.length===4?Ze.emptyPath():qv(e)}function bd(s){return new Ze(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function qv(s){return Ke(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function Qg(s,e,t){return{name:Nd(s,e),fields:t.value.mapValue.fields}}function Vx(s,e){let t;if("targetChange"in e){e.targetChange;const i=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Pe()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(_,E){return _.useProto3Json?(Ke(E===void 0||typeof E=="string"),Mt.fromBase64String(E||"")):(Ke(E===void 0||E instanceof Buffer||E instanceof Uint8Array),Mt.fromUint8Array(E||new Uint8Array))}(s,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&function(_){const E=_.code===void 0?K.UNKNOWN:Fv(_.code);return new pe(E,_.message||"")}(h);t=new zv(i,o,u,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=ud(s,i.document.name),u=cr(i.document.updateTime),h=i.document.createTime?cr(i.document.createTime):be.min(),m=new ln({mapValue:{fields:i.document.fields}}),g=Ht.newFoundDocument(o,u,h,m),_=i.targetIds||[],E=i.removedTargetIds||[];t=new bu(_,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=ud(s,i.document),u=i.readTime?cr(i.readTime):be.min(),h=Ht.newNoDocument(o,u),m=i.removedTargetIds||[];t=new bu([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=ud(s,i.document),u=i.removedTargetIds||[];t=new bu([],u,o,null)}else{if(!("filter"in e))return Pe();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:u}=i,h=new Ix(o,u),m=i.targetId;t=new Uv(m,h)}}return t}function Lx(s,e){let t;if(e instanceof Ja)t={update:Qg(s,e.key,e.value)};else if(e instanceof af)t={delete:Nd(s,e.key)};else if(e instanceof As)t={update:Qg(s,e.key,e.data),updateMask:Hx(e.fieldMask)};else{if(!(e instanceof wx))return Pe();t={verify:Nd(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(u,h){const m=h.transform;if(m instanceof Ku)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Fa)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Ua)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Gu)return{fieldPath:h.field.canonicalString(),increment:m.Pe};throw Pe()}(0,i))),e.precondition.isNone||(t.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:bx(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Pe()}(s,e.precondition)),t}function Ox(s,e){return s&&s.length>0?(Ke(e!==void 0),s.map(t=>function(o,u){let h=o.updateTime?cr(o.updateTime):cr(u);return h.isEqual(be.min())&&(h=cr(u)),new yx(h,o.transformResults||[])}(t,e))):[]}function Mx(s,e){return{documents:[Hv(s,e.path)]}}function jx(s,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Hv(s,o);const u=function(_){if(_.length!==0)return Kv(Gn.create(_,"and"))}(e.filters);u&&(t.structuredQuery.where=u);const h=function(_){if(_.length!==0)return _.map(E=>function(D){return{field:oo(D.field),direction:zx(D.dir)}}(E))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const m=Rd(s,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(e.endAt)),{_t:t,parent:o}}function Fx(s){let e=Dx(s.parent);const t=s.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Ke(i===1);const E=t.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];t.where&&(u=function(R){const D=Wv(R);return D instanceof Gn&&Tv(D)?D.getFilters():[D]}(t.where));let h=[];t.orderBy&&(h=function(R){return R.map(D=>function($){return new Wu(ao($.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}($.direction))}(D))}(t.orderBy));let m=null;t.limit&&(m=function(R){let D;return D=typeof R=="object"?R.value:R,ic(D)?null:D}(t.limit));let g=null;t.startAt&&(g=function(R){const D=!!R.before,U=R.values||[];return new qu(U,D)}(t.startAt));let _=null;return t.endAt&&(_=function(R){const D=!R.before,U=R.values||[];return new qu(U,D)}(t.endAt)),sx(e,o,h,u,m,"F",g,_)}function Ux(s,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Wv(s){return s.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=ao(t.unaryFilter.field);return gt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=ao(t.unaryFilter.field);return gt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=ao(t.unaryFilter.field);return gt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=ao(t.unaryFilter.field);return gt.create(h,"!=",{nullValue:"NULL_VALUE"});default:return Pe()}}(s):s.fieldFilter!==void 0?function(t){return gt.create(ao(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Pe()}}(t.fieldFilter.op),t.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(t){return Gn.create(t.compositeFilter.filters.map(i=>Wv(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Pe()}}(t.compositeFilter.op))}(s):Pe()}function zx(s){return kx[s]}function Bx(s){return Rx[s]}function $x(s){return Px[s]}function oo(s){return{fieldPath:s.canonicalString()}}function ao(s){return Vt.fromServerFormat(s.fieldPath)}function Kv(s){return s instanceof gt?function(t){if(t.op==="=="){if(Lg(t.value))return{unaryFilter:{field:oo(t.field),op:"IS_NAN"}};if(Vg(t.value))return{unaryFilter:{field:oo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Lg(t.value))return{unaryFilter:{field:oo(t.field),op:"IS_NOT_NAN"}};if(Vg(t.value))return{unaryFilter:{field:oo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oo(t.field),op:Bx(t.op),value:t.value}}}(s):s instanceof Gn?function(t){const i=t.getFilters().map(o=>Kv(o));return i.length===1?i[0]:{compositeFilter:{op:$x(t.op),filters:i}}}(s):Pe()}function Hx(s){const e=[];return s.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Gv(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,t,i,o,u=be.min(),h=be.min(),m=Mt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new _s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e){this.ct=e}}function Wx(s){const e=Fx({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?kd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(){this.un=new Gx}addToCollectionParentIndex(e,t){return this.un.add(t),J.resolve()}getCollectionParents(e,t){return J.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return J.resolve()}deleteFieldIndex(e,t){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,t){return J.resolve()}getDocumentsMatchingTarget(e,t){return J.resolve(null)}getIndexType(e,t){return J.resolve(0)}getFieldIndexes(e,t){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,t){return J.resolve(xs.min())}getMinOffsetFromCollectionGroup(e,t){return J.resolve(xs.min())}updateCollectionGroup(e,t,i){return J.resolve()}updateIndexEntries(e,t){return J.resolve()}}class Gx{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Lt(Ze.comparator),u=!o.has(i);return this.index[t]=o.add(i),u}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Lt(Ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new _o(0)}static kn(){return new _o(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(){this.changes=new Co(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?J.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(i!==null&&ba(i.mutation,o,wn.empty(),Tt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Oe()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Oe()){const o=ni();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,i).next(u=>{let h=Sa();return u.forEach((m,g)=>{h=h.insert(m,g.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const i=ni();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Oe()))}populateOverlays(e,t,i){const o=[];return i.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((h,m)=>{t.set(h,m)})})}computeViews(e,t,i,o){let u=Ur();const h=Na(),m=function(){return Na()}();return t.forEach((g,_)=>{const E=i.get(_.key);o.has(_.key)&&(E===void 0||E.mutation instanceof As)?u=u.insert(_.key,_):E!==void 0?(h.set(_.key,E.mutation.getFieldMask()),ba(E.mutation,_,E.mutation.getFieldMask(),Tt.now())):h.set(_.key,wn.empty())}),this.recalculateAndSaveOverlays(e,u).next(g=>(g.forEach((_,E)=>h.set(_,E)),t.forEach((_,E)=>{var R;return m.set(_,new Xx(E,(R=h.get(_))!==null&&R!==void 0?R:null))}),m))}recalculateAndSaveOverlays(e,t){const i=Na();let o=new it((h,m)=>h-m),u=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const m of h)m.keys().forEach(g=>{const _=t.get(g);if(_===null)return;let E=i.get(g)||wn.empty();E=m.applyToLocalView(_,E),i.set(g,E);const R=(o.get(m.batchId)||Oe()).add(g);o=o.insert(m.batchId,R)})}).next(()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),_=g.key,E=g.value,R=Nv();E.forEach(D=>{if(!u.has(D)){const U=Mv(t.get(D),i.get(D));U!==null&&R.set(D,U),u=u.add(D)}}),h.push(this.documentOverlayCache.saveOverlays(e,_,R))}return J.waitFor(h)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,o){return function(h){return Se.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Cv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next(u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-u.size):J.resolve(ni());let m=-1,g=u;return h.next(_=>J.forEach(_,(E,R)=>(m<R.largestBatchId&&(m=R.largestBatchId),u.get(E)?J.resolve():this.remoteDocumentCache.getEntry(e,E).next(D=>{g=g.insert(E,D)}))).next(()=>this.populateOverlays(e,_,u)).next(()=>this.computeViews(e,g,_,Oe())).next(E=>({batchId:m,changes:Pv(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next(i=>{let o=Sa();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const u=t.collectionGroup;let h=Sa();return this.indexManager.getCollectionParents(e,u).next(m=>J.forEach(m,g=>{const _=function(R,D){return new Ya(D,null,R.explicitOrderBy.slice(),R.filters.slice(),R.limit,R.limitType,R.startAt,R.endAt)}(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,_,i,o).next(E=>{E.forEach((R,D)=>{h=h.insert(R,D)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,i,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,u,o))).next(h=>{u.forEach((g,_)=>{const E=_.getKey();h.get(E)===null&&(h=h.insert(E,Ht.newInvalidDocument(E)))});let m=Sa();return h.forEach((g,_)=>{const E=u.get(g);E!==void 0&&ba(E.mutation,_,wn.empty(),Tt.now()),lc(t,_)&&(m=m.insert(g,_))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return J.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:cr(o.createTime)}}(t)),J.resolve()}getNamedQuery(e,t){return J.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(o){return{name:o.name,query:Wx(o.bundledQuery),readTime:cr(o.readTime)}}(t)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(){this.overlays=new it(Se.comparator),this.Ir=new Map}getOverlay(e,t){return J.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ni();return J.forEach(t,o=>this.getOverlay(e,o).next(u=>{u!==null&&i.set(o,u)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((o,u)=>{this.ht(e,t,u)}),J.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Ir.get(i);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Ir.delete(i)),J.resolve()}getOverlaysForCollection(e,t,i){const o=ni(),u=t.length+1,h=new Se(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,_=g.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===u&&g.largestBatchId>i&&o.set(g.getKey(),g)}return J.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let u=new it((_,E)=>_-E);const h=this.overlays.getIterator();for(;h.hasNext();){const _=h.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>i){let E=u.get(_.largestBatchId);E===null&&(E=ni(),u=u.insert(_.largestBatchId,E)),E.set(_.getKey(),_)}}const m=ni(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((_,E)=>m.set(_,E)),!(m.size()>=o)););return J.resolve(m)}ht(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const h=this.Ir.get(o.largestBatchId).delete(i.key);this.Ir.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(i.key,new Tx(t,i));let u=this.Ir.get(t);u===void 0&&(u=Oe(),this.Ir.set(t,u)),this.Ir.set(t,u.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(){this.sessionToken=Mt.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(){this.Tr=new Lt(At.Er),this.dr=new Lt(At.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const i=new At(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Vr(new At(e,t))}mr(e,t){e.forEach(i=>this.removeReference(i,t))}gr(e){const t=new Se(new Ze([])),i=new At(t,e),o=new At(t,e+1),u=[];return this.dr.forEachInRange([i,o],h=>{this.Vr(h),u.push(h.key)}),u}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new Se(new Ze([])),i=new At(t,e),o=new At(t,e+1);let u=Oe();return this.dr.forEachInRange([i,o],h=>{u=u.add(h.key)}),u}containsKey(e){const t=new At(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class At{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Se.comparator(e.key,t.key)||He(e.wr,t.wr)}static Ar(e,t){return He(e.wr,t.wr)||Se.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Lt(At.Er)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const u=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new Ex(u,t,i,o);this.mutationQueue.push(h);for(const m of o)this.br=this.br.add(new At(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return J.resolve(h)}lookupMutationBatch(e,t){return J.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.vr(i),u=o<0?0:o;return J.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new At(t,0),o=new At(t,Number.POSITIVE_INFINITY),u=[];return this.br.forEachInRange([i,o],h=>{const m=this.Dr(h.wr);u.push(m)}),J.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Lt(He);return t.forEach(o=>{const u=new At(o,0),h=new At(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([u,h],m=>{i=i.add(m.wr)})}),J.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let u=i;Se.isDocumentKey(u)||(u=u.child(""));const h=new At(new Se(u),0);let m=new Lt(He);return this.br.forEachWhile(g=>{const _=g.key.path;return!!i.isPrefixOf(_)&&(_.length===o&&(m=m.add(g.wr)),!0)},h),J.resolve(this.Cr(m))}Cr(e){const t=[];return e.forEach(i=>{const o=this.Dr(i);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Ke(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return J.forEach(t.mutations,o=>{const u=new At(o.key,t.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,t){const i=new At(t,0),o=this.br.firstAfterOrEqual(i);return J.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e){this.Mr=e,this.docs=function(){return new it(Se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),u=o?o.size:0,h=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return J.resolve(i?i.document.mutableCopy():Ht.newInvalidDocument(t))}getEntries(e,t){let i=Ur();return t.forEach(o=>{const u=this.docs.get(o);i=i.insert(o,u?u.document.mutableCopy():Ht.newInvalidDocument(o))}),J.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let u=Ur();const h=t.path,m=new Se(h.child("")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:_,value:{document:E}}=g.getNext();if(!h.isPrefixOf(_.path))break;_.path.length>h.length+1||FI(jI(E),i)<=0||(o.has(E.key)||lc(t,E))&&(u=u.insert(E.key,E.mutableCopy()))}return J.resolve(u)}getAllFromCollectionGroup(e,t,i,o){Pe()}Or(e,t){return J.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new rS(this)}getSize(e){return J.resolve(this.size)}}class rS extends Qx{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?t.push(this.cr.addEntry(e,o)):this.cr.removeEntry(i)}),J.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e){this.persistence=e,this.Nr=new Co(t=>rf(t),sf),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.Lr=0,this.Br=new hf,this.targetCount=0,this.kr=_o.Bn()}forEachTarget(e,t){return this.Nr.forEach((i,o)=>t(o)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),J.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new _o(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,J.resolve()}updateTargetData(e,t){return this.Kn(t),J.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,t,i){let o=0;const u=[];return this.Nr.forEach((h,m)=>{m.sequenceNumber<=t&&i.get(m.targetId)===null&&(this.Nr.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),J.waitFor(u).next(()=>o)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,t){const i=this.Nr.get(t)||null;return J.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),J.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(h=>{u.push(o.markPotentiallyOrphaned(e,h))}),J.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),J.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Br.yr(t);return J.resolve(i)}containsKey(e,t){return J.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Zd(0),this.Kr=!1,this.Kr=!0,this.$r=new eS,this.referenceDelegate=e(this),this.Ur=new sS(this),this.indexManager=new Kx,this.remoteDocumentCache=function(o){return new nS(o)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new qx(t),this.Gr=new Jx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Zx,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new tS(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){_e("MemoryPersistence","Starting transaction:",e);const o=new oS(this.Qr.next());return this.referenceDelegate.zr(),i(o).next(u=>this.referenceDelegate.jr(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Hr(e,t){return J.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,t)))}}class oS extends zI{constructor(e){super(),this.currentSequenceNumber=e}}class df{constructor(e){this.persistence=e,this.Jr=new hf,this.Yr=null}static Zr(e){return new df(e)}get Xr(){if(this.Yr)return this.Yr;throw Pe()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),J.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),J.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),J.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(o=>this.Xr.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Xr.add(u.toString()))}).next(()=>i.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.Xr,i=>{const o=Se.fromPath(i);return this.ei(e,o).next(u=>{u||t.removeEntry(o,be.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return J.or([()=>J.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=o}static Wi(e,t){let i=Oe(),o=Oe();for(const u of t.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new ff(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return lw()?8:BI(Kt())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,o){const u={result:null};return this.Yi(e,t).next(h=>{u.result=h}).next(()=>{if(!u.result)return this.Zi(e,t,o,i).next(h=>{u.result=h})}).next(()=>{if(u.result)return;const h=new aS;return this.Xi(e,t,h).next(m=>{if(u.result=m,this.zi)return this.es(e,t,h,m.size)})}).next(()=>u.result)}es(e,t,i,o){return i.documentReadCount<this.ji?(Ia()<=je.DEBUG&&_e("QueryEngine","SDK will not create cache indexes for query:",io(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),J.resolve()):(Ia()<=je.DEBUG&&_e("QueryEngine","Query:",io(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Hi*o?(Ia()<=je.DEBUG&&_e("QueryEngine","The SDK decides to create cache indexes for query:",io(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ur(t))):J.resolve())}Yi(e,t){if(Fg(t))return J.resolve(null);let i=ur(t);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=kd(t,null,"F"),i=ur(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(u=>{const h=Oe(...u);return this.Ji.getDocuments(e,h).next(m=>this.indexManager.getMinOffset(e,i).next(g=>{const _=this.ts(t,m);return this.ns(t,_,h,g.readTime)?this.Yi(e,kd(t,null,"F")):this.rs(e,_,t,g)}))})))}Zi(e,t,i,o){return Fg(t)||o.isEqual(be.min())?J.resolve(null):this.Ji.getDocuments(e,i).next(u=>{const h=this.ts(t,u);return this.ns(t,h,i,o)?J.resolve(null):(Ia()<=je.DEBUG&&_e("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),io(t)),this.rs(e,h,t,MI(o,-1)).next(m=>m))})}ts(e,t){let i=new Lt(kv(e));return t.forEach((o,u)=>{lc(e,u)&&(i=i.add(u))}),i}ns(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Xi(e,t,i){return Ia()<=je.DEBUG&&_e("QueryEngine","Using full collection scan to execute query:",io(t)),this.Ji.getDocumentsMatchingQuery(e,t,xs.min(),i)}rs(e,t,i,o){return this.Ji.getDocumentsMatchingQuery(e,i,o).next(u=>(t.forEach(h=>{u=u.insert(h.key,h)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e,t,i,o){this.persistence=e,this.ss=t,this.serializer=o,this.os=new it(He),this._s=new Co(u=>rf(u),sf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Yx(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function cS(s,e,t,i){return new uS(s,e,t,i)}async function Qv(s,e){const t=De(s);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next(u=>(o=u,t.ls(e),t.mutationQueue.getAllMutationBatches(i))).next(u=>{const h=[],m=[];let g=Oe();for(const _ of o){h.push(_.batchId);for(const E of _.mutations)g=g.add(E.key)}for(const _ of u){m.push(_.batchId);for(const E of _.mutations)g=g.add(E.key)}return t.localDocuments.getDocuments(i,g).next(_=>({hs:_,removedBatchIds:h,addedBatchIds:m}))})})}function hS(s,e){const t=De(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),u=t.cs.newChangeBuffer({trackRemovals:!0});return function(m,g,_,E){const R=_.batch,D=R.keys();let U=J.resolve();return D.forEach($=>{U=U.next(()=>E.getEntry(g,$)).next(W=>{const j=_.docVersions.get($);Ke(j!==null),W.version.compareTo(j)<0&&(R.applyToRemoteDocument(W,_),W.isValidDocument()&&(W.setReadTime(_.commitVersion),E.addEntry(W)))})}),U.next(()=>m.mutationQueue.removeMutationBatch(g,R))}(t,i,e,u).next(()=>u.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(m){let g=Oe();for(let _=0;_<m.mutationResults.length;++_)m.mutationResults[_].transformResults.length>0&&(g=g.add(m.batch.mutations[_].key));return g}(e))).next(()=>t.localDocuments.getDocuments(i,o))})}function Xv(s){const e=De(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function dS(s,e){const t=De(s),i=e.snapshotVersion;let o=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=t.cs.newChangeBuffer({trackRemovals:!0});o=t.os;const m=[];e.targetChanges.forEach((E,R)=>{const D=o.get(R);if(!D)return;m.push(t.Ur.removeMatchingKeys(u,E.removedDocuments,R).next(()=>t.Ur.addMatchingKeys(u,E.addedDocuments,R)));let U=D.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(R)!==null?U=U.withResumeToken(Mt.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):E.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(E.resumeToken,i)),o=o.insert(R,U),function(W,j,re){return W.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-W.snapshotVersion.toMicroseconds()>=3e8?!0:re.addedDocuments.size+re.modifiedDocuments.size+re.removedDocuments.size>0}(D,U,E)&&m.push(t.Ur.updateTargetData(u,U))});let g=Ur(),_=Oe();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,E))}),m.push(fS(u,h,e.documentUpdates).next(E=>{g=E.Ps,_=E.Is})),!i.isEqual(be.min())){const E=t.Ur.getLastRemoteSnapshotVersion(u).next(R=>t.Ur.setTargetsMetadata(u,u.currentSequenceNumber,i));m.push(E)}return J.waitFor(m).next(()=>h.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,g,_)).next(()=>g)}).then(u=>(t.os=o,u))}function fS(s,e,t){let i=Oe(),o=Oe();return t.forEach(u=>i=i.add(u)),e.getEntries(s,i).next(u=>{let h=Ur();return t.forEach((m,g)=>{const _=u.get(m);g.isFoundDocument()!==_.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(be.min())?(e.removeEntry(m,g.readTime),h=h.insert(m,g)):!_.isValidDocument()||g.version.compareTo(_.version)>0||g.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(g),h=h.insert(m,g)):_e("LocalStore","Ignoring outdated watch update for ",m,". Current version:",_.version," Watch version:",g.version)}),{Ps:h,Is:o}})}function pS(s,e){const t=De(s);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function mS(s,e){const t=De(s);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return t.Ur.getTargetData(i,e).next(u=>u?(o=u,J.resolve(o)):t.Ur.allocateTargetId(i).next(h=>(o=new _s(e,h,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=t.os.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i})}async function Dd(s,e,t){const i=De(s),o=i.os.get(e),u=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",u,h=>i.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!Xa(h))throw h;_e("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}i.os=i.os.remove(e),i._s.delete(o.target)}function Xg(s,e,t){const i=De(s);let o=be.min(),u=Oe();return i.persistence.runTransaction("Execute query","readwrite",h=>function(g,_,E){const R=De(g),D=R._s.get(E);return D!==void 0?J.resolve(R.os.get(D)):R.Ur.getTargetData(_,E)}(i,h,ur(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(h,m.targetId).next(g=>{u=g})}).next(()=>i.ss.getDocumentsMatchingQuery(h,e,t?o:be.min(),t?u:Oe())).next(m=>(gS(i,ox(e),m),{documents:m,Ts:u})))}function gS(s,e,t){let i=s.us.get(e)||be.min();t.forEach((o,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)}),s.us.set(e,i)}class Yg{constructor(){this.activeTargetIds=dx()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yS{constructor(){this.so=new Yg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Yg,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){_e("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){_e("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xu=null;function cd(){return xu===null?xu=function(){return 268435456+Math.round(2147483648*Math.random())}():xu++,"0x"+xu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class ES extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${o}/databases/${u}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${u}`}get Fo(){return!1}Mo(t,i,o,u,h){const m=cd(),g=this.xo(t,i.toUriEncodedString());_e("RestConnection",`Sending RPC '${t}' ${m}:`,g,o);const _={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(_,u,h),this.No(t,g,_,o).then(E=>(_e("RestConnection",`Received RPC '${t}' ${m}: `,E),E),E=>{throw mo("RestConnection",`RPC '${t}' ${m} failed with error: `,E,"url: ",g,"request:",o),E})}Lo(t,i,o,u,h,m){return this.Mo(t,i,o,u,h)}Oo(t,i,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+So}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((u,h)=>t[h]=u),o&&o.headers.forEach((u,h)=>t[h]=u)}xo(t,i){const o=_S[t];return`${this.Do}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,o){const u=cd();return new Promise((h,m)=>{const g=new cv;g.setWithCredentials(!0),g.listenOnce(hv.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Ru.NO_ERROR:const E=g.getResponseJson();_e(Bt,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),h(E);break;case Ru.TIMEOUT:_e(Bt,`RPC '${e}' ${u} timed out`),m(new pe(K.DEADLINE_EXCEEDED,"Request time out"));break;case Ru.HTTP_ERROR:const R=g.getStatus();if(_e(Bt,`RPC '${e}' ${u} failed with status:`,R,"response text:",g.getResponseText()),R>0){let D=g.getResponseJson();Array.isArray(D)&&(D=D[0]);const U=D==null?void 0:D.error;if(U&&U.status&&U.message){const $=function(j){const re=j.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(re)>=0?re:K.UNKNOWN}(U.status);m(new pe($,U.message))}else m(new pe(K.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new pe(K.UNAVAILABLE,"Connection failed."));break;default:Pe()}}finally{_e(Bt,`RPC '${e}' ${u} completed.`)}});const _=JSON.stringify(o);_e(Bt,`RPC '${e}' ${u} sending request:`,o),g.send(t,"POST",_,i,15)})}Bo(e,t,i){const o=cd(),u=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=pv(),m=fv(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(g.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Oo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const E=u.join("");_e(Bt,`Creating RPC '${e}' stream ${o}: ${E}`,g);const R=h.createWebChannel(E,g);let D=!1,U=!1;const $=new wS({Io:j=>{U?_e(Bt,`Not sending because RPC '${e}' stream ${o} is closed:`,j):(D||(_e(Bt,`Opening RPC '${e}' stream ${o} transport.`),R.open(),D=!0),_e(Bt,`RPC '${e}' stream ${o} sending:`,j),R.send(j))},To:()=>R.close()}),W=(j,re,G)=>{j.listen(re,H=>{try{G(H)}catch(se){setTimeout(()=>{throw se},0)}})};return W(R,xa.EventType.OPEN,()=>{U||(_e(Bt,`RPC '${e}' stream ${o} transport opened.`),$.yo())}),W(R,xa.EventType.CLOSE,()=>{U||(U=!0,_e(Bt,`RPC '${e}' stream ${o} transport closed`),$.So())}),W(R,xa.EventType.ERROR,j=>{U||(U=!0,mo(Bt,`RPC '${e}' stream ${o} transport errored:`,j),$.So(new pe(K.UNAVAILABLE,"The operation could not be completed")))}),W(R,xa.EventType.MESSAGE,j=>{var re;if(!U){const G=j.data[0];Ke(!!G);const H=G,se=H.error||((re=H[0])===null||re===void 0?void 0:re.error);if(se){_e(Bt,`RPC '${e}' stream ${o} received error:`,se);const ue=se.status;let oe=function(S){const N=mt[S];if(N!==void 0)return Fv(N)}(ue),P=se.message;oe===void 0&&(oe=K.INTERNAL,P="Unknown error status: "+ue+" with message "+se.message),U=!0,$.So(new pe(oe,P)),R.close()}else _e(Bt,`RPC '${e}' stream ${o} received:`,G),$.bo(G)}}),W(m,dv.STAT_EVENT,j=>{j.stat===Td.PROXY?_e(Bt,`RPC '${e}' stream ${o} detected buffering proxy`):j.stat===Td.NOPROXY&&_e(Bt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{$.wo()},0),$}}function hd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(s){return new Nx(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e,t,i=1e3,o=1.5,u=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=o,this.Qo=u,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),o=Math.max(0,t-i);o>0&&_e("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(e,t,i,o,u,h,m,g){this.ui=e,this.Ho=i,this.Jo=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Yv(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===K.RESOURCE_EXHAUSTED?(Fr(t.toString()),Fr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.Yo===t&&this.P_(i,o)},i=>{e(()=>{const o=new pe(K.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(o)})})}P_(e,t){const i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(o=>{i(()=>this.I_(o))}),this.stream.onMessage(o=>{i(()=>++this.e_==1?this.E_(o):this.onNext(o))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return _e("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(_e("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class TS extends Jv{constructor(e,t,i,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,h),this.serializer=u}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=Vx(this.serializer,e),i=function(u){if(!("targetChange"in u))return be.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?be.min():h.readTime?cr(h.readTime):be.min()}(e);return this.listener.d_(t,i)}A_(e){const t={};t.database=bd(this.serializer),t.addTarget=function(u,h){let m;const g=h.target;if(m=Cd(g)?{documents:Mx(u,g)}:{query:jx(u,g)._t},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=Bv(u,h.resumeToken);const _=Rd(u,h.expectedCount);_!==null&&(m.expectedCount=_)}else if(h.snapshotVersion.compareTo(be.min())>0){m.readTime=Qu(u,h.snapshotVersion.toTimestamp());const _=Rd(u,h.expectedCount);_!==null&&(m.expectedCount=_)}return m}(this.serializer,e);const i=Ux(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){const t={};t.database=bd(this.serializer),t.removeTarget=e,this.a_(t)}}class IS extends Jv{constructor(e,t,i,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,h),this.serializer=u}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ke(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=Ox(e.writeResults,e.commitTime),i=cr(e.commitTime);return this.listener.g_(i,t)}p_(){const e={};e.database=bd(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>Lx(this.serializer,i))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS extends class{}{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new pe(K.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Mo(e,Pd(t,i),o,u,h)).catch(u=>{throw u.name==="FirebaseError"?(u.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new pe(K.UNKNOWN,u.toString())})}Lo(e,t,i,o,u){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,m])=>this.connection.Lo(e,Pd(t,i),o,h,m,u)).catch(h=>{throw h.name==="FirebaseError"?(h.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new pe(K.UNKNOWN,h.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class SS{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Fr(t),this.D_=!1):_e("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e,t,i,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=u,this.k_._o(h=>{i.enqueueAndForget(async()=>{di(this)&&(_e("RemoteStore","Restarting streams for network reachability change."),await async function(g){const _=De(g);_.L_.add(4),await el(_),_.q_.set("Unknown"),_.L_.delete(4),await fc(_)}(this))})}),this.q_=new SS(i,o)}}async function fc(s){if(di(s))for(const e of s.B_)await e(!0)}async function el(s){for(const e of s.B_)await e(!1)}function Zv(s,e){const t=De(s);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),yf(t)?gf(t):Ao(t).r_()&&mf(t,e))}function pf(s,e){const t=De(s),i=Ao(t);t.N_.delete(e),i.r_()&&e_(t,e),t.N_.size===0&&(i.r_()?i.o_():di(t)&&t.q_.set("Unknown"))}function mf(s,e){if(s.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ao(s).A_(e)}function e_(s,e){s.Q_.xe(e),Ao(s).R_(e)}function gf(s){s.Q_=new Ax({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>s.N_.get(e)||null,tt:()=>s.datastore.serializer.databaseId}),Ao(s).start(),s.q_.v_()}function yf(s){return di(s)&&!Ao(s).n_()&&s.N_.size>0}function di(s){return De(s).L_.size===0}function t_(s){s.Q_=void 0}async function AS(s){s.q_.set("Online")}async function kS(s){s.N_.forEach((e,t)=>{mf(s,e)})}async function RS(s,e){t_(s),yf(s)?(s.q_.M_(e),gf(s)):s.q_.set("Unknown")}async function PS(s,e,t){if(s.q_.set("Online"),e instanceof zv&&e.state===2&&e.cause)try{await async function(o,u){const h=u.cause;for(const m of u.targetIds)o.N_.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.N_.delete(m),o.Q_.removeTarget(m))}(s,e)}catch(i){_e("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Xu(s,i)}else if(e instanceof bu?s.Q_.Ke(e):e instanceof Uv?s.Q_.He(e):s.Q_.We(e),!t.isEqual(be.min()))try{const i=await Xv(s.localStore);t.compareTo(i)>=0&&await function(u,h){const m=u.Q_.rt(h);return m.targetChanges.forEach((g,_)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.N_.get(_);E&&u.N_.set(_,E.withResumeToken(g.resumeToken,h))}}),m.targetMismatches.forEach((g,_)=>{const E=u.N_.get(g);if(!E)return;u.N_.set(g,E.withResumeToken(Mt.EMPTY_BYTE_STRING,E.snapshotVersion)),e_(u,g);const R=new _s(E.target,g,_,E.sequenceNumber);mf(u,R)}),u.remoteSyncer.applyRemoteEvent(m)}(s,t)}catch(i){_e("RemoteStore","Failed to raise snapshot:",i),await Xu(s,i)}}async function Xu(s,e,t){if(!Xa(e))throw e;s.L_.add(1),await el(s),s.q_.set("Offline"),t||(t=()=>Xv(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{_e("RemoteStore","Retrying IndexedDB access"),await t(),s.L_.delete(1),await fc(s)})}function n_(s,e){return e().catch(t=>Xu(s,t,e))}async function pc(s){const e=De(s),t=Cs(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;NS(e);)try{const o=await pS(e.localStore,i);if(o===null){e.O_.length===0&&t.o_();break}i=o.batchId,bS(e,o)}catch(o){await Xu(e,o)}r_(e)&&s_(e)}function NS(s){return di(s)&&s.O_.length<10}function bS(s,e){s.O_.push(e);const t=Cs(s);t.r_()&&t.V_&&t.m_(e.mutations)}function r_(s){return di(s)&&!Cs(s).n_()&&s.O_.length>0}function s_(s){Cs(s).start()}async function DS(s){Cs(s).p_()}async function VS(s){const e=Cs(s);for(const t of s.O_)e.m_(t.mutations)}async function LS(s,e,t){const i=s.O_.shift(),o=lf.from(i,e,t);await n_(s,()=>s.remoteSyncer.applySuccessfulWrite(o)),await pc(s)}async function OS(s,e){e&&Cs(s).V_&&await async function(i,o){if(function(h){return xx(h)&&h!==K.ABORTED}(o.code)){const u=i.O_.shift();Cs(i).s_(),await n_(i,()=>i.remoteSyncer.rejectFailedWrite(u.batchId,o)),await pc(i)}}(s,e),r_(s)&&s_(s)}async function Zg(s,e){const t=De(s);t.asyncQueue.verifyOperationInProgress(),_e("RemoteStore","RemoteStore received new credentials");const i=di(t);t.L_.add(3),await el(t),i&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await fc(t)}async function MS(s,e){const t=De(s);e?(t.L_.delete(2),await fc(t)):e||(t.L_.add(2),await el(t),t.q_.set("Unknown"))}function Ao(s){return s.K_||(s.K_=function(t,i,o){const u=De(t);return u.w_(),new TS(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(s.datastore,s.asyncQueue,{Eo:AS.bind(null,s),Ro:kS.bind(null,s),mo:RS.bind(null,s),d_:PS.bind(null,s)}),s.B_.push(async e=>{e?(s.K_.s_(),yf(s)?gf(s):s.q_.set("Unknown")):(await s.K_.stop(),t_(s))})),s.K_}function Cs(s){return s.U_||(s.U_=function(t,i,o){const u=De(t);return u.w_(),new IS(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(s.datastore,s.asyncQueue,{Eo:()=>Promise.resolve(),Ro:DS.bind(null,s),mo:OS.bind(null,s),f_:VS.bind(null,s),g_:LS.bind(null,s)}),s.B_.push(async e=>{e?(s.U_.s_(),await pc(s)):(await s.U_.stop(),s.O_.length>0&&(_e("RemoteStore",`Stopping write stream with ${s.O_.length} pending writes`),s.O_=[]))})),s.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t,i,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=u,this.deferred=new Vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,u){const h=Date.now()+i,m=new vf(e,t,h,o,u);return m.start(i),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _f(s,e){if(Fr("AsyncQueue",`${e}: ${s}`),Xa(s))return new pe(K.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Se.comparator(t.key,i.key):(t,i)=>Se.comparator(t.key,i.key),this.keyedMap=Sa(),this.sortedSet=new it(this.comparator)}static emptySet(e){return new fo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof fo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=i.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new fo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(){this.W_=new it(Se.comparator)}track(e){const t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Pe():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,i)=>{e.push(i)}),e}}class wo{constructor(e,t,i,o,u,h,m,g,_){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=_}static fromInitialDocuments(e,t,i,o,u){const h=[];return t.forEach(m=>{h.push({type:0,doc:m})}),new wo(e,t,fo.emptySet(t),h,i,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ac(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class FS{constructor(){this.queries=ty(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){const o=De(t),u=o.queries;o.queries=ty(),u.forEach((h,m)=>{for(const g of m.j_)g.onError(i)})})(this,new pe(K.ABORTED,"Firestore shutting down"))}}function ty(){return new Co(s=>Av(s),ac)}async function wf(s,e){const t=De(s);let i=3;const o=e.query;let u=t.queries.get(o);u?!u.H_()&&e.J_()&&(i=2):(u=new jS,i=e.J_()?0:1);try{switch(i){case 0:u.z_=await t.onListen(o,!0);break;case 1:u.z_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const m=_f(h,`Initialization of query '${io(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,u),u.j_.push(e),e.Z_(t.onlineState),u.z_&&e.X_(u.z_)&&Tf(t)}async function Ef(s,e){const t=De(s),i=e.query;let o=3;const u=t.queries.get(i);if(u){const h=u.j_.indexOf(e);h>=0&&(u.j_.splice(h,1),u.j_.length===0?o=e.J_()?0:1:!u.H_()&&e.J_()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function US(s,e){const t=De(s);let i=!1;for(const o of e){const u=o.query,h=t.queries.get(u);if(h){for(const m of h.j_)m.X_(o)&&(i=!0);h.z_=o}}i&&Tf(t)}function zS(s,e,t){const i=De(s),o=i.queries.get(e);if(o)for(const u of o.j_)u.onError(t);i.queries.delete(e)}function Tf(s){s.Y_.forEach(e=>{e.next()})}var Vd,ny;(ny=Vd||(Vd={})).ea="default",ny.Cache="cache";class If{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new wo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=wo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Vd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e){this.key=e}}class o_{constructor(e){this.key=e}}class BS{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Oe(),this.mutatedKeys=Oe(),this.Aa=kv(e),this.Ra=new fo(this.Aa)}get Va(){return this.Ta}ma(e,t){const i=t?t.fa:new ey,o=t?t.Ra:this.Ra;let u=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,_=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((E,R)=>{const D=o.get(E),U=lc(this.query,R)?R:null,$=!!D&&this.mutatedKeys.has(D.key),W=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let j=!1;D&&U?D.data.isEqual(U.data)?$!==W&&(i.track({type:3,doc:U}),j=!0):this.ga(D,U)||(i.track({type:2,doc:U}),j=!0,(g&&this.Aa(U,g)>0||_&&this.Aa(U,_)<0)&&(m=!0)):!D&&U?(i.track({type:0,doc:U}),j=!0):D&&!U&&(i.track({type:1,doc:D}),j=!0,(g||_)&&(m=!0)),j&&(U?(h=h.add(U),u=W?u.add(E):u.delete(E)):(h=h.delete(E),u=u.delete(E)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),u=u.delete(E.key),i.track({type:1,doc:E})}return{Ra:h,fa:i,ns:m,mutatedKeys:u}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const u=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const h=e.fa.G_();h.sort((E,R)=>function(U,$){const W=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe()}};return W(U)-W($)}(E.type,R.type)||this.Aa(E.doc,R.doc)),this.pa(i),o=o!=null&&o;const m=t&&!o?this.ya():[],g=this.da.size===0&&this.current&&!o?1:0,_=g!==this.Ea;return this.Ea=g,h.length!==0||_?{snapshot:new wo(this.query,e.Ra,u,h,e.mutatedKeys,g===0,_,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:m}:{wa:m}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ey,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Oe(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const t=[];return e.forEach(i=>{this.da.has(i)||t.push(new o_(i))}),this.da.forEach(i=>{e.has(i)||t.push(new i_(i))}),t}ba(e){this.Ta=e.Ts,this.da=Oe();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return wo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class $S{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class HS{constructor(e){this.key=e,this.va=!1}}class qS{constructor(e,t,i,o,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Ca={},this.Fa=new Co(m=>Av(m),ac),this.Ma=new Map,this.xa=new Set,this.Oa=new it(Se.comparator),this.Na=new Map,this.La=new hf,this.Ba={},this.ka=new Map,this.qa=_o.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function WS(s,e,t=!0){const i=d_(s);let o;const u=i.Fa.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Da()):o=await a_(i,e,t,!0),o}async function KS(s,e){const t=d_(s);await a_(t,e,!0,!1)}async function a_(s,e,t,i){const o=await mS(s.localStore,ur(e)),u=o.targetId,h=s.sharedClientState.addLocalQueryTarget(u,t);let m;return i&&(m=await GS(s,e,u,h==="current",o.resumeToken)),s.isPrimaryClient&&t&&Zv(s.remoteStore,o),m}async function GS(s,e,t,i,o){s.Ka=(R,D,U)=>async function(W,j,re,G){let H=j.view.ma(re);H.ns&&(H=await Xg(W.localStore,j.query,!1).then(({documents:P})=>j.view.ma(P,H)));const se=G&&G.targetChanges.get(j.targetId),ue=G&&G.targetMismatches.get(j.targetId)!=null,oe=j.view.applyChanges(H,W.isPrimaryClient,se,ue);return sy(W,j.targetId,oe.wa),oe.snapshot}(s,R,D,U);const u=await Xg(s.localStore,e,!0),h=new BS(e,u.Ts),m=h.ma(u.documents),g=Za.createSynthesizedTargetChangeForCurrentChange(t,i&&s.onlineState!=="Offline",o),_=h.applyChanges(m,s.isPrimaryClient,g);sy(s,t,_.wa);const E=new $S(e,t,h);return s.Fa.set(e,E),s.Ma.has(t)?s.Ma.get(t).push(e):s.Ma.set(t,[e]),_.snapshot}async function QS(s,e,t){const i=De(s),o=i.Fa.get(e),u=i.Ma.get(o.targetId);if(u.length>1)return i.Ma.set(o.targetId,u.filter(h=>!ac(h,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Dd(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),t&&pf(i.remoteStore,o.targetId),Ld(i,o.targetId)}).catch(Qa)):(Ld(i,o.targetId),await Dd(i.localStore,o.targetId,!0))}async function XS(s,e){const t=De(s),i=t.Fa.get(e),o=t.Ma.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),pf(t.remoteStore,i.targetId))}async function YS(s,e,t){const i=sC(s);try{const o=await function(h,m){const g=De(h),_=Tt.now(),E=m.reduce((U,$)=>U.add($.key),Oe());let R,D;return g.persistence.runTransaction("Locally write mutations","readwrite",U=>{let $=Ur(),W=Oe();return g.cs.getEntries(U,E).next(j=>{$=j,$.forEach((re,G)=>{G.isValidDocument()||(W=W.add(re))})}).next(()=>g.localDocuments.getOverlayedDocuments(U,$)).next(j=>{R=j;const re=[];for(const G of m){const H=_x(G,R.get(G.key).overlayedDocument);H!=null&&re.push(new As(G.key,H,_v(H.value.mapValue),Nn.exists(!0)))}return g.mutationQueue.addMutationBatch(U,_,re,m)}).next(j=>{D=j;const re=j.applyToLocalDocumentSet(R,W);return g.documentOverlayCache.saveOverlays(U,j.batchId,re)})}).then(()=>({batchId:D.batchId,changes:Pv(R)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(h,m,g){let _=h.Ba[h.currentUser.toKey()];_||(_=new it(He)),_=_.insert(m,g),h.Ba[h.currentUser.toKey()]=_}(i,o.batchId,t),await tl(i,o.changes),await pc(i.remoteStore)}catch(o){const u=_f(o,"Failed to persist write");t.reject(u)}}async function l_(s,e){const t=De(s);try{const i=await dS(t.localStore,e);e.targetChanges.forEach((o,u)=>{const h=t.Na.get(u);h&&(Ke(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.va=!0:o.modifiedDocuments.size>0?Ke(h.va):o.removedDocuments.size>0&&(Ke(h.va),h.va=!1))}),await tl(t,i,e)}catch(i){await Qa(i)}}function ry(s,e,t){const i=De(s);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Fa.forEach((u,h)=>{const m=h.view.Z_(e);m.snapshot&&o.push(m.snapshot)}),function(h,m){const g=De(h);g.onlineState=m;let _=!1;g.queries.forEach((E,R)=>{for(const D of R.j_)D.Z_(m)&&(_=!0)}),_&&Tf(g)}(i.eventManager,e),o.length&&i.Ca.d_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function JS(s,e,t){const i=De(s);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Na.get(e),u=o&&o.key;if(u){let h=new it(Se.comparator);h=h.insert(u,Ht.newNoDocument(u,be.min()));const m=Oe().add(u),g=new hc(be.min(),new Map,new it(He),h,m);await l_(i,g),i.Oa=i.Oa.remove(u),i.Na.delete(e),xf(i)}else await Dd(i.localStore,e,!1).then(()=>Ld(i,e,t)).catch(Qa)}async function ZS(s,e){const t=De(s),i=e.batch.batchId;try{const o=await hS(t.localStore,e);c_(t,i,null),u_(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await tl(t,o)}catch(o){await Qa(o)}}async function eC(s,e,t){const i=De(s);try{const o=await function(h,m){const g=De(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let E;return g.mutationQueue.lookupMutationBatch(_,m).next(R=>(Ke(R!==null),E=R.keys(),g.mutationQueue.removeMutationBatch(_,R))).next(()=>g.mutationQueue.performConsistencyCheck(_)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(_,E,m)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,E)).next(()=>g.localDocuments.getDocuments(_,E))})}(i.localStore,e);c_(i,e,t),u_(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await tl(i,o)}catch(o){await Qa(o)}}function u_(s,e){(s.ka.get(e)||[]).forEach(t=>{t.resolve()}),s.ka.delete(e)}function c_(s,e,t){const i=De(s);let o=i.Ba[i.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),i.Ba[i.currentUser.toKey()]=o}}function Ld(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Ma.get(e))s.Fa.delete(i),t&&s.Ca.$a(i,t);s.Ma.delete(e),s.isPrimaryClient&&s.La.gr(e).forEach(i=>{s.La.containsKey(i)||h_(s,i)})}function h_(s,e){s.xa.delete(e.path.canonicalString());const t=s.Oa.get(e);t!==null&&(pf(s.remoteStore,t),s.Oa=s.Oa.remove(e),s.Na.delete(t),xf(s))}function sy(s,e,t){for(const i of t)i instanceof i_?(s.La.addReference(i.key,e),tC(s,i)):i instanceof o_?(_e("SyncEngine","Document no longer in limbo: "+i.key),s.La.removeReference(i.key,e),s.La.containsKey(i.key)||h_(s,i.key)):Pe()}function tC(s,e){const t=e.key,i=t.path.canonicalString();s.Oa.get(t)||s.xa.has(i)||(_e("SyncEngine","New document in limbo: "+t),s.xa.add(i),xf(s))}function xf(s){for(;s.xa.size>0&&s.Oa.size<s.maxConcurrentLimboResolutions;){const e=s.xa.values().next().value;s.xa.delete(e);const t=new Se(Ze.fromString(e)),i=s.qa.next();s.Na.set(i,new HS(t)),s.Oa=s.Oa.insert(t,i),Zv(s.remoteStore,new _s(ur(oc(t.path)),i,"TargetPurposeLimboResolution",Zd.oe))}}async function tl(s,e,t){const i=De(s),o=[],u=[],h=[];i.Fa.isEmpty()||(i.Fa.forEach((m,g)=>{h.push(i.Ka(g,e,t).then(_=>{var E;if((_||t)&&i.isPrimaryClient){const R=_?!_.fromCache:(E=t==null?void 0:t.targetChanges.get(g.targetId))===null||E===void 0?void 0:E.current;i.sharedClientState.updateQueryState(g.targetId,R?"current":"not-current")}if(_){o.push(_);const R=ff.Wi(g.targetId,_);u.push(R)}}))}),await Promise.all(h),i.Ca.d_(o),await async function(g,_){const E=De(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>J.forEach(_,D=>J.forEach(D.$i,U=>E.persistence.referenceDelegate.addReference(R,D.targetId,U)).next(()=>J.forEach(D.Ui,U=>E.persistence.referenceDelegate.removeReference(R,D.targetId,U)))))}catch(R){if(!Xa(R))throw R;_e("LocalStore","Failed to update sequence numbers: "+R)}for(const R of _){const D=R.targetId;if(!R.fromCache){const U=E.os.get(D),$=U.snapshotVersion,W=U.withLastLimboFreeSnapshotVersion($);E.os=E.os.insert(D,W)}}}(i.localStore,u))}async function nC(s,e){const t=De(s);if(!t.currentUser.isEqual(e)){_e("SyncEngine","User change. New user:",e.toKey());const i=await Qv(t.localStore,e);t.currentUser=e,function(u,h){u.ka.forEach(m=>{m.forEach(g=>{g.reject(new pe(K.CANCELLED,h))})}),u.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await tl(t,i.hs)}}function rC(s,e){const t=De(s),i=t.Na.get(e);if(i&&i.va)return Oe().add(i.key);{let o=Oe();const u=t.Ma.get(e);if(!u)return o;for(const h of u){const m=t.Fa.get(h);o=o.unionWith(m.view.Va)}return o}}function d_(s){const e=De(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=l_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JS.bind(null,e),e.Ca.d_=US.bind(null,e.eventManager),e.Ca.$a=zS.bind(null,e.eventManager),e}function sC(s){const e=De(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZS.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eC.bind(null,e),e}class Yu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return cS(this.persistence,new lS,e.initialUser,this.serializer)}Ga(e){return new iS(df.Zr,this.serializer)}Wa(e){return new yS}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yu.provider={build:()=>new Yu};class Od{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ry(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=nC.bind(null,this.syncEngine),await MS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new FS}()}createDatastore(e){const t=dc(e.databaseInfo.databaseId),i=function(u){return new ES(u)}(e.databaseInfo);return function(u,h,m,g){return new xS(u,h,m,g)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,o,u,h,m){return new CS(i,o,u,h,m)}(this.localStore,this.datastore,e.asyncQueue,t=>ry(this.syncEngine,t,0),function(){return Jg.D()?new Jg:new vS}())}createSyncEngine(e,t){return function(o,u,h,m,g,_,E){const R=new qS(o,u,h,m,g,_);return E&&(R.Qa=!0),R}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const u=De(o);_e("RemoteStore","RemoteStore shutting down."),u.L_.add(5),await el(u),u.k_.shutdown(),u.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Od.provider={build:()=>new Od};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Fr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,t,i,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=$t.UNAUTHENTICATED,this.clientId=gv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,async h=>{_e("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(i,h=>(_e("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=_f(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function dd(s,e){s.asyncQueue.verifyOperationInProgress(),_e("FirestoreClient","Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let i=t.initialUser;s.setCredentialChangeListener(async o=>{i.isEqual(o)||(await Qv(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}async function iy(s,e){s.asyncQueue.verifyOperationInProgress();const t=await oC(s);_e("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener(i=>Zg(e.remoteStore,i)),s.setAppCheckTokenChangeListener((i,o)=>Zg(e.remoteStore,o)),s._onlineComponents=e}async function oC(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){_e("FirestoreClient","Using user provided OfflineComponentProvider");try{await dd(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===K.FAILED_PRECONDITION||o.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;mo("Error using user provided cache. Falling back to memory cache: "+t),await dd(s,new Yu)}}else _e("FirestoreClient","Using default OfflineComponentProvider"),await dd(s,new Yu);return s._offlineComponents}async function f_(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(_e("FirestoreClient","Using user provided OnlineComponentProvider"),await iy(s,s._uninitializedComponentsProvider._online)):(_e("FirestoreClient","Using default OnlineComponentProvider"),await iy(s,new Od))),s._onlineComponents}function aC(s){return f_(s).then(e=>e.syncEngine)}async function Ju(s){const e=await f_(s),t=e.eventManager;return t.onListen=WS.bind(null,e.syncEngine),t.onUnlisten=QS.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=KS.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=XS.bind(null,e.syncEngine),t}function lC(s,e,t={}){const i=new Vr;return s.asyncQueue.enqueueAndForget(async()=>function(u,h,m,g,_){const E=new Sf({next:D=>{E.Za(),h.enqueueAndForget(()=>Ef(u,R));const U=D.docs.has(m);!U&&D.fromCache?_.reject(new pe(K.UNAVAILABLE,"Failed to get document because the client is offline.")):U&&D.fromCache&&g&&g.source==="server"?_.reject(new pe(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(D)},error:D=>_.reject(D)}),R=new If(oc(m.path),E,{includeMetadataChanges:!0,_a:!0});return wf(u,R)}(await Ju(s),s.asyncQueue,e,t,i)),i.promise}function uC(s,e,t={}){const i=new Vr;return s.asyncQueue.enqueueAndForget(async()=>function(u,h,m,g,_){const E=new Sf({next:D=>{E.Za(),h.enqueueAndForget(()=>Ef(u,R)),D.fromCache&&g.source==="server"?_.reject(new pe(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(D)},error:D=>_.reject(D)}),R=new If(m,E,{includeMetadataChanges:!0,_a:!0});return wf(u,R)}(await Ju(s),s.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m_(s,e,t){if(!t)throw new pe(K.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function cC(s,e,t,i){if(e===!0&&i===!0)throw new pe(K.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function ay(s){if(!Se.isDocumentKey(s))throw new pe(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function ly(s){if(Se.isDocumentKey(s))throw new pe(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function mc(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Pe()}function un(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new pe(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=mc(s);throw new pe(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new pe(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new pe(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=p_((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new pe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new pe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new pe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uy({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uy(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new kI;switch(i.type){case"firstParty":return new bI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new pe(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=oy.get(t);i&&(_e("ComponentProvider","Removing Datastore"),oy.delete(t),i.terminate())}(this),Promise.resolve()}}function hC(s,e,t,i={}){var o;const u=(s=un(s,gc))._getSettings(),h=`${e}:${t}`;if(u.host!=="firestore.googleapis.com"&&u.host!==h&&mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),s._setSettings(Object.assign(Object.assign({},u),{host:h,ssl:!1})),i.mockUserToken){let m,g;if(typeof i.mockUserToken=="string")m=i.mockUserToken,g=$t.MOCK_USER;else{m=tw(i.mockUserToken,(o=s._app)===null||o===void 0?void 0:o.options.projectId);const _=i.mockUserToken.sub||i.mockUserToken.user_id;if(!_)throw new pe(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new $t(_)}s._authCredentials=new RI(new mv(m,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new fi(this.firestore,e,this._query)}}class qt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Is(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qt(this.firestore,e,this._key)}}class Is extends fi{constructor(e,t,i){super(e,t,oc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qt(this.firestore,null,new Se(e))}withConverter(e){return new Is(this.firestore,e,this._path)}}function dt(s,e,...t){if(s=Ot(s),m_("collection","path",e),s instanceof gc){const i=Ze.fromString(e,...t);return ly(i),new Is(s,null,i)}{if(!(s instanceof qt||s instanceof Is))throw new pe(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Ze.fromString(e,...t));return ly(i),new Is(s.firestore,null,i)}}function Wt(s,e,...t){if(s=Ot(s),arguments.length===1&&(e=gv.newId()),m_("doc","path",e),s instanceof gc){const i=Ze.fromString(e,...t);return ay(i),new qt(s,null,new Se(i))}{if(!(s instanceof qt||s instanceof Is))throw new pe(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Ze.fromString(e,...t));return ay(i),new qt(s.firestore,s instanceof Is?s.converter:null,new Se(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Yv(this,"async_queue_retry"),this.Vu=()=>{const i=hd();i&&_e("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const t=hd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=hd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new Vr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Xa(e))throw e;_e("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const o=function(h){let m=h.message||"";return h.stack&&(m=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),m}(i);throw Fr("INTERNAL UNHANDLED ERROR: ",o),i}).then(i=>(this.du=!1,i))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const o=vf.createAndSchedule(this,e,t,i,u=>this.yu(u));return this.Tu.push(o),o}fu(){this.Eu&&Pe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function hy(s){return function(t,i){if(typeof t!="object"||t===null)return!1;const o=t;for(const u of i)if(u in o&&typeof o[u]=="function")return!0;return!1}(s,["next","error","complete"])}class zr extends gc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new cy,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new cy(e),this._firestoreClient=void 0,await e}}}function dC(s,e){const t=typeof s=="object"?s:ky(),i=typeof s=="string"?s:"(default)",o=Bd(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const u=Z0("firestore");u&&hC(o,...u)}return o}function yc(s){if(s._terminated)throw new pe(K.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||fC(s),s._firestoreClient}function fC(s){var e,t,i;const o=s._freezeSettings(),u=function(m,g,_,E){return new qI(m,g,_,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,p_(E.experimentalLongPollingOptions),E.useFetchStreams)}(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,o);s._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(s._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),s._firestoreClient=new iC(s._authCredentials,s._appCheckCredentials,s._queue,u,s._componentsProvider&&function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Eo(Mt.fromBase64String(e))}catch(t){throw new pe(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Eo(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=/^__.*__$/;class mC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new As(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ja(e,this.data,t,this.fieldTransforms)}}class g_{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new As(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function y_(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe()}}class Rf{constructor(e,t,i,o,u,h){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,u===void 0&&this.vu(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Rf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.Ou(e),o}Nu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Zu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(y_(this.Cu)&&pC.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class gC{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||dc(e)}Qu(e,t,i,o=!1){return new Rf({Cu:e,methodName:t,qu:i,path:Vt.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _c(s){const e=s._freezeSettings(),t=dc(s._databaseId);return new gC(s._databaseId,!!e.ignoreUndefinedProperties,t)}function v_(s,e,t,i,o,u={}){const h=s.Qu(u.merge||u.mergeFields?2:0,e,t,o);Pf("Data must be an object, but it was:",h,i);const m=__(i,h);let g,_;if(u.merge)g=new wn(h.fieldMask),_=h.fieldTransforms;else if(u.mergeFields){const E=[];for(const R of u.mergeFields){const D=Md(e,R,t);if(!h.contains(D))throw new pe(K.INVALID_ARGUMENT,`Field '${D}' is specified in your field mask but missing from your input data.`);E_(E,D)||E.push(D)}g=new wn(E),_=h.fieldTransforms.filter(R=>g.covers(R.field))}else g=null,_=h.fieldTransforms;return new mC(new ln(m),g,_)}class wc extends Cf{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wc}}function yC(s,e,t,i){const o=s.Qu(1,e,t);Pf("Data must be an object, but it was:",o,i);const u=[],h=ln.empty();hi(i,(g,_)=>{const E=Nf(e,g,t);_=Ot(_);const R=o.Nu(E);if(_ instanceof wc)u.push(E);else{const D=nl(_,R);D!=null&&(u.push(E),h.set(E,D))}});const m=new wn(u);return new g_(h,m,o.fieldTransforms)}function vC(s,e,t,i,o,u){const h=s.Qu(1,e,t),m=[Md(e,i,t)],g=[o];if(u.length%2!=0)throw new pe(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let D=0;D<u.length;D+=2)m.push(Md(e,u[D])),g.push(u[D+1]);const _=[],E=ln.empty();for(let D=m.length-1;D>=0;--D)if(!E_(_,m[D])){const U=m[D];let $=g[D];$=Ot($);const W=h.Nu(U);if($ instanceof wc)_.push(U);else{const j=nl($,W);j!=null&&(_.push(U),E.set(U,j))}}const R=new wn(_);return new g_(E,R,h.fieldTransforms)}function _C(s,e,t,i=!1){return nl(t,s.Qu(i?4:3,e))}function nl(s,e){if(w_(s=Ot(s)))return Pf("Unsupported field value:",e,s),__(s,e);if(s instanceof Cf)return function(i,o){if(!y_(o.Cu))throw o.Bu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,o){const u=[];let h=0;for(const m of i){let g=nl(m,o.Lu(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}}(s,e)}return function(i,o){if((i=Ot(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return fx(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=Tt.fromDate(i);return{timestampValue:Qu(o.serializer,u)}}if(i instanceof Tt){const u=new Tt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Qu(o.serializer,u)}}if(i instanceof Af)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Eo)return{bytesValue:Bv(o.serializer,i._byteString)};if(i instanceof qt){const u=o.databaseId,h=i.firestore._databaseId;if(!h.isEqual(u))throw o.Bu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:cf(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof kf)return function(h,m){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:h.toArray().map(g=>{if(typeof g!="number")throw m.Bu("VectorValues must only contain numeric values.");return of(m.serializer,g)})}}}}}}(i,o);throw o.Bu(`Unsupported field value: ${mc(i)}`)}(s,e)}function __(s,e){const t={};return yv(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hi(s,(i,o)=>{const u=nl(o,e.Mu(i));u!=null&&(t[i]=u)}),{mapValue:{fields:t}}}function w_(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Tt||s instanceof Af||s instanceof Eo||s instanceof qt||s instanceof Cf||s instanceof kf)}function Pf(s,e,t){if(!w_(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const i=mc(t);throw i==="an object"?e.Bu(s+" a custom object"):e.Bu(s+" "+i)}}function Md(s,e,t){if((e=Ot(e))instanceof vc)return e._internalPath;if(typeof e=="string")return Nf(s,e);throw Zu("Field path arguments must be of type string or ",s,!1,void 0,t)}const wC=new RegExp("[~\\*/\\[\\]]");function Nf(s,e,t){if(e.search(wC)>=0)throw Zu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new vc(...e.split("."))._internalPath}catch{throw Zu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Zu(s,e,t,i,o){const u=i&&!i.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${i}`),h&&(g+=` in document ${o}`),g+=")"),new pe(K.INVALID_ARGUMENT,m+s+g)}function E_(s,e){return s.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e,t,i,o,u){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new qt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new EC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(bf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class EC extends T_{data(){return super.data()}}function bf(s,e){return typeof e=="string"?Nf(s,e):e instanceof vc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new pe(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Df{}class TC extends Df{}function Jt(s,e,...t){let i=[];e instanceof Df&&i.push(e),i=i.concat(t),function(u){const h=u.filter(g=>g instanceof Vf).length,m=u.filter(g=>g instanceof Ec).length;if(h>1||h>0&&m>0)throw new pe(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const o of i)s=o._apply(s);return s}class Ec extends TC{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Ec(e,t,i)}_apply(e){const t=this._parse(e);return x_(e._query,t),new fi(e.firestore,e.converter,Ad(e._query,t))}_parse(e){const t=_c(e.firestore);return function(u,h,m,g,_,E,R){let D;if(_.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new pe(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){fy(R,E);const U=[];for(const $ of R)U.push(dy(g,u,$));D={arrayValue:{values:U}}}else D=dy(g,u,R)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||fy(R,E),D=_C(m,h,R,E==="in"||E==="not-in");return gt.create(_,E,D)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function lt(s,e,t){const i=e,o=bf("where",s);return Ec._create(o,i,t)}class Vf extends Df{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Vf(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:Gn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(o,u){let h=o;const m=u.getFlattenedFilters();for(const g of m)x_(h,g),h=Ad(h,g)}(e._query,t),new fi(e.firestore,e.converter,Ad(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function dy(s,e,t){if(typeof(t=Ot(t))=="string"){if(t==="")throw new pe(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Cv(e)&&t.indexOf("/")!==-1)throw new pe(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Ze.fromString(t));if(!Se.isDocumentKey(i))throw new pe(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Dg(s,new Se(i))}if(t instanceof qt)return Dg(s,t._key);throw new pe(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mc(t)}.`)}function fy(s,e){if(!Array.isArray(s)||s.length===0)throw new pe(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function x_(s,e){const t=function(o,u){for(const h of o)for(const m of h.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(s.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new pe(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class IC{convertValue(e,t="none"){switch(li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return hi(e,(o,u)=>{i[o]=this.convertValue(u,t)}),i}convertVectorValue(e){var t,i,o;const u=(o=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(h=>ht(h.doubleValue));return new kf(u)}convertGeoPoint(e){return new Af(ht(e.latitude),ht(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=tf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Oa(e));default:return null}}convertTimestamp(e){const t=Ss(e);return new Tt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Ze.fromString(e);Ke(Gv(i));const o=new Ma(i.get(1),i.get(3)),u=new Se(i.popFirst(5));return o.isEqual(t)||Fr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(s,e,t){let i;return i=s?s.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class C_ extends T_{constructor(e,t,i,o,u,h){super(e,t,i,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Du(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(bf("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Du extends C_{data(e={}){return super.data(e)}}class A_{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Aa(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Du(this._firestore,this._userDataWriter,i.key,i,new Aa(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(m=>{const g=new Du(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Aa(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const g=new Du(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Aa(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let _=-1,E=-1;return m.type!==0&&(_=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),E=h.indexOf(m.doc.key)),{type:xC(m.type),doc:g,oldIndex:_,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function xC(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(s){s=un(s,qt);const e=un(s.firestore,zr);return lC(yc(e),s._key).then(t=>k_(e,s,t))}class Lf extends IC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Eo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qt(this.firestore,null,t)}}function hr(s){s=un(s,fi);const e=un(s.firestore,zr),t=yc(e),i=new Lf(e);return I_(s._query),uC(t,s._query).then(o=>new A_(e,i,s,o))}function Vu(s,e,t){s=un(s,qt);const i=un(s.firestore,zr),o=S_(s.converter,e);return Tc(i,[v_(_c(i),"setDoc",s._key,o,s.converter!==null,t).toMutation(s._key,Nn.none())])}function rl(s,e,t,...i){s=un(s,qt);const o=un(s.firestore,zr),u=_c(o);let h;return h=typeof(e=Ot(e))=="string"||e instanceof vc?vC(u,"updateDoc",s._key,e,t,i):yC(u,"updateDoc",s._key,e),Tc(o,[h.toMutation(s._key,Nn.exists(!0))])}function Of(s){return Tc(un(s.firestore,zr),[new af(s._key,Nn.none())])}function Mf(s,e){const t=un(s.firestore,zr),i=Wt(s),o=S_(s.converter,e);return Tc(t,[v_(_c(s.firestore),"addDoc",i._key,o,s.converter!==null,{}).toMutation(i._key,Nn.exists(!1))]).then(()=>i)}function ui(s,...e){var t,i,o;s=Ot(s);let u={includeMetadataChanges:!1,source:"default"},h=0;typeof e[h]!="object"||hy(e[h])||(u=e[h],h++);const m={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(hy(e[h])){const R=e[h];e[h]=(t=R.next)===null||t===void 0?void 0:t.bind(R),e[h+1]=(i=R.error)===null||i===void 0?void 0:i.bind(R),e[h+2]=(o=R.complete)===null||o===void 0?void 0:o.bind(R)}let g,_,E;if(s instanceof qt)_=un(s.firestore,zr),E=oc(s._key.path),g={next:R=>{e[h]&&e[h](k_(_,s,R))},error:e[h+1],complete:e[h+2]};else{const R=un(s,fi);_=un(R.firestore,zr),E=R._query;const D=new Lf(_);g={next:U=>{e[h]&&e[h](new A_(_,D,R,U))},error:e[h+1],complete:e[h+2]},I_(s._query)}return function(D,U,$,W){const j=new Sf(W),re=new If(U,j,$);return D.asyncQueue.enqueueAndForget(async()=>wf(await Ju(D),re)),()=>{j.Za(),D.asyncQueue.enqueueAndForget(async()=>Ef(await Ju(D),re))}}(yc(_),E,m,g)}function Tc(s,e){return function(i,o){const u=new Vr;return i.asyncQueue.enqueueAndForget(async()=>YS(await aC(i),o,u)),u.promise}(yc(s),e)}function k_(s,e,t){const i=t.docs.get(e._key),o=new Lf(s);return new C_(s,o,e._key,i,new Aa(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){So=o})(Io),po(new si("firestore",(i,{instanceIdentifier:o,options:u})=>{const h=i.getProvider("app").getImmediate(),m=new zr(new PI(i.getProvider("auth-internal")),new VI(i.getProvider("app-check-internal")),function(_,E){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new pe(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ma(_.options.projectId,E)}(h,o),h);return u=Object.assign({useFetchStreams:t},u),m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),Ts(kg,"4.7.3",e),Ts(kg,"4.7.3","esm2017")})();/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),R_=(...s)=>s.filter((e,t,i)=>!!e&&i.indexOf(e)===t).join(" ");/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var CC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=te.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:o="",children:u,iconNode:h,...m},g)=>te.createElement("svg",{ref:g,...CC,width:e,height:e,stroke:s,strokeWidth:i?Number(t)*24/Number(e):t,className:R_("lucide",o),...m},[...h.map(([_,E])=>te.createElement(_,E)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=(s,e)=>{const t=te.forwardRef(({className:i,...o},u)=>te.createElement(AC,{ref:u,iconNode:e,className:R_(`lucide-${SC(s)}`,i),...o}));return t.displayName=`${s}`,t};/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=cn("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jf=cn("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=cn("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=cn("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P_=cn("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=cn("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=cn("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=cn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=cn("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N_=cn("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=cn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=cn("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=cn("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=cn("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),fd=typeof __firebase_config<"u"?JSON.parse(__firebase_config):{},b_=typeof __app_id<"u"?__app_id:"default-app-id",gy=typeof __initial_auth_token<"u"?__initial_auth_token:null;let Lu,ps,_n;try{Object.keys(fd).length>0&&fd.projectId?(Lu=Ay(fd),ps=dC(Lu),_n=CI(Lu)):console.error("Firebase configuration is missing or incomplete. Cannot initialize Firebase.")}catch(s){console.error("Firebase initialization error:",s)}const ci=`/artifacts/${b_}/public/data`,et=s=>`/artifacts/${b_}/users/${s}`,qe={ATHLETES:"athletes",COACHES:"coaches",CURRENT_CHECKINS:"current_checkins",HISTORICAL_CHECKIN_LOGS:"historical_checkin_logs",APP_METADATA:"app_metadata"},yy={coaches:[{id:"coach-alex",name:"Coach Alex",email:"alex@cheergym.com",phone:"555-111-2222",teams:["Sparkle Squad","Power Pumas"],classes:["Tumble Basics"],isApproved:!0,passcode:"1234"},{id:"coach-jessica",name:"Coach Jessica",email:"jessica@cheergym.com",phone:"555-333-4444",teams:["Power Pumas"],classes:["Jump Drills"],isApproved:!0,passcode:"0000"}],athletes:[{id:"athlete-1",name:"Emily Smith",teams:["Sparkle Squad","Power Pumas"],classes:["Tumble Basics"],skills:[{name:"Back Handspring",status:"Working On"}],improvementAreas:"Needs stronger jumps.",coachNotes:[],parentName:"Sarah Smith",parentPhone:"555-123-4567",parentEmail:"sarah@example.com",emergencyContactName:"John Smith",emergencyContactPhone:"555-765-4321",isApproved:!0,addedByCoach:"Coach Alex",profilePicture:"https://placehold.co/100x100/A0DAFB/FFFFFF?text=ES"},{id:"athlete-2",name:"Mia Johnson",teams:["Sparkle Squad"],classes:["Jump Drills"],skills:[{name:"Round-off",status:"Mastered"}],improvementAreas:"More flexibility.",coachNotes:[],parentName:"David Johnson",parentPhone:"555-987-6543",parentEmail:"david@example.com",emergencyContactName:"Laura Johnson",emergencyContactPhone:"555-432-1098",isApproved:!0,addedByCoach:"Coach Jessica",profilePicture:"https://placehold.co/100x100/F0B27A/FFFFFF?text=MJ"},{id:"athlete-3",name:"Olivia Brown",teams:["Power Pumas"],classes:["Tumble Basics"],skills:[{name:"Flyer Skills",status:"Not Started"}],improvementAreas:"Build confidence.",coachNotes:[],parentName:"Robert Brown",parentPhone:"555-555-1212",parentEmail:"robert@example.com",emergencyContactName:"Maria Brown",emergencyContactPhone:"555-212-5555",isApproved:!0,addedByCoach:"Coach Alex",profilePicture:"https://placehold.co/100x100/96CEB4/FFFFFF?text=OB"},{id:"athlete-pending-1",name:"Sophia Miller",teams:["Sparkle Squad"],classes:[],skills:[],improvementAreas:"",coachNotes:[],parentName:"Chris Miller",parentPhone:"555-100-2000",parentEmail:"chris@example.com",emergencyContactName:"Pat Miller",emergencyContactPhone:"555-200-1000",isApproved:!1,addedByCoach:"Coach Alex",profilePicture:"https://placehold.co/100x100/DBE2EF/36454F?text=SM"}]},jd="cheer123",DC=()=>v.jsxs("div",{className:"flex justify-center items-center p-4",children:[v.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"}),v.jsx("span",{className:"ml-2 text-gray-700",children:"Loading..."})]}),To=({isOpen:s,title:e,children:t,onClose:i,showCloseButton:o=!0})=>s?v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:v.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-auto relative transform transition-all scale-100 opacity-100",children:[v.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:e}),t,o&&v.jsx("button",{onClick:i,className:"absolute top-3 right-3 text-gray-500 hover:text-gray-700 focus:outline-none",children:v.jsx(xc,{size:20})})]})}):null,VC=({message:s,type:e,onClose:t})=>{const i=e==="success"?"bg-green-500":"bg-red-500",o=e==="success"?v.jsx(P_,{size:20}):v.jsx(RC,{size:20});return s?v.jsxs("div",{className:`fixed bottom-4 right-4 ${i} text-white px-4 py-3 rounded-lg shadow-lg flex items-center z-50`,role:"alert",children:[o,v.jsx("span",{className:"ml-2",children:s}),v.jsx("button",{onClick:t,className:"ml-4 text-white opacity-90 hover:opacity-100",children:v.jsx(xc,{size:16})})]}):null},D_=({isOpen:s,title:e,message:t,onConfirm:i,onCancel:o,confirmText:u="Confirm",cancelText:h="Cancel"})=>s?v.jsxs(To,{isOpen:s,title:e,onClose:o,showCloseButton:!1,children:[v.jsx("p",{className:"text-gray-700 mb-6",children:t}),v.jsxs("div",{className:"flex justify-end space-x-4",children:[v.jsx("button",{onClick:o,className:"bg-gray-300 text-gray-800 py-2 px-4 rounded-lg font-semibold hover:bg-gray-400 transition",children:h}),v.jsx("button",{onClick:i,className:"bg-red-600 text-white py-2 px-4 rounded-lg font-semibold hover:bg-red-700 transition",children:u})]})]}):null;function LC(){const[s,e]=te.useState(!1),[t,i]=te.useState(null),[o,u]=te.useState("none"),[h,m]=te.useState(!1),[g,_]=te.useState(!1),[E,R]=te.useState(""),[D,U]=te.useState("success"),$=te.useCallback((G,H="success",se=3e3)=>{R(G),U(H),_(!0);const ue=setTimeout(()=>{_(!1),R("")},se);return()=>clearTimeout(ue)},[]);te.useEffect(()=>{if(!Lu||!_n){console.error("Firebase app or auth not initialized. Please check Firebase configuration."),m(!0);return}const G=mT(_n,async H=>{if(H)i(H.uid),await W(H.uid);else try{gy?await dT(_n,gy):await aT(_n)}catch(se){console.error("Error signing in:",se),$(`Authentication failed: ${se.message}`,"error")}m(!0)});return()=>G()},[_n]);const W=async G=>{var se;if(!ps||!G)return;const H=Wt(ps,et(G),qe.APP_METADATA,"seed_status");try{const ue=await ec(H);if(!ue.exists()||!((se=ue.data())!=null&&se.seeded)){console.log("Seeding initial data...");const oe=[];for(const P of yy.coaches)oe.push(Vu(Wt(ps,et(G),qe.COACHES,P.id),P));for(const P of yy.athletes)oe.push(Vu(Wt(ps,et(G),qe.ATHLETES,P.id),P));await Promise.all(oe),await Vu(H,{seeded:!0,timestamp:new Date}),console.log("Initial data seeded successfully.")}else console.log("Data already seeded.")}catch(ue){console.error("Error seeding initial data:",ue),$(`Error seeding data: ${ue.message}`,"error")}},j=async G=>{if(!_n||!ps||!t)return $("App is not fully initialized. Please wait or check console for Firebase errors.","error"),!1;if(G===jd)return e(!0),u("admin"),$("Logged in as Admin!"),!0;try{const H=dt(ps,et(t),qe.COACHES),se=Jt(H,lt("passcode","==",G),lt("isApproved","==",!0));return(await hr(se)).empty?($("Invalid Passcode.","error"),!1):(e(!0),u("coach"),$("Logged in as Coach!"),!0)}catch(H){return console.error("Error during login:",H),$(`Login error: ${H.message}`,"error"),!1}},re=()=>{e(!1),u("none"),$("Logged out successfully.")};return h?v.jsxs("div",{className:"min-h-screen bg-gray-100 font-sans text-gray-900 flex flex-col items-center justify-center p-4",children:[s?v.jsx(MC,{currentUserId:t,userRole:o,onLogout:re,db:ps,showAppToast:$}):v.jsx(OC,{onLogin:j}),v.jsx(VC,{message:E,type:D,onClose:()=>_(!1)}),s&&v.jsxs("div",{className:"absolute bottom-2 left-2 text-xs text-gray-500 bg-white bg-opacity-75 p-1 rounded",children:["User ID: ",t]})]}):v.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-400 to-indigo-600",children:v.jsx(DC,{})})}const OC=({onLogin:s})=>{const[e,t]=te.useState(""),[i,o]=te.useState(!1),u=async h=>{h.preventDefault(),o(!0),await s(e)||t(""),o(!1)};return v.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-2xl w-full max-w-sm border border-gray-200",children:[v.jsx("h2",{className:"text-3xl font-extrabold text-center text-indigo-700 mb-6",children:"Cheer Gym Portal"}),v.jsxs("form",{onSubmit:u,className:"space-y-6",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"passcode",className:"block text-sm font-medium text-gray-700 mb-1",children:"Enter Passcode"}),v.jsx("input",{type:"password",id:"passcode",className:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-lg tracking-widest text-center",value:e,onChange:h=>t(h.target.value),required:!0,maxLength:"10"})]}),v.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-indigo-500 to-purple-600 text-white py-3 px-6 rounded-lg font-semibold text-lg shadow-md hover:from-indigo-600 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-300 ease-in-out transform hover:scale-105",disabled:i,children:i?"Logging In...":"Login"})]})]})},MC=({currentUserId:s,userRole:e,onLogout:t,db:i,showAppToast:o})=>{const[u,h]=te.useState("check-in");return te.useEffect(()=>{h(e==="coach"||e==="admin"?"coach-dashboard":"check-in")},[e]),v.jsxs("div",{className:"w-full max-w-6xl mx-auto bg-white rounded-xl shadow-2xl border border-gray-200 min-h-[80vh] flex flex-col",children:[v.jsxs("header",{className:"p-4 bg-gradient-to-r from-indigo-600 to-purple-700 text-white rounded-t-xl shadow-md flex justify-between items-center",children:[v.jsx("h1",{className:"text-3xl font-extrabold",children:"Cheer Portal"}),v.jsxs("div",{className:"flex items-center space-x-4",children:[e!=="none"&&v.jsxs("span",{className:"text-sm font-medium opacity-80 capitalize",children:["Logged in as ",e]}),v.jsx("button",{onClick:t,className:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105",children:"Logout"})]})]}),v.jsxs("nav",{className:"flex bg-gray-50 border-b border-gray-200",children:[v.jsxs("button",{onClick:()=>h("check-in"),className:`flex-1 py-3 px-4 text-center font-medium text-gray-700 hover:bg-gray-100 focus:outline-none transition-colors duration-200 ${u==="check-in"?"border-b-4 border-indigo-600 text-indigo-700 bg-gray-100":""}`,children:[v.jsx(Ic,{className:"inline-block mr-2",size:20})," Check-In"]}),(e==="coach"||e==="admin")&&v.jsxs("button",{onClick:()=>h("coach-dashboard"),className:`flex-1 py-3 px-4 text-center font-medium text-gray-700 hover:bg-gray-100 focus:outline-none transition-colors duration-200 ${u==="coach-dashboard"?"border-b-4 border-indigo-600 text-indigo-700 bg-gray-100":""}`,children:[v.jsx(NC,{className:"inline-block mr-2",size:20})," Coach Dashboard"]})]}),v.jsxs("main",{className:"flex-1 p-6 overflow-auto",children:[u==="check-in"&&v.jsx(jC,{db:i,currentUserId:s,showAppToast:o}),u==="coach-dashboard"&&(e==="coach"||e==="admin")&&v.jsx(FC,{db:i,currentUserId:s,userRole:e,showAppToast:o})]})]})},jC=({db:s,currentUserId:e,showAppToast:t})=>{const[i,o]=te.useState(null),[u,h]=te.useState(null),[m,g]=te.useState([]),[_,E]=te.useState([]),[R,D]=te.useState([]),[U,$]=te.useState([]),[W,j]=te.useState(null),[re,G]=te.useState({}),H=te.useRef({}),[se,ue]=te.useState(!1),oe=1e3;te.useEffect(()=>{if(!s||!e)return;(async()=>{try{const k=dt(s,et(e),qe.ATHLETES),x=Jt(k,lt("isApproved","==",!0)),Q=await hr(x),he=new Set,Ie=new Set;Q.forEach(ye=>{const Z=ye.data();Z.teams.forEach(de=>he.add(de)),Z.classes.forEach(de=>Ie.add(de))}),E(Array.from(he).sort()),D(Array.from(Ie).sort())}catch(k){console.error("Error fetching entities:",k),t(`Error loading teams/classes: ${k.message}`,"error")}})()},[s,e,t]),te.useEffect(()=>{if(!s||!e||!i||!u){g([]);return}const C=dt(s,et(e),qe.ATHLETES);let k;i==="Team"?k=Jt(C,lt("teams","array-contains",u),lt("isApproved","==",!0)):k=Jt(C,lt("classes","array-contains",u),lt("isApproved","==",!0));const x=ui(k,Q=>{const he=Q.docs.map(Ie=>({id:Ie.id,...Ie.data()}));g(he.sort((Ie,ye)=>Ie.name.localeCompare(ye.name)))},Q=>{console.error("Error fetching athletes:",Q),t(`Error loading athletes: ${Q.message}`,"error")});return()=>x()},[s,e,i,u,t]),te.useEffect(()=>{if(!s||!e||!i||!u){$([]);return}const C=dt(s,ci,qe.CURRENT_CHECKINS),k=Jt(C,lt("checkInType","==",i.toLowerCase()),lt("checkInEntity","==",u)),x=ui(k,Q=>{const he=Q.docs.map(Ie=>Ie.data());$(he)},Q=>{console.error("Error fetching current check-ins:",Q),t(`Error loading check-ins: ${Q.message}`,"error")});return()=>x()},[s,e,i,u,t]);const P=(C,k)=>{if(console.log(` [Hold Start] Athlete: ${k} (${C})`),!s||!e){console.warn(" Database or user ID not available."),t("App not ready.","error");return}H.current[C]&&clearInterval(H.current[C]),j(C),G(Q=>({...Q,[C]:0}));const x=Date.now();H.current[C]=setInterval(()=>{const Q=Date.now()-x,he=Math.min(100,Q/oe*100);G(Ie=>({...Ie,[C]:he})),he>=100&&(clearInterval(H.current[C]),delete H.current[C],console.log(` [Hold Complete] Triggering check-in for ${k}`),S(C,k),j(null))},50)},I=C=>{H.current[C]&&(clearInterval(H.current[C]),delete H.current[C]),j(null),G(k=>({...k,[C]:0}))},S=async(C,k)=>{if(console.log(` [Check-In Start] Athlete: ${k} (${C})`),!s||!e||!i||!u){console.warn(" Missing check-in prerequisites:",{db:s,currentUserId:e,selectedCategory:i,selectedEntity:u}),t("Selection incomplete for check-in.","error");return}const x=new Date,Q=dt(s,ci,qe.CURRENT_CHECKINS),he=`${C}_${i.toLowerCase()}_${u}_${x.getTime()}`,Ie={athleteId:C,athleteName:k,checkInType:i.toLowerCase(),checkInEntity:u,timestamp:x.toISOString()};try{await Vu(Wt(Q,he),Ie),console.log(` [Check-In Success] ${k} checked in`),t(`Checked in ${k} for ${u}!`)}catch(ye){console.error(` [Check-In Error] ${k}:`,ye),t(`Check-in failed: ${ye.message}`,"error")}},N=C=>U.some(k=>k.athleteId===C&&k.checkInType===i.toLowerCase()&&k.checkInEntity===u);if(!i)return v.jsxs("div",{className:"flex flex-col items-center justify-center h-full space-y-6",children:[v.jsx("h2",{className:"text-3xl font-bold text-center text-gray-800",children:"Select Check-In Category"}),v.jsxs("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 w-full max-w-md",children:[v.jsxs("button",{onClick:()=>o("Team"),className:"flex-1 bg-indigo-500 text-white py-4 px-6 rounded-lg text-xl font-semibold shadow-lg hover:bg-indigo-600 transition duration-300 ease-in-out transform hover:scale-105",children:[v.jsx(Ic,{className:"inline-block mr-2",size:24})," Team"]}),v.jsxs("button",{onClick:()=>o("Class"),className:"flex-1 bg-purple-500 text-white py-4 px-6 rounded-lg text-xl font-semibold shadow-lg hover:bg-purple-600 transition duration-300 ease-in-out transform hover:scale-105",children:[v.jsx(jf,{className:"inline-block mr-2",size:24})," Class"]})]})]});if(!u){const C=i==="Team"?_:R;return v.jsxs("div",{className:"flex flex-col items-center h-full p-4",children:[v.jsxs("button",{onClick:()=>o(null),className:"self-start mb-4 bg-gray-200 text-gray-700 py-2 px-4 rounded-lg flex items-center hover:bg-gray-300 transition duration-200",children:[v.jsx(tc,{size:20,className:"mr-2"})," Back"]}),v.jsxs("h2",{className:"text-3xl font-bold text-center text-gray-800 mb-6",children:["Select ",i]}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 w-full max-w-3xl",children:C.length===0?v.jsxs("p",{className:"text-center text-gray-600 col-span-full",children:["No ",i.toLowerCase(),"es available."]}):C.map(k=>v.jsx("button",{onClick:()=>h(k),className:"bg-white border border-gray-200 rounded-lg p-4 text-center font-medium shadow hover:shadow-md transition duration-200 transform hover:scale-105 text-lg",children:k},k))})]})}return v.jsxs("div",{className:"flex flex-col h-full p-4",children:[v.jsxs("button",{onClick:()=>h(null),className:"self-start mb-4 bg-gray-200 text-gray-700 py-2 px-4 rounded-lg flex items-center hover:bg-gray-300 transition duration-200",children:[v.jsx(tc,{size:20,className:"mr-2"})," Back to ",i," Selection"]}),v.jsxs("h2",{className:"text-3xl font-bold text-center text-gray-800 mb-6",children:["Check-In for: ",v.jsx("span",{className:"text-indigo-600",children:u})]}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 w-full max-w-5xl mx-auto",children:m.length===0?v.jsxs("p",{className:"text-center text-gray-600 col-span-full",children:["No athletes found for this ",i.toLowerCase(),"."]}):m.map(C=>{const k=N(C.id),x=W===C.id,Q=x&&re[C.id]||0;return v.jsxs("div",{className:`relative bg-white rounded-lg p-4 shadow-md overflow-hidden transition-all duration-300 ease-in-out
                  ${k?"border-2 border-green-500 bg-green-50":"border border-gray-200"}
                  ${x?"scale-105 shadow-xl":""}
                `,children:[x&&v.jsx("div",{className:"absolute inset-0 bg-indigo-200 opacity-50 z-0 transition-all duration-50",style:{width:`${Q}%`}}),v.jsx("button",{className:`relative z-10 w-full text-left py-2 px-3 rounded-lg
                    ${k?"text-green-800":"text-gray-800"}
                    ${x?"pointer-events-none":"hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}
                  `,onMouseDown:()=>{ue(!0),console.log("[MouseDown] Start hold"),P(C.id,C.name)},onMouseUp:()=>{ue(!1),console.log("[MouseUp] End hold"),I(C.id)},onMouseLeave:()=>{se?console.log("[MouseLeave] Mouse still down, not canceling hold."):(console.log("[MouseLeave] Cancel hold (mouse up)"),I(C.id))},onTouchStart:he=>{he.preventDefault(),console.log("[TouchStart] Start hold"),P(C.id,C.name)},onTouchEnd:()=>{console.log("[TouchEnd] End hold"),I(C.id)},onTouchCancel:()=>{console.log("[TouchCancel] Cancel hold"),I(C.id)},children:v.jsxs("div",{className:"flex items-center",children:[v.jsx("img",{src:C.profilePicture||`https://placehold.co/50x50/cccccc/333333?text=${C.name.charAt(0)}`,alt:C.name,className:"w-12 h-12 rounded-full mr-4 object-cover border border-gray-300"}),v.jsx("span",{className:"text-xl font-semibold truncate",children:C.name}),k&&v.jsx(P_,{className:"ml-auto text-green-600",size:24})]})})]},C.id)})})]})},FC=({db:s,currentUserId:e,userRole:t,showAppToast:i})=>{const[o,u]=te.useState("attendance"),[h,m]=te.useState(!1),[g,_]=te.useState(0),E=te.useRef(null),R=3e3,D=()=>{m(!0),_(0);const j=Date.now();E.current=setInterval(()=>{const re=Date.now()-j,G=Math.min(100,re/R*100);_(G),G===100&&(clearInterval(E.current),E.current=null,$(),m(!1))},50)},U=()=>{E.current&&(clearInterval(E.current),E.current=null),m(!1),_(0)},$=async()=>{if(!s||!e){i("App not ready.","error");return}i("Attempting to reset daily check-ins...","info"),console.log("Attempting to reset daily check-ins...");try{const j=dt(s,ci,qe.CURRENT_CHECKINS);console.log("Fetching current check-ins for reset...");const re=await hr(j);console.log(`Found ${re.docs.length} check-ins to process.`);const G=[],H=[];if(re.forEach(se=>{const ue=se.data();G.push(ue),H.push(Of(Wt(j,se.id)))}),console.log("Executing batch delete for current check-ins..."),await Promise.all(H),console.log("Current check-ins successfully deleted."),G.length>0){console.log("Logging to historical records...");const se=dt(s,ci,qe.HISTORICAL_CHECKIN_LOGS);await Mf(se,{timestamp:new Date().toISOString(),resetByUserId:e,dailyCheckInEvents:G.map(({athleteId:ue,athleteName:oe,checkInType:P,checkInEntity:I,timestamp:S})=>({athleteId:ue,athleteName:oe,checkInType:P,checkInEntity:I,timestamp:S}))}),console.log("Historical log added successfully.")}else console.log("No current check-ins to log historically.");i("Daily check-ins reset and logged!"),console.log("Daily check-ins reset and logged successfully.")}catch(j){console.error("Error resetting daily check-ins:",j),i(`Failed to reset: ${j.message}`,"error")}finally{m(!1),_(0),console.log("Reset state cleanup complete.")}},W=t==="admin";return v.jsxs("div",{className:"flex flex-col h-full",children:[v.jsx("div",{className:"flex justify-center mb-6",children:v.jsxs("button",{className:`relative bg-red-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transition-all duration-300 ease-in-out transform ${h?"scale-105":"hover:scale-105"} overflow-hidden`,onMouseDown:D,onMouseUp:U,onMouseLeave:U,onTouchStart:j=>{j.preventDefault(),D()},onTouchEnd:U,onTouchCancel:U,disabled:!W,children:[h&&v.jsx("div",{className:"absolute inset-0 bg-red-800 opacity-50 z-0 transition-all duration-50",style:{width:`${g}%`}}),v.jsx("span",{className:"relative z-10",children:h?`Hold to Reset (${Math.round(g)}%)`:"Reset Daily Check-ins"}),!W&&v.jsx("span",{className:"absolute inset-0 flex items-center justify-center text-xs bg-gray-500 bg-opacity-75 rounded-full z-20",children:"Admin Only"})]})}),v.jsxs("nav",{className:"flex bg-gray-50 border-b border-gray-200 rounded-t-lg overflow-hidden mb-6",children:[v.jsxs("button",{onClick:()=>u("attendance"),className:`flex-1 py-3 px-4 text-center font-medium text-gray-700 hover:bg-gray-100 focus:outline-none transition-colors duration-200 ${o==="attendance"?"border-b-4 border-indigo-600 text-indigo-700 bg-gray-100":""}`,children:[v.jsx(kC,{className:"inline-block mr-2",size:20})," Attendance"]}),v.jsxs("button",{onClick:()=>u("athlete-profiles"),className:`flex-1 py-3 px-4 text-center font-medium text-gray-700 hover:bg-gray-100 focus:outline-none transition-colors duration-200 ${o==="athlete-profiles"?"border-b-4 border-indigo-600 text-indigo-700 bg-gray-100":""}`,children:[v.jsx(bC,{className:"inline-block mr-2",size:20})," Athlete Profiles"]}),v.jsxs("button",{onClick:()=>u("coach-management"),className:`flex-1 py-3 px-4 text-center font-medium text-gray-700 hover:bg-gray-100 focus:outline-none transition-colors duration-200 ${o==="coach-management"?"border-b-4 border-indigo-600 text-indigo-700 bg-gray-100":""}`,children:[v.jsx(Ic,{className:"inline-block mr-2",size:20})," Coach Management"]}),v.jsxs("button",{onClick:()=>u("check-in-logs"),className:`flex-1 py-3 px-4 text-center font-medium text-gray-700 hover:bg-gray-100 focus:outline-none transition-colors duration-200 ${o==="check-in-logs"?"border-b-4 border-indigo-600 text-indigo-700 bg-gray-100":""}`,children:[v.jsx(jf,{className:"inline-block mr-2",size:20})," Check-in Logs"]})]}),v.jsxs("div",{className:"flex-1 overflow-auto bg-white rounded-b-xl p-4 shadow-inner",children:[o==="attendance"&&v.jsx(UC,{db:s,currentUserId:e,showAppToast:i}),o==="athlete-profiles"&&v.jsx(zC,{db:s,currentUserId:e,userRole:t,showAppToast:i}),o==="coach-management"&&v.jsx(BC,{db:s,currentUserId:e,userRole:t,showAppToast:i}),o==="check-in-logs"&&v.jsx(HC,{db:s,currentUserId:e,userRole:t,showAppToast:i})]})]})},UC=({db:s,currentUserId:e,showAppToast:t})=>{const[i,o]=te.useState(null),[u,h]=te.useState(null),[m,g]=te.useState([]),[_,E]=te.useState([]),[R,D]=te.useState([]),[U,$]=te.useState([]);te.useEffect(()=>{if(!s||!e)return;(async()=>{try{const re=dt(s,et(e),qe.ATHLETES),G=Jt(re,lt("isApproved","==",!0)),H=await hr(G),se=new Set,ue=new Set;H.forEach(oe=>{const P=oe.data();P.teams.forEach(I=>se.add(I)),P.classes.forEach(I=>ue.add(I))}),g(Array.from(se).sort()),E(Array.from(ue).sort())}catch(re){console.error("Error fetching entities:",re),t(`Error loading teams/classes: ${re.message}`,"error")}})()},[s,e,t]),te.useEffect(()=>{if(!s||!e||!i||!u){D([]);return}const j=dt(s,et(e),qe.ATHLETES);let re;i==="Team"?re=Jt(j,lt("teams","array-contains",u),lt("isApproved","==",!0)):re=Jt(j,lt("classes","array-contains",u),lt("isApproved","==",!0));const G=ui(re,H=>{const se=H.docs.map(ue=>({id:ue.id,...ue.data()}));D(se.sort((ue,oe)=>ue.name.localeCompare(oe.name)))},H=>{console.error("Error fetching athletes for attendance:",H),t(`Error loading athletes: ${H.message}`,"error")});return()=>G()},[s,e,i,u,t]),te.useEffect(()=>{if(!s||!e||!i||!u){$([]);return}const j=dt(s,ci,qe.CURRENT_CHECKINS),re=Jt(j,lt("checkInType","==",i.toLowerCase()),lt("checkInEntity","==",u)),G=ui(re,H=>{const se=H.docs.map(ue=>ue.data());$(se)},H=>{console.error("Error fetching current check-ins:",H),t(`Error loading check-ins: ${H.message}`,"error")});return()=>G()},[s,e,i,u,t]);const W=j=>{const re=U.filter(G=>G.athleteId===j);if(re.length>0){const G=re.reduce((H,se)=>new Date(H.timestamp)>new Date(se.timestamp)?H:se);return{status:"Checked In",lastCheckinTime:new Date(G.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),activities:re.map(H=>`${H.checkInEntity} (${new Date(H.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})`).join(", ")}}return{status:"Not Checked In",lastCheckinTime:"N/A",activities:"N/A"}};if(!i)return v.jsxs("div",{className:"flex flex-col items-center justify-center h-full space-y-6",children:[v.jsx("h3",{className:"text-2xl font-semibold text-gray-800",children:"Select Category to View Attendance"}),v.jsxs("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 w-full max-w-md",children:[v.jsxs("button",{onClick:()=>o("Team"),className:"flex-1 bg-indigo-500 text-white py-4 px-6 rounded-lg text-xl font-semibold shadow-lg hover:bg-indigo-600 transition duration-300 ease-in-out transform hover:scale-105",children:[v.jsx(Ic,{className:"inline-block mr-2",size:24})," Team"]}),v.jsxs("button",{onClick:()=>o("Class"),className:"flex-1 bg-purple-500 text-white py-4 px-6 rounded-lg text-xl font-semibold shadow-lg hover:bg-purple-600 transition duration-300 ease-in-out transform hover:scale-105",children:[v.jsx(jf,{className:"inline-block mr-2",size:24})," Class"]})]})]});if(!u){const j=i==="Team"?m:_;return v.jsxs("div",{className:"flex flex-col items-center h-full p-4",children:[v.jsxs("button",{onClick:()=>o(null),className:"self-start mb-4 bg-gray-200 text-gray-700 py-2 px-4 rounded-lg flex items-center hover:bg-gray-300 transition duration-200",children:[v.jsx(tc,{size:20,className:"mr-2"})," Back"]}),v.jsxs("h3",{className:"text-2xl font-semibold text-center text-gray-800 mb-6",children:["Select ",i]}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 w-full max-w-3xl",children:j.length===0?v.jsxs("p",{className:"text-center text-gray-600 col-span-full",children:["No ",i.toLowerCase(),"es available."]}):j.map(re=>v.jsx("button",{onClick:()=>h(re),className:"bg-white border border-gray-200 rounded-lg p-4 text-center font-medium shadow hover:shadow-md transition duration-200 transform hover:scale-105 text-lg",children:re},re))})]})}return v.jsxs("div",{className:"flex flex-col h-full p-4",children:[v.jsxs("button",{onClick:()=>h(null),className:"self-start mb-4 bg-gray-200 text-gray-700 py-2 px-4 rounded-lg flex items-center hover:bg-gray-300 transition duration-200",children:[v.jsx(tc,{size:20,className:"mr-2"})," Back to ",i," Selection"]}),v.jsxs("h3",{className:"text-2xl font-bold text-center text-indigo-700 mb-6",children:["Attendance for ",u," (",i,")"]}),v.jsx("div",{className:"overflow-x-auto rounded-lg shadow-md border border-gray-200",children:v.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[v.jsx("thead",{className:"bg-gray-50",children:v.jsxs("tr",{children:[v.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Athlete Name"}),v.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),v.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Check-in Time"}),v.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Activities Today"})]})}),v.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:R.length===0?v.jsx("tr",{children:v.jsxs("td",{colSpan:"4",className:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500",children:["No athletes found for this ",i.toLowerCase(),"."]})}):R.map(j=>{const{status:re,lastCheckinTime:G,activities:H}=W(j.id);return v.jsxs("tr",{className:re==="Checked In"?"bg-green-50":"",children:[v.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v.jsxs("div",{className:"flex items-center",children:[v.jsx("img",{src:j.profilePicture||`https://placehold.co/40x40/cccccc/333333?text=${j.name.charAt(0)}`,alt:j.name,className:"w-8 h-8 rounded-full mr-3 object-cover"}),v.jsx("div",{className:"text-sm font-medium text-gray-900",children:j.name})]})}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${re==="Checked In"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:re})}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:G}),v.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:H})]},j.id)})})]})})]})},zC=({db:s,currentUserId:e,userRole:t,showAppToast:i})=>{const[o,u]=te.useState([]),[h,m]=te.useState(""),[g,_]=te.useState(!1),[E,R]=te.useState(null),[D,U]=te.useState(!1),[$,W]=te.useState(!1),[j,re]=te.useState(null);te.useEffect(()=>{if(!s||!e)return;const k=dt(s,et(e),qe.ATHLETES),x=ui(k,Q=>{const he=Q.docs.map(Ie=>({id:Ie.id,...Ie.data()}));u(he.sort((Ie,ye)=>Ie.name.localeCompare(ye.name)))},Q=>{console.error("Error fetching athletes for profiles:",Q),i(`Error loading athletes: ${Q.message}`,"error")});return()=>x()},[s,e,i]);const G=o.filter(k=>k.isApproved),H=o.filter(k=>!k.isApproved),se=G.filter(k=>k.name.toLowerCase().includes(h.toLowerCase())),ue=async k=>{if(!s||!e||!(t==="admin")){i("Permission denied. Only Admin can approve athletes.","error");return}i("Approving athlete...","info");try{const Q=Wt(s,et(e),qe.ATHLETES,k);await rl(Q,{isApproved:!0}),i("Athlete approved successfully!")}catch(Q){console.error("Error approving athlete:",Q),i(`Failed to approve: ${Q.message}`,"error")}},oe=k=>{re(k),W(!0)},P=async()=>{if(!s||!e||!(t==="admin")||!j){i("Permission denied or athlete not selected.","error");return}i("Deleting athlete...","info");try{const x=Wt(s,et(e),qe.ATHLETES,j);await Of(x),i("Athlete deleted successfully!")}catch(x){console.error("Error deleting athlete:",x),i(`Failed to delete: ${x.message}`,"error")}finally{W(!1),re(null)}},I=k=>{R(k),U(!1)},S=()=>{R(null),U(!1)},N=()=>{t==="admin"?U(x=>!x):i("Only Admin can edit athlete profiles.","error")},C=t==="admin";return v.jsxs("div",{className:"p-4",children:[v.jsx("h3",{className:"text-2xl font-bold text-center text-indigo-700 mb-6",children:"Athlete Profiles"}),v.jsxs("div",{className:"flex justify-between items-center mb-6 flex-wrap gap-4",children:[v.jsx("input",{type:"text",placeholder:"Search approved athletes by name...",className:"flex-1 min-w-[200px] px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500",value:h,onChange:k=>m(k.target.value)}),v.jsxs("button",{onClick:()=>_(!0),className:"bg-indigo-600 text-white py-2 px-5 rounded-lg font-semibold shadow-md hover:bg-indigo-700 transition duration-300 transform hover:scale-105 flex items-center",disabled:!C,children:[v.jsx(za,{size:20,className:"mr-2"})," Add New Athlete",!C&&v.jsx("span",{className:"ml-2 text-xs opacity-75",children:" (Admin Only)"})]})]}),H.length>0&&v.jsxs("div",{className:"mb-8 p-4 bg-yellow-50 border border-yellow-200 rounded-lg shadow-sm",children:[v.jsx("h4",{className:"text-xl font-semibold text-yellow-800 mb-4",children:"Pending Athletes for Approval"}),v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"min-w-full divide-y divide-yellow-200",children:[v.jsx("thead",{className:"bg-yellow-100",children:v.jsxs("tr",{children:[v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-yellow-700 uppercase tracking-wider",children:"Name"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-yellow-700 uppercase tracking-wider",children:"Added By"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-yellow-700 uppercase tracking-wider",children:"Actions"})]})}),v.jsx("tbody",{className:"bg-white divide-y divide-yellow-200",children:H.map(k=>v.jsxs("tr",{children:[v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:k.name}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:k.addedByCoach||"N/A"}),v.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[v.jsx("button",{onClick:()=>ue(k.id),className:`text-green-600 hover:text-green-900 mr-3 ${C?"":"opacity-50 cursor-not-allowed"}`,disabled:!C,children:"Approve"}),v.jsx("button",{onClick:()=>oe(k.id),className:`text-red-600 hover:text-red-900 ${C?"":"opacity-50 cursor-not-allowed"}`,disabled:!C,children:"Delete"})]})]},k.id))})]})})]}),v.jsx("h4",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Approved Athletes"}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:se.length===0?v.jsx("p",{className:"col-span-full text-center text-gray-600",children:"No approved athletes found."}):se.map(k=>v.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 flex items-center space-x-4 hover:shadow-md transition cursor-pointer",onClick:()=>I(k),children:[v.jsx("img",{src:k.profilePicture||`https://placehold.co/60x60/cccccc/333333?text=${k.name.charAt(0)}`,alt:k.name,className:"w-16 h-16 rounded-full object-cover border-4 border-gray-300"}),v.jsxs("div",{children:[v.jsx("p",{className:"text-lg font-semibold text-gray-900",children:k.name}),v.jsxs("p",{className:"text-sm text-gray-600",children:[k.teams.join(", ")," / ",k.classes.join(", ")]})]})]},k.id))}),v.jsx(To,{isOpen:g,title:"Add New Athlete",onClose:()=>_(!1),showCloseButton:!0,children:v.jsx(vy,{db:s,currentUserId:e,onClose:()=>_(!1),showAppToast:i,isNew:!0,isEditing:!0,setParentIsEditing:()=>{},userRole:t})}),E&&v.jsxs(To,{isOpen:!!E,title:D?"Edit Athlete Profile":"View Athlete Profile",onClose:S,showCloseButton:!0,children:[v.jsx("div",{className:"flex justify-end mb-4",children:v.jsxs("button",{onClick:N,className:`py-2 px-4 rounded-lg flex items-center transition duration-200
                ${D?"bg-red-500 text-white hover:bg-red-600":"bg-indigo-500 text-white hover:bg-indigo-600"}
                ${C?"":"opacity-50 cursor-not-allowed"}
              `,disabled:!C,children:[D?v.jsx(xc,{size:18,className:"mr-2"}):v.jsx(N_,{size:18,className:"mr-2"}),D?"Cancel Edit":"Edit Profile"]})}),v.jsx(vy,{db:s,currentUserId:e,onClose:S,showAppToast:i,isNew:!1,initialData:E,isEditing:D,setParentIsEditing:U,athleteId:E.id,userRole:t})]}),v.jsx(D_,{isOpen:$,title:"Confirm Deletion",message:"Are you sure you want to delete this athlete? This action cannot be undone.",onConfirm:P,onCancel:()=>W(!1),confirmText:"Delete"})]})},vy=({db:s,currentUserId:e,onClose:t,showAppToast:i,isNew:o,initialData:u,isEditing:h,setParentIsEditing:m,athleteId:g,userRole:_})=>{const[E,R]=te.useState(u||{name:"",teams:[],classes:[],skills:[],improvementAreas:"",coachNotes:[],parentName:"",parentPhone:"",parentEmail:"",emergencyContactName:"",emergencyContactPhone:"",isApproved:o?!1:(u==null?void 0:u.isApproved)||!1,addedByCoach:"",profilePicture:""}),[D,U]=te.useState([]),[$,W]=te.useState([]),[j,re]=te.useState(""),[G,H]=te.useState("Not Started"),[se,ue]=te.useState(""),[oe,P]=te.useState(null),I=te.useRef(null),S=te.useRef(null),N=te.useRef(null),[C,k]=te.useState(!1),x=_==="admin";te.useEffect(()=>{if(!s||!e)return;(async()=>{try{const me=dt(s,et(e),qe.ATHLETES),Ee=await hr(Jt(me,lt("isApproved","==",!0))),Ne=new Set,Be=new Set;Ee.forEach(ot=>{var kt,hn;(kt=ot.data().teams)==null||kt.forEach(bn=>Ne.add(bn)),(hn=ot.data().classes)==null||hn.forEach(bn=>Be.add(bn))}),U(Array.from(Ne).sort()),W(Array.from(Be).sort())}catch(me){console.error("Error fetching all teams/classes:",me)}})()},[s,e]);const Q=ne=>{const{name:me,value:Ee,type:Ne,checked:Be}=ne.target;if(Ne==="checkbox"){const{group:ot}=ne.target.dataset;let kt=[...E[ot]];Be?kt.push(Ee):kt=kt.filter(hn=>hn!==Ee),R({...E,[ot]:kt})}else R({...E,[me]:Ee})},he=()=>{j.trim()&&(R({...E,skills:[...E.skills,{name:j.trim(),status:G}]}),re(""),H("Not Started"))},Ie=(ne,me)=>{const Ee=[...E.skills];Ee[ne].status=me,R({...E,skills:Ee})},ye=ne=>{const me=E.skills.filter((Ee,Ne)=>Ne!==ne);R({...E,skills:me})},Z=async()=>{var ne;if(se.trim()){let me="Unknown Coach";try{if(_n&&s){const Ee=dt(s,et(e),qe.COACHES);if((ne=_n.currentUser)!=null&&ne.uid){const Ne=await ec(Wt(Ee,_n.currentUser.uid));Ne.exists()&&(me=Ne.data().name)}if(me==="Unknown Coach"&&_==="admin"){const Ne=Jt(Ee,lt("passcode","==",jd)),Be=await hr(Ne);Be.empty||(me=Be.docs[0].data().name)}}}catch(Ee){console.warn("Could not fetch coach name for note:",Ee)}R({...E,coachNotes:[...E.coachNotes,{timestamp:new Date().toISOString(),note:se.trim(),coachName:me}]}),ue("")}},de=ne=>{const me=E.coachNotes.filter((Ee,Ne)=>Ne!==ne);R({...E,coachNotes:me})},le=ne=>{const me=ne.target.files[0];if(me){const Ee=new FileReader;Ee.onloadend=()=>{R({...E,profilePicture:Ee.result}),P(null)},Ee.readAsDataURL(me)}},L=()=>{R({...E,profilePicture:""})},q=async()=>{P("camera");try{const ne=await navigator.mediaDevices.getUserMedia({video:!0});S.current&&(S.current.srcObject=ne,S.current.play())}catch(ne){console.error("Error accessing camera:",ne),i(`Could not access camera: ${ne.message}. Please ensure permissions are granted.`,"error"),P(null)}},we=()=>{if(S.current&&N.current){const ne=N.current.getContext("2d");N.current.width=S.current.videoWidth,N.current.height=S.current.videoHeight,ne.drawImage(S.current,0,0,N.current.width,N.current.height);const me=N.current.toDataURL("image/png");R({...E,profilePicture:me}),S.current.srcObject&&S.current.srcObject.getTracks().forEach(Ee=>Ee.stop()),P(null)}},Ve=async ne=>{var me;ne.preventDefault(),k(!0);try{const Ee=dt(s,et(e),qe.ATHLETES);let Ne="Unknown Coach";try{if(_n&&s){const Be=dt(s,et(e),qe.COACHES);if((me=_n.currentUser)!=null&&me.uid){const ot=await ec(Wt(Be,_n.currentUser.uid));ot.exists()&&(Ne=ot.data().name)}if(Ne==="Unknown Coach"&&_==="admin"){const ot=Jt(Be,lt("passcode","==",jd)),kt=await hr(ot);kt.empty||(Ne=kt.docs[0].data().name)}}}catch(Be){console.warn("Could not fetch coach name for new athlete:",Be)}if(o)await Mf(Ee,{...E,addedByCoach:Ne}),i("Athlete added successfully!");else{if(!(_==="admin")){i("Permission denied. Only Admin can save edits.","error"),k(!1);return}const ot=Wt(s,et(e),qe.ATHLETES,g);await rl(ot,E),i("Athlete updated successfully!"),m&&m(!1)}t()}catch(Ee){console.error("Error saving athlete:",Ee),i(`Failed to save athlete: ${Ee.message}`,"error")}finally{k(!1)}},xe=h||o;return v.jsxs("form",{onSubmit:Ve,className:"space-y-6 max-h-[80vh] overflow-y-auto pr-2",children:[v.jsxs("div",{className:"flex flex-col items-center mb-6",children:[v.jsx("img",{src:E.profilePicture||`https://placehold.co/120x120/cccccc/333333?text=${E.name.charAt(0)||"?"}`,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-4 border-indigo-200 shadow-md mb-4"}),xe&&v.jsxs("div",{className:"flex space-x-2",children:[v.jsxs("button",{type:"button",onClick:()=>I.current.click(),className:"bg-gray-200 text-gray-700 py-2 px-4 rounded-lg flex items-center hover:bg-gray-300 transition",children:[v.jsx(PC,{size:18,className:"mr-2"})," Upload"]}),v.jsx("input",{type:"file",accept:"image/*",ref:I,onChange:le,className:"hidden"}),v.jsxs("button",{type:"button",onClick:q,className:"bg-gray-200 text-gray-700 py-2 px-4 rounded-lg flex items-center hover:bg-gray-300 transition",children:[v.jsx(py,{size:18,className:"mr-2"})," Camera"]}),E.profilePicture&&v.jsxs("button",{type:"button",onClick:L,className:"bg-red-100 text-red-700 py-2 px-4 rounded-lg flex items-center hover:bg-red-200 transition",children:[v.jsx(my,{size:18,className:"mr-2"})," Remove"]})]})]}),v.jsx(To,{isOpen:oe==="camera",title:"Take a Photo",onClose:()=>{P(null),S.current&&S.current.srcObject&&S.current.srcObject.getTracks().forEach(ne=>ne.stop())},children:v.jsxs("div",{className:"flex flex-col items-center",children:[v.jsx("video",{ref:S,autoPlay:!0,playsInline:!0,className:"w-full max-w-sm rounded-lg border border-gray-300"}),v.jsx("canvas",{ref:N,className:"hidden"}),v.jsxs("button",{type:"button",onClick:we,className:"mt-4 bg-indigo-500 text-white py-2 px-4 rounded-lg flex items-center hover:bg-indigo-600 transition",children:[v.jsx(py,{size:20,className:"mr-2"})," Take Photo"]})]})}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Athlete Name"}),v.jsx("input",{type:"text",name:"name",value:E.name,onChange:Q,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",disabled:!xe||!x})]}),o&&v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Added By Coach"}),v.jsx("p",{className:"mt-1 text-gray-500 text-sm italic",children:"Will be auto-filled by current coach."})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Teams"}),v.jsxs("div",{className:"mt-1 border border-gray-300 rounded-md p-2 max-h-40 overflow-y-auto bg-gray-50",children:[D.map(ne=>v.jsxs("div",{className:"flex items-center",children:[v.jsx("input",{type:"checkbox",id:`team-${ne}`,name:"teams",value:ne,"data-group":"teams",checked:E.teams.includes(ne),onChange:Q,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded",disabled:!xe||!x}),v.jsx("label",{htmlFor:`team-${ne}`,className:"ml-2 text-sm text-gray-900",children:ne})]},ne)),D.length===0&&v.jsx("p",{className:"text-sm text-gray-500",children:"No teams available yet."})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Classes"}),v.jsxs("div",{className:"mt-1 border border-gray-300 rounded-md p-2 max-h-40 overflow-y-auto bg-gray-50",children:[$.map(ne=>v.jsxs("div",{className:"flex items-center",children:[v.jsx("input",{type:"checkbox",id:`class-${ne}`,name:"classes",value:ne,"data-group":"classes",checked:E.classes.includes(ne),onChange:Q,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded",disabled:!xe||!x}),v.jsx("label",{htmlFor:`class-${ne}`,className:"ml-2 text-sm text-gray-900",children:ne})]},ne)),$.length===0&&v.jsx("p",{className:"text-sm text-gray-500",children:"No classes available yet."})]})]})]}),v.jsx("h4",{className:"text-lg font-semibold text-gray-800 mt-6 mb-2",children:"Contact Information"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"parentName",className:"block text-sm font-medium text-gray-700",children:"Parent/Guardian Name"}),v.jsx("input",{type:"text",name:"parentName",value:E.parentName,onChange:Q,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",disabled:!xe||!x})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"parentPhone",className:"block text-sm font-medium text-gray-700",children:"Parent Phone"}),v.jsx("input",{type:"tel",name:"parentPhone",value:E.parentPhone,onChange:Q,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",disabled:!xe||!x})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"parentEmail",className:"block text-sm font-medium text-gray-700",children:"Parent Email"}),v.jsx("input",{type:"email",name:"parentEmail",value:E.parentEmail,onChange:Q,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",disabled:!xe||!x})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"emergencyContactName",className:"block text-sm font-medium text-gray-700",children:"Emergency Contact Name"}),v.jsx("input",{type:"text",name:"emergencyContactName",value:E.emergencyContactName,onChange:Q,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",disabled:!xe||!x})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"emergencyContactPhone",className:"block text-sm font-medium text-gray-700",children:"Emergency Contact Phone"}),v.jsx("input",{type:"tel",name:"emergencyContactPhone",value:E.emergencyContactPhone,onChange:Q,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",disabled:!xe||!x})]})]}),v.jsx("h4",{className:"text-lg font-semibold text-gray-800 mt-6 mb-2",children:"Skills"}),v.jsxs("div",{className:"space-y-3",children:[E.skills.map((ne,me)=>v.jsxs("div",{className:"flex items-center space-x-3 bg-gray-50 p-3 rounded-lg border border-gray-200",children:[v.jsx("span",{className:"font-medium text-gray-900 flex-1",children:ne.name}),xe&&x?v.jsxs("select",{value:ne.status,onChange:Ee=>Ie(me,Ee.target.value),className:"border border-gray-300 rounded-md shadow-sm p-1 text-sm",children:[v.jsx("option",{children:"Not Started"}),v.jsx("option",{children:"Working On"}),v.jsx("option",{children:"Needs Improvement"}),v.jsx("option",{children:"Mastered"})]}):v.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${ne.status==="Mastered"?"bg-green-100 text-green-800":ne.status==="Working On"?"bg-blue-100 text-blue-800":ne.status==="Needs Improvement"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:ne.status}),xe&&x&&v.jsx("button",{type:"button",onClick:()=>ye(me),className:"text-red-500 hover:text-red-700",children:v.jsx(my,{size:16})})]},me)),xe&&x&&v.jsxs("div",{className:"flex space-x-2 mt-4",children:[v.jsx("input",{type:"text",placeholder:"New Skill Name",value:j,onChange:ne=>re(ne.target.value),className:"flex-1 border border-gray-300 rounded-md shadow-sm p-2"}),v.jsxs("select",{value:G,onChange:ne=>H(ne.target.value),className:"border border-gray-300 rounded-md shadow-sm p-2",children:[v.jsx("option",{children:"Not Started"}),v.jsx("option",{children:"Working On"}),v.jsx("option",{children:"Needs Improvement"}),v.jsx("option",{children:"Mastered"})]}),v.jsx("button",{type:"button",onClick:he,className:"bg-indigo-500 text-white p-2 rounded-lg hover:bg-indigo-600 transition",children:v.jsx(za,{size:20})})]})]}),v.jsx("h4",{className:"text-lg font-semibold text-gray-800 mt-6 mb-2",children:"Improvement Areas"}),v.jsx("textarea",{name:"improvementAreas",value:E.improvementAreas,onChange:Q,rows:"3",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:"Notes on areas for improvement...",disabled:!xe||!x}),v.jsx("h4",{className:"text-lg font-semibold text-gray-800 mt-6 mb-2",children:"Coach Notes"}),v.jsxs("div",{className:"space-y-3",children:[E.coachNotes.sort((ne,me)=>new Date(me.timestamp)-new Date(ne.timestamp)).map((ne,me)=>v.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:[v.jsxs("p",{className:"text-sm text-gray-600",children:[v.jsx("span",{className:"font-medium",children:ne.coachName})," on ",new Date(ne.timestamp).toLocaleDateString()," at ",new Date(ne.timestamp).toLocaleTimeString()]}),v.jsx("p",{className:"text-gray-800 mt-1",children:ne.note}),xe&&x&&v.jsx("button",{type:"button",onClick:()=>de(me),className:"text-red-500 hover:text-red-700 text-sm mt-2",children:"Remove Note"})]},me)),xe&&x&&v.jsxs("div",{className:"flex space-x-2 mt-4",children:[v.jsx("textarea",{value:se,onChange:ne=>ue(ne.target.value),rows:"2",placeholder:"Add new coach note...",className:"flex-1 border border-gray-300 rounded-md shadow-sm p-2"}),v.jsx("button",{type:"button",onClick:Z,className:"bg-indigo-500 text-white p-2 rounded-lg hover:bg-indigo-600 transition",children:v.jsx(za,{size:20})})]})]}),(xe||o)&&v.jsxs("div",{className:"flex justify-end space-x-4 mt-8",children:[v.jsx("button",{type:"button",onClick:t,className:"bg-gray-300 text-gray-800 py-2 px-5 rounded-lg font-semibold shadow-md hover:bg-gray-400 transition",disabled:C,children:"Cancel"}),v.jsx("button",{type:"submit",className:"bg-green-600 text-white py-2 px-5 rounded-lg font-semibold shadow-md hover:bg-green-700 transition",disabled:C||!x,children:C?"Saving...":o?"Add Athlete":"Save Changes"})]})]})},BC=({db:s,currentUserId:e,userRole:t,showAppToast:i})=>{const[o,u]=te.useState([]),[h,m]=te.useState(!1),[g,_]=te.useState(null),[E,R]=te.useState(!1),[D,U]=te.useState(!1),[$,W]=te.useState(null);te.useEffect(()=>{if(!s||!e)return;const oe=dt(s,et(e),qe.COACHES),P=ui(oe,I=>{const S=I.docs.map(N=>({id:N.id,...N.data()}));u(S.sort((N,C)=>N.name.localeCompare(C.name)))},I=>{console.error("Error fetching coaches:",I),i(`Error loading coaches: ${I.message}`,"error")});return()=>P()},[s,e,i]);const j=async oe=>{if(!(t==="admin")){i("Permission denied. Only Admin can approve coaches.","error");return}i("Approving coach...","info");try{const I=Wt(s,et(e),qe.COACHES,oe);await rl(I,{isApproved:!0}),i("Coach approved successfully!")}catch(I){console.error("Error approving coach:",I),i(`Failed to approve: ${I.message}`,"error")}},re=oe=>{W(oe),U(!0)},G=async()=>{if(!(t==="admin")||!s||!e||!$){i("Permission denied or coach not selected.","error");return}i("Deleting coach...","info");try{const P=Wt(s,et(e),qe.COACHES,$);await Of(P),i("Coach deleted successfully!")}catch(P){console.error("Error deleting coach:",P),i(`Failed to delete: ${P.message}`,"error")}finally{U(!1),W(null)}},H=oe=>{t==="admin"?(_(oe),R(!0)):i("Only Admin can edit coach profiles.","error")},se=()=>{_(null),R(!1)},ue=t==="admin";return v.jsxs("div",{className:"p-4",children:[v.jsx("h3",{className:"text-2xl font-bold text-center text-indigo-700 mb-6",children:"Coach Management"}),v.jsx("div",{className:"flex justify-end mb-6",children:v.jsxs("button",{onClick:()=>m(!0),className:"bg-indigo-600 text-white py-2 px-5 rounded-lg font-semibold shadow-md hover:bg-indigo-700 transition duration-300 transform hover:scale-105 flex items-center",disabled:!ue,children:[v.jsx(za,{size:20,className:"mr-2"})," Add New Coach",!ue&&v.jsx("span",{className:"ml-2 text-xs opacity-75",children:" (Admin Only)"})]})}),v.jsx("div",{className:"overflow-x-auto rounded-lg shadow-md border border-gray-200",children:v.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[v.jsx("thead",{className:"bg-gray-50",children:v.jsxs("tr",{children:[v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teams / Classes"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Passcode"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),v.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?v.jsx("tr",{children:v.jsx("td",{colSpan:"6",className:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500",children:"No coaches found."})}):o.map(oe=>{var P,I;return v.jsxs("tr",{children:[v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:oe.name}),v.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[oe.email,v.jsx("br",{}),oe.phone]}),v.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["Teams: ",((P=oe.teams)==null?void 0:P.join(", "))||"N/A",v.jsx("br",{}),"Classes: ",((I=oe.classes)==null?void 0:I.join(", "))||"N/A"]}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:v.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${oe.isApproved?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:oe.isApproved?"Approved":"Pending"})}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:oe.passcode}),v.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[!oe.isApproved&&v.jsx("button",{onClick:()=>j(oe.id),className:`text-green-600 hover:text-green-900 mr-3 ${ue?"":"opacity-50 cursor-not-allowed"}`,disabled:!ue,children:"Approve"}),v.jsx("button",{onClick:()=>H(oe),className:`text-indigo-600 hover:text-indigo-900 mr-3 ${ue?"":"opacity-50 cursor-not-allowed"}`,disabled:!ue,children:"Edit"}),v.jsx("button",{onClick:()=>re(oe.id),className:`text-red-600 hover:text-red-900 ${ue?"":"opacity-50 cursor-not-allowed"}`,disabled:!ue,children:"Delete"})]})]},oe.id)})})]})}),v.jsx(To,{isOpen:h||E,title:E?"Edit Coach":"Add New Coach",onClose:se,showCloseButton:!0,children:v.jsx($C,{db:s,currentUserId:e,onClose:se,showAppToast:i,isNew:!E,initialData:g,userRole:t})}),v.jsx(D_,{isOpen:D,title:"Confirm Deletion",message:"Are you sure you want to delete this coach? This action cannot be undone.",onConfirm:G,onCancel:()=>U(!1),confirmText:"Delete"})]})},$C=({db:s,currentUserId:e,onClose:t,showAppToast:i,isNew:o,initialData:u,userRole:h})=>{const[m,g]=te.useState(u||{name:"",email:"",phone:"",teams:[],classes:[],isApproved:o?!1:(u==null?void 0:u.isApproved)||!1,passcode:""}),[_,E]=te.useState([]),[R,D]=te.useState([]),[U,$]=te.useState(!1),W=h==="admin";te.useEffect(()=>{if(!s||!e)return;(async()=>{try{const H=dt(s,et(e),qe.ATHLETES),se=await hr(Jt(H,lt("isApproved","==",!0))),ue=new Set,oe=new Set;se.forEach(P=>{var I,S;(I=P.data().teams)==null||I.forEach(N=>ue.add(N)),(S=P.data().classes)==null||S.forEach(N=>oe.add(N))}),E(Array.from(ue).sort()),D(Array.from(oe).sort())}catch(H){console.error("Error fetching all teams/classes for coach form:",H)}})()},[s,e]);const j=G=>{const{name:H,value:se,type:ue,checked:oe}=G.target;if(ue==="checkbox"){const{group:P}=G.target.dataset;let I=[...m[P]];oe?I.push(se):I=I.filter(S=>S!==se),g({...m,[P]:I})}else g({...m,[H]:se})},re=async G=>{if(G.preventDefault(),!W){i("Permission denied. Only Admin can add/edit coaches.","error");return}$(!0);try{const H=dt(s,et(e),qe.COACHES);if(o)await Mf(H,m),i("Coach added successfully!");else{const se=Wt(s,et(e),qe.COACHES,u.id);await rl(se,m),i("Coach updated successfully!")}t()}catch(H){console.error("Error saving coach:",H),i(`Failed to save coach: ${H.message}`,"error")}finally{$(!1)}};return v.jsxs("form",{onSubmit:re,className:"space-y-6",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Coach Name"}),v.jsx("input",{type:"text",name:"name",value:m.name,onChange:j,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",disabled:!W})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),v.jsx("input",{type:"email",name:"email",value:m.email,onChange:j,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",disabled:!W})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone"}),v.jsx("input",{type:"tel",name:"phone",value:m.phone,onChange:j,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",disabled:!W})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"passcode",className:"block text-sm font-medium text-gray-700",children:"4-digit Passcode"}),v.jsx("input",{type:"text",name:"passcode",value:m.passcode,onChange:j,required:!0,maxLength:"4",pattern:"\\d{4}",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",disabled:!W})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Assigned Teams"}),v.jsxs("div",{className:"mt-1 border border-gray-300 rounded-md p-2 max-h-40 overflow-y-auto bg-gray-50",children:[_.map(G=>v.jsxs("div",{className:"flex items-center",children:[v.jsx("input",{type:"checkbox",id:`coach-team-${G}`,name:"teams",value:G,"data-group":"teams",checked:m.teams.includes(G),onChange:j,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded",disabled:!W}),v.jsx("label",{htmlFor:`coach-team-${G}`,className:"ml-2 text-sm text-gray-900",children:G})]},G)),_.length===0&&v.jsx("p",{className:"text-sm text-gray-500",children:"No teams available yet."})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Assigned Classes"}),v.jsxs("div",{className:"mt-1 border border-gray-300 rounded-md p-2 max-h-40 overflow-y-auto bg-gray-50",children:[R.map(G=>v.jsxs("div",{className:"flex items-center",children:[v.jsx("input",{type:"checkbox",id:`coach-class-${G}`,name:"classes",value:G,"data-group":"classes",checked:m.classes.includes(G),onChange:j,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded",disabled:!W}),v.jsx("label",{htmlFor:`coach-class-${G}`,className:"ml-2 text-sm text-gray-900",children:G})]},G)),R.length===0&&v.jsx("p",{className:"text-sm text-gray-500",children:"No classes available yet."})]})]})]}),v.jsxs("div",{className:"flex justify-end space-x-4 mt-8",children:[v.jsx("button",{type:"button",onClick:t,className:"bg-gray-300 text-gray-800 py-2 px-5 rounded-lg font-semibold shadow-md hover:bg-gray-400 transition",disabled:U,children:"Cancel"}),v.jsx("button",{type:"submit",className:"bg-green-600 text-white py-2 px-5 rounded-lg font-semibold shadow-md hover:bg-green-700 transition",disabled:U||!W,children:U?"Saving...":o?"Add Coach":"Save Changes"})]})]})},HC=({db:s,currentUserId:e,userRole:t,showAppToast:i})=>{const[o,u]=te.useState([]),[h,m]=te.useState(null),[g,_]=te.useState(!1),[E,R]=te.useState(""),[D,U]=te.useState("All"),[$,W]=te.useState("All"),[j,re]=te.useState("All"),[G,H]=te.useState([]),[se,ue]=te.useState([]);te.useEffect(()=>{if(!s||!e)return;const Q=dt(s,ci,qe.HISTORICAL_CHECKIN_LOGS),he=ui(Q,Ie=>{const ye=Ie.docs.map(Z=>({id:Z.id,...Z.data()}));u(ye.sort((Z,de)=>new Date(de.timestamp)-new Date(Z.timestamp)))},Ie=>{console.error("Error fetching historical logs:",Ie),i(`Error loading logs: ${Ie.message}`,"error")});return()=>he()},[s,e,i]),te.useEffect(()=>{if(!s||!e)return;(async()=>{try{const he=dt(s,et(e),qe.ATHLETES),Ie=await hr(Jt(he,lt("isApproved","==",!0))),ye=new Set,Z=new Set;Ie.forEach(de=>{var le,L;(le=de.data().teams)==null||le.forEach(q=>ye.add(q)),(L=de.data().classes)==null||L.forEach(q=>Z.add(q))}),H(Array.from(ye).sort()),ue(Array.from(Z).sort())}catch(he){console.error("Error fetching all teams/classes for logs filter:",he)}})()},[s,e]);const oe=Q=>{m(Q),_(!1)},P=()=>{m(null),_(!1)},I=()=>{t==="admin"?_(he=>!he):i("Only Admin can edit check-in logs.","error")},S=(Q,he)=>{if(!(t==="admin")){i("Permission denied. Only Admin can edit logs.","error");return}const ye={...h};ye.dailyCheckInEvents=ye.dailyCheckInEvents.filter((Z,de)=>de!==he),m(ye)},N=async(Q,he,Ie,ye,Z)=>{if(!(t==="admin")){i("Permission denied. Only Admin can edit logs.","error");return}const le=await ec(Wt(s,et(e),qe.ATHLETES,he));if(!le.exists()){i("Athlete not found.","error");return}const L=le.data().name,q={athleteId:he,athleteName:L,checkInType:Ie.toLowerCase(),checkInEntity:ye,timestamp:new Date(Z).toISOString()},we={...h,dailyCheckInEvents:[...h.dailyCheckInEvents,q]};m(we),i("Event added locally. Remember to save changes.","info")},C=async()=>{if(!(t==="admin")){i("Permission denied. Only Admin can save log edits.","error");return}if(h){i("Saving log changes...","info");try{const he=Wt(s,ci,qe.HISTORICAL_CHECKIN_LOGS,h.id);await rl(he,{dailyCheckInEvents:h.dailyCheckInEvents,lastEdited:new Date().toISOString()}),i("Log updated successfully!"),_(!1)}catch(he){console.error("Error saving log edits:",he),i(`Failed to save log: ${he.message}`,"error")}}},k=o.filter(Q=>{let he=!0;if(j!=="All"&&$!=="All"?Q.dailyCheckInEvents.some(ye=>ye.checkInEntity===j&&ye.checkInType===$.toLowerCase())||(he=!1):$!=="All"&&(Q.dailyCheckinEvents.some(ye=>ye.checkInType===$.toLowerCase())||(he=!1)),E){const Ie=E.toLowerCase();Q.dailyCheckInEvents.some(Z=>Z.athleteName.toLowerCase().includes(Ie))||(he=!1)}return D==="Missed"&&E?Q.dailyCheckinEvents.some(ye=>ye.athleteName.toLowerCase().includes(E.toLowerCase()))&&(he=!1):D==="Checked In"&&E?Q.dailyCheckinEvents.some(ye=>ye.athleteName.toLowerCase().includes(E.toLowerCase()))||(he=!1):D==="Checked In"&&!E&&Q.dailyCheckinEvents.length===0&&(he=!1),he}),x=t==="admin";return v.jsxs("div",{className:"p-4",children:[v.jsx("h3",{className:"text-2xl font-bold text-center text-indigo-700 mb-6",children:"Historical Check-in Logs"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6 p-4 bg-gray-50 rounded-lg shadow-sm border border-gray-200",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"filterAthlete",className:"block text-sm font-medium text-gray-700",children:"Athlete Name"}),v.jsx("input",{type:"text",id:"filterAthlete",value:E,onChange:Q=>R(Q.target.value),placeholder:"Filter by athlete name",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"filterStatus",className:"block text-sm font-medium text-gray-700",children:"Status"}),v.jsxs("select",{id:"filterStatus",value:D,onChange:Q=>U(Q.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",children:[v.jsx("option",{value:"All",children:"All"}),v.jsx("option",{value:"Checked In",children:"Checked In"})]})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"filterCategory",className:"block text-sm font-medium text-gray-700",children:"Category"}),v.jsxs("select",{id:"filterCategory",value:$,onChange:Q=>{W(Q.target.value),re("All")},className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",children:[v.jsx("option",{value:"All",children:"All"}),v.jsx("option",{value:"Team",children:"Team"}),v.jsx("option",{value:"Class",children:"Class"})]})]}),($==="Team"||$==="Class")&&v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"filterEntity",className:"block text-sm font-medium text-gray-700",children:[$," Name"]}),v.jsxs("select",{id:"filterEntity",value:j,onChange:Q=>re(Q.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",children:[v.jsxs("option",{value:"All",children:["All ",$,"s"]}),(category==="Team"?G:se).map(Q=>v.jsx("option",{value:Q,children:Q},Q))]})]})]}),v.jsx("div",{className:"overflow-x-auto rounded-lg shadow-md border border-gray-200",children:v.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[v.jsx("thead",{className:"bg-gray-50",children:v.jsxs("tr",{children:[v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reset Timestamp"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reset By User ID"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Entries Count"}),v.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),v.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.length===0?v.jsx("tr",{children:v.jsx("td",{colSpan:"4",className:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500",children:"No historical check-in logs found matching your filters."})}):k.map(Q=>{var he;return v.jsxs("tr",{children:[v.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[new Date(Q.timestamp).toLocaleString(),Q.lastEdited&&v.jsxs("span",{className:"block text-xs text-gray-500 italic",children:["(Edited ",new Date(Q.lastEdited).toLocaleString(),")"]})]}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Q.resetByUserId}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((he=Q.dailyCheckInEvents)==null?void 0:he.length)||0}),v.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:v.jsx("button",{onClick:()=>oe(Q),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"View Details"})})]},Q.id)})})]})}),h&&v.jsxs(To,{isOpen:!!h,title:"Check-in Log Details",onClose:P,showCloseButton:!0,children:[v.jsx("div",{className:"flex justify-end mb-4",children:v.jsxs("button",{onClick:I,className:`py-2 px-4 rounded-lg flex items-center transition duration-200
                ${g?"bg-red-500 text-white hover:bg-red-600":"bg-indigo-500 text-white hover:bg-indigo-600"}
                ${x?"":"opacity-50 cursor-not-allowed"}
              `,disabled:!x,children:[g?v.jsx(xc,{size:18,className:"mr-2"}):v.jsx(N_,{size:18,className:"mr-2"}),g?"Cancel Edit":"Edit Log"]})}),v.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[v.jsxs("p",{className:"text-gray-700",children:[v.jsx("strong",{children:"Reset At:"})," ",new Date(h.timestamp).toLocaleString()]}),v.jsxs("p",{className:"text-gray-700",children:[v.jsx("strong",{children:"Reset By:"})," ",h.resetByUserId]}),h.lastEdited&&v.jsxs("p",{className:"text-gray-700",children:[v.jsx("strong",{children:"Last Edited:"})," ",new Date(h.lastEdited).toLocaleString()]}),v.jsx("h4",{className:"text-lg font-semibold text-gray-800 mt-6 mb-2",children:"Check-in Events"}),h.dailyCheckInEvents&&h.dailyCheckInEvents.length>0?v.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-200 shadow-sm",children:v.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[v.jsx("thead",{className:"bg-gray-50",children:v.jsxs("tr",{children:[v.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Athlete"}),v.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),v.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Entity"}),v.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),g&&v.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),v.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.dailyCheckInEvents.map((Q,he)=>v.jsxs("tr",{children:[v.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:Q.athleteName}),v.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:Q.checkInType}),v.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:Q.checkInEntity}),v.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:new Date(Q.timestamp).toLocaleTimeString()}),g&&v.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:v.jsx("button",{onClick:()=>S(h.id,he),className:"text-red-600 hover:text-red-900",disabled:!x,children:"Remove"})})]},he))})]})}):v.jsx("p",{className:"text-gray-600",children:"No check-in events recorded for this log."}),g&&v.jsx(qC,{db:s,currentUserId:e,onAddEvent:(Q,he,Ie,ye)=>N(h.id,Q,he,Ie,ye),showAppToast:i}),g&&v.jsxs("div",{className:"flex justify-end space-x-4 mt-8",children:[v.jsx("button",{type:"button",onClick:P,className:"bg-gray-300 text-gray-800 py-2 px-5 rounded-lg font-semibold shadow-md hover:bg-gray-400 transition",children:"Discard Changes"}),v.jsx("button",{type:"button",onClick:C,className:"bg-green-600 text-white py-2 px-5 rounded-lg font-semibold shadow-md hover:bg-green-700 transition",disabled:!x,children:"Save Changes"})]})]})]})]})},qC=({db:s,currentUserId:e,onAddEvent:t,showAppToast:i})=>{const[o,u]=te.useState(""),[h,m]=te.useState(""),[g,_]=te.useState(""),[E,R]=te.useState(""),[D,U]=te.useState([]),[$,W]=te.useState([]),[j,re]=te.useState([]);te.useEffect(()=>{if(!s||!e)return;(async()=>{try{const se=dt(s,et(e),qe.ATHLETES),ue=await hr(Jt(se,lt("isApproved","==",!0)));U(ue.docs.map(I=>({id:I.id,name:I.data().name})));const oe=new Set,P=new Set;ue.docs.forEach(I=>{var S,N;(S=I.data().teams)==null||S.forEach(C=>oe.add(C)),(N=I.data().classes)==null||N.forEach(C=>P.add(C))}),W(Array.from(oe).sort()),re(Array.from(P).sort())}catch(se){console.error("Error fetching data for AddCheckinEventForm:",se),i(`Error loading data: ${se.message}`,"error")}})()},[s,e,i]);const G=H=>{if(H.preventDefault(),!o||!h||!g||!E){i("Please fill all fields.","error");return}t(o,h,g,E),u(""),m(""),_(""),R("")};return v.jsxs("div",{className:"mt-8 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[v.jsx("h5",{className:"text-md font-semibold text-blue-800 mb-4",children:"Manually Add Check-in Event"}),v.jsxs("form",{onSubmit:G,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"addAthlete",className:"block text-sm font-medium text-gray-700",children:"Athlete"}),v.jsxs("select",{id:"addAthlete",value:o,onChange:H=>u(H.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",required:!0,children:[v.jsx("option",{value:"",children:"Select Athlete"}),D.map(H=>v.jsx("option",{value:H.id,children:H.name},H.id))]})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"addCategory",className:"block text-sm font-medium text-gray-700",children:"Category"}),v.jsxs("select",{id:"addCategory",value:h,onChange:H=>{m(H.target.value),_("")},className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",required:!0,children:[v.jsx("option",{value:"",children:"Select Category"}),v.jsx("option",{value:"Team",children:"Team"}),v.jsx("option",{value:"Class",children:"Class"})]})]}),(h==="Team"||h==="Class")&&v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"addEntity",className:"block text-sm font-medium text-gray-700",children:[h," Name"]}),v.jsxs("select",{id:"addEntity",value:g,onChange:H=>_(H.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",required:!0,children:[v.jsxs("option",{value:"",children:["Select ",h]}),(h==="Team"?$:j).map(H=>v.jsx("option",{value:H,children:H},H))]})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"addTimestamp",className:"block text-sm font-medium text-gray-700",children:"Timestamp"}),v.jsx("input",{type:"datetime-local",id:"addTimestamp",value:E,onChange:H=>R(H.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",required:!0})]}),v.jsx("div",{className:"md:col-span-2 flex justify-end",children:v.jsxs("button",{type:"submit",className:"bg-indigo-500 text-white py-2 px-4 rounded-lg font-semibold hover:bg-indigo-600 transition flex items-center",children:[v.jsx(za,{size:18,className:"mr-2"})," Add Event"]})})]})]})};q0.createRoot(document.getElementById("root")).render(v.jsx(te.StrictMode,{children:v.jsx(LC,{})}));
