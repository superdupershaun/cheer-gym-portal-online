(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var Pd={exports:{}},yl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vv;function wA(){if(Vv)return yl;Vv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var g in o)g!=="key"&&(u[g]=o[g])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:f,ref:o!==void 0?o:null,props:u}}return yl.Fragment=e,yl.jsx=n,yl.jsxs=n,yl}var Pv;function xA(){return Pv||(Pv=1,Pd.exports=wA()),Pd.exports}var E=xA(),Ld={exports:{}},Oe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lv;function CA(){if(Lv)return Oe;Lv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),x=Symbol.iterator;function C(M){return M===null||typeof M!="object"?null:(M=x&&M[x]||M["@@iterator"],typeof M=="function"?M:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,Z={};function U(M,J,fe){this.props=M,this.context=J,this.refs=Z,this.updater=fe||B}U.prototype.isReactComponent={},U.prototype.setState=function(M,J){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,J,"setState")},U.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function Y(){}Y.prototype=U.prototype;function ne(M,J,fe){this.props=M,this.context=J,this.refs=Z,this.updater=fe||B}var K=ne.prototype=new Y;K.constructor=ne,G(K,U.prototype),K.isPureReactComponent=!0;var ue=Array.isArray,le={H:null,A:null,T:null,S:null,V:null},re=Object.prototype.hasOwnProperty;function D(M,J,fe,oe,de,se){return fe=se.ref,{$$typeof:s,type:M,key:J,ref:fe!==void 0?fe:null,props:se}}function w(M,J){return D(M.type,J,void 0,void 0,void 0,M.props)}function R(M){return typeof M=="object"&&M!==null&&M.$$typeof===s}function k(M){var J={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(fe){return J[fe]})}var I=/\/+/g;function O(M,J){return typeof M=="object"&&M!==null&&M.key!=null?k(""+M.key):J.toString(36)}function S(){}function pe(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(S,S):(M.status="pending",M.then(function(J){M.status==="pending"&&(M.status="fulfilled",M.value=J)},function(J){M.status==="pending"&&(M.status="rejected",M.reason=J)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function _e(M,J,fe,oe,de){var se=typeof M;(se==="undefined"||se==="boolean")&&(M=null);var he=!1;if(M===null)he=!0;else switch(se){case"bigint":case"string":case"number":he=!0;break;case"object":switch(M.$$typeof){case s:case e:he=!0;break;case T:return he=M._init,_e(he(M._payload),J,fe,oe,de)}}if(he)return de=de(M),he=oe===""?"."+O(M,0):oe,ue(de)?(fe="",he!=null&&(fe=he.replace(I,"$&/")+"/"),_e(de,J,fe,"",function(at){return at})):de!=null&&(R(de)&&(de=w(de,fe+(de.key==null||M&&M.key===de.key?"":(""+de.key).replace(I,"$&/")+"/")+he)),J.push(de)),1;he=0;var Ce=oe===""?".":oe+":";if(ue(M))for(var De=0;De<M.length;De++)oe=M[De],se=Ce+O(oe,De),he+=_e(oe,J,fe,se,de);else if(De=C(M),typeof De=="function")for(M=De.call(M),De=0;!(oe=M.next()).done;)oe=oe.value,se=Ce+O(oe,De++),he+=_e(oe,J,fe,se,de);else if(se==="object"){if(typeof M.then=="function")return _e(pe(M),J,fe,oe,de);throw J=String(M),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return he}function q(M,J,fe){if(M==null)return M;var oe=[],de=0;return _e(M,oe,"","",function(se){return J.call(fe,se,de++)}),oe}function ie(M){if(M._status===-1){var J=M._result;J=J(),J.then(function(fe){(M._status===0||M._status===-1)&&(M._status=1,M._result=fe)},function(fe){(M._status===0||M._status===-1)&&(M._status=2,M._result=fe)}),M._status===-1&&(M._status=0,M._result=J)}if(M._status===1)return M._result.default;throw M._result}var me=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function Ne(){}return Oe.Children={map:q,forEach:function(M,J,fe){q(M,function(){J.apply(this,arguments)},fe)},count:function(M){var J=0;return q(M,function(){J++}),J},toArray:function(M){return q(M,function(J){return J})||[]},only:function(M){if(!R(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Oe.Component=U,Oe.Fragment=n,Oe.Profiler=o,Oe.PureComponent=ne,Oe.StrictMode=r,Oe.Suspense=p,Oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=le,Oe.__COMPILER_RUNTIME={__proto__:null,c:function(M){return le.H.useMemoCache(M)}},Oe.cache=function(M){return function(){return M.apply(null,arguments)}},Oe.cloneElement=function(M,J,fe){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var oe=G({},M.props),de=M.key,se=void 0;if(J!=null)for(he in J.ref!==void 0&&(se=void 0),J.key!==void 0&&(de=""+J.key),J)!re.call(J,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&J.ref===void 0||(oe[he]=J[he]);var he=arguments.length-2;if(he===1)oe.children=fe;else if(1<he){for(var Ce=Array(he),De=0;De<he;De++)Ce[De]=arguments[De+2];oe.children=Ce}return D(M.type,de,void 0,void 0,se,oe)},Oe.createContext=function(M){return M={$$typeof:f,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},Oe.createElement=function(M,J,fe){var oe,de={},se=null;if(J!=null)for(oe in J.key!==void 0&&(se=""+J.key),J)re.call(J,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(de[oe]=J[oe]);var he=arguments.length-2;if(he===1)de.children=fe;else if(1<he){for(var Ce=Array(he),De=0;De<he;De++)Ce[De]=arguments[De+2];de.children=Ce}if(M&&M.defaultProps)for(oe in he=M.defaultProps,he)de[oe]===void 0&&(de[oe]=he[oe]);return D(M,se,void 0,void 0,null,de)},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(M){return{$$typeof:g,render:M}},Oe.isValidElement=R,Oe.lazy=function(M){return{$$typeof:T,_payload:{_status:-1,_result:M},_init:ie}},Oe.memo=function(M,J){return{$$typeof:y,type:M,compare:J===void 0?null:J}},Oe.startTransition=function(M){var J=le.T,fe={};le.T=fe;try{var oe=M(),de=le.S;de!==null&&de(fe,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(Ne,me)}catch(se){me(se)}finally{le.T=J}},Oe.unstable_useCacheRefresh=function(){return le.H.useCacheRefresh()},Oe.use=function(M){return le.H.use(M)},Oe.useActionState=function(M,J,fe){return le.H.useActionState(M,J,fe)},Oe.useCallback=function(M,J){return le.H.useCallback(M,J)},Oe.useContext=function(M){return le.H.useContext(M)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(M,J){return le.H.useDeferredValue(M,J)},Oe.useEffect=function(M,J,fe){var oe=le.H;if(typeof fe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return oe.useEffect(M,J)},Oe.useId=function(){return le.H.useId()},Oe.useImperativeHandle=function(M,J,fe){return le.H.useImperativeHandle(M,J,fe)},Oe.useInsertionEffect=function(M,J){return le.H.useInsertionEffect(M,J)},Oe.useLayoutEffect=function(M,J){return le.H.useLayoutEffect(M,J)},Oe.useMemo=function(M,J){return le.H.useMemo(M,J)},Oe.useOptimistic=function(M,J){return le.H.useOptimistic(M,J)},Oe.useReducer=function(M,J,fe){return le.H.useReducer(M,J,fe)},Oe.useRef=function(M){return le.H.useRef(M)},Oe.useState=function(M){return le.H.useState(M)},Oe.useSyncExternalStore=function(M,J,fe){return le.H.useSyncExternalStore(M,J,fe)},Oe.useTransition=function(){return le.H.useTransition()},Oe.version="19.1.0",Oe}var jv;function xm(){return jv||(jv=1,Ld.exports=CA()),Ld.exports}var ae=xm(),jd={exports:{}},vl={},Ud={exports:{}},zd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uv;function RA(){return Uv||(Uv=1,function(s){function e(q,ie){var me=q.length;q.push(ie);e:for(;0<me;){var Ne=me-1>>>1,M=q[Ne];if(0<o(M,ie))q[Ne]=ie,q[me]=M,me=Ne;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var ie=q[0],me=q.pop();if(me!==ie){q[0]=me;e:for(var Ne=0,M=q.length,J=M>>>1;Ne<J;){var fe=2*(Ne+1)-1,oe=q[fe],de=fe+1,se=q[de];if(0>o(oe,me))de<M&&0>o(se,oe)?(q[Ne]=se,q[de]=me,Ne=de):(q[Ne]=oe,q[fe]=me,Ne=fe);else if(de<M&&0>o(se,me))q[Ne]=se,q[de]=me,Ne=de;else break e}}return ie}function o(q,ie){var me=q.sortIndex-ie.sortIndex;return me!==0?me:q.id-ie.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var f=Date,g=f.now();s.unstable_now=function(){return f.now()-g}}var p=[],y=[],T=1,x=null,C=3,B=!1,G=!1,Z=!1,U=!1,Y=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function ue(q){for(var ie=n(y);ie!==null;){if(ie.callback===null)r(y);else if(ie.startTime<=q)r(y),ie.sortIndex=ie.expirationTime,e(p,ie);else break;ie=n(y)}}function le(q){if(Z=!1,ue(q),!G)if(n(p)!==null)G=!0,re||(re=!0,O());else{var ie=n(y);ie!==null&&_e(le,ie.startTime-q)}}var re=!1,D=-1,w=5,R=-1;function k(){return U?!0:!(s.unstable_now()-R<w)}function I(){if(U=!1,re){var q=s.unstable_now();R=q;var ie=!0;try{e:{G=!1,Z&&(Z=!1,ne(D),D=-1),B=!0;var me=C;try{t:{for(ue(q),x=n(p);x!==null&&!(x.expirationTime>q&&k());){var Ne=x.callback;if(typeof Ne=="function"){x.callback=null,C=x.priorityLevel;var M=Ne(x.expirationTime<=q);if(q=s.unstable_now(),typeof M=="function"){x.callback=M,ue(q),ie=!0;break t}x===n(p)&&r(p),ue(q)}else r(p);x=n(p)}if(x!==null)ie=!0;else{var J=n(y);J!==null&&_e(le,J.startTime-q),ie=!1}}break e}finally{x=null,C=me,B=!1}ie=void 0}}finally{ie?O():re=!1}}}var O;if(typeof K=="function")O=function(){K(I)};else if(typeof MessageChannel<"u"){var S=new MessageChannel,pe=S.port2;S.port1.onmessage=I,O=function(){pe.postMessage(null)}}else O=function(){Y(I,0)};function _e(q,ie){D=Y(function(){q(s.unstable_now())},ie)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(q){q.callback=null},s.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<q?Math.floor(1e3/q):5},s.unstable_getCurrentPriorityLevel=function(){return C},s.unstable_next=function(q){switch(C){case 1:case 2:case 3:var ie=3;break;default:ie=C}var me=C;C=ie;try{return q()}finally{C=me}},s.unstable_requestPaint=function(){U=!0},s.unstable_runWithPriority=function(q,ie){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var me=C;C=q;try{return ie()}finally{C=me}},s.unstable_scheduleCallback=function(q,ie,me){var Ne=s.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Ne+me:Ne):me=Ne,q){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=me+M,q={id:T++,callback:ie,priorityLevel:q,startTime:me,expirationTime:M,sortIndex:-1},me>Ne?(q.sortIndex=me,e(y,q),n(p)===null&&q===n(y)&&(Z?(ne(D),D=-1):Z=!0,_e(le,me-Ne))):(q.sortIndex=M,e(p,q),G||B||(G=!0,re||(re=!0,O()))),q},s.unstable_shouldYield=k,s.unstable_wrapCallback=function(q){var ie=C;return function(){var me=C;C=ie;try{return q.apply(this,arguments)}finally{C=me}}}}(zd)),zd}var zv;function IA(){return zv||(zv=1,Ud.exports=RA()),Ud.exports}var Bd={exports:{}},Jt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bv;function NA(){if(Bv)return Jt;Bv=1;var s=xm();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,y,T){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:x==null?null:""+x,children:p,containerInfo:y,implementation:T}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Jt.createPortal=function(p,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(p,y,null,T)},Jt.flushSync=function(p){var y=f.T,T=r.p;try{if(f.T=null,r.p=2,p)return p()}finally{f.T=y,r.p=T,r.d.f()}},Jt.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(p,y))},Jt.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},Jt.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var T=y.as,x=g(T,y.crossOrigin),C=typeof y.integrity=="string"?y.integrity:void 0,B=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?r.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:x,integrity:C,fetchPriority:B}):T==="script"&&r.d.X(p,{crossOrigin:x,integrity:C,fetchPriority:B,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Jt.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=g(y.as,y.crossOrigin);r.d.M(p,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(p)},Jt.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,x=g(T,y.crossOrigin);r.d.L(p,T,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Jt.preloadModule=function(p,y){if(typeof p=="string")if(y){var T=g(y.as,y.crossOrigin);r.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(p)},Jt.requestFormReset=function(p){r.d.r(p)},Jt.unstable_batchedUpdates=function(p,y){return p(y)},Jt.useFormState=function(p,y,T){return f.H.useFormState(p,y,T)},Jt.useFormStatus=function(){return f.H.useHostTransitionStatus()},Jt.version="19.1.0",Jt}var qv;function DA(){if(qv)return Bd.exports;qv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Bd.exports=NA(),Bd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hv;function OA(){if(Hv)return vl;Hv=1;var s=IA(),e=xm(),n=DA();function r(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(r(188))}function p(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(r(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return g(h),t;if(d===l)return g(h),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=h,l=d;else{for(var _=!1,b=h.child;b;){if(b===a){_=!0,a=h,l=d;break}if(b===l){_=!0,l=h,a=d;break}b=b.sibling}if(!_){for(b=d.child;b;){if(b===a){_=!0,a=d,l=h;break}if(b===l){_=!0,l=d,a=h;break}b=b.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:i}function y(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=y(t),i!==null)return i;t=t.sibling}return null}var T=Object.assign,x=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),B=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),ne=Symbol.for("react.consumer"),K=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function O(t){return t===null||typeof t!="object"?null:(t=I&&t[I]||t["@@iterator"],typeof t=="function"?t:null)}var S=Symbol.for("react.client.reference");function pe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===S?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case G:return"Fragment";case U:return"Profiler";case Z:return"StrictMode";case le:return"Suspense";case re:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case B:return"Portal";case K:return(t.displayName||"Context")+".Provider";case ne:return(t._context.displayName||"Context")+".Consumer";case ue:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case D:return i=t.displayName||null,i!==null?i:pe(t.type)||"Memo";case w:i=t._payload,t=t._init;try{return pe(t(i))}catch{}}return null}var _e=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Ne=[],M=-1;function J(t){return{current:t}}function fe(t){0>M||(t.current=Ne[M],Ne[M]=null,M--)}function oe(t,i){M++,Ne[M]=t.current,t.current=i}var de=J(null),se=J(null),he=J(null),Ce=J(null);function De(t,i){switch(oe(he,i),oe(se,t),oe(de,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?uv(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=uv(i),t=cv(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}fe(de),oe(de,t)}function at(){fe(de),fe(se),fe(he)}function Ct(t){t.memoizedState!==null&&oe(Ce,t);var i=de.current,a=cv(i,t.type);i!==a&&(oe(se,t),oe(de,a))}function Et(t){se.current===t&&(fe(de),fe(se)),Ce.current===t&&(fe(Ce),fl._currentValue=me)}var an=Object.prototype.hasOwnProperty,Hn=s.unstable_scheduleCallback,Ws=s.unstable_cancelCallback,lo=s.unstable_shouldYield,Jl=s.unstable_requestPaint,In=s.unstable_now,Vh=s.unstable_getCurrentPriorityLevel,uo=s.unstable_ImmediatePriority,Qr=s.unstable_UserBlockingPriority,er=s.unstable_NormalPriority,Ph=s.unstable_LowPriority,Kr=s.unstable_IdlePriority,co=s.log,Wl=s.unstable_setDisableYieldValue,ht=null,$e=null;function _n(t){if(typeof co=="function"&&Wl(t),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(ht,t)}catch{}}var Xt=Math.clz32?Math.clz32:tr,eu=Math.log,Lh=Math.LN2;function tr(t){return t>>>=0,t===0?32:31-(eu(t)/Lh|0)|0}var nr=256,ir=4194304;function Fn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Yr(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?h=Fn(l):(_&=b,_!==0?h=Fn(_):a||(a=b&~t,a!==0&&(h=Fn(a))))):(b=l&~d,b!==0?h=Fn(b):_!==0?h=Fn(_):a||(a=l&~t,a!==0&&(h=Fn(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function sr(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function ho(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fo(){var t=nr;return nr<<=1,(nr&4194048)===0&&(nr=256),t}function mo(){var t=ir;return ir<<=1,(ir&62914560)===0&&(ir=4194304),t}function bi(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Ai(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function go(t,i,a,l,h,d){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,N=t.expirationTimes,z=t.hiddenUpdates;for(a=_&~a;0<a;){var $=31-Xt(a),W=1<<$;b[$]=0,N[$]=-1;var H=z[$];if(H!==null)for(z[$]=null,$=0;$<H.length;$++){var F=H[$];F!==null&&(F.lane&=-536870913)}a&=~W}l!==0&&Wn(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(_&~i))}function Wn(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-Xt(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function po(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-Xt(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function is(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function $r(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ss(){var t=ie.p;return t!==0?t:(t=window.event,t===void 0?32:Iv(t.type))}function tu(t,i){var a=ie.p;try{return ie.p=t,i()}finally{ie.p=a}}var ot=Math.random().toString(36).slice(2),Rt="__reactFiber$"+ot,Tt="__reactProps$"+ot,Nn="__reactContainer$"+ot,yo="__reactEvents$"+ot,jh="__reactListeners$"+ot,rs="__reactHandles$"+ot,nu="__reactResources$"+ot,rr="__reactMarker$"+ot;function as(t){delete t[Rt],delete t[Tt],delete t[yo],delete t[jh],delete t[rs]}function Si(t){var i=t[Rt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Nn]||a[Rt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=mv(t);t!==null;){if(a=t[Rt])return a;t=mv(t)}return i}t=a,a=t.parentNode}return null}function ei(t){if(t=t[Rt]||t[Nn]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function ti(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(r(33))}function on(t){var i=t[nu];return i||(i=t[nu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function gt(t){t[rr]=!0}var vo=new Set,Xr={};function Gn(t,i){wi(t,i),wi(t+"Capture",i)}function wi(t,i){for(Xr[t]=i,t=0;t<i.length;t++)vo.add(i[t])}var iu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),su={},ar={};function ru(t){return an.call(ar,t)?!0:an.call(su,t)?!1:iu.test(t)?ar[t]=!0:(su[t]=!0,!1)}function os(t,i,a){if(ru(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function ni(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Bt(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}var or,au;function xi(t){if(or===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);or=i&&i[1]||"",au=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+or+t+au}var Zr=!1;function Jr(t,i){if(!t||Zr)return"";Zr=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(F){var H=F}Reflect.construct(t,[],W)}else{try{W.call()}catch(F){H=F}t.call(W.prototype)}}else{try{throw Error()}catch(F){H=F}(W=t())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(F){if(F&&H&&typeof F.stack=="string")return[F.stack,H.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],b=d[1];if(_&&b){var N=_.split(`
`),z=b.split(`
`);for(h=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;h<z.length&&!z[h].includes("DetermineComponentFrameRoot");)h++;if(l===N.length||h===z.length)for(l=N.length-1,h=z.length-1;1<=l&&0<=h&&N[l]!==z[h];)h--;for(;1<=l&&0<=h;l--,h--)if(N[l]!==z[h]){if(l!==1||h!==1)do if(l--,h--,0>h||N[l]!==z[h]){var $=`
`+N[l].replace(" at new "," at ");return t.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",t.displayName)),$}while(1<=l&&0<=h);break}}}finally{Zr=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?xi(a):""}function _o(t){switch(t.tag){case 26:case 27:case 5:return xi(t.type);case 16:return xi("Lazy");case 13:return xi("Suspense");case 19:return xi("SuspenseList");case 0:case 15:return Jr(t.type,!1);case 11:return Jr(t.type.render,!1);case 1:return Jr(t.type,!0);case 31:return xi("Activity");default:return""}}function Wr(t){try{var i="";do i+=_o(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function ln(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Eo(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Uh(t){var i=Eo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),l=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(_){l=""+_,d.call(this,_)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(_){l=""+_},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function ea(t){t._valueTracker||(t._valueTracker=Uh(t))}function To(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=Eo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function lr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var zh=/[\n"\\]/g;function bt(t){return t.replace(zh,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function En(t,i,a,l,h,d,_,b){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),i!=null?_==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+ln(i)):t.value!==""+ln(i)&&(t.value=""+ln(i)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),i!=null?ls(t,_,ln(i)):a!=null?ls(t,_,ln(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+ln(b):t.removeAttribute("name")}function ur(t,i,a,l,h,d,_,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+ln(a):"",i=i!=null?""+ln(i):a,b||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=b?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_)}function ls(t,i,a){i==="number"&&lr(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Ci(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+ln(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function Je(t,i,a){if(i!=null&&(i=""+ln(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+ln(a):""}function cr(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(_e(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=ln(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Dn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var hr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ou(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||hr.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function bo(t,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&ou(t,h,l)}else for(var d in i)i.hasOwnProperty(d)&&ou(t,d,i[d])}function Ao(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ta(t){return qh.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Ri=null;function On(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ii=null,Ni=null;function So(t){var i=ei(t);if(i&&(t=i.stateNode)){var a=t[Tt]||null;e:switch(t=i.stateNode,i.type){case"input":if(En(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+bt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[Tt]||null;if(!h)throw Error(r(90));En(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&To(l)}break e;case"textarea":Je(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Ci(t,!!a.multiple,i,!1)}}}var ii=!1;function lu(t,i,a){if(ii)return t(i,a);ii=!0;try{var l=t(i);return l}finally{if(ii=!1,(Ii!==null||Ni!==null)&&(tc(),Ii&&(i=Ii,t=Ni,Ni=Ii=null,So(i),t)))for(i=0;i<t.length;i++)So(t[i])}}function fr(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Tt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kn=!1;if(Qn)try{var dr={};Object.defineProperty(dr,"passive",{get:function(){kn=!0}}),window.addEventListener("test",dr,dr),window.removeEventListener("test",dr,dr)}catch{kn=!1}var si=null,us=null,Di=null;function wo(){if(Di)return Di;var t,i=us,a=i.length,l,h="value"in si?si.value:si.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var _=a-t;for(l=1;l<=_&&i[a-l]===h[d-l];l++);return Di=h.slice(t,1<l?1-l:void 0)}function ri(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function ai(){return!0}function xo(){return!1}function Vt(t){function i(a,l,h,d,_){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?ai:xo,this.isPropagationStopped=xo,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ai)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ai)},persist:function(){},isPersistent:ai}),i}var Ke={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},na=Vt(Ke),mr=T({},Ke,{view:0,detail:0}),uu=Vt(mr),ia,sa,oi,gr=T({},mr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==oi&&(oi&&t.type==="mousemove"?(ia=t.screenX-oi.screenX,sa=t.screenY-oi.screenY):sa=ia=0,oi=t),ia)},movementY:function(t){return"movementY"in t?t.movementY:sa}}),Mn=Vt(gr),cu=T({},gr,{dataTransfer:0}),Hh=Vt(cu),pr=T({},mr,{relatedTarget:0}),ra=Vt(pr),Co=T({},Ke,{animationName:0,elapsedTime:0,pseudoElement:0}),aa=Vt(Co),hu=T({},Ke,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),oa=Vt(hu),Fh=T({},Ke,{data:0}),Ro=Vt(Fh),yr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},du={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Io(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=du[t])?!!i[t]:!1}function vr(){return Io}var mu=T({},mr,{key:function(t){if(t.key){var i=yr[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=ri(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?fu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vr,charCode:function(t){return t.type==="keypress"?ri(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ri(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),la=Vt(mu),gu=T({},gr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),No=Vt(gu),Oi=T({},mr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vr}),pu=Vt(Oi),yu=T({},Ke,{propertyName:0,elapsedTime:0,pseudoElement:0}),vu=Vt(yu),_u=T({},gr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ua=Vt(_u),un=T({},Ke,{newState:0,oldState:0}),Eu=Vt(un),Tu=[9,13,27,32],li=Qn&&"CompositionEvent"in window,c=null;Qn&&"documentMode"in document&&(c=document.documentMode);var m=Qn&&"TextEvent"in window&&!c,v=Qn&&(!li||c&&8<c&&11>=c),A=" ",L=!1;function Q(t,i){switch(t){case"keyup":return Tu.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ce(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ze=!1;function It(t,i){switch(t){case"compositionend":return ce(i);case"keypress":return i.which!==32?null:(L=!0,A);case"textInput":return t=i.data,t===A&&L?null:t;default:return null}}function Be(t,i){if(ze)return t==="compositionend"||!li&&Q(t,i)?(t=wo(),Di=us=si=null,ze=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return v&&i.locale!=="ko"?null:i.data;default:return null}}var Pt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nt(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Pt[t.type]:i==="textarea"}function ki(t,i,a,l){Ii?Ni?Ni.push(l):Ni=[l]:Ii=l,i=oc(i,"onChange"),0<i.length&&(a=new na("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var qt=null,ui=null;function Do(t){sv(t,0)}function bu(t){var i=ti(t);if(To(i))return t}function wg(t,i){if(t==="change")return i}var xg=!1;if(Qn){var Gh;if(Qn){var Qh="oninput"in document;if(!Qh){var Cg=document.createElement("div");Cg.setAttribute("oninput","return;"),Qh=typeof Cg.oninput=="function"}Gh=Qh}else Gh=!1;xg=Gh&&(!document.documentMode||9<document.documentMode)}function Rg(){qt&&(qt.detachEvent("onpropertychange",Ig),ui=qt=null)}function Ig(t){if(t.propertyName==="value"&&bu(ui)){var i=[];ki(i,ui,t,On(t)),lu(Do,i)}}function tb(t,i,a){t==="focusin"?(Rg(),qt=i,ui=a,qt.attachEvent("onpropertychange",Ig)):t==="focusout"&&Rg()}function nb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bu(ui)}function ib(t,i){if(t==="click")return bu(i)}function sb(t,i){if(t==="input"||t==="change")return bu(i)}function rb(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Tn=typeof Object.is=="function"?Object.is:rb;function Oo(t,i){if(Tn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!an.call(i,h)||!Tn(t[h],i[h]))return!1}return!0}function Ng(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Dg(t,i){var a=Ng(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ng(a)}}function Og(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?Og(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function kg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=lr(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=lr(t.document)}return i}function Kh(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var ab=Qn&&"documentMode"in document&&11>=document.documentMode,ca=null,Yh=null,ko=null,$h=!1;function Mg(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;$h||ca==null||ca!==lr(l)||(l=ca,"selectionStart"in l&&Kh(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ko&&Oo(ko,l)||(ko=l,l=oc(Yh,"onSelect"),0<l.length&&(i=new na("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=ca)))}function _r(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var ha={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionrun:_r("Transition","TransitionRun"),transitionstart:_r("Transition","TransitionStart"),transitioncancel:_r("Transition","TransitionCancel"),transitionend:_r("Transition","TransitionEnd")},Xh={},Vg={};Qn&&(Vg=document.createElement("div").style,"AnimationEvent"in window||(delete ha.animationend.animation,delete ha.animationiteration.animation,delete ha.animationstart.animation),"TransitionEvent"in window||delete ha.transitionend.transition);function Er(t){if(Xh[t])return Xh[t];if(!ha[t])return t;var i=ha[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Vg)return Xh[t]=i[a];return t}var Pg=Er("animationend"),Lg=Er("animationiteration"),jg=Er("animationstart"),ob=Er("transitionrun"),lb=Er("transitionstart"),ub=Er("transitioncancel"),Ug=Er("transitionend"),zg=new Map,Zh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zh.push("scrollEnd");function Kn(t,i){zg.set(t,i),Gn(i,[t])}var Bg=new WeakMap;function Vn(t,i){if(typeof t=="object"&&t!==null){var a=Bg.get(t);return a!==void 0?a:(i={value:t,source:i,stack:Wr(i)},Bg.set(t,i),i)}return{value:t,source:i,stack:Wr(i)}}var Pn=[],fa=0,Jh=0;function Au(){for(var t=fa,i=Jh=fa=0;i<t;){var a=Pn[i];Pn[i++]=null;var l=Pn[i];Pn[i++]=null;var h=Pn[i];Pn[i++]=null;var d=Pn[i];if(Pn[i++]=null,l!==null&&h!==null){var _=l.pending;_===null?h.next=h:(h.next=_.next,_.next=h),l.pending=h}d!==0&&qg(a,h,d)}}function Su(t,i,a,l){Pn[fa++]=t,Pn[fa++]=i,Pn[fa++]=a,Pn[fa++]=l,Jh|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Wh(t,i,a,l){return Su(t,i,a,l),wu(t)}function da(t,i){return Su(t,null,null,i),wu(t)}function qg(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-Xt(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),d):null}function wu(t){if(50<sl)throw sl=0,ad=null,Error(r(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var ma={};function cb(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(t,i,a,l){return new cb(t,i,a,l)}function ef(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Mi(t,i){var a=t.alternate;return a===null?(a=bn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Hg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function xu(t,i,a,l,h,d){var _=0;if(l=t,typeof t=="function")ef(t)&&(_=1);else if(typeof t=="string")_=fA(t,a,de.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=bn(31,a,i,h),t.elementType=R,t.lanes=d,t;case G:return Tr(a.children,h,d,i);case Z:_=8,h|=24;break;case U:return t=bn(12,a,i,h|2),t.elementType=U,t.lanes=d,t;case le:return t=bn(13,a,i,h),t.elementType=le,t.lanes=d,t;case re:return t=bn(19,a,i,h),t.elementType=re,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Y:case K:_=10;break e;case ne:_=9;break e;case ue:_=11;break e;case D:_=14;break e;case w:_=16,l=null;break e}_=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return i=bn(_,a,i,h),i.elementType=t,i.type=l,i.lanes=d,i}function Tr(t,i,a,l){return t=bn(7,t,l,i),t.lanes=a,t}function tf(t,i,a){return t=bn(6,t,null,i),t.lanes=a,t}function nf(t,i,a){return i=bn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var ga=[],pa=0,Cu=null,Ru=0,Ln=[],jn=0,br=null,Vi=1,Pi="";function Ar(t,i){ga[pa++]=Ru,ga[pa++]=Cu,Cu=t,Ru=i}function Fg(t,i,a){Ln[jn++]=Vi,Ln[jn++]=Pi,Ln[jn++]=br,br=t;var l=Vi;t=Pi;var h=32-Xt(l)-1;l&=~(1<<h),a+=1;var d=32-Xt(i)+h;if(30<d){var _=h-h%5;d=(l&(1<<_)-1).toString(32),l>>=_,h-=_,Vi=1<<32-Xt(i)+h|a<<h|l,Pi=d+t}else Vi=1<<d|a<<h|l,Pi=t}function sf(t){t.return!==null&&(Ar(t,1),Fg(t,1,0))}function rf(t){for(;t===Cu;)Cu=ga[--pa],ga[pa]=null,Ru=ga[--pa],ga[pa]=null;for(;t===br;)br=Ln[--jn],Ln[jn]=null,Pi=Ln[--jn],Ln[jn]=null,Vi=Ln[--jn],Ln[jn]=null}var cn=null,ft=null,Qe=!1,Sr=null,ci=!1,af=Error(r(519));function wr(t){var i=Error(r(418,""));throw Po(Vn(i,t)),af}function Gg(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[Rt]=t,i[Tt]=l,a){case"dialog":Le("cancel",i),Le("close",i);break;case"iframe":case"object":case"embed":Le("load",i);break;case"video":case"audio":for(a=0;a<al.length;a++)Le(al[a],i);break;case"source":Le("error",i);break;case"img":case"image":case"link":Le("error",i),Le("load",i);break;case"details":Le("toggle",i);break;case"input":Le("invalid",i),ur(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),ea(i);break;case"select":Le("invalid",i);break;case"textarea":Le("invalid",i),cr(i,l.value,l.defaultValue,l.children),ea(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||lv(i.textContent,a)?(l.popover!=null&&(Le("beforetoggle",i),Le("toggle",i)),l.onScroll!=null&&Le("scroll",i),l.onScrollEnd!=null&&Le("scrollend",i),l.onClick!=null&&(i.onclick=lc),i=!0):i=!1,i||wr(t)}function Qg(t){for(cn=t.return;cn;)switch(cn.tag){case 5:case 13:ci=!1;return;case 27:case 3:ci=!0;return;default:cn=cn.return}}function Mo(t){if(t!==cn)return!1;if(!Qe)return Qg(t),Qe=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||bd(t.type,t.memoizedProps)),a=!a),a&&ft&&wr(t),Qg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){ft=$n(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}ft=null}}else i===27?(i=ft,ws(t.type)?(t=xd,xd=null,ft=t):ft=i):ft=cn?$n(t.stateNode.nextSibling):null;return!0}function Vo(){ft=cn=null,Qe=!1}function Kg(){var t=Sr;return t!==null&&(mn===null?mn=t:mn.push.apply(mn,t),Sr=null),t}function Po(t){Sr===null?Sr=[t]:Sr.push(t)}var of=J(null),xr=null,Li=null;function cs(t,i,a){oe(of,i._currentValue),i._currentValue=a}function ji(t){t._currentValue=of.current,fe(of)}function lf(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function uf(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var _=h.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=h;for(var N=0;N<i.length;N++)if(b.context===i[N]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),lf(d.return,a,t),l||(_=null);break e}d=b.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(r(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),lf(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function Lo(t,i,a,l){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var b=h.type;Tn(h.pendingProps.value,_.value)||(t!==null?t.push(b):t=[b])}}else if(h===Ce.current){if(_=h.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(fl):t=[fl])}h=h.return}t!==null&&uf(i,t,a,l),i.flags|=262144}function Iu(t){for(t=t.firstContext;t!==null;){if(!Tn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Cr(t){xr=t,Li=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Zt(t){return Yg(xr,t)}function Nu(t,i){return xr===null&&Cr(t),Yg(t,i)}function Yg(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Li===null){if(t===null)throw Error(r(308));Li=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Li=Li.next=i;return a}var hb=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},fb=s.unstable_scheduleCallback,db=s.unstable_NormalPriority,Dt={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cf(){return{controller:new hb,data:new Map,refCount:0}}function jo(t){t.refCount--,t.refCount===0&&fb(db,function(){t.controller.abort()})}var Uo=null,hf=0,ya=0,va=null;function mb(t,i){if(Uo===null){var a=Uo=[];hf=0,ya=dd(),va={status:"pending",value:void 0,then:function(l){a.push(l)}}}return hf++,i.then($g,$g),i}function $g(){if(--hf===0&&Uo!==null){va!==null&&(va.status="fulfilled");var t=Uo;Uo=null,ya=0,va=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function gb(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Xg=q.S;q.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&mb(t,i),Xg!==null&&Xg(t,i)};var Rr=J(null);function ff(){var t=Rr.current;return t!==null?t:st.pooledCache}function Du(t,i){i===null?oe(Rr,Rr.current):oe(Rr,i.pool)}function Zg(){var t=ff();return t===null?null:{parent:Dt._currentValue,pool:t}}var zo=Error(r(460)),Jg=Error(r(474)),Ou=Error(r(542)),df={then:function(){}};function Wg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function ku(){}function ep(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(ku,ku),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,np(t),t;default:if(typeof i.status=="string")i.then(ku,ku);else{if(t=st,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,np(t),t}throw Bo=i,zo}}var Bo=null;function tp(){if(Bo===null)throw Error(r(459));var t=Bo;return Bo=null,t}function np(t){if(t===zo||t===Ou)throw Error(r(483))}var hs=!1;function mf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function fs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ds(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Xe&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=wu(t),qg(t,null,a),i}return Su(t,l,i,a),wu(t)}function qo(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,po(t,a)}}function pf(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var yf=!1;function Ho(){if(yf){var t=va;if(t!==null)throw t}}function Fo(t,i,a,l){yf=!1;var h=t.updateQueue;hs=!1;var d=h.firstBaseUpdate,_=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var N=b,z=N.next;N.next=null,_===null?d=z:_.next=z,_=N;var $=t.alternate;$!==null&&($=$.updateQueue,b=$.lastBaseUpdate,b!==_&&(b===null?$.firstBaseUpdate=z:b.next=z,$.lastBaseUpdate=N))}if(d!==null){var W=h.baseState;_=0,$=z=N=null,b=d;do{var H=b.lane&-536870913,F=H!==b.lane;if(F?(qe&H)===H:(l&H)===H){H!==0&&H===ya&&(yf=!0),$!==null&&($=$.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var we=t,be=b;H=i;var tt=a;switch(be.tag){case 1:if(we=be.payload,typeof we=="function"){W=we.call(tt,W,H);break e}W=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=be.payload,H=typeof we=="function"?we.call(tt,W,H):we,H==null)break e;W=T({},W,H);break e;case 2:hs=!0}}H=b.callback,H!==null&&(t.flags|=64,F&&(t.flags|=8192),F=h.callbacks,F===null?h.callbacks=[H]:F.push(H))}else F={lane:H,tag:b.tag,payload:b.payload,callback:b.callback,next:null},$===null?(z=$=F,N=W):$=$.next=F,_|=H;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;F=b,b=F.next,F.next=null,h.lastBaseUpdate=F,h.shared.pending=null}}while(!0);$===null&&(N=W),h.baseState=N,h.firstBaseUpdate=z,h.lastBaseUpdate=$,d===null&&(h.shared.lanes=0),Ts|=_,t.lanes=_,t.memoizedState=W}}function ip(t,i){if(typeof t!="function")throw Error(r(191,t));t.call(i)}function sp(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)ip(a[t],i)}var _a=J(null),Mu=J(0);function rp(t,i){t=Gi,oe(Mu,t),oe(_a,i),Gi=t|i.baseLanes}function vf(){oe(Mu,Gi),oe(_a,_a.current)}function _f(){Gi=Mu.current,fe(_a),fe(Mu)}var ms=0,ke=null,We=null,At=null,Vu=!1,Ea=!1,Ir=!1,Pu=0,Go=0,Ta=null,pb=0;function pt(){throw Error(r(321))}function Ef(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!Tn(t[a],i[a]))return!1;return!0}function Tf(t,i,a,l,h,d){return ms=d,ke=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,q.H=t===null||t.memoizedState===null?qp:Hp,Ir=!1,d=a(l,h),Ir=!1,Ea&&(d=op(i,a,l,h)),ap(t),d}function ap(t){q.H=qu;var i=We!==null&&We.next!==null;if(ms=0,At=We=ke=null,Vu=!1,Go=0,Ta=null,i)throw Error(r(300));t===null||Lt||(t=t.dependencies,t!==null&&Iu(t)&&(Lt=!0))}function op(t,i,a,l){ke=t;var h=0;do{if(Ea&&(Ta=null),Go=0,Ea=!1,25<=h)throw Error(r(301));if(h+=1,At=We=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}q.H=Ab,d=i(a,l)}while(Ea);return d}function yb(){var t=q.H,i=t.useState()[0];return i=typeof i.then=="function"?Qo(i):i,t=t.useState()[0],(We!==null?We.memoizedState:null)!==t&&(ke.flags|=1024),i}function bf(){var t=Pu!==0;return Pu=0,t}function Af(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Sf(t){if(Vu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}Vu=!1}ms=0,At=We=ke=null,Ea=!1,Go=Pu=0,Ta=null}function fn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?ke.memoizedState=At=t:At=At.next=t,At}function St(){if(We===null){var t=ke.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var i=At===null?ke.memoizedState:At.next;if(i!==null)At=i,We=t;else{if(t===null)throw ke.alternate===null?Error(r(467)):Error(r(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},At===null?ke.memoizedState=At=t:At=At.next=t}return At}function wf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qo(t){var i=Go;return Go+=1,Ta===null&&(Ta=[]),t=ep(Ta,t,i),i=ke,(At===null?i.memoizedState:At.next)===null&&(i=i.alternate,q.H=i===null||i.memoizedState===null?qp:Hp),t}function Lu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Qo(t);if(t.$$typeof===K)return Zt(t)}throw Error(r(438,String(t)))}function xf(t){var i=null,a=ke.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=ke.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=wf(),ke.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=k;return i.index++,a}function Ui(t,i){return typeof i=="function"?i(t):i}function ju(t){var i=St();return Cf(i,We,t)}function Cf(t,i,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var _=h.next;h.next=d.next,d.next=_}i.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var b=_=null,N=null,z=i,$=!1;do{var W=z.lane&-536870913;if(W!==z.lane?(qe&W)===W:(ms&W)===W){var H=z.revertLane;if(H===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),W===ya&&($=!0);else if((ms&H)===H){z=z.next,H===ya&&($=!0);continue}else W={lane:0,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},N===null?(b=N=W,_=d):N=N.next=W,ke.lanes|=H,Ts|=H;W=z.action,Ir&&a(d,W),d=z.hasEagerState?z.eagerState:a(d,W)}else H={lane:W,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},N===null?(b=N=H,_=d):N=N.next=H,ke.lanes|=W,Ts|=W;z=z.next}while(z!==null&&z!==i);if(N===null?_=d:N.next=b,!Tn(d,t.memoizedState)&&(Lt=!0,$&&(a=va,a!==null)))throw a;t.memoizedState=d,t.baseState=_,t.baseQueue=N,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Rf(t){var i=St(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do d=t(d,_.action),_=_.next;while(_!==h);Tn(d,i.memoizedState)||(Lt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function lp(t,i,a){var l=ke,h=St(),d=Qe;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!Tn((We||h).memoizedState,a);_&&(h.memoizedState=a,Lt=!0),h=h.queue;var b=hp.bind(null,l,h,t);if(Ko(2048,8,b,[t]),h.getSnapshot!==i||_||At!==null&&At.memoizedState.tag&1){if(l.flags|=2048,ba(9,Uu(),cp.bind(null,l,h,a,i),null),st===null)throw Error(r(349));d||(ms&124)!==0||up(l,i,a)}return a}function up(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=ke.updateQueue,i===null?(i=wf(),ke.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function cp(t,i,a,l){i.value=a,i.getSnapshot=l,fp(i)&&dp(t)}function hp(t,i,a){return a(function(){fp(i)&&dp(t)})}function fp(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!Tn(t,a)}catch{return!0}}function dp(t){var i=da(t,2);i!==null&&Cn(i,t,2)}function If(t){var i=fn();if(typeof t=="function"){var a=t;if(t=a(),Ir){_n(!0);try{a()}finally{_n(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:t},i}function mp(t,i,a,l){return t.baseState=a,Cf(t,We,typeof l=="function"?l:Ui)}function vb(t,i,a,l,h){if(Bu(t))throw Error(r(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};q.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,gp(i,d)):(d.next=a.next,i.pending=a.next=d)}}function gp(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var d=q.T,_={};q.T=_;try{var b=a(h,l),N=q.S;N!==null&&N(_,b),pp(t,i,b)}catch(z){Nf(t,i,z)}finally{q.T=d}}else try{d=a(h,l),pp(t,i,d)}catch(z){Nf(t,i,z)}}function pp(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){yp(t,i,l)},function(l){return Nf(t,i,l)}):yp(t,i,a)}function yp(t,i,a){i.status="fulfilled",i.value=a,vp(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,gp(t,a)))}function Nf(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,vp(i),i=i.next;while(i!==l)}t.action=null}function vp(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function _p(t,i){return i}function Ep(t,i){if(Qe){var a=st.formState;if(a!==null){e:{var l=ke;if(Qe){if(ft){t:{for(var h=ft,d=ci;h.nodeType!==8;){if(!d){h=null;break t}if(h=$n(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){ft=$n(h.nextSibling),l=h.data==="F!";break e}}wr(l)}l=!1}l&&(i=a[0])}}return a=fn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_p,lastRenderedState:i},a.queue=l,a=Up.bind(null,ke,l),l.dispatch=a,l=If(!1),d=Vf.bind(null,ke,!1,l.queue),l=fn(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=vb.bind(null,ke,h,d,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function Tp(t){var i=St();return bp(i,We,t)}function bp(t,i,a){if(i=Cf(t,i,_p)[0],t=ju(Ui)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Qo(i)}catch(_){throw _===zo?Ou:_}else l=i;i=St();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(ke.flags|=2048,ba(9,Uu(),_b.bind(null,h,a),null)),[l,d,t]}function _b(t,i){t.action=i}function Ap(t){var i=St(),a=We;if(a!==null)return bp(i,a,t);St(),i=i.memoizedState,a=St();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function ba(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=ke.updateQueue,i===null&&(i=wf(),ke.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function Uu(){return{destroy:void 0,resource:void 0}}function Sp(){return St().memoizedState}function zu(t,i,a,l){var h=fn();l=l===void 0?null:l,ke.flags|=t,h.memoizedState=ba(1|i,Uu(),a,l)}function Ko(t,i,a,l){var h=St();l=l===void 0?null:l;var d=h.memoizedState.inst;We!==null&&l!==null&&Ef(l,We.memoizedState.deps)?h.memoizedState=ba(i,d,a,l):(ke.flags|=t,h.memoizedState=ba(1|i,d,a,l))}function wp(t,i){zu(8390656,8,t,i)}function xp(t,i){Ko(2048,8,t,i)}function Cp(t,i){return Ko(4,2,t,i)}function Rp(t,i){return Ko(4,4,t,i)}function Ip(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Np(t,i,a){a=a!=null?a.concat([t]):null,Ko(4,4,Ip.bind(null,i,t),a)}function Df(){}function Dp(t,i){var a=St();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Ef(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function Op(t,i){var a=St();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Ef(i,l[1]))return l[0];if(l=t(),Ir){_n(!0);try{t()}finally{_n(!1)}}return a.memoizedState=[l,i],l}function Of(t,i,a){return a===void 0||(ms&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=Vy(),ke.lanes|=t,Ts|=t,a)}function kp(t,i,a,l){return Tn(a,i)?a:_a.current!==null?(t=Of(t,a,l),Tn(t,i)||(Lt=!0),t):(ms&42)===0?(Lt=!0,t.memoizedState=a):(t=Vy(),ke.lanes|=t,Ts|=t,i)}function Mp(t,i,a,l,h){var d=ie.p;ie.p=d!==0&&8>d?d:8;var _=q.T,b={};q.T=b,Vf(t,!1,i,a);try{var N=h(),z=q.S;if(z!==null&&z(b,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var $=gb(N,l);Yo(t,i,$,xn(t))}else Yo(t,i,l,xn(t))}catch(W){Yo(t,i,{then:function(){},status:"rejected",reason:W},xn())}finally{ie.p=d,q.T=_}}function Eb(){}function kf(t,i,a,l){if(t.tag!==5)throw Error(r(476));var h=Vp(t).queue;Mp(t,h,i,me,a===null?Eb:function(){return Pp(t),a(l)})}function Vp(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:me},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ui,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Pp(t){var i=Vp(t).next.queue;Yo(t,i,{},xn())}function Mf(){return Zt(fl)}function Lp(){return St().memoizedState}function jp(){return St().memoizedState}function Tb(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=xn();t=fs(a);var l=ds(i,t,a);l!==null&&(Cn(l,i,a),qo(l,i,a)),i={cache:cf()},t.payload=i;return}i=i.return}}function bb(t,i,a){var l=xn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Bu(t)?zp(i,a):(a=Wh(t,i,a,l),a!==null&&(Cn(a,t,l),Bp(a,i,l)))}function Up(t,i,a){var l=xn();Yo(t,i,a,l)}function Yo(t,i,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Bu(t))zp(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,b=d(_,a);if(h.hasEagerState=!0,h.eagerState=b,Tn(b,_))return Su(t,i,h,0),st===null&&Au(),!1}catch{}finally{}if(a=Wh(t,i,h,l),a!==null)return Cn(a,t,l),Bp(a,i,l),!0}return!1}function Vf(t,i,a,l){if(l={lane:2,revertLane:dd(),action:l,hasEagerState:!1,eagerState:null,next:null},Bu(t)){if(i)throw Error(r(479))}else i=Wh(t,a,l,2),i!==null&&Cn(i,t,2)}function Bu(t){var i=t.alternate;return t===ke||i!==null&&i===ke}function zp(t,i){Ea=Vu=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function Bp(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,po(t,a)}}var qu={readContext:Zt,use:Lu,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useLayoutEffect:pt,useInsertionEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useSyncExternalStore:pt,useId:pt,useHostTransitionStatus:pt,useFormState:pt,useActionState:pt,useOptimistic:pt,useMemoCache:pt,useCacheRefresh:pt},qp={readContext:Zt,use:Lu,useCallback:function(t,i){return fn().memoizedState=[t,i===void 0?null:i],t},useContext:Zt,useEffect:wp,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,zu(4194308,4,Ip.bind(null,i,t),a)},useLayoutEffect:function(t,i){return zu(4194308,4,t,i)},useInsertionEffect:function(t,i){zu(4,2,t,i)},useMemo:function(t,i){var a=fn();i=i===void 0?null:i;var l=t();if(Ir){_n(!0);try{t()}finally{_n(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=fn();if(a!==void 0){var h=a(i);if(Ir){_n(!0);try{a(i)}finally{_n(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=bb.bind(null,ke,t),[l.memoizedState,t]},useRef:function(t){var i=fn();return t={current:t},i.memoizedState=t},useState:function(t){t=If(t);var i=t.queue,a=Up.bind(null,ke,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:Df,useDeferredValue:function(t,i){var a=fn();return Of(a,t,i)},useTransition:function(){var t=If(!1);return t=Mp.bind(null,ke,t.queue,!0,!1),fn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=ke,h=fn();if(Qe){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),st===null)throw Error(r(349));(qe&124)!==0||up(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,wp(hp.bind(null,l,d,t),[t]),l.flags|=2048,ba(9,Uu(),cp.bind(null,l,d,a,i),null),a},useId:function(){var t=fn(),i=st.identifierPrefix;if(Qe){var a=Pi,l=Vi;a=(l&~(1<<32-Xt(l)-1)).toString(32)+a,i=""+i+"R"+a,a=Pu++,0<a&&(i+="H"+a.toString(32)),i+=""}else a=pb++,i=""+i+"r"+a.toString(32)+"";return t.memoizedState=i},useHostTransitionStatus:Mf,useFormState:Ep,useActionState:Ep,useOptimistic:function(t){var i=fn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Vf.bind(null,ke,!0,a),a.dispatch=i,[t,i]},useMemoCache:xf,useCacheRefresh:function(){return fn().memoizedState=Tb.bind(null,ke)}},Hp={readContext:Zt,use:Lu,useCallback:Dp,useContext:Zt,useEffect:xp,useImperativeHandle:Np,useInsertionEffect:Cp,useLayoutEffect:Rp,useMemo:Op,useReducer:ju,useRef:Sp,useState:function(){return ju(Ui)},useDebugValue:Df,useDeferredValue:function(t,i){var a=St();return kp(a,We.memoizedState,t,i)},useTransition:function(){var t=ju(Ui)[0],i=St().memoizedState;return[typeof t=="boolean"?t:Qo(t),i]},useSyncExternalStore:lp,useId:Lp,useHostTransitionStatus:Mf,useFormState:Tp,useActionState:Tp,useOptimistic:function(t,i){var a=St();return mp(a,We,t,i)},useMemoCache:xf,useCacheRefresh:jp},Ab={readContext:Zt,use:Lu,useCallback:Dp,useContext:Zt,useEffect:xp,useImperativeHandle:Np,useInsertionEffect:Cp,useLayoutEffect:Rp,useMemo:Op,useReducer:Rf,useRef:Sp,useState:function(){return Rf(Ui)},useDebugValue:Df,useDeferredValue:function(t,i){var a=St();return We===null?Of(a,t,i):kp(a,We.memoizedState,t,i)},useTransition:function(){var t=Rf(Ui)[0],i=St().memoizedState;return[typeof t=="boolean"?t:Qo(t),i]},useSyncExternalStore:lp,useId:Lp,useHostTransitionStatus:Mf,useFormState:Ap,useActionState:Ap,useOptimistic:function(t,i){var a=St();return We!==null?mp(a,We,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:xf,useCacheRefresh:jp},Aa=null,$o=0;function Hu(t){var i=$o;return $o+=1,Aa===null&&(Aa=[]),ep(Aa,t,i)}function Xo(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Fu(t,i){throw i.$$typeof===x?Error(r(525)):(t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Fp(t){var i=t._init;return i(t._payload)}function Gp(t){function i(P,V){if(t){var j=P.deletions;j===null?(P.deletions=[V],P.flags|=16):j.push(V)}}function a(P,V){if(!t)return null;for(;V!==null;)i(P,V),V=V.sibling;return null}function l(P){for(var V=new Map;P!==null;)P.key!==null?V.set(P.key,P):V.set(P.index,P),P=P.sibling;return V}function h(P,V){return P=Mi(P,V),P.index=0,P.sibling=null,P}function d(P,V,j){return P.index=j,t?(j=P.alternate,j!==null?(j=j.index,j<V?(P.flags|=67108866,V):j):(P.flags|=67108866,V)):(P.flags|=1048576,V)}function _(P){return t&&P.alternate===null&&(P.flags|=67108866),P}function b(P,V,j,X){return V===null||V.tag!==6?(V=tf(j,P.mode,X),V.return=P,V):(V=h(V,j),V.return=P,V)}function N(P,V,j,X){var ve=j.type;return ve===G?$(P,V,j.props.children,X,j.key):V!==null&&(V.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===w&&Fp(ve)===V.type)?(V=h(V,j.props),Xo(V,j),V.return=P,V):(V=xu(j.type,j.key,j.props,null,P.mode,X),Xo(V,j),V.return=P,V)}function z(P,V,j,X){return V===null||V.tag!==4||V.stateNode.containerInfo!==j.containerInfo||V.stateNode.implementation!==j.implementation?(V=nf(j,P.mode,X),V.return=P,V):(V=h(V,j.children||[]),V.return=P,V)}function $(P,V,j,X,ve){return V===null||V.tag!==7?(V=Tr(j,P.mode,X,ve),V.return=P,V):(V=h(V,j),V.return=P,V)}function W(P,V,j){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=tf(""+V,P.mode,j),V.return=P,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case C:return j=xu(V.type,V.key,V.props,null,P.mode,j),Xo(j,V),j.return=P,j;case B:return V=nf(V,P.mode,j),V.return=P,V;case w:var X=V._init;return V=X(V._payload),W(P,V,j)}if(_e(V)||O(V))return V=Tr(V,P.mode,j,null),V.return=P,V;if(typeof V.then=="function")return W(P,Hu(V),j);if(V.$$typeof===K)return W(P,Nu(P,V),j);Fu(P,V)}return null}function H(P,V,j,X){var ve=V!==null?V.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return ve!==null?null:b(P,V,""+j,X);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case C:return j.key===ve?N(P,V,j,X):null;case B:return j.key===ve?z(P,V,j,X):null;case w:return ve=j._init,j=ve(j._payload),H(P,V,j,X)}if(_e(j)||O(j))return ve!==null?null:$(P,V,j,X,null);if(typeof j.then=="function")return H(P,V,Hu(j),X);if(j.$$typeof===K)return H(P,V,Nu(P,j),X);Fu(P,j)}return null}function F(P,V,j,X,ve){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return P=P.get(j)||null,b(V,P,""+X,ve);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case C:return P=P.get(X.key===null?j:X.key)||null,N(V,P,X,ve);case B:return P=P.get(X.key===null?j:X.key)||null,z(V,P,X,ve);case w:var Ve=X._init;return X=Ve(X._payload),F(P,V,j,X,ve)}if(_e(X)||O(X))return P=P.get(j)||null,$(V,P,X,ve,null);if(typeof X.then=="function")return F(P,V,j,Hu(X),ve);if(X.$$typeof===K)return F(P,V,j,Nu(V,X),ve);Fu(V,X)}return null}function we(P,V,j,X){for(var ve=null,Ve=null,Ee=V,Ae=V=0,Ut=null;Ee!==null&&Ae<j.length;Ae++){Ee.index>Ae?(Ut=Ee,Ee=null):Ut=Ee.sibling;var Ge=H(P,Ee,j[Ae],X);if(Ge===null){Ee===null&&(Ee=Ut);break}t&&Ee&&Ge.alternate===null&&i(P,Ee),V=d(Ge,V,Ae),Ve===null?ve=Ge:Ve.sibling=Ge,Ve=Ge,Ee=Ut}if(Ae===j.length)return a(P,Ee),Qe&&Ar(P,Ae),ve;if(Ee===null){for(;Ae<j.length;Ae++)Ee=W(P,j[Ae],X),Ee!==null&&(V=d(Ee,V,Ae),Ve===null?ve=Ee:Ve.sibling=Ee,Ve=Ee);return Qe&&Ar(P,Ae),ve}for(Ee=l(Ee);Ae<j.length;Ae++)Ut=F(Ee,P,Ae,j[Ae],X),Ut!==null&&(t&&Ut.alternate!==null&&Ee.delete(Ut.key===null?Ae:Ut.key),V=d(Ut,V,Ae),Ve===null?ve=Ut:Ve.sibling=Ut,Ve=Ut);return t&&Ee.forEach(function(Ns){return i(P,Ns)}),Qe&&Ar(P,Ae),ve}function be(P,V,j,X){if(j==null)throw Error(r(151));for(var ve=null,Ve=null,Ee=V,Ae=V=0,Ut=null,Ge=j.next();Ee!==null&&!Ge.done;Ae++,Ge=j.next()){Ee.index>Ae?(Ut=Ee,Ee=null):Ut=Ee.sibling;var Ns=H(P,Ee,Ge.value,X);if(Ns===null){Ee===null&&(Ee=Ut);break}t&&Ee&&Ns.alternate===null&&i(P,Ee),V=d(Ns,V,Ae),Ve===null?ve=Ns:Ve.sibling=Ns,Ve=Ns,Ee=Ut}if(Ge.done)return a(P,Ee),Qe&&Ar(P,Ae),ve;if(Ee===null){for(;!Ge.done;Ae++,Ge=j.next())Ge=W(P,Ge.value,X),Ge!==null&&(V=d(Ge,V,Ae),Ve===null?ve=Ge:Ve.sibling=Ge,Ve=Ge);return Qe&&Ar(P,Ae),ve}for(Ee=l(Ee);!Ge.done;Ae++,Ge=j.next())Ge=F(Ee,P,Ae,Ge.value,X),Ge!==null&&(t&&Ge.alternate!==null&&Ee.delete(Ge.key===null?Ae:Ge.key),V=d(Ge,V,Ae),Ve===null?ve=Ge:Ve.sibling=Ge,Ve=Ge);return t&&Ee.forEach(function(SA){return i(P,SA)}),Qe&&Ar(P,Ae),ve}function tt(P,V,j,X){if(typeof j=="object"&&j!==null&&j.type===G&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case C:e:{for(var ve=j.key;V!==null;){if(V.key===ve){if(ve=j.type,ve===G){if(V.tag===7){a(P,V.sibling),X=h(V,j.props.children),X.return=P,P=X;break e}}else if(V.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===w&&Fp(ve)===V.type){a(P,V.sibling),X=h(V,j.props),Xo(X,j),X.return=P,P=X;break e}a(P,V);break}else i(P,V);V=V.sibling}j.type===G?(X=Tr(j.props.children,P.mode,X,j.key),X.return=P,P=X):(X=xu(j.type,j.key,j.props,null,P.mode,X),Xo(X,j),X.return=P,P=X)}return _(P);case B:e:{for(ve=j.key;V!==null;){if(V.key===ve)if(V.tag===4&&V.stateNode.containerInfo===j.containerInfo&&V.stateNode.implementation===j.implementation){a(P,V.sibling),X=h(V,j.children||[]),X.return=P,P=X;break e}else{a(P,V);break}else i(P,V);V=V.sibling}X=nf(j,P.mode,X),X.return=P,P=X}return _(P);case w:return ve=j._init,j=ve(j._payload),tt(P,V,j,X)}if(_e(j))return we(P,V,j,X);if(O(j)){if(ve=O(j),typeof ve!="function")throw Error(r(150));return j=ve.call(j),be(P,V,j,X)}if(typeof j.then=="function")return tt(P,V,Hu(j),X);if(j.$$typeof===K)return tt(P,V,Nu(P,j),X);Fu(P,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,V!==null&&V.tag===6?(a(P,V.sibling),X=h(V,j),X.return=P,P=X):(a(P,V),X=tf(j,P.mode,X),X.return=P,P=X),_(P)):a(P,V)}return function(P,V,j,X){try{$o=0;var ve=tt(P,V,j,X);return Aa=null,ve}catch(Ee){if(Ee===zo||Ee===Ou)throw Ee;var Ve=bn(29,Ee,null,P.mode);return Ve.lanes=X,Ve.return=P,Ve}finally{}}}var Sa=Gp(!0),Qp=Gp(!1),Un=J(null),hi=null;function gs(t){var i=t.alternate;oe(Ot,Ot.current&1),oe(Un,t),hi===null&&(i===null||_a.current!==null||i.memoizedState!==null)&&(hi=t)}function Kp(t){if(t.tag===22){if(oe(Ot,Ot.current),oe(Un,t),hi===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(hi=t)}}else ps()}function ps(){oe(Ot,Ot.current),oe(Un,Un.current)}function zi(t){fe(Un),hi===t&&(hi=null),fe(Ot)}var Ot=J(0);function Gu(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||wd(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function Pf(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:T({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Lf={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=xn(),h=fs(l);h.payload=i,a!=null&&(h.callback=a),i=ds(t,h,l),i!==null&&(Cn(i,t,l),qo(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=xn(),h=fs(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=ds(t,h,l),i!==null&&(Cn(i,t,l),qo(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=xn(),l=fs(a);l.tag=2,i!=null&&(l.callback=i),i=ds(t,l,a),i!==null&&(Cn(i,t,a),qo(i,t,a))}};function Yp(t,i,a,l,h,d,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,_):i.prototype&&i.prototype.isPureReactComponent?!Oo(a,l)||!Oo(h,d):!0}function $p(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&Lf.enqueueReplaceState(i,i.state,null)}function Nr(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var Qu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Xp(t){Qu(t)}function Zp(t){console.error(t)}function Jp(t){Qu(t)}function Ku(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Wp(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function jf(t,i,a){return a=fs(a),a.tag=3,a.payload={element:null},a.callback=function(){Ku(t,i)},a}function ey(t){return t=fs(t),t.tag=3,t}function ty(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){Wp(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){Wp(i,a,l),typeof h!="function"&&(bs===null?bs=new Set([this]):bs.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function Sb(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Lo(i,a,h,!0),a=Un.current,a!==null){switch(a.tag){case 13:return hi===null?ld():a.alternate===null&&dt===0&&(dt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===df?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),cd(t,l,h)),!1;case 22:return a.flags|=65536,l===df?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),cd(t,l,h)),!1}throw Error(r(435,a.tag))}return cd(t,l,h),ld(),!1}if(Qe)return i=Un.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==af&&(t=Error(r(422),{cause:l}),Po(Vn(t,a)))):(l!==af&&(i=Error(r(423),{cause:l}),Po(Vn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Vn(l,a),h=jf(t.stateNode,l,h),pf(t,h),dt!==4&&(dt=2)),!1;var d=Error(r(520),{cause:l});if(d=Vn(d,a),il===null?il=[d]:il.push(d),dt!==4&&(dt=2),i===null)return!0;l=Vn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=jf(a.stateNode,l,t),pf(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(bs===null||!bs.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=ey(h),ty(h,t,a,l),pf(a,h),!1}a=a.return}while(a!==null);return!1}var ny=Error(r(461)),Lt=!1;function Ht(t,i,a,l){i.child=t===null?Qp(i,null,a,l):Sa(i,t.child,a,l)}function iy(t,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var _={};for(var b in l)b!=="ref"&&(_[b]=l[b])}else _=l;return Cr(i),l=Tf(t,i,a,_,d,h),b=bf(),t!==null&&!Lt?(Af(t,i,h),Bi(t,i,h)):(Qe&&b&&sf(i),i.flags|=1,Ht(t,i,l,h),i.child)}function sy(t,i,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!ef(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,ry(t,i,d,l,h)):(t=xu(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!Qf(t,h)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:Oo,a(_,l)&&t.ref===i.ref)return Bi(t,i,h)}return i.flags|=1,t=Mi(d,l),t.ref=i.ref,t.return=i,i.child=t}function ry(t,i,a,l,h){if(t!==null){var d=t.memoizedProps;if(Oo(d,l)&&t.ref===i.ref)if(Lt=!1,i.pendingProps=l=d,Qf(t,h))(t.flags&131072)!==0&&(Lt=!0);else return i.lanes=t.lanes,Bi(t,i,h)}return Uf(t,i,a,l,h)}function ay(t,i,a){var l=i.pendingProps,h=l.children,d=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,t!==null){for(h=i.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;i.childLanes=d&~l}else i.childLanes=0,i.child=null;return oy(t,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&Du(i,d!==null?d.cachePool:null),d!==null?rp(i,d):vf(),Kp(i);else return i.lanes=i.childLanes=536870912,oy(t,i,d!==null?d.baseLanes|a:a,a)}else d!==null?(Du(i,d.cachePool),rp(i,d),ps(),i.memoizedState=null):(t!==null&&Du(i,null),vf(),ps());return Ht(t,i,h,a),i.child}function oy(t,i,a,l){var h=ff();return h=h===null?null:{parent:Dt._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},t!==null&&Du(i,null),vf(),Kp(i),t!==null&&Lo(t,i,l,!0),null}function Yu(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Uf(t,i,a,l,h){return Cr(i),a=Tf(t,i,a,l,void 0,h),l=bf(),t!==null&&!Lt?(Af(t,i,h),Bi(t,i,h)):(Qe&&l&&sf(i),i.flags|=1,Ht(t,i,a,h),i.child)}function ly(t,i,a,l,h,d){return Cr(i),i.updateQueue=null,a=op(i,l,a,h),ap(t),l=bf(),t!==null&&!Lt?(Af(t,i,d),Bi(t,i,d)):(Qe&&l&&sf(i),i.flags|=1,Ht(t,i,a,d),i.child)}function uy(t,i,a,l,h){if(Cr(i),i.stateNode===null){var d=ma,_=a.contextType;typeof _=="object"&&_!==null&&(d=Zt(_)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Lf,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},mf(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?Zt(_):ma,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Pf(i,a,_,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&Lf.enqueueReplaceState(d,d.state,null),Fo(i,l,d,h),Ho(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var b=i.memoizedProps,N=Nr(a,b);d.props=N;var z=d.context,$=a.contextType;_=ma,typeof $=="object"&&$!==null&&(_=Zt($));var W=a.getDerivedStateFromProps;$=typeof W=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,$||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||z!==_)&&$p(i,d,l,_),hs=!1;var H=i.memoizedState;d.state=H,Fo(i,l,d,h),Ho(),z=i.memoizedState,b||H!==z||hs?(typeof W=="function"&&(Pf(i,a,W,l),z=i.memoizedState),(N=hs||Yp(i,a,N,l,H,z,_))?($||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=z),d.props=l,d.state=z,d.context=_,l=N):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,gf(t,i),_=i.memoizedProps,$=Nr(a,_),d.props=$,W=i.pendingProps,H=d.context,z=a.contextType,N=ma,typeof z=="object"&&z!==null&&(N=Zt(z)),b=a.getDerivedStateFromProps,(z=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==W||H!==N)&&$p(i,d,l,N),hs=!1,H=i.memoizedState,d.state=H,Fo(i,l,d,h),Ho();var F=i.memoizedState;_!==W||H!==F||hs||t!==null&&t.dependencies!==null&&Iu(t.dependencies)?(typeof b=="function"&&(Pf(i,a,b,l),F=i.memoizedState),($=hs||Yp(i,a,$,l,H,F,N)||t!==null&&t.dependencies!==null&&Iu(t.dependencies))?(z||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,F,N),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,F,N)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&H===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&H===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=F),d.props=l,d.state=F,d.context=N,l=$):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&H===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&H===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,Yu(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=Sa(i,t.child,null,h),i.child=Sa(i,null,a,h)):Ht(t,i,a,h),i.memoizedState=d.state,t=i.child):t=Bi(t,i,h),t}function cy(t,i,a,l){return Vo(),i.flags|=256,Ht(t,i,a,l),i.child}var zf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bf(t){return{baseLanes:t,cachePool:Zg()}}function qf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=zn),t}function hy(t,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=t!==null&&t.memoizedState===null?!1:(Ot.current&2)!==0),_&&(h=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,t===null){if(Qe){if(h?gs(i):ps(),Qe){var b=ft,N;if(N=b){e:{for(N=b,b=ci;N.nodeType!==8;){if(!b){b=null;break e}if(N=$n(N.nextSibling),N===null){b=null;break e}}b=N}b!==null?(i.memoizedState={dehydrated:b,treeContext:br!==null?{id:Vi,overflow:Pi}:null,retryLane:536870912,hydrationErrors:null},N=bn(18,null,null,0),N.stateNode=b,N.return=i,i.child=N,cn=i,ft=null,N=!0):N=!1}N||wr(i)}if(b=i.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return wd(b)?i.lanes=32:i.lanes=536870912,null;zi(i)}return b=l.children,l=l.fallback,h?(ps(),h=i.mode,b=$u({mode:"hidden",children:b},h),l=Tr(l,h,a,null),b.return=i,l.return=i,b.sibling=l,i.child=b,h=i.child,h.memoizedState=Bf(a),h.childLanes=qf(t,_,a),i.memoizedState=zf,l):(gs(i),Hf(i,b))}if(N=t.memoizedState,N!==null&&(b=N.dehydrated,b!==null)){if(d)i.flags&256?(gs(i),i.flags&=-257,i=Ff(t,i,a)):i.memoizedState!==null?(ps(),i.child=t.child,i.flags|=128,i=null):(ps(),h=l.fallback,b=i.mode,l=$u({mode:"visible",children:l.children},b),h=Tr(h,b,a,null),h.flags|=2,l.return=i,h.return=i,l.sibling=h,i.child=l,Sa(i,t.child,null,a),l=i.child,l.memoizedState=Bf(a),l.childLanes=qf(t,_,a),i.memoizedState=zf,i=h);else if(gs(i),wd(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var z=_.dgst;_=z,l=Error(r(419)),l.stack="",l.digest=_,Po({value:l,source:null,stack:null}),i=Ff(t,i,a)}else if(Lt||Lo(t,i,a,!1),_=(a&t.childLanes)!==0,Lt||_){if(_=st,_!==null&&(l=a&-a,l=(l&42)!==0?1:is(l),l=(l&(_.suspendedLanes|a))!==0?0:l,l!==0&&l!==N.retryLane))throw N.retryLane=l,da(t,l),Cn(_,t,l),ny;b.data==="$?"||ld(),i=Ff(t,i,a)}else b.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=N.treeContext,ft=$n(b.nextSibling),cn=i,Qe=!0,Sr=null,ci=!1,t!==null&&(Ln[jn++]=Vi,Ln[jn++]=Pi,Ln[jn++]=br,Vi=t.id,Pi=t.overflow,br=i),i=Hf(i,l.children),i.flags|=4096);return i}return h?(ps(),h=l.fallback,b=i.mode,N=t.child,z=N.sibling,l=Mi(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,z!==null?h=Mi(z,h):(h=Tr(h,b,a,null),h.flags|=2),h.return=i,l.return=i,l.sibling=h,i.child=l,l=h,h=i.child,b=t.child.memoizedState,b===null?b=Bf(a):(N=b.cachePool,N!==null?(z=Dt._currentValue,N=N.parent!==z?{parent:z,pool:z}:N):N=Zg(),b={baseLanes:b.baseLanes|a,cachePool:N}),h.memoizedState=b,h.childLanes=qf(t,_,a),i.memoizedState=zf,l):(gs(i),a=t.child,t=a.sibling,a=Mi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(_=i.deletions,_===null?(i.deletions=[t],i.flags|=16):_.push(t)),i.child=a,i.memoizedState=null,a)}function Hf(t,i){return i=$u({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function $u(t,i){return t=bn(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Ff(t,i,a){return Sa(i,t.child,null,a),t=Hf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function fy(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),lf(t.return,i,a)}function Gf(t,i,a,l,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function dy(t,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;if(Ht(t,i,l.children,a),l=Ot.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fy(t,a,i);else if(t.tag===19)fy(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(oe(Ot,l),h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&Gu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),Gf(i,!1,h,a,d);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&Gu(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}Gf(i,!0,a,null,d);break;case"together":Gf(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Bi(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Ts|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Lo(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,a=Mi(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Mi(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function Qf(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&Iu(t)))}function wb(t,i,a){switch(i.tag){case 3:De(i,i.stateNode.containerInfo),cs(i,Dt,t.memoizedState.cache),Vo();break;case 27:case 5:Ct(i);break;case 4:De(i,i.stateNode.containerInfo);break;case 10:cs(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(gs(i),i.flags|=128,null):(a&i.child.childLanes)!==0?hy(t,i,a):(gs(i),t=Bi(t,i,a),t!==null?t.sibling:null);gs(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Lo(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return dy(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),oe(Ot,Ot.current),l)break;return null;case 22:case 23:return i.lanes=0,ay(t,i,a);case 24:cs(i,Dt,t.memoizedState.cache)}return Bi(t,i,a)}function my(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Lt=!0;else{if(!Qf(t,a)&&(i.flags&128)===0)return Lt=!1,wb(t,i,a);Lt=(t.flags&131072)!==0}else Lt=!1,Qe&&(i.flags&1048576)!==0&&Fg(i,Ru,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var l=i.elementType,h=l._init;if(l=h(l._payload),i.type=l,typeof l=="function")ef(l)?(t=Nr(l,t),i.tag=1,i=uy(null,i,l,t,a)):(i.tag=0,i=Uf(null,i,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===ue){i.tag=11,i=iy(null,i,l,t,a);break e}else if(h===D){i.tag=14,i=sy(null,i,l,t,a);break e}}throw i=pe(l)||l,Error(r(306,i,""))}}return i;case 0:return Uf(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=Nr(l,i.pendingProps),uy(t,i,l,h,a);case 3:e:{if(De(i,i.stateNode.containerInfo),t===null)throw Error(r(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,gf(t,i),Fo(i,l,null,a);var _=i.memoizedState;if(l=_.cache,cs(i,Dt,l),l!==d.cache&&uf(i,[Dt],a,!0),Ho(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=cy(t,i,l,a);break e}else if(l!==h){h=Vn(Error(r(424)),i),Po(h),i=cy(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ft=$n(t.firstChild),cn=i,Qe=!0,Sr=null,ci=!0,a=Qp(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Vo(),l===h){i=Bi(t,i,a);break e}Ht(t,i,l,a)}i=i.child}return i;case 26:return Yu(t,i),t===null?(a=vv(i.type,null,i.pendingProps,null))?i.memoizedState=a:Qe||(a=i.type,t=i.pendingProps,l=uc(he.current).createElement(a),l[Rt]=i,l[Tt]=t,Gt(l,a,t),gt(l),i.stateNode=l):i.memoizedState=vv(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Ct(i),t===null&&Qe&&(l=i.stateNode=gv(i.type,i.pendingProps,he.current),cn=i,ci=!0,h=ft,ws(i.type)?(xd=h,ft=$n(l.firstChild)):ft=h),Ht(t,i,i.pendingProps.children,a),Yu(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Qe&&((h=l=ft)&&(l=Wb(l,i.type,i.pendingProps,ci),l!==null?(i.stateNode=l,cn=i,ft=$n(l.firstChild),ci=!1,h=!0):h=!1),h||wr(i)),Ct(i),h=i.type,d=i.pendingProps,_=t!==null?t.memoizedProps:null,l=d.children,bd(h,d)?l=null:_!==null&&bd(h,_)&&(i.flags|=32),i.memoizedState!==null&&(h=Tf(t,i,yb,null,null,a),fl._currentValue=h),Yu(t,i),Ht(t,i,l,a),i.child;case 6:return t===null&&Qe&&((t=a=ft)&&(a=eA(a,i.pendingProps,ci),a!==null?(i.stateNode=a,cn=i,ft=null,t=!0):t=!1),t||wr(i)),null;case 13:return hy(t,i,a);case 4:return De(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=Sa(i,null,l,a):Ht(t,i,l,a),i.child;case 11:return iy(t,i,i.type,i.pendingProps,a);case 7:return Ht(t,i,i.pendingProps,a),i.child;case 8:return Ht(t,i,i.pendingProps.children,a),i.child;case 12:return Ht(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,cs(i,i.type,l.value),Ht(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,Cr(i),h=Zt(h),l=l(h),i.flags|=1,Ht(t,i,l,a),i.child;case 14:return sy(t,i,i.type,i.pendingProps,a);case 15:return ry(t,i,i.type,i.pendingProps,a);case 19:return dy(t,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},t===null?(a=$u(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=Mi(t.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return ay(t,i,a);case 24:return Cr(i),l=Zt(Dt),t===null?(h=ff(),h===null&&(h=st,d=cf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},mf(i),cs(i,Dt,h)):((t.lanes&a)!==0&&(gf(t,i),Fo(i,null,null,a),Ho()),h=t.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),cs(i,Dt,l)):(l=d.cache,cs(i,Dt,l),l!==h.cache&&uf(i,[Dt],a,!0))),Ht(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function qi(t){t.flags|=4}function gy(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Av(i)){if(i=Un.current,i!==null&&((qe&4194048)===qe?hi!==null:(qe&62914560)!==qe&&(qe&536870912)===0||i!==hi))throw Bo=df,Jg;t.flags|=8192}}function Xu(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?mo():536870912,t.lanes|=i,Ra|=i)}function Zo(t,i){if(!Qe)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ut(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function xb(t,i,a){var l=i.pendingProps;switch(rf(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(i),null;case 1:return ut(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),ji(Dt),at(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Mo(i)?qi(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Kg())),ut(i),null;case 26:return a=i.memoizedState,t===null?(qi(i),a!==null?(ut(i),gy(i,a)):(ut(i),i.flags&=-16777217)):a?a!==t.memoizedState?(qi(i),ut(i),gy(i,a)):(ut(i),i.flags&=-16777217):(t.memoizedProps!==l&&qi(i),ut(i),i.flags&=-16777217),null;case 27:Et(i),a=he.current;var h=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==l&&qi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return ut(i),null}t=de.current,Mo(i)?Gg(i):(t=gv(h,l,a),i.stateNode=t,qi(i))}return ut(i),null;case 5:if(Et(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&qi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return ut(i),null}if(t=de.current,Mo(i))Gg(i);else{switch(h=uc(he.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[Rt]=i,t[Tt]=l;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=t;e:switch(Gt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&qi(i)}}return ut(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&qi(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(t=he.current,Mo(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=cn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Rt]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||lv(t.nodeValue,a)),t||wr(i)}else t=uc(t).createTextNode(l),t[Rt]=i,i.stateNode=t}return ut(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Mo(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Rt]=i}else Vo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;ut(i),h=!1}else h=Kg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(zi(i),i):(zi(i),null)}if(zi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),Xu(i,i.updateQueue),ut(i),null;case 4:return at(),t===null&&yd(i.stateNode.containerInfo),ut(i),null;case 10:return ji(i.type),ut(i),null;case 19:if(fe(Ot),h=i.memoizedState,h===null)return ut(i),null;if(l=(i.flags&128)!==0,d=h.rendering,d===null)if(l)Zo(h,!1);else{if(dt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=Gu(t),d!==null){for(i.flags|=128,Zo(h,!1),t=d.updateQueue,i.updateQueue=t,Xu(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)Hg(a,t),a=a.sibling;return oe(Ot,Ot.current&1|2),i.child}t=t.sibling}h.tail!==null&&In()>Wu&&(i.flags|=128,l=!0,Zo(h,!1),i.lanes=4194304)}else{if(!l)if(t=Gu(d),t!==null){if(i.flags|=128,l=!0,t=t.updateQueue,i.updateQueue=t,Xu(i,t),Zo(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!Qe)return ut(i),null}else 2*In()-h.renderingStartTime>Wu&&a!==536870912&&(i.flags|=128,l=!0,Zo(h,!1),i.lanes=4194304);h.isBackwards?(d.sibling=i.child,i.child=d):(t=h.last,t!==null?t.sibling=d:i.child=d,h.last=d)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=In(),i.sibling=null,t=Ot.current,oe(Ot,l?t&1|2:t&1),i):(ut(i),null);case 22:case 23:return zi(i),_f(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(ut(i),i.subtreeFlags&6&&(i.flags|=8192)):ut(i),a=i.updateQueue,a!==null&&Xu(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&fe(Rr),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),ji(Dt),ut(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function Cb(t,i){switch(rf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return ji(Dt),at(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Et(i),null;case 13:if(zi(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Vo()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return fe(Ot),null;case 4:return at(),null;case 10:return ji(i.type),null;case 22:case 23:return zi(i),_f(),t!==null&&fe(Rr),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return ji(Dt),null;case 25:return null;default:return null}}function py(t,i){switch(rf(i),i.tag){case 3:ji(Dt),at();break;case 26:case 27:case 5:Et(i);break;case 4:at();break;case 13:zi(i);break;case 19:fe(Ot);break;case 10:ji(i.type);break;case 22:case 23:zi(i),_f(),t!==null&&fe(Rr);break;case 24:ji(Dt)}}function Jo(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==h)}}catch(b){nt(i,i.return,b)}}function ys(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var _=l.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,h=i;var N=a,z=b;try{z()}catch($){nt(h,N,$)}}}l=l.next}while(l!==d)}}catch($){nt(i,i.return,$)}}function yy(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{sp(i,a)}catch(l){nt(t,t.return,l)}}}function vy(t,i,a){a.props=Nr(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){nt(t,i,l)}}function Wo(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){nt(t,i,h)}}function fi(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){nt(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){nt(t,i,h)}else a.current=null}function _y(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){nt(t,t.return,h)}}function Kf(t,i,a){try{var l=t.stateNode;Yb(l,t.type,a,i),l[Tt]=i}catch(h){nt(t,t.return,h)}}function Ey(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ws(t.type)||t.tag===4}function Yf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ey(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ws(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $f(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=lc));else if(l!==4&&(l===27&&ws(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for($f(t,i,a),t=t.sibling;t!==null;)$f(t,i,a),t=t.sibling}function Zu(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&ws(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Zu(t,i,a),t=t.sibling;t!==null;)Zu(t,i,a),t=t.sibling}function Ty(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Gt(i,l,a),i[Rt]=t,i[Tt]=a}catch(d){nt(t,t.return,d)}}var Hi=!1,yt=!1,Xf=!1,by=typeof WeakSet=="function"?WeakSet:Set,jt=null;function Rb(t,i){if(t=t.containerInfo,Ed=gc,t=kg(t),Kh(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,b=-1,N=-1,z=0,$=0,W=t,H=null;t:for(;;){for(var F;W!==a||h!==0&&W.nodeType!==3||(b=_+h),W!==d||l!==0&&W.nodeType!==3||(N=_+l),W.nodeType===3&&(_+=W.nodeValue.length),(F=W.firstChild)!==null;)H=W,W=F;for(;;){if(W===t)break t;if(H===a&&++z===h&&(b=_),H===d&&++$===l&&(N=_),(F=W.nextSibling)!==null)break;W=H,H=W.parentNode}W=F}a=b===-1||N===-1?null:{start:b,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(Td={focusedElem:t,selectionRange:a},gc=!1,jt=i;jt!==null;)if(i=jt,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,jt=t;else for(;jt!==null;){switch(i=jt,d=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var we=Nr(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(we,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(be){nt(a,a.return,be)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Sd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Sd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=i.sibling,t!==null){t.return=i.return,jt=t;break}jt=i.return}}function Ay(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:vs(t,a),l&4&&Jo(5,a);break;case 1:if(vs(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(_){nt(a,a.return,_)}else{var h=Nr(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(_){nt(a,a.return,_)}}l&64&&yy(a),l&512&&Wo(a,a.return);break;case 3:if(vs(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{sp(t,i)}catch(_){nt(a,a.return,_)}}break;case 27:i===null&&l&4&&Ty(a);case 26:case 5:vs(t,a),i===null&&l&4&&_y(a),l&512&&Wo(a,a.return);break;case 12:vs(t,a);break;case 13:vs(t,a),l&4&&xy(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=Lb.bind(null,a),tA(t,a))));break;case 22:if(l=a.memoizedState!==null||Hi,!l){i=i!==null&&i.memoizedState!==null||yt,h=Hi;var d=yt;Hi=l,(yt=i)&&!d?_s(t,a,(a.subtreeFlags&8772)!==0):vs(t,a),Hi=h,yt=d}break;case 30:break;default:vs(t,a)}}function Sy(t){var i=t.alternate;i!==null&&(t.alternate=null,Sy(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&as(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var lt=null,dn=!1;function Fi(t,i,a){for(a=a.child;a!==null;)wy(t,i,a),a=a.sibling}function wy(t,i,a){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(ht,a)}catch{}switch(a.tag){case 26:yt||fi(a,i),Fi(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:yt||fi(a,i);var l=lt,h=dn;ws(a.type)&&(lt=a.stateNode,dn=!1),Fi(t,i,a),ll(a.stateNode),lt=l,dn=h;break;case 5:yt||fi(a,i);case 6:if(l=lt,h=dn,lt=null,Fi(t,i,a),lt=l,dn=h,lt!==null)if(dn)try{(lt.nodeType===9?lt.body:lt.nodeName==="HTML"?lt.ownerDocument.body:lt).removeChild(a.stateNode)}catch(d){nt(a,i,d)}else try{lt.removeChild(a.stateNode)}catch(d){nt(a,i,d)}break;case 18:lt!==null&&(dn?(t=lt,dv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),pl(t)):dv(lt,a.stateNode));break;case 4:l=lt,h=dn,lt=a.stateNode.containerInfo,dn=!0,Fi(t,i,a),lt=l,dn=h;break;case 0:case 11:case 14:case 15:yt||ys(2,a,i),yt||ys(4,a,i),Fi(t,i,a);break;case 1:yt||(fi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&vy(a,i,l)),Fi(t,i,a);break;case 21:Fi(t,i,a);break;case 22:yt=(l=yt)||a.memoizedState!==null,Fi(t,i,a),yt=l;break;default:Fi(t,i,a)}}function xy(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{pl(t)}catch(a){nt(i,i.return,a)}}function Ib(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new by),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new by),i;default:throw Error(r(435,t.tag))}}function Zf(t,i){var a=Ib(t);i.forEach(function(l){var h=jb.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function An(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,_=i,b=_;e:for(;b!==null;){switch(b.tag){case 27:if(ws(b.type)){lt=b.stateNode,dn=!1;break e}break;case 5:lt=b.stateNode,dn=!1;break e;case 3:case 4:lt=b.stateNode.containerInfo,dn=!0;break e}b=b.return}if(lt===null)throw Error(r(160));wy(d,_,h),lt=null,dn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)Cy(i,t),i=i.sibling}var Yn=null;function Cy(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:An(i,t),Sn(t),l&4&&(ys(3,t,t.return),Jo(3,t),ys(5,t,t.return));break;case 1:An(i,t),Sn(t),l&512&&(yt||a===null||fi(a,a.return)),l&64&&Hi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Yn;if(An(i,t),Sn(t),l&512&&(yt||a===null||fi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[rr]||d[Rt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),Gt(d,l,a),d[Rt]=t,gt(d),l=d;break e;case"link":var _=Tv("link","href",h).get(l+(a.href||""));if(_){for(var b=0;b<_.length;b++)if(d=_[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(b,1);break t}}d=h.createElement(l),Gt(d,l,a),h.head.appendChild(d);break;case"meta":if(_=Tv("meta","content",h).get(l+(a.content||""))){for(b=0;b<_.length;b++)if(d=_[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(b,1);break t}}d=h.createElement(l),Gt(d,l,a),h.head.appendChild(d);break;default:throw Error(r(468,l))}d[Rt]=t,gt(d),l=d}t.stateNode=l}else bv(h,t.type,t.stateNode);else t.stateNode=Ev(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?bv(h,t.type,t.stateNode):Ev(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Kf(t,t.memoizedProps,a.memoizedProps)}break;case 27:An(i,t),Sn(t),l&512&&(yt||a===null||fi(a,a.return)),a!==null&&l&4&&Kf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(An(i,t),Sn(t),l&512&&(yt||a===null||fi(a,a.return)),t.flags&32){h=t.stateNode;try{Dn(h,"")}catch(F){nt(t,t.return,F)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Kf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Xf=!0);break;case 6:if(An(i,t),Sn(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(F){nt(t,t.return,F)}}break;case 3:if(fc=null,h=Yn,Yn=cc(i.containerInfo),An(i,t),Yn=h,Sn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{pl(i.containerInfo)}catch(F){nt(t,t.return,F)}Xf&&(Xf=!1,Ry(t));break;case 4:l=Yn,Yn=cc(t.stateNode.containerInfo),An(i,t),Sn(t),Yn=l;break;case 12:An(i,t),Sn(t);break;case 13:An(i,t),Sn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(id=In()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Zf(t,l)));break;case 22:h=t.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,z=Hi,$=yt;if(Hi=z||h,yt=$||N,An(i,t),yt=$,Hi=z,Sn(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||N||Hi||yt||Dr(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){N=a=i;try{if(d=N.stateNode,h)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=N.stateNode;var W=N.memoizedProps.style,H=W!=null&&W.hasOwnProperty("display")?W.display:null;b.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(F){nt(N,N.return,F)}}}else if(i.tag===6){if(a===null){N=i;try{N.stateNode.nodeValue=h?"":N.memoizedProps}catch(F){nt(N,N.return,F)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Zf(t,a))));break;case 19:An(i,t),Sn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Zf(t,l)));break;case 30:break;case 21:break;default:An(i,t),Sn(t)}}function Sn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(Ey(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,d=Yf(t);Zu(t,d,h);break;case 5:var _=a.stateNode;a.flags&32&&(Dn(_,""),a.flags&=-33);var b=Yf(t);Zu(t,b,_);break;case 3:case 4:var N=a.stateNode.containerInfo,z=Yf(t);$f(t,z,N);break;default:throw Error(r(161))}}catch($){nt(t,t.return,$)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function Ry(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;Ry(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function vs(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Ay(t,i.alternate,i),i=i.sibling}function Dr(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:ys(4,i,i.return),Dr(i);break;case 1:fi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&vy(i,i.return,a),Dr(i);break;case 27:ll(i.stateNode);case 26:case 5:fi(i,i.return),Dr(i);break;case 22:i.memoizedState===null&&Dr(i);break;case 30:Dr(i);break;default:Dr(i)}t=t.sibling}}function _s(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:_s(h,d,a),Jo(4,d);break;case 1:if(_s(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(z){nt(l,l.return,z)}if(l=d,h=l.updateQueue,h!==null){var b=l.stateNode;try{var N=h.shared.hiddenCallbacks;if(N!==null)for(h.shared.hiddenCallbacks=null,h=0;h<N.length;h++)ip(N[h],b)}catch(z){nt(l,l.return,z)}}a&&_&64&&yy(d),Wo(d,d.return);break;case 27:Ty(d);case 26:case 5:_s(h,d,a),a&&l===null&&_&4&&_y(d),Wo(d,d.return);break;case 12:_s(h,d,a);break;case 13:_s(h,d,a),a&&_&4&&xy(h,d);break;case 22:d.memoizedState===null&&_s(h,d,a),Wo(d,d.return);break;case 30:break;default:_s(h,d,a)}i=i.sibling}}function Jf(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&jo(a))}function Wf(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&jo(t))}function di(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Iy(t,i,a,l),i=i.sibling}function Iy(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:di(t,i,a,l),h&2048&&Jo(9,i);break;case 1:di(t,i,a,l);break;case 3:di(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&jo(t)));break;case 12:if(h&2048){di(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,_=d.id,b=d.onPostCommit;typeof b=="function"&&b(_,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(N){nt(i,i.return,N)}}else di(t,i,a,l);break;case 13:di(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?di(t,i,a,l):el(t,i):d._visibility&2?di(t,i,a,l):(d._visibility|=2,wa(t,i,a,l,(i.subtreeFlags&10256)!==0)),h&2048&&Jf(_,i);break;case 24:di(t,i,a,l),h&2048&&Wf(i.alternate,i);break;default:di(t,i,a,l)}}function wa(t,i,a,l,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=t,_=i,b=a,N=l,z=_.flags;switch(_.tag){case 0:case 11:case 15:wa(d,_,b,N,h),Jo(8,_);break;case 23:break;case 22:var $=_.stateNode;_.memoizedState!==null?$._visibility&2?wa(d,_,b,N,h):el(d,_):($._visibility|=2,wa(d,_,b,N,h)),h&&z&2048&&Jf(_.alternate,_);break;case 24:wa(d,_,b,N,h),h&&z&2048&&Wf(_.alternate,_);break;default:wa(d,_,b,N,h)}i=i.sibling}}function el(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:el(a,l),h&2048&&Jf(l.alternate,l);break;case 24:el(a,l),h&2048&&Wf(l.alternate,l);break;default:el(a,l)}i=i.sibling}}var tl=8192;function xa(t){if(t.subtreeFlags&tl)for(t=t.child;t!==null;)Ny(t),t=t.sibling}function Ny(t){switch(t.tag){case 26:xa(t),t.flags&tl&&t.memoizedState!==null&&mA(Yn,t.memoizedState,t.memoizedProps);break;case 5:xa(t);break;case 3:case 4:var i=Yn;Yn=cc(t.stateNode.containerInfo),xa(t),Yn=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=tl,tl=16777216,xa(t),tl=i):xa(t));break;default:xa(t)}}function Dy(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function nl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];jt=l,ky(l,t)}Dy(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Oy(t),t=t.sibling}function Oy(t){switch(t.tag){case 0:case 11:case 15:nl(t),t.flags&2048&&ys(9,t,t.return);break;case 3:nl(t);break;case 12:nl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Ju(t)):nl(t);break;default:nl(t)}}function Ju(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];jt=l,ky(l,t)}Dy(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:ys(8,i,i.return),Ju(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Ju(i));break;default:Ju(i)}t=t.sibling}}function ky(t,i){for(;jt!==null;){var a=jt;switch(a.tag){case 0:case 11:case 15:ys(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:jo(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,jt=l;else e:for(a=t;jt!==null;){l=jt;var h=l.sibling,d=l.return;if(Sy(l),l===a){jt=null;break e}if(h!==null){h.return=d,jt=h;break e}jt=d}}}var Nb={getCacheForType:function(t){var i=Zt(Dt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},Db=typeof WeakMap=="function"?WeakMap:Map,Xe=0,st=null,Pe=null,qe=0,Ze=0,wn=null,Es=!1,Ca=!1,ed=!1,Gi=0,dt=0,Ts=0,Or=0,td=0,zn=0,Ra=0,il=null,mn=null,nd=!1,id=0,Wu=1/0,ec=null,bs=null,Ft=0,As=null,Ia=null,Na=0,sd=0,rd=null,My=null,sl=0,ad=null;function xn(){if((Xe&2)!==0&&qe!==0)return qe&-qe;if(q.T!==null){var t=ya;return t!==0?t:dd()}return ss()}function Vy(){zn===0&&(zn=(qe&536870912)===0||Qe?fo():536870912);var t=Un.current;return t!==null&&(t.flags|=32),zn}function Cn(t,i,a){(t===st&&(Ze===2||Ze===9)||t.cancelPendingCommit!==null)&&(Da(t,0),Ss(t,qe,zn,!1)),Ai(t,a),((Xe&2)===0||t!==st)&&(t===st&&((Xe&2)===0&&(Or|=a),dt===4&&Ss(t,qe,zn,!1)),mi(t))}function Py(t,i,a){if((Xe&6)!==0)throw Error(r(327));var l=!a&&(i&124)===0&&(i&t.expiredLanes)===0||sr(t,i),h=l?Mb(t,i):ud(t,i,!0),d=l;do{if(h===0){Ca&&!l&&Ss(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!Ob(a)){h=ud(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var b=t;h=il;var N=b.current.memoizedState.isDehydrated;if(N&&(Da(b,_).flags|=256),_=ud(b,_,!1),_!==2){if(ed&&!N){b.errorRecoveryDisabledLanes|=d,Or|=d,h=4;break e}d=mn,mn=h,d!==null&&(mn===null?mn=d:mn.push.apply(mn,d))}h=_}if(d=!1,h!==2)continue}}if(h===1){Da(t,0),Ss(t,i,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Ss(l,i,zn,!Es);break e;case 2:mn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(h=id+300-In(),10<h)){if(Ss(l,i,zn,!Es),Yr(l,0,!0)!==0)break e;l.timeoutHandle=hv(Ly.bind(null,l,a,mn,ec,nd,i,zn,Or,Ra,Es,d,2,-0,0),h);break e}Ly(l,a,mn,ec,nd,i,zn,Or,Ra,Es,d,0,-0,0)}}break}while(!0);mi(t)}function Ly(t,i,a,l,h,d,_,b,N,z,$,W,H,F){if(t.timeoutHandle=-1,W=i.subtreeFlags,(W&8192||(W&16785408)===16785408)&&(hl={stylesheets:null,count:0,unsuspend:dA},Ny(i),W=gA(),W!==null)){t.cancelPendingCommit=W(Fy.bind(null,t,i,d,a,l,h,_,b,N,$,1,H,F)),Ss(t,d,_,!z);return}Fy(t,i,d,a,l,h,_,b,N)}function Ob(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!Tn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ss(t,i,a,l){i&=~td,i&=~Or,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var d=31-Xt(h),_=1<<d;l[d]=-1,h&=~_}a!==0&&Wn(t,a,i)}function tc(){return(Xe&6)===0?(rl(0),!1):!0}function od(){if(Pe!==null){if(Ze===0)var t=Pe.return;else t=Pe,Li=xr=null,Sf(t),Aa=null,$o=0,t=Pe;for(;t!==null;)py(t.alternate,t),t=t.return;Pe=null}}function Da(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,Xb(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),od(),st=t,Pe=a=Mi(t.current,null),qe=i,Ze=0,wn=null,Es=!1,Ca=sr(t,i),ed=!1,Ra=zn=td=Or=Ts=dt=0,mn=il=null,nd=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-Xt(l),d=1<<h;i|=t[h],l&=~d}return Gi=i,Au(),a}function jy(t,i){ke=null,q.H=qu,i===zo||i===Ou?(i=tp(),Ze=3):i===Jg?(i=tp(),Ze=4):Ze=i===ny?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,wn=i,Pe===null&&(dt=1,Ku(t,Vn(i,t.current)))}function Uy(){var t=q.H;return q.H=qu,t===null?qu:t}function zy(){var t=q.A;return q.A=Nb,t}function ld(){dt=4,Es||(qe&4194048)!==qe&&Un.current!==null||(Ca=!0),(Ts&134217727)===0&&(Or&134217727)===0||st===null||Ss(st,qe,zn,!1)}function ud(t,i,a){var l=Xe;Xe|=2;var h=Uy(),d=zy();(st!==t||qe!==i)&&(ec=null,Da(t,i)),i=!1;var _=dt;e:do try{if(Ze!==0&&Pe!==null){var b=Pe,N=wn;switch(Ze){case 8:od(),_=6;break e;case 3:case 2:case 9:case 6:Un.current===null&&(i=!0);var z=Ze;if(Ze=0,wn=null,Oa(t,b,N,z),a&&Ca){_=0;break e}break;default:z=Ze,Ze=0,wn=null,Oa(t,b,N,z)}}kb(),_=dt;break}catch($){jy(t,$)}while(!0);return i&&t.shellSuspendCounter++,Li=xr=null,Xe=l,q.H=h,q.A=d,Pe===null&&(st=null,qe=0,Au()),_}function kb(){for(;Pe!==null;)By(Pe)}function Mb(t,i){var a=Xe;Xe|=2;var l=Uy(),h=zy();st!==t||qe!==i?(ec=null,Wu=In()+500,Da(t,i)):Ca=sr(t,i);e:do try{if(Ze!==0&&Pe!==null){i=Pe;var d=wn;t:switch(Ze){case 1:Ze=0,wn=null,Oa(t,i,d,1);break;case 2:case 9:if(Wg(d)){Ze=0,wn=null,qy(i);break}i=function(){Ze!==2&&Ze!==9||st!==t||(Ze=7),mi(t)},d.then(i,i);break e;case 3:Ze=7;break e;case 4:Ze=5;break e;case 7:Wg(d)?(Ze=0,wn=null,qy(i)):(Ze=0,wn=null,Oa(t,i,d,7));break;case 5:var _=null;switch(Pe.tag){case 26:_=Pe.memoizedState;case 5:case 27:var b=Pe;if(!_||Av(_)){Ze=0,wn=null;var N=b.sibling;if(N!==null)Pe=N;else{var z=b.return;z!==null?(Pe=z,nc(z)):Pe=null}break t}}Ze=0,wn=null,Oa(t,i,d,5);break;case 6:Ze=0,wn=null,Oa(t,i,d,6);break;case 8:od(),dt=6;break e;default:throw Error(r(462))}}Vb();break}catch($){jy(t,$)}while(!0);return Li=xr=null,q.H=l,q.A=h,Xe=a,Pe!==null?0:(st=null,qe=0,Au(),dt)}function Vb(){for(;Pe!==null&&!lo();)By(Pe)}function By(t){var i=my(t.alternate,t,Gi);t.memoizedProps=t.pendingProps,i===null?nc(t):Pe=i}function qy(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=ly(a,i,i.pendingProps,i.type,void 0,qe);break;case 11:i=ly(a,i,i.pendingProps,i.type.render,i.ref,qe);break;case 5:Sf(i);default:py(a,i),i=Pe=Hg(i,Gi),i=my(a,i,Gi)}t.memoizedProps=t.pendingProps,i===null?nc(t):Pe=i}function Oa(t,i,a,l){Li=xr=null,Sf(i),Aa=null,$o=0;var h=i.return;try{if(Sb(t,h,i,a,qe)){dt=1,Ku(t,Vn(a,t.current)),Pe=null;return}}catch(d){if(h!==null)throw Pe=h,d;dt=1,Ku(t,Vn(a,t.current)),Pe=null;return}i.flags&32768?(Qe||l===1?t=!0:Ca||(qe&536870912)!==0?t=!1:(Es=t=!0,(l===2||l===9||l===3||l===6)&&(l=Un.current,l!==null&&l.tag===13&&(l.flags|=16384))),Hy(i,t)):nc(i)}function nc(t){var i=t;do{if((i.flags&32768)!==0){Hy(i,Es);return}t=i.return;var a=xb(i.alternate,i,Gi);if(a!==null){Pe=a;return}if(i=i.sibling,i!==null){Pe=i;return}Pe=i=t}while(i!==null);dt===0&&(dt=5)}function Hy(t,i){do{var a=Cb(t.alternate,t);if(a!==null){a.flags&=32767,Pe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Pe=t;return}Pe=t=a}while(t!==null);dt=6,Pe=null}function Fy(t,i,a,l,h,d,_,b,N){t.cancelPendingCommit=null;do ic();while(Ft!==0);if((Xe&6)!==0)throw Error(r(327));if(i!==null){if(i===t.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=Jh,go(t,a,d,_,b,N),t===st&&(Pe=st=null,qe=0),Ia=i,As=t,Na=a,sd=d,rd=h,My=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Ub(er,function(){return $y(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=q.T,q.T=null,h=ie.p,ie.p=2,_=Xe,Xe|=4;try{Rb(t,i,a)}finally{Xe=_,ie.p=h,q.T=l}}Ft=1,Gy(),Qy(),Ky()}}function Gy(){if(Ft===1){Ft=0;var t=As,i=Ia,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=q.T,q.T=null;var l=ie.p;ie.p=2;var h=Xe;Xe|=4;try{Cy(i,t);var d=Td,_=kg(t.containerInfo),b=d.focusedElem,N=d.selectionRange;if(_!==b&&b&&b.ownerDocument&&Og(b.ownerDocument.documentElement,b)){if(N!==null&&Kh(b)){var z=N.start,$=N.end;if($===void 0&&($=z),"selectionStart"in b)b.selectionStart=z,b.selectionEnd=Math.min($,b.value.length);else{var W=b.ownerDocument||document,H=W&&W.defaultView||window;if(H.getSelection){var F=H.getSelection(),we=b.textContent.length,be=Math.min(N.start,we),tt=N.end===void 0?be:Math.min(N.end,we);!F.extend&&be>tt&&(_=tt,tt=be,be=_);var P=Dg(b,be),V=Dg(b,tt);if(P&&V&&(F.rangeCount!==1||F.anchorNode!==P.node||F.anchorOffset!==P.offset||F.focusNode!==V.node||F.focusOffset!==V.offset)){var j=W.createRange();j.setStart(P.node,P.offset),F.removeAllRanges(),be>tt?(F.addRange(j),F.extend(V.node,V.offset)):(j.setEnd(V.node,V.offset),F.addRange(j))}}}}for(W=[],F=b;F=F.parentNode;)F.nodeType===1&&W.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<W.length;b++){var X=W[b];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}gc=!!Ed,Td=Ed=null}finally{Xe=h,ie.p=l,q.T=a}}t.current=i,Ft=2}}function Qy(){if(Ft===2){Ft=0;var t=As,i=Ia,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=q.T,q.T=null;var l=ie.p;ie.p=2;var h=Xe;Xe|=4;try{Ay(t,i.alternate,i)}finally{Xe=h,ie.p=l,q.T=a}}Ft=3}}function Ky(){if(Ft===4||Ft===3){Ft=0,Jl();var t=As,i=Ia,a=Na,l=My;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ft=5:(Ft=0,Ia=As=null,Yy(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(bs=null),$r(a),i=i.stateNode,$e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(ht,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=q.T,h=ie.p,ie.p=2,q.T=null;try{for(var d=t.onRecoverableError,_=0;_<l.length;_++){var b=l[_];d(b.value,{componentStack:b.stack})}}finally{q.T=i,ie.p=h}}(Na&3)!==0&&ic(),mi(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===ad?sl++:(sl=0,ad=t):sl=0,rl(0)}}function Yy(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,jo(i)))}function ic(t){return Gy(),Qy(),Ky(),$y()}function $y(){if(Ft!==5)return!1;var t=As,i=sd;sd=0;var a=$r(Na),l=q.T,h=ie.p;try{ie.p=32>a?32:a,q.T=null,a=rd,rd=null;var d=As,_=Na;if(Ft=0,Ia=As=null,Na=0,(Xe&6)!==0)throw Error(r(331));var b=Xe;if(Xe|=4,Oy(d.current),Iy(d,d.current,_,a),Xe=b,rl(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(ht,d)}catch{}return!0}finally{ie.p=h,q.T=l,Yy(t,i)}}function Xy(t,i,a){i=Vn(a,i),i=jf(t.stateNode,i,2),t=ds(t,i,2),t!==null&&(Ai(t,2),mi(t))}function nt(t,i,a){if(t.tag===3)Xy(t,t,a);else for(;i!==null;){if(i.tag===3){Xy(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(bs===null||!bs.has(l))){t=Vn(a,t),a=ey(2),l=ds(i,a,2),l!==null&&(ty(a,l,i,t),Ai(l,2),mi(l));break}}i=i.return}}function cd(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new Db;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(ed=!0,h.add(a),t=Pb.bind(null,t,i,a),i.then(t,t))}function Pb(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,st===t&&(qe&a)===a&&(dt===4||dt===3&&(qe&62914560)===qe&&300>In()-id?(Xe&2)===0&&Da(t,0):td|=a,Ra===qe&&(Ra=0)),mi(t)}function Zy(t,i){i===0&&(i=mo()),t=da(t,i),t!==null&&(Ai(t,i),mi(t))}function Lb(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),Zy(t,a)}function jb(t,i){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),Zy(t,a)}function Ub(t,i){return Hn(t,i)}var sc=null,ka=null,hd=!1,rc=!1,fd=!1,kr=0;function mi(t){t!==ka&&t.next===null&&(ka===null?sc=ka=t:ka=ka.next=t),rc=!0,hd||(hd=!0,Bb())}function rl(t,i){if(!fd&&rc){fd=!0;do for(var a=!1,l=sc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var _=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-Xt(42|t)+1)-1,d&=h&~(_&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,tv(l,d))}else d=qe,d=Yr(l,l===st?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||sr(l,d)||(a=!0,tv(l,d));l=l.next}while(a);fd=!1}}function zb(){Jy()}function Jy(){rc=hd=!1;var t=0;kr!==0&&($b()&&(t=kr),kr=0);for(var i=In(),a=null,l=sc;l!==null;){var h=l.next,d=Wy(l,i);d===0?(l.next=null,a===null?sc=h:a.next=h,h===null&&(ka=a)):(a=l,(t!==0||(d&3)!==0)&&(rc=!0)),l=h}rl(t)}function Wy(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var _=31-Xt(d),b=1<<_,N=h[_];N===-1?((b&a)===0||(b&l)!==0)&&(h[_]=ho(b,i)):N<=i&&(t.expiredLanes|=b),d&=~b}if(i=st,a=qe,a=Yr(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(Ze===2||Ze===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Ws(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||sr(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&Ws(l),$r(a)){case 2:case 8:a=Qr;break;case 32:a=er;break;case 268435456:a=Kr;break;default:a=er}return l=ev.bind(null,t),a=Hn(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&Ws(l),t.callbackPriority=2,t.callbackNode=null,2}function ev(t,i){if(Ft!==0&&Ft!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(ic()&&t.callbackNode!==a)return null;var l=qe;return l=Yr(t,t===st?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Py(t,l,i),Wy(t,In()),t.callbackNode!=null&&t.callbackNode===a?ev.bind(null,t):null)}function tv(t,i){if(ic())return null;Py(t,i,!0)}function Bb(){Zb(function(){(Xe&6)!==0?Hn(uo,zb):Jy()})}function dd(){return kr===0&&(kr=fo()),kr}function nv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:ta(""+t)}function iv(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function qb(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=nv((h[Tt]||null).action),_=l.submitter;_&&(i=(i=_[Tt]||null)?nv(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var b=new na("action","action",null,l,h);t.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(kr!==0){var N=_?iv(h,_):new FormData(h);kf(a,{pending:!0,data:N,method:h.method,action:d},null,N)}}else typeof d=="function"&&(b.preventDefault(),N=_?iv(h,_):new FormData(h),kf(a,{pending:!0,data:N,method:h.method,action:d},d,N))},currentTarget:h}]})}}for(var md=0;md<Zh.length;md++){var gd=Zh[md],Hb=gd.toLowerCase(),Fb=gd[0].toUpperCase()+gd.slice(1);Kn(Hb,"on"+Fb)}Kn(Pg,"onAnimationEnd"),Kn(Lg,"onAnimationIteration"),Kn(jg,"onAnimationStart"),Kn("dblclick","onDoubleClick"),Kn("focusin","onFocus"),Kn("focusout","onBlur"),Kn(ob,"onTransitionRun"),Kn(lb,"onTransitionStart"),Kn(ub,"onTransitionCancel"),Kn(Ug,"onTransitionEnd"),wi("onMouseEnter",["mouseout","mouseover"]),wi("onMouseLeave",["mouseout","mouseover"]),wi("onPointerEnter",["pointerout","pointerover"]),wi("onPointerLeave",["pointerout","pointerover"]),Gn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Gn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Gn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Gn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Gn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Gn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(al));function sv(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var _=l.length-1;0<=_;_--){var b=l[_],N=b.instance,z=b.currentTarget;if(b=b.listener,N!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=z;try{d(h)}catch($){Qu($)}h.currentTarget=null,d=N}else for(_=0;_<l.length;_++){if(b=l[_],N=b.instance,z=b.currentTarget,b=b.listener,N!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=z;try{d(h)}catch($){Qu($)}h.currentTarget=null,d=N}}}}function Le(t,i){var a=i[yo];a===void 0&&(a=i[yo]=new Set);var l=t+"__bubble";a.has(l)||(rv(i,t,2,!1),a.add(l))}function pd(t,i,a){var l=0;i&&(l|=4),rv(a,t,l,i)}var ac="_reactListening"+Math.random().toString(36).slice(2);function yd(t){if(!t[ac]){t[ac]=!0,vo.forEach(function(a){a!=="selectionchange"&&(Gb.has(a)||pd(a,!1,t),pd(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[ac]||(i[ac]=!0,pd("selectionchange",!1,i))}}function rv(t,i,a,l){switch(Iv(i)){case 2:var h=vA;break;case 8:h=_A;break;default:h=Dd}a=h.bind(null,i,a,t),h=void 0,!kn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function vd(t,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var b=l.stateNode.containerInfo;if(b===h)break;if(_===4)for(_=l.return;_!==null;){var N=_.tag;if((N===3||N===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;b!==null;){if(_=Si(b),_===null)return;if(N=_.tag,N===5||N===6||N===26||N===27){l=d=_;continue e}b=b.parentNode}}l=l.return}lu(function(){var z=d,$=On(a),W=[];e:{var H=zg.get(t);if(H!==void 0){var F=na,we=t;switch(t){case"keypress":if(ri(a)===0)break e;case"keydown":case"keyup":F=la;break;case"focusin":we="focus",F=ra;break;case"focusout":we="blur",F=ra;break;case"beforeblur":case"afterblur":F=ra;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=Mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=Hh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=pu;break;case Pg:case Lg:case jg:F=aa;break;case Ug:F=vu;break;case"scroll":case"scrollend":F=uu;break;case"wheel":F=ua;break;case"copy":case"cut":case"paste":F=oa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=No;break;case"toggle":case"beforetoggle":F=Eu}var be=(i&4)!==0,tt=!be&&(t==="scroll"||t==="scrollend"),P=be?H!==null?H+"Capture":null:H;be=[];for(var V=z,j;V!==null;){var X=V;if(j=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||j===null||P===null||(X=fr(V,P),X!=null&&be.push(ol(V,X,j))),tt)break;V=V.return}0<be.length&&(H=new F(H,we,null,a,$),W.push({event:H,listeners:be}))}}if((i&7)===0){e:{if(H=t==="mouseover"||t==="pointerover",F=t==="mouseout"||t==="pointerout",H&&a!==Ri&&(we=a.relatedTarget||a.fromElement)&&(Si(we)||we[Nn]))break e;if((F||H)&&(H=$.window===$?$:(H=$.ownerDocument)?H.defaultView||H.parentWindow:window,F?(we=a.relatedTarget||a.toElement,F=z,we=we?Si(we):null,we!==null&&(tt=u(we),be=we.tag,we!==tt||be!==5&&be!==27&&be!==6)&&(we=null)):(F=null,we=z),F!==we)){if(be=Mn,X="onMouseLeave",P="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(be=No,X="onPointerLeave",P="onPointerEnter",V="pointer"),tt=F==null?H:ti(F),j=we==null?H:ti(we),H=new be(X,V+"leave",F,a,$),H.target=tt,H.relatedTarget=j,X=null,Si($)===z&&(be=new be(P,V+"enter",we,a,$),be.target=j,be.relatedTarget=tt,X=be),tt=X,F&&we)t:{for(be=F,P=we,V=0,j=be;j;j=Ma(j))V++;for(j=0,X=P;X;X=Ma(X))j++;for(;0<V-j;)be=Ma(be),V--;for(;0<j-V;)P=Ma(P),j--;for(;V--;){if(be===P||P!==null&&be===P.alternate)break t;be=Ma(be),P=Ma(P)}be=null}else be=null;F!==null&&av(W,H,F,be,!1),we!==null&&tt!==null&&av(W,tt,we,be,!0)}}e:{if(H=z?ti(z):window,F=H.nodeName&&H.nodeName.toLowerCase(),F==="select"||F==="input"&&H.type==="file")var ve=wg;else if(Nt(H))if(xg)ve=sb;else{ve=nb;var Ve=tb}else F=H.nodeName,!F||F.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?z&&Ao(z.elementType)&&(ve=wg):ve=ib;if(ve&&(ve=ve(t,z))){ki(W,ve,a,$);break e}Ve&&Ve(t,H,z),t==="focusout"&&z&&H.type==="number"&&z.memoizedProps.value!=null&&ls(H,"number",H.value)}switch(Ve=z?ti(z):window,t){case"focusin":(Nt(Ve)||Ve.contentEditable==="true")&&(ca=Ve,Yh=z,ko=null);break;case"focusout":ko=Yh=ca=null;break;case"mousedown":$h=!0;break;case"contextmenu":case"mouseup":case"dragend":$h=!1,Mg(W,a,$);break;case"selectionchange":if(ab)break;case"keydown":case"keyup":Mg(W,a,$)}var Ee;if(li)e:{switch(t){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else ze?Q(t,a)&&(Ae="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ae="onCompositionStart");Ae&&(v&&a.locale!=="ko"&&(ze||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&ze&&(Ee=wo()):(si=$,us="value"in si?si.value:si.textContent,ze=!0)),Ve=oc(z,Ae),0<Ve.length&&(Ae=new Ro(Ae,t,null,a,$),W.push({event:Ae,listeners:Ve}),Ee?Ae.data=Ee:(Ee=ce(a),Ee!==null&&(Ae.data=Ee)))),(Ee=m?It(t,a):Be(t,a))&&(Ae=oc(z,"onBeforeInput"),0<Ae.length&&(Ve=new Ro("onBeforeInput","beforeinput",null,a,$),W.push({event:Ve,listeners:Ae}),Ve.data=Ee)),qb(W,t,z,a,$)}sv(W,i)})}function ol(t,i,a){return{instance:t,listener:i,currentTarget:a}}function oc(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=fr(t,a),h!=null&&l.unshift(ol(t,h,d)),h=fr(t,i),h!=null&&l.push(ol(t,h,d))),t.tag===3)return l;t=t.return}return[]}function Ma(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function av(t,i,a,l,h){for(var d=i._reactName,_=[];a!==null&&a!==l;){var b=a,N=b.alternate,z=b.stateNode;if(b=b.tag,N!==null&&N===l)break;b!==5&&b!==26&&b!==27||z===null||(N=z,h?(z=fr(a,d),z!=null&&_.unshift(ol(a,z,N))):h||(z=fr(a,d),z!=null&&_.push(ol(a,z,N)))),a=a.return}_.length!==0&&t.push({event:i,listeners:_})}var Qb=/\r\n?/g,Kb=/\u0000|\uFFFD/g;function ov(t){return(typeof t=="string"?t:""+t).replace(Qb,`
`).replace(Kb,"")}function lv(t,i){return i=ov(i),ov(t)===i}function lc(){}function et(t,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||Dn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&Dn(t,""+l);break;case"className":ni(t,"class",l);break;case"tabIndex":ni(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ni(t,a,l);break;case"style":bo(t,l,d);break;case"data":if(i!=="object"){ni(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ta(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&et(t,i,"name",h.name,h,null),et(t,i,"formEncType",h.formEncType,h,null),et(t,i,"formMethod",h.formMethod,h,null),et(t,i,"formTarget",h.formTarget,h,null)):(et(t,i,"encType",h.encType,h,null),et(t,i,"method",h.method,h,null),et(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=ta(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=lc);break;case"onScroll":l!=null&&Le("scroll",t);break;case"onScrollEnd":l!=null&&Le("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=ta(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Le("beforetoggle",t),Le("toggle",t),os(t,"popover",l);break;case"xlinkActuate":Bt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Bt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Bt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Bt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Bt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Bt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Bt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Bt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Bt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":os(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Bh.get(a)||a,os(t,a,l))}}function _d(t,i,a,l,h,d){switch(a){case"style":bo(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Dn(t,l):(typeof l=="number"||typeof l=="bigint")&&Dn(t,""+l);break;case"onScroll":l!=null&&Le("scroll",t);break;case"onScrollEnd":l!=null&&Le("scrollend",t);break;case"onClick":l!=null&&(t.onclick=lc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xr.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[Tt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):os(t,a,l)}}}function Gt(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",t),Le("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:et(t,i,d,_,a,null)}}h&&et(t,i,"srcSet",a.srcSet,a,null),l&&et(t,i,"src",a.src,a,null);return;case"input":Le("invalid",t);var b=d=_=h=null,N=null,z=null;for(l in a)if(a.hasOwnProperty(l)){var $=a[l];if($!=null)switch(l){case"name":h=$;break;case"type":_=$;break;case"checked":N=$;break;case"defaultChecked":z=$;break;case"value":d=$;break;case"defaultValue":b=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,i));break;default:et(t,i,l,$,a,null)}}ur(t,d,b,N,z,_,h,!1),ea(t);return;case"select":Le("invalid",t),l=_=d=null;for(h in a)if(a.hasOwnProperty(h)&&(b=a[h],b!=null))switch(h){case"value":d=b;break;case"defaultValue":_=b;break;case"multiple":l=b;default:et(t,i,h,b,a,null)}i=d,a=_,t.multiple=!!l,i!=null?Ci(t,!!l,i,!1):a!=null&&Ci(t,!!l,a,!0);return;case"textarea":Le("invalid",t),d=h=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(b=a[_],b!=null))switch(_){case"value":l=b;break;case"defaultValue":h=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:et(t,i,_,b,a,null)}cr(t,l,h,d),ea(t);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(l=a[N],l!=null))switch(N){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:et(t,i,N,l,a,null)}return;case"dialog":Le("beforetoggle",t),Le("toggle",t),Le("cancel",t),Le("close",t);break;case"iframe":case"object":Le("load",t);break;case"video":case"audio":for(l=0;l<al.length;l++)Le(al[l],t);break;case"image":Le("error",t),Le("load",t);break;case"details":Le("toggle",t);break;case"embed":case"source":case"link":Le("error",t),Le("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(l=a[z],l!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:et(t,i,z,l,a,null)}return;default:if(Ao(i)){for($ in a)a.hasOwnProperty($)&&(l=a[$],l!==void 0&&_d(t,i,$,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&et(t,i,b,l,a,null))}function Yb(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,_=null,b=null,N=null,z=null,$=null;for(F in a){var W=a[F];if(a.hasOwnProperty(F)&&W!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":N=W;default:l.hasOwnProperty(F)||et(t,i,F,null,l,W)}}for(var H in l){var F=l[H];if(W=a[H],l.hasOwnProperty(H)&&(F!=null||W!=null))switch(H){case"type":d=F;break;case"name":h=F;break;case"checked":z=F;break;case"defaultChecked":$=F;break;case"value":_=F;break;case"defaultValue":b=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,i));break;default:F!==W&&et(t,i,H,F,l,W)}}En(t,_,b,N,z,$,d,h);return;case"select":F=_=b=H=null;for(d in a)if(N=a[d],a.hasOwnProperty(d)&&N!=null)switch(d){case"value":break;case"multiple":F=N;default:l.hasOwnProperty(d)||et(t,i,d,null,l,N)}for(h in l)if(d=l[h],N=a[h],l.hasOwnProperty(h)&&(d!=null||N!=null))switch(h){case"value":H=d;break;case"defaultValue":b=d;break;case"multiple":_=d;default:d!==N&&et(t,i,h,d,l,N)}i=b,a=_,l=F,H!=null?Ci(t,!!a,H,!1):!!l!=!!a&&(i!=null?Ci(t,!!a,i,!0):Ci(t,!!a,a?[]:"",!1));return;case"textarea":F=H=null;for(b in a)if(h=a[b],a.hasOwnProperty(b)&&h!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:et(t,i,b,null,l,h)}for(_ in l)if(h=l[_],d=a[_],l.hasOwnProperty(_)&&(h!=null||d!=null))switch(_){case"value":H=h;break;case"defaultValue":F=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==d&&et(t,i,_,h,l,d)}Je(t,H,F);return;case"option":for(var we in a)if(H=a[we],a.hasOwnProperty(we)&&H!=null&&!l.hasOwnProperty(we))switch(we){case"selected":t.selected=!1;break;default:et(t,i,we,null,l,H)}for(N in l)if(H=l[N],F=a[N],l.hasOwnProperty(N)&&H!==F&&(H!=null||F!=null))switch(N){case"selected":t.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:et(t,i,N,H,l,F)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in a)H=a[be],a.hasOwnProperty(be)&&H!=null&&!l.hasOwnProperty(be)&&et(t,i,be,null,l,H);for(z in l)if(H=l[z],F=a[z],l.hasOwnProperty(z)&&H!==F&&(H!=null||F!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,i));break;default:et(t,i,z,H,l,F)}return;default:if(Ao(i)){for(var tt in a)H=a[tt],a.hasOwnProperty(tt)&&H!==void 0&&!l.hasOwnProperty(tt)&&_d(t,i,tt,void 0,l,H);for($ in l)H=l[$],F=a[$],!l.hasOwnProperty($)||H===F||H===void 0&&F===void 0||_d(t,i,$,H,l,F);return}}for(var P in a)H=a[P],a.hasOwnProperty(P)&&H!=null&&!l.hasOwnProperty(P)&&et(t,i,P,null,l,H);for(W in l)H=l[W],F=a[W],!l.hasOwnProperty(W)||H===F||H==null&&F==null||et(t,i,W,H,l,F)}var Ed=null,Td=null;function uc(t){return t.nodeType===9?t:t.ownerDocument}function uv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cv(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function bd(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ad=null;function $b(){var t=window.event;return t&&t.type==="popstate"?t===Ad?!1:(Ad=t,!0):(Ad=null,!1)}var hv=typeof setTimeout=="function"?setTimeout:void 0,Xb=typeof clearTimeout=="function"?clearTimeout:void 0,fv=typeof Promise=="function"?Promise:void 0,Zb=typeof queueMicrotask=="function"?queueMicrotask:typeof fv<"u"?function(t){return fv.resolve(null).then(t).catch(Jb)}:hv;function Jb(t){setTimeout(function(){throw t})}function ws(t){return t==="head"}function dv(t,i){var a=i,l=0,h=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var _=t.ownerDocument;if(a&1&&ll(_.documentElement),a&2&&ll(_.body),a&4)for(a=_.head,ll(a),_=a.firstChild;_;){var b=_.nextSibling,N=_.nodeName;_[rr]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=b}}if(h===0){t.removeChild(d),pl(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);pl(i)}function Sd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Sd(a),as(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function Wb(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[rr])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=$n(t.nextSibling),t===null)break}return null}function eA(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=$n(t.nextSibling),t===null))return null;return t}function wd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function tA(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function $n(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var xd=null;function mv(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function gv(t,i,a){switch(i=uc(a),t){case"html":if(t=i.documentElement,!t)throw Error(r(452));return t;case"head":if(t=i.head,!t)throw Error(r(453));return t;case"body":if(t=i.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function ll(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);as(t)}var Bn=new Map,pv=new Set;function cc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Qi=ie.d;ie.d={f:nA,r:iA,D:sA,C:rA,L:aA,m:oA,X:uA,S:lA,M:cA};function nA(){var t=Qi.f(),i=tc();return t||i}function iA(t){var i=ei(t);i!==null&&i.tag===5&&i.type==="form"?Pp(i):Qi.r(t)}var Va=typeof document>"u"?null:document;function yv(t,i,a){var l=Va;if(l&&typeof i=="string"&&i){var h=bt(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),pv.has(h)||(pv.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),Gt(i,"link",t),gt(i),l.head.appendChild(i)))}}function sA(t){Qi.D(t),yv("dns-prefetch",t,null)}function rA(t,i){Qi.C(t,i),yv("preconnect",t,i)}function aA(t,i,a){Qi.L(t,i,a);var l=Va;if(l&&t&&i){var h='link[rel="preload"][as="'+bt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+bt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+bt(a.imageSizes)+'"]')):h+='[href="'+bt(t)+'"]';var d=h;switch(i){case"style":d=Pa(t);break;case"script":d=La(t)}Bn.has(d)||(t=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Bn.set(d,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(ul(d))||i==="script"&&l.querySelector(cl(d))||(i=l.createElement("link"),Gt(i,"link",t),gt(i),l.head.appendChild(i)))}}function oA(t,i){Qi.m(t,i);var a=Va;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+bt(l)+'"][href="'+bt(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=La(t)}if(!Bn.has(d)&&(t=T({rel:"modulepreload",href:t},i),Bn.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(cl(d)))return}l=a.createElement("link"),Gt(l,"link",t),gt(l),a.head.appendChild(l)}}}function lA(t,i,a){Qi.S(t,i,a);var l=Va;if(l&&t){var h=on(l).hoistableStyles,d=Pa(t);i=i||"default";var _=h.get(d);if(!_){var b={loading:0,preload:null};if(_=l.querySelector(ul(d)))b.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Bn.get(d))&&Cd(t,a);var N=_=l.createElement("link");gt(N),Gt(N,"link",t),N._p=new Promise(function(z,$){N.onload=z,N.onerror=$}),N.addEventListener("load",function(){b.loading|=1}),N.addEventListener("error",function(){b.loading|=2}),b.loading|=4,hc(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:b},h.set(d,_)}}}function uA(t,i){Qi.X(t,i);var a=Va;if(a&&t){var l=on(a).hoistableScripts,h=La(t),d=l.get(h);d||(d=a.querySelector(cl(h)),d||(t=T({src:t,async:!0},i),(i=Bn.get(h))&&Rd(t,i),d=a.createElement("script"),gt(d),Gt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function cA(t,i){Qi.M(t,i);var a=Va;if(a&&t){var l=on(a).hoistableScripts,h=La(t),d=l.get(h);d||(d=a.querySelector(cl(h)),d||(t=T({src:t,async:!0,type:"module"},i),(i=Bn.get(h))&&Rd(t,i),d=a.createElement("script"),gt(d),Gt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function vv(t,i,a,l){var h=(h=he.current)?cc(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=Pa(a.href),a=on(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Pa(a.href);var d=on(h).hoistableStyles,_=d.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,_),(d=h.querySelector(ul(t)))&&!d._p&&(_.instance=d,_.state.loading=5),Bn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Bn.set(t,a),d||hA(h,t,a,_.state))),i&&l===null)throw Error(r(528,""));return _}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=La(a),a=on(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Pa(t){return'href="'+bt(t)+'"'}function ul(t){return'link[rel="stylesheet"]['+t+"]"}function _v(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function hA(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Gt(i,"link",a),gt(i),t.head.appendChild(i))}function La(t){return'[src="'+bt(t)+'"]'}function cl(t){return"script[async]"+t}function Ev(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+bt(a.href)+'"]');if(l)return i.instance=l,gt(l),l;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),gt(l),Gt(l,"style",h),hc(l,a.precedence,t),i.instance=l;case"stylesheet":h=Pa(a.href);var d=t.querySelector(ul(h));if(d)return i.state.loading|=4,i.instance=d,gt(d),d;l=_v(a),(h=Bn.get(h))&&Cd(l,h),d=(t.ownerDocument||t).createElement("link"),gt(d);var _=d;return _._p=new Promise(function(b,N){_.onload=b,_.onerror=N}),Gt(d,"link",l),i.state.loading|=4,hc(d,a.precedence,t),i.instance=d;case"script":return d=La(a.src),(h=t.querySelector(cl(d)))?(i.instance=h,gt(h),h):(l=a,(h=Bn.get(d))&&(l=T({},a),Rd(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),gt(h),Gt(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,hc(l,a.precedence,t));return i.instance}function hc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,_=0;_<l.length;_++){var b=l[_];if(b.dataset.precedence===i)d=b;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function Cd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function Rd(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var fc=null;function Tv(t,i,a){if(fc===null){var l=new Map,h=fc=new Map;h.set(a,l)}else h=fc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[rr]||d[Rt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=t+_;var b=l.get(_);b?b.push(d):l.set(_,[d])}}return l}function bv(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function fA(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Av(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var hl=null;function dA(){}function mA(t,i,a){if(hl===null)throw Error(r(475));var l=hl;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=Pa(a.href),d=t.querySelector(ul(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=dc.bind(l),t.then(l,l)),i.state.loading|=4,i.instance=d,gt(d);return}d=t.ownerDocument||t,a=_v(a),(h=Bn.get(h))&&Cd(a,h),d=d.createElement("link"),gt(d);var _=d;_._p=new Promise(function(b,N){_.onload=b,_.onerror=N}),Gt(d,"link",a),i.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=dc.bind(l),t.addEventListener("load",i),t.addEventListener("error",i))}}function gA(){if(hl===null)throw Error(r(475));var t=hl;return t.stylesheets&&t.count===0&&Id(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&Id(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function dc(){if(this.count--,this.count===0){if(this.stylesheets)Id(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var mc=null;function Id(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,mc=new Map,i.forEach(pA,t),mc=null,dc.call(t))}function pA(t,i){if(!(i.state.loading&4)){var a=mc.get(t);if(a)var l=a.get(null);else{a=new Map,mc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var _=h[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}h=i.instance,_=h.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,h),a.set(_,h),this.count++,l=dc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var fl={$$typeof:K,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function yA(t,i,a,l,h,d,_,b){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bi(0),this.hiddenUpdates=bi(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function Sv(t,i,a,l,h,d,_,b,N,z,$,W){return t=new yA(t,i,a,_,b,N,z,W),i=1,d===!0&&(i|=24),d=bn(3,null,null,i),t.current=d,d.stateNode=t,i=cf(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},mf(d),t}function wv(t){return t?(t=ma,t):ma}function xv(t,i,a,l,h,d){h=wv(h),l.context===null?l.context=h:l.pendingContext=h,l=fs(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=ds(t,l,i),a!==null&&(Cn(a,t,i),qo(a,t,i))}function Cv(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function Nd(t,i){Cv(t,i),(t=t.alternate)&&Cv(t,i)}function Rv(t){if(t.tag===13){var i=da(t,67108864);i!==null&&Cn(i,t,67108864),Nd(t,67108864)}}var gc=!0;function vA(t,i,a,l){var h=q.T;q.T=null;var d=ie.p;try{ie.p=2,Dd(t,i,a,l)}finally{ie.p=d,q.T=h}}function _A(t,i,a,l){var h=q.T;q.T=null;var d=ie.p;try{ie.p=8,Dd(t,i,a,l)}finally{ie.p=d,q.T=h}}function Dd(t,i,a,l){if(gc){var h=Od(l);if(h===null)vd(t,i,l,pc,a),Nv(t,l);else if(TA(h,t,i,a,l))l.stopPropagation();else if(Nv(t,l),i&4&&-1<EA.indexOf(t)){for(;h!==null;){var d=ei(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=Fn(d.pendingLanes);if(_!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var N=1<<31-Xt(_);b.entanglements[1]|=N,_&=~N}mi(d),(Xe&6)===0&&(Wu=In()+500,rl(0))}}break;case 13:b=da(d,2),b!==null&&Cn(b,d,2),tc(),Nd(d,2)}if(d=Od(l),d===null&&vd(t,i,l,pc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else vd(t,i,l,null,a)}}function Od(t){return t=On(t),kd(t)}var pc=null;function kd(t){if(pc=null,t=Si(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return pc=t,null}function Iv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Vh()){case uo:return 2;case Qr:return 8;case er:case Ph:return 32;case Kr:return 268435456;default:return 32}default:return 32}}var Md=!1,xs=null,Cs=null,Rs=null,dl=new Map,ml=new Map,Is=[],EA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Nv(t,i){switch(t){case"focusin":case"focusout":xs=null;break;case"dragenter":case"dragleave":Cs=null;break;case"mouseover":case"mouseout":Rs=null;break;case"pointerover":case"pointerout":dl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":ml.delete(i.pointerId)}}function gl(t,i,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=ei(i),i!==null&&Rv(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function TA(t,i,a,l,h){switch(i){case"focusin":return xs=gl(xs,t,i,a,l,h),!0;case"dragenter":return Cs=gl(Cs,t,i,a,l,h),!0;case"mouseover":return Rs=gl(Rs,t,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return dl.set(d,gl(dl.get(d)||null,t,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,ml.set(d,gl(ml.get(d)||null,t,i,a,l,h)),!0}return!1}function Dv(t){var i=Si(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,tu(t.priority,function(){if(a.tag===13){var l=xn();l=is(l);var h=da(a,l);h!==null&&Cn(h,a,l),Nd(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=Od(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Ri=l,a.target.dispatchEvent(l),Ri=null}else return i=ei(a),i!==null&&Rv(i),t.blockedOn=a,!1;i.shift()}return!0}function Ov(t,i,a){yc(t)&&a.delete(i)}function bA(){Md=!1,xs!==null&&yc(xs)&&(xs=null),Cs!==null&&yc(Cs)&&(Cs=null),Rs!==null&&yc(Rs)&&(Rs=null),dl.forEach(Ov),ml.forEach(Ov)}function vc(t,i){t.blockedOn===i&&(t.blockedOn=null,Md||(Md=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,bA)))}var _c=null;function kv(t){_c!==t&&(_c=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){_c===t&&(_c=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(kd(l||a)===null)continue;break}var d=ei(a);d!==null&&(t.splice(i,3),i-=3,kf(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function pl(t){function i(N){return vc(N,t)}xs!==null&&vc(xs,t),Cs!==null&&vc(Cs,t),Rs!==null&&vc(Rs,t),dl.forEach(i),ml.forEach(i);for(var a=0;a<Is.length;a++){var l=Is[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Is.length&&(a=Is[0],a.blockedOn===null);)Dv(a),a.blockedOn===null&&Is.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],_=h[Tt]||null;if(typeof d=="function")_||kv(a);else if(_){var b=null;if(d&&d.hasAttribute("formAction")){if(h=d,_=d[Tt]||null)b=_.formAction;else if(kd(h)!==null)continue}else b=_.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),kv(a)}}}function Vd(t){this._internalRoot=t}Ec.prototype.render=Vd.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=xn();xv(a,l,t,i,null,null)},Ec.prototype.unmount=Vd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;xv(t.current,2,null,t,null,null),tc(),i[Nn]=null}};function Ec(t){this._internalRoot=t}Ec.prototype.unstable_scheduleHydration=function(t){if(t){var i=ss();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Is.length&&i!==0&&i<Is[a].priority;a++);Is.splice(a,0,t),a===0&&Dv(t)}};var Mv=e.version;if(Mv!=="19.1.0")throw Error(r(527,Mv,"19.1.0"));ie.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=p(i),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var AA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tc.isDisabled&&Tc.supportsFiber)try{ht=Tc.inject(AA),$e=Tc}catch{}}return vl.createRoot=function(t,i){if(!o(t))throw Error(r(299));var a=!1,l="",h=Xp,d=Zp,_=Jp,b=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(b=i.unstable_transitionCallbacks)),i=Sv(t,1,!1,null,null,a,l,h,d,_,b,null),t[Nn]=i.current,yd(t),new Vd(i)},vl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(r(299));var l=!1,h="",d=Xp,_=Zp,b=Jp,N=null,z=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(N=a.unstable_transitionCallbacks),a.formState!==void 0&&(z=a.formState)),i=Sv(t,1,!0,i,a??null,l,h,d,_,b,N,z),i.context=wv(null),a=i.current,l=xn(),l=is(l),h=fs(l),h.callback=null,ds(a,h,l),a=l,i.current.lanes=a,Ai(i,a),mi(i),t[Nn]=i.current,yd(t),new Ec(i)},vl.version="19.1.0",vl}var Fv;function kA(){if(Fv)return jd.exports;Fv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),jd.exports=OA(),jd.exports}var MA=kA();const VA=()=>{};var Gv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0=function(s){const e=[];let n=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},PA=function(s){const e=[];let n=0,r=0;for(;n<s.length;){const o=s[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];e[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],f=s[n++],g=s[n++],p=((o&7)<<18|(u&63)<<12|(f&63)<<6|g&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const u=s[n++],f=s[n++];e[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},x0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],f=o+1<s.length,g=f?s[o+1]:0,p=o+2<s.length,y=p?s[o+2]:0,T=u>>2,x=(u&3)<<4|g>>4;let C=(g&15)<<2|y>>6,B=y&63;p||(B=64,f||(C=64)),r.push(n[T],n[x],n[C],n[B])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(w0(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):PA(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],g=o<s.length?n[s.charAt(o)]:0;++o;const y=o<s.length?n[s.charAt(o)]:64;++o;const x=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||g==null||y==null||x==null)throw new LA;const C=u<<2|g>>4;if(r.push(C),y!==64){const B=g<<4&240|y>>2;if(r.push(B),x!==64){const G=y<<6&192|x;r.push(G)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class LA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jA=function(s){const e=w0(s);return x0.encodeByteArray(e,!0)},zc=function(s){return jA(s).replace(/\./g,"")},C0=function(s){try{return x0.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=()=>UA().__FIREBASE_DEFAULTS__,BA=()=>{if(typeof process>"u"||typeof Gv>"u")return;const s=Gv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},qA=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&C0(s[1]);return e&&JSON.parse(e)},uh=()=>{try{return VA()||zA()||BA()||qA()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},R0=s=>{var e,n;return(n=(e=uh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[s]},HA=s=>{const e=R0(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},I0=()=>{var s;return(s=uh())===null||s===void 0?void 0:s.config},N0=s=>{var e;return(e=uh())===null||e===void 0?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ul(s){return s.endsWith(".cloudworkstations.dev")}async function D0(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},s);return[zc(JSON.stringify(n)),zc(JSON.stringify(f)),""].join(".")}const Al={};function QA(){const s={prod:[],emulator:[]};for(const e of Object.keys(Al))Al[e]?s.emulator.push(e):s.prod.push(e);return s}function KA(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let Qv=!1;function O0(s,e){if(typeof window>"u"||typeof document>"u"||!Ul(window.location.host)||Al[s]===e||Al[s]||Qv)return;Al[s]=e;function n(C){return`__firebase__banner__${C}`}const r="__firebase__banner",u=QA().prod.length>0;function f(){const C=document.getElementById(r);C&&C.remove()}function g(C){C.style.display="flex",C.style.background="#7faaf0",C.style.position="fixed",C.style.bottom="5px",C.style.left="5px",C.style.padding=".5em",C.style.borderRadius="5px",C.style.alignItems="center"}function p(C,B){C.setAttribute("width","24"),C.setAttribute("id",B),C.setAttribute("height","24"),C.setAttribute("viewBox","0 0 24 24"),C.setAttribute("fill","none"),C.style.marginLeft="-6px"}function y(){const C=document.createElement("span");return C.style.cursor="pointer",C.style.marginLeft="16px",C.style.fontSize="24px",C.innerHTML=" &times;",C.onclick=()=>{Qv=!0,f()},C}function T(C,B){C.setAttribute("id",B),C.innerText="Learn more",C.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",C.setAttribute("target","__blank"),C.style.paddingLeft="5px",C.style.textDecoration="underline"}function x(){const C=KA(r),B=n("text"),G=document.getElementById(B)||document.createElement("span"),Z=n("learnmore"),U=document.getElementById(Z)||document.createElement("a"),Y=n("preprendIcon"),ne=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(C.created){const K=C.element;g(K),T(U,Z);const ue=y();p(ne,Y),K.append(ne,G,U,ue),document.body.appendChild(K)}u?(G.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,G.innerText="Preview backend running in this workspace."),G.setAttribute("id",B)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rn())}function $A(){var s;const e=(s=uh())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZA(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function JA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function WA(){const s=rn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function e1(){return!$A()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function t1(){try{return typeof indexedDB=="object"}catch{return!1}}function n1(){return new Promise((s,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1="FirebaseError";class ns extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=i1,Object.setPrototypeOf(this,ns.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zl.prototype.create)}}class zl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?s1(u,r):"Error",g=`${this.serviceName}: ${f} (${o}).`;return new ns(o,g,r)}}function s1(s,e){return s.replace(r1,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const r1=/\{\$([^}]+)}/g;function a1(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Pr(s,e){if(s===e)return!0;const n=Object.keys(s),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const u=s[o],f=e[o];if(Kv(u)&&Kv(f)){if(!Pr(u,f))return!1}else if(u!==f)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function Kv(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(s){const e=[];for(const[n,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function o1(s,e){const n=new l1(s,e);return n.subscribe.bind(n)}class l1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");u1(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=qd),o.error===void 0&&(o.error=qd),o.complete===void 0&&(o.complete=qd);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function u1(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function qd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(s){return s&&s._delegate?s._delegate:s}class Lr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new FA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(f1(e))try{this.getOrInitializeService({instanceIdentifier:Mr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(e=Mr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Mr){return this.instances.has(e)}getOptions(e=Mr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[u,f]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(u);r===g&&f.resolve(o)}return o}onInit(e,n){var r;const o=this.normalizeInstanceIdentifier(n),u=(r=this.onInitCallbacks.get(o))!==null&&r!==void 0?r:new Set;u.add(e),this.onInitCallbacks.set(o,u);const f=this.instances.get(o);return f&&e(f,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:h1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Mr){return this.component?this.component.multipleInstances?e:Mr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function h1(s){return s===Mr?void 0:s}function f1(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new c1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(je||(je={}));const m1={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},g1=je.INFO,p1={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},y1=(s,e,...n)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=p1[e];if(o)console[o](`[${r}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cm{constructor(e){this.name=e,this._logLevel=g1,this._logHandler=y1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?m1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const v1=(s,e)=>e.some(n=>s instanceof n);let Yv,$v;function _1(){return Yv||(Yv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function E1(){return $v||($v=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const k0=new WeakMap,Wd=new WeakMap,M0=new WeakMap,Hd=new WeakMap,Rm=new WeakMap;function T1(s){const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",f)},u=()=>{n(js(s.result)),o()},f=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&k0.set(n,s)}).catch(()=>{}),Rm.set(e,s),e}function b1(s){if(Wd.has(s))return;const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",f),s.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",f),s.addEventListener("abort",f)});Wd.set(s,e)}let em={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Wd.get(s);if(e==="objectStoreNames")return s.objectStoreNames||M0.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return js(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function A1(s){em=s(em)}function S1(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=s.call(Fd(this),e,...n);return M0.set(r,e.sort?e.sort():[e]),js(r)}:E1().includes(s)?function(...e){return s.apply(Fd(this),e),js(k0.get(this))}:function(...e){return js(s.apply(Fd(this),e))}}function w1(s){return typeof s=="function"?S1(s):(s instanceof IDBTransaction&&b1(s),v1(s,_1())?new Proxy(s,em):s)}function js(s){if(s instanceof IDBRequest)return T1(s);if(Hd.has(s))return Hd.get(s);const e=w1(s);return e!==s&&(Hd.set(s,e),Rm.set(e,s)),e}const Fd=s=>Rm.get(s);function x1(s,e,{blocked:n,upgrade:r,blocking:o,terminated:u}={}){const f=indexedDB.open(s,e),g=js(f);return r&&f.addEventListener("upgradeneeded",p=>{r(js(f.result),p.oldVersion,p.newVersion,js(f.transaction),p)}),n&&f.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),g.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),g}const C1=["get","getKey","getAll","getAllKeys","count"],R1=["put","add","delete","clear"],Gd=new Map;function Xv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Gd.get(e))return Gd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=R1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||C1.includes(n)))return;const u=async function(f,...g){const p=this.transaction(f,o?"readwrite":"readonly");let y=p.store;return r&&(y=y.index(g.shift())),(await Promise.all([y[n](...g),o&&p.done]))[0]};return Gd.set(e,u),u}A1(s=>({...s,get:(e,n,r)=>Xv(e,n)||s.get(e,n,r),has:(e,n)=>!!Xv(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(N1(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function N1(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const tm="@firebase/app",Zv="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi=new Cm("@firebase/app"),D1="@firebase/app-compat",O1="@firebase/analytics-compat",k1="@firebase/analytics",M1="@firebase/app-check-compat",V1="@firebase/app-check",P1="@firebase/auth",L1="@firebase/auth-compat",j1="@firebase/database",U1="@firebase/data-connect",z1="@firebase/database-compat",B1="@firebase/functions",q1="@firebase/functions-compat",H1="@firebase/installations",F1="@firebase/installations-compat",G1="@firebase/messaging",Q1="@firebase/messaging-compat",K1="@firebase/performance",Y1="@firebase/performance-compat",$1="@firebase/remote-config",X1="@firebase/remote-config-compat",Z1="@firebase/storage",J1="@firebase/storage-compat",W1="@firebase/firestore",eS="@firebase/ai",tS="@firebase/firestore-compat",nS="firebase",iS="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="[DEFAULT]",sS={[tm]:"fire-core",[D1]:"fire-core-compat",[k1]:"fire-analytics",[O1]:"fire-analytics-compat",[V1]:"fire-app-check",[M1]:"fire-app-check-compat",[P1]:"fire-auth",[L1]:"fire-auth-compat",[j1]:"fire-rtdb",[U1]:"fire-data-connect",[z1]:"fire-rtdb-compat",[B1]:"fire-fn",[q1]:"fire-fn-compat",[H1]:"fire-iid",[F1]:"fire-iid-compat",[G1]:"fire-fcm",[Q1]:"fire-fcm-compat",[K1]:"fire-perf",[Y1]:"fire-perf-compat",[$1]:"fire-rc",[X1]:"fire-rc-compat",[Z1]:"fire-gcs",[J1]:"fire-gcs-compat",[W1]:"fire-fst",[tS]:"fire-fst-compat",[eS]:"fire-vertex","fire-js":"fire-js",[nS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc=new Map,rS=new Map,im=new Map;function Jv(s,e){try{s.container.addComponent(e)}catch(n){Xi.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function Ya(s){const e=s.name;if(im.has(e))return Xi.debug(`There were multiple attempts to register component ${e}.`),!1;im.set(e,s);for(const n of Bc.values())Jv(n,s);for(const n of rS.values())Jv(n,s);return!0}function Im(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function Xn(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Us=new zl("app","Firebase",aS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Lr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Us.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=iS;function V0(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const r=Object.assign({name:nm,automaticDataCollectionEnabled:!0},e),o=r.name;if(typeof o!="string"||!o)throw Us.create("bad-app-name",{appName:String(o)});if(n||(n=I0()),!n)throw Us.create("no-options");const u=Bc.get(o);if(u){if(Pr(n,u.options)&&Pr(r,u.config))return u;throw Us.create("duplicate-app",{appName:o})}const f=new d1(o);for(const p of im.values())f.addComponent(p);const g=new oS(n,r,f);return Bc.set(o,g),g}function P0(s=nm){const e=Bc.get(s);if(!e&&s===nm&&I0())return V0();if(!e)throw Us.create("no-app",{appName:s});return e}function zs(s,e,n){var r;let o=(r=sS[s])!==null&&r!==void 0?r:s;n&&(o+=`-${n}`);const u=o.match(/\s|\//),f=e.match(/\s|\//);if(u||f){const g=[`Unable to register library "${o}" with version "${e}":`];u&&g.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&f&&g.push("and"),f&&g.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xi.warn(g.join(" "));return}Ya(new Lr(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="firebase-heartbeat-database",uS=1,Il="firebase-heartbeat-store";let Qd=null;function L0(){return Qd||(Qd=x1(lS,uS,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Il)}catch(n){console.warn(n)}}}}).catch(s=>{throw Us.create("idb-open",{originalErrorMessage:s.message})})),Qd}async function cS(s){try{const n=(await L0()).transaction(Il),r=await n.objectStore(Il).get(j0(s));return await n.done,r}catch(e){if(e instanceof ns)Xi.warn(e.message);else{const n=Us.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xi.warn(n.message)}}}async function Wv(s,e){try{const r=(await L0()).transaction(Il,"readwrite");await r.objectStore(Il).put(e,j0(s)),await r.done}catch(n){if(n instanceof ns)Xi.warn(n.message);else{const r=Us.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xi.warn(r.message)}}}function j0(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS=1024,fS=30;class dS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new gS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=e_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>fS){const f=pS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Xi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=e_(),{heartbeatsToSend:r,unsentEntries:o}=mS(this._heartbeatsCache.heartbeats),u=zc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return Xi.warn(n),""}}}function e_(){return new Date().toISOString().substring(0,10)}function mS(s,e=hS){const n=[];let r=s.slice();for(const o of s){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),t_(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),t_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class gS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return t1()?n1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await cS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Wv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return Wv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function t_(s){return zc(JSON.stringify({version:2,heartbeats:s})).length}function pS(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let r=1;r<s.length;r++)s[r].date<n&&(n=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(s){Ya(new Lr("platform-logger",e=>new I1(e),"PRIVATE")),Ya(new Lr("heartbeat",e=>new dS(e),"PRIVATE")),zs(tm,Zv,s),zs(tm,Zv,"esm2017"),zs("fire-js","")}yS("");var vS="firebase",_S="11.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zs(vS,_S,"app");function Nm(s,e){var n={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&e.indexOf(r)<0&&(n[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(s);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(s,r[o])&&(n[r[o]]=s[r[o]]);return n}function U0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ES=U0,z0=new zl("auth","Firebase",U0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc=new Cm("@firebase/auth");function TS(s,...e){qc.logLevel<=je.WARN&&qc.warn(`Auth (${no}): ${s}`,...e)}function Rc(s,...e){qc.logLevel<=je.ERROR&&qc.error(`Auth (${no}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(s,...e){throw Dm(s,...e)}function pi(s,...e){return Dm(s,...e)}function B0(s,e,n){const r=Object.assign(Object.assign({},ES()),{[e]:n});return new zl("auth","Firebase",r).create(e,{appName:s.name})}function Bs(s){return B0(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dm(s,...e){if(typeof s!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(n,...r)}return z0.create(s,...e)}function xe(s,e,...n){if(!s)throw Dm(e,...n)}function Ki(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Rc(e),new Error(e)}function Ji(s,e){s||Ki(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function bS(){return n_()==="http:"||n_()==="https:"}function n_(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bS()||ZA()||"connection"in navigator)?navigator.onLine:!0}function SS(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ji(n>e,"Short delay should be less than long delay!"),this.isMobile=YA()||JA()}get(){return AS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(s,e){Ji(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ki("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ki("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ki("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],CS=new ql(3e4,6e4);function ch(s,e){return s.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:s.tenantId}):e}async function io(s,e,n,r,o={}){return H0(s,o,async()=>{let u={},f={};r&&(e==="GET"?f=r:u={body:JSON.stringify(r)});const g=Bl(Object.assign({key:s.config.apiKey},f)).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const y=Object.assign({method:e,headers:p},u);return XA()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&Ul(s.emulatorConfig.host)&&(y.credentials="include"),q0.fetch()(await G0(s,s.config.apiHost,n,g),y)})}async function H0(s,e,n){s._canInitEmulator=!1;const r=Object.assign(Object.assign({},wS),e);try{const o=new RS(s),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw bc(s,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const g=u.ok?f.errorMessage:f.error.message,[p,y]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw bc(s,"credential-already-in-use",f);if(p==="EMAIL_EXISTS")throw bc(s,"email-already-in-use",f);if(p==="USER_DISABLED")throw bc(s,"user-disabled",f);const T=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw B0(s,T,y);Zi(s,T)}}catch(o){if(o instanceof ns)throw o;Zi(s,"network-request-failed",{message:String(o)})}}async function F0(s,e,n,r,o={}){const u=await io(s,e,n,r,o);return"mfaPendingCredential"in u&&Zi(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function G0(s,e,n,r){const o=`${e}${n}?${r}`,u=s,f=u.config.emulator?Om(s.config,o):`${s.config.apiScheme}://${o}`;return xS.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}class RS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(pi(this.auth,"network-request-failed")),CS.get())})}}function bc(s,e,n){const r={appName:s.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=pi(s,e,r);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IS(s,e){return io(s,"POST","/v1/accounts:delete",e)}async function Hc(s,e){return io(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function NS(s,e=!1){const n=Yt(s),r=await n.getIdToken(e),o=km(r);xe(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:o,token:r,authTime:Sl(Kd(o.auth_time)),issuedAtTime:Sl(Kd(o.iat)),expirationTime:Sl(Kd(o.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Kd(s){return Number(s)*1e3}function km(s){const[e,n,r]=s.split(".");if(e===void 0||n===void 0||r===void 0)return Rc("JWT malformed, contained fewer than 3 sections"),null;try{const o=C0(n);return o?JSON.parse(o):(Rc("Failed to decode base64 JWT payload"),null)}catch(o){return Rc("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function i_(s){const e=km(s);return xe(e,"internal-error"),xe(typeof e.exp<"u","internal-error"),xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nl(s,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ns&&DS(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function DS({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sl(this.lastLoginAt),this.creationTime=Sl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fc(s){var e;const n=s.auth,r=await s.getIdToken(),o=await Nl(s,Hc(n,{idToken:r}));xe(o==null?void 0:o.users.length,n,"internal-error");const u=o.users[0];s._notifyReloadListener(u);const f=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?Q0(u.providerUserInfo):[],g=MS(s.providerData,f),p=s.isAnonymous,y=!(s.email&&u.passwordHash)&&!(g!=null&&g.length),T=p?y:!1,x={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:g,metadata:new rm(u.createdAt,u.lastLoginAt),isAnonymous:T};Object.assign(s,x)}async function kS(s){const e=Yt(s);await Fc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function MS(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function Q0(s){return s.map(e=>{var{providerId:n}=e,r=Nm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VS(s,e){const n=await H0(s,{},async()=>{const r=Bl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,f=await G0(s,o,"/v1/token",`key=${u}`),g=await s._getAdditionalHeaders();return g["Content-Type"]="application/x-www-form-urlencoded",q0.fetch()(f,{method:"POST",headers:g,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function PS(s,e){return io(s,"POST","/v2/accounts:revokeToken",ch(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){xe(e.idToken,"internal-error"),xe(typeof e.idToken<"u","internal-error"),xe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):i_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){xe(e.length!==0,"internal-error");const n=i_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:u}=await VS(e,n);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:u}=n,f=new Ha;return r&&(xe(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),o&&(xe(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(xe(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ha,this.toJSON())}_performRefresh(){return Ki("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(s,e){xe(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Zn{constructor(e){var{uid:n,auth:r,stsTokenManager:o}=e,u=Nm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new OS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new rm(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const n=await Nl(this,this.stsTokenManager.getToken(this.auth,e));return xe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return NS(this,e)}reload(){return kS(this)}_assign(e){this!==e&&(xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Zn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Fc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xn(this.auth.app))return Promise.reject(Bs(this.auth));const e=await this.getIdToken();return await Nl(this,IS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,o,u,f,g,p,y,T;const x=(r=n.displayName)!==null&&r!==void 0?r:void 0,C=(o=n.email)!==null&&o!==void 0?o:void 0,B=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,G=(f=n.photoURL)!==null&&f!==void 0?f:void 0,Z=(g=n.tenantId)!==null&&g!==void 0?g:void 0,U=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,Y=(y=n.createdAt)!==null&&y!==void 0?y:void 0,ne=(T=n.lastLoginAt)!==null&&T!==void 0?T:void 0,{uid:K,emailVerified:ue,isAnonymous:le,providerData:re,stsTokenManager:D}=n;xe(K&&D,e,"internal-error");const w=Ha.fromJSON(this.name,D);xe(typeof K=="string",e,"internal-error"),Ds(x,e.name),Ds(C,e.name),xe(typeof ue=="boolean",e,"internal-error"),xe(typeof le=="boolean",e,"internal-error"),Ds(B,e.name),Ds(G,e.name),Ds(Z,e.name),Ds(U,e.name),Ds(Y,e.name),Ds(ne,e.name);const R=new Zn({uid:K,auth:e,email:C,emailVerified:ue,displayName:x,isAnonymous:le,photoURL:G,phoneNumber:B,tenantId:Z,stsTokenManager:w,createdAt:Y,lastLoginAt:ne});return re&&Array.isArray(re)&&(R.providerData=re.map(k=>Object.assign({},k))),U&&(R._redirectEventId=U),R}static async _fromIdTokenResponse(e,n,r=!1){const o=new Ha;o.updateFromServerResponse(n);const u=new Zn({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await Fc(u),u}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];xe(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?Q0(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),g=new Ha;g.updateFromIdToken(r);const p=new Zn({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:f}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new rm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_=new Map;function Yi(s){Ji(s instanceof Function,"Expected a class definition");let e=s_.get(s);return e?(Ji(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,s_.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}K0.type="NONE";const r_=K0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ic(s,e,n){return`firebase:${s}:${e}:${n}`}class Fa{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=Ic(this.userKey,o.apiKey,u),this.fullPersistenceKey=Ic("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Hc(this.auth,{idToken:e}).catch(()=>{});return n?Zn._fromGetAccountInfoResponse(this.auth,n,e):null}return Zn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Fa(Yi(r_),e,r);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||Yi(r_);const f=Ic(r,e.config.apiKey,e.name);let g=null;for(const y of n)try{const T=await y._get(f);if(T){let x;if(typeof T=="string"){const C=await Hc(e,{idToken:T}).catch(()=>{});if(!C)break;x=await Zn._fromGetAccountInfoResponse(e,C,T)}else x=Zn._fromJSON(e,T);y!==u&&(g=x),u=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new Fa(u,e,r):(u=p[0],g&&await u._set(f,g.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(f)}catch{}})),new Fa(u,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a_(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Z0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Y0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(W0(e))return"Blackberry";if(eE(e))return"Webos";if($0(e))return"Safari";if((e.includes("chrome/")||X0(e))&&!e.includes("edge/"))return"Chrome";if(J0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Y0(s=rn()){return/firefox\//i.test(s)}function $0(s=rn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function X0(s=rn()){return/crios\//i.test(s)}function Z0(s=rn()){return/iemobile/i.test(s)}function J0(s=rn()){return/android/i.test(s)}function W0(s=rn()){return/blackberry/i.test(s)}function eE(s=rn()){return/webos/i.test(s)}function Mm(s=rn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function LS(s=rn()){var e;return Mm(s)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function jS(){return WA()&&document.documentMode===10}function tE(s=rn()){return Mm(s)||J0(s)||eE(s)||W0(s)||/windows phone/i.test(s)||Z0(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(s,e=[]){let n;switch(s){case"Browser":n=a_(rn());break;case"Worker":n=`${a_(rn())}-${s}`;break;default:n=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${no}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=u=>new Promise((f,g)=>{try{const p=e(u);f(p)}catch(p){g(p)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zS(s,e={}){return io(s,"GET","/v2/passwordPolicy",ch(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS=6;class qS{constructor(e){var n,r,o,u;const f=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=f.minPasswordLength)!==null&&n!==void 0?n:BS,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,o,u,f,g;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(r=p.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(u=p.containsUppercaseLetter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(f=p.containsNumericCharacter)!==null&&f!==void 0?f:!0),p.isValid&&(p.isValid=(g=p.containsNonAlphanumericCharacter)!==null&&g!==void 0?g:!0),p}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new o_(this),this.idTokenSubscription=new o_(this),this.beforeStateQueue=new US(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=z0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Yi(n)),this._initializationPromise=this.queue(async()=>{var r,o,u;if(!this._deleted&&(this.persistenceManager=await Fa.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)===null||u===void 0?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Hc(this,{idToken:e}),r=await Zn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Xn(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(g=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(g,g))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let o=r,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,g=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!f||f===g)&&(p!=null&&p.user)&&(o=p.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(f){o=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xn(this.app))return Promise.reject(Bs(this));const n=e?Yt(e):null;return n&&xe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xn(this.app)?Promise.reject(Bs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xn(this.app)?Promise.reject(Bs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zS(this),n=new qS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new zl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await PS(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Yi(e)||this._popupRedirectResolver;xe(n,this,"argument-error"),this.redirectPersistenceManager=await Fa.create(this,[Yi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(xe(g,this,"internal-error"),g.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,r,o);return()=>{f=!0,p()}}else{const p=e.addObserver(n);return()=>{f=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(Xn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&TS(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function hh(s){return Yt(s)}class o_{constructor(e){this.auth=e,this.observer=null,this.addObserver=o1(n=>this.observer=n)}get next(){return xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FS(s){Vm=s}function GS(s){return Vm.loadJS(s)}function QS(){return Vm.gapiScript}function KS(s){return`__${s}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(s,e){const n=Im(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Pr(u,e??{}))return o;Zi(o,"already-initialized")}return n.initialize({options:e})}function $S(s,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Yi);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function XS(s,e,n){const r=hh(s);xe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,u=iE(e),{host:f,port:g}=ZS(e),p=g===null?"":`:${g}`,y={url:`${u}//${f}${p}/`},T=Object.freeze({host:f,port:g,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){xe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),xe(Pr(y,r.config.emulator)&&Pr(T,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=T,r.settings.appVerificationDisabledForTesting=!0,Ul(f)?(D0(`${u}//${f}${p}`),O0("Auth",!0)):JS()}function iE(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function ZS(s){const e=iE(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:l_(r.substr(u.length+1))}}else{const[u,f]=r.split(":");return{host:u,port:l_(f)}}}function l_(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function JS(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ki("not implemented")}_getIdTokenResponse(e){return Ki("not implemented")}_linkToIdToken(e,n){return Ki("not implemented")}_getReauthenticationResolver(e){return Ki("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(s,e){return F0(s,"POST","/v1/accounts:signInWithIdp",ch(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="http://localhost";class jr extends sE{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new jr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Zi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o}=n,u=Nm(n,["providerId","signInMethod"]);if(!r||!o)return null;const f=new jr(r,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return Ga(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ga(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ga(e,n)}buildRequest(){const e={requestUri:WS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Bl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl extends rE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks extends Hl{constructor(){super("facebook.com")}static credential(e){return jr._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ks.credential(e.oauthAccessToken)}catch{return null}}}ks.FACEBOOK_SIGN_IN_METHOD="facebook.com";ks.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends Hl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return jr._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ms.credentialFromTaggedObject(e)}static credentialFromError(e){return Ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ms.credential(n,r)}catch{return null}}}Ms.GOOGLE_SIGN_IN_METHOD="google.com";Ms.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends Hl{constructor(){super("github.com")}static credential(e){return jr._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vs.credential(e.oauthAccessToken)}catch{return null}}}Vs.GITHUB_SIGN_IN_METHOD="github.com";Vs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends Hl{constructor(){super("twitter.com")}static credential(e,n){return jr._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ps.credential(n,r)}catch{return null}}}Ps.TWITTER_SIGN_IN_METHOD="twitter.com";Ps.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ew(s,e){return F0(s,"POST","/v1/accounts:signUp",ch(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const u=await Zn._fromIdTokenResponse(e,r,o),f=u_(r);return new Fs({user:u,providerId:f,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=u_(r);return new Fs({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function u_(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tw(s){var e;if(Xn(s.app))return Promise.reject(Bs(s));const n=hh(s);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Fs({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await ew(n,{returnSecureToken:!0}),o=await Fs._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(o.user),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc extends ns{constructor(e,n,r,o){var u;super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,Gc.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new Gc(e,n,r,o)}}function aE(s,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Gc._fromErrorAndOperation(s,u,e,r):u})}async function nw(s,e,n=!1){const r=await Nl(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return Fs._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iw(s,e,n=!1){const{auth:r}=s;if(Xn(r.app))return Promise.reject(Bs(r));const o="reauthenticate";try{const u=await Nl(s,aE(r,o,e,s),n);xe(u.idToken,r,"internal-error");const f=km(u.idToken);xe(f,r,"internal-error");const{sub:g}=f;return xe(s.uid===g,r,"user-mismatch"),Fs._forOperation(s,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Zi(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sw(s,e,n=!1){if(Xn(s.app))return Promise.reject(Bs(s));const r="signIn",o=await aE(s,r,e),u=await Fs._fromIdTokenResponse(s,r,o);return n||await s._updateCurrentUser(u.user),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(s,e,n,r){return Yt(s).onIdTokenChanged(e,n,r)}function aw(s,e,n){return Yt(s).beforeAuthStateChanged(e,n)}function ow(s,e,n,r){return Yt(s).onAuthStateChanged(e,n,r)}const Qc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Qc,"1"),this.storage.removeItem(Qc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=1e3,uw=10;class lE extends oE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,g,p)=>{this.notifyListeners(f,p)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(r);!n&&this.localCache[r]===f||this.notifyListeners(r,f)},u=this.storage.getItem(r);jS()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,uw):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},lw)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}lE.type="LOCAL";const cw=lE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE extends oE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}uE.type="SESSION";const cE=uE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new fh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const g=Array.from(f).map(async y=>y(n.origin,u)),p=await hw(g);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}fh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(s="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((g,p)=>{const y=Pm("",20);o.port1.start();const T=setTimeout(()=>{p(new Error("unsupported_event"))},r);f={messageChannel:o,onMessage(x){const C=x;if(C.data.eventId===y)switch(C.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),g(C.data.response);break;default:clearTimeout(T),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(){return window}function dw(s){yi().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(){return typeof yi().WorkerGlobalScope<"u"&&typeof yi().importScripts=="function"}async function mw(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gw(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function pw(){return hE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE="firebaseLocalStorageDb",yw=1,Kc="firebaseLocalStorage",dE="fbase_key";class Fl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function dh(s,e){return s.transaction([Kc],e?"readwrite":"readonly").objectStore(Kc)}function vw(){const s=indexedDB.deleteDatabase(fE);return new Fl(s).toPromise()}function am(){const s=indexedDB.open(fE,yw);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(Kc,{keyPath:dE})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(Kc)?e(r):(r.close(),await vw(),e(await am()))})})}async function c_(s,e,n){const r=dh(s,!0).put({[dE]:e,value:n});return new Fl(r).toPromise()}async function _w(s,e){const n=dh(s,!1).get(e),r=await new Fl(n).toPromise();return r===void 0?null:r.value}function h_(s,e){const n=dh(s,!0).delete(e);return new Fl(n).toPromise()}const Ew=800,Tw=3;class mE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await am(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Tw)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return hE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fh._getInstance(pw()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await mw(),!this.activeServiceWorker)return;this.sender=new fw(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||gw()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await am();return await c_(e,Qc,"1"),await h_(e,Qc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>c_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>_w(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>h_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=dh(o,!1).getAll();return new Fl(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ew)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mE.type="LOCAL";const bw=mE;new ql(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(s,e){return e?Yi(e):(xe(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm extends sE{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ga(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ga(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ga(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Sw(s){return sw(s.auth,new Lm(s),s.bypassAuthState)}function ww(s){const{auth:e,user:n}=s;return xe(n,e,"internal-error"),iw(n,new Lm(s),s.bypassAuthState)}async function xw(s){const{auth:e,user:n}=s;return xe(n,e,"internal-error"),nw(n,new Lm(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e,n,r,o,u=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:u,error:f,type:g}=e;if(f){this.reject(f);return}const p={auth:this.auth,requestUri:n,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Sw;case"linkViaPopup":case"linkViaRedirect":return xw;case"reauthViaPopup":case"reauthViaRedirect":return ww;default:Zi(this.auth,"internal-error")}}resolve(e){Ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw=new ql(2e3,1e4);class qa extends gE{constructor(e,n,r,o,u){super(e,n,o,u),this.provider=r,this.authWindow=null,this.pollId=null,qa.currentPopupAction&&qa.currentPopupAction.cancel(),qa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return xe(e,this.auth,"internal-error"),e}async onExecution(){Ji(this.filter.length===1,"Popup operations only handle one event");const e=Pm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(pi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(pi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Cw.get())};e()}}qa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw="pendingRedirect",Nc=new Map;class Iw extends gE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Nc.get(this.auth._key());if(!e){try{const r=await Nw(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Nc.set(this.auth._key(),e)}return this.bypassAuthState||Nc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Nw(s,e){const n=kw(e),r=Ow(s);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function Dw(s,e){Nc.set(s._key(),e)}function Ow(s){return Yi(s._redirectPersistence)}function kw(s){return Ic(Rw,s.config.apiKey,s.name)}async function Mw(s,e,n=!1){if(Xn(s.app))return Promise.reject(Bs(s));const r=hh(s),o=Aw(r,e),f=await new Iw(r,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw=10*60*1e3;class Pw{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Lw(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!pE(e)){const o=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(pi(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Vw&&this.cachedEventUids.clear(),this.cachedEventUids.has(f_(e))}saveEventToCache(e){this.cachedEventUids.add(f_(e)),this.lastProcessedEventTime=Date.now()}}function f_(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function pE({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Lw(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pE(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jw(s,e={}){return io(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zw=/^https?/;async function Bw(s){if(s.config.emulator)return;const{authorizedDomains:e}=await jw(s);for(const n of e)try{if(qw(n))return}catch{}Zi(s,"unauthorized-domain")}function qw(s){const e=sm(),{protocol:n,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const f=new URL(s);return f.hostname===""&&r===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===r}if(!zw.test(n))return!1;if(Uw.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw=new ql(3e4,6e4);function d_(){const s=yi().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function Fw(s){return new Promise((e,n)=>{var r,o,u;function f(){d_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{d_(),n(pi(s,"network-request-failed"))},timeout:Hw.get()})}if(!((o=(r=yi().gapi)===null||r===void 0?void 0:r.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=yi().gapi)===null||u===void 0)&&u.load)f();else{const g=KS("iframefcb");return yi()[g]=()=>{gapi.load?f():n(pi(s,"network-request-failed"))},GS(`${QS()}?onload=${g}`).catch(p=>n(p))}}).catch(e=>{throw Dc=null,e})}let Dc=null;function Gw(s){return Dc=Dc||Fw(s),Dc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw=new ql(5e3,15e3),Kw="__/auth/iframe",Yw="emulator/auth/iframe",$w={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Zw(s){const e=s.config;xe(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?Om(e,Yw):`https://${s.config.authDomain}/${Kw}`,r={apiKey:e.apiKey,appName:s.name,v:no},o=Xw.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${n}?${Bl(r).slice(1)}`}async function Jw(s){const e=await Gw(s),n=yi().gapi;return xe(n,s,"internal-error"),e.open({where:document.body,url:Zw(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$w,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const f=pi(s,"network-request-failed"),g=yi().setTimeout(()=>{u(f)},Qw.get());function p(){yi().clearTimeout(g),o(r)}r.ping(p).then(p,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ex=500,tx=600,nx="_blank",ix="http://localhost";class m_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function sx(s,e,n,r=ex,o=tx){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let g="";const p=Object.assign(Object.assign({},Ww),{width:r.toString(),height:o.toString(),top:u,left:f}),y=rn().toLowerCase();n&&(g=X0(y)?nx:n),Y0(y)&&(e=e||ix,p.scrollbars="yes");const T=Object.entries(p).reduce((C,[B,G])=>`${C}${B}=${G},`,"");if(LS(y)&&g!=="_self")return rx(e||"",g),new m_(null);const x=window.open(e||"",g,T);xe(x,s,"popup-blocked");try{x.focus()}catch{}return new m_(x)}function rx(s,e){const n=document.createElement("a");n.href=s,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax="__/auth/handler",ox="emulator/auth/handler",lx=encodeURIComponent("fac");async function g_(s,e,n,r,o,u){xe(s.config.authDomain,s,"auth-domain-config-required"),xe(s.config.apiKey,s,"invalid-api-key");const f={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:r,v:no,eventId:o};if(e instanceof rE){e.setDefaultLanguage(s.languageCode),f.providerId=e.providerId||"",a1(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,x]of Object.entries({}))f[T]=x}if(e instanceof Hl){const T=e.getScopes().filter(x=>x!=="");T.length>0&&(f.scopes=T.join(","))}s.tenantId&&(f.tid=s.tenantId);const g=f;for(const T of Object.keys(g))g[T]===void 0&&delete g[T];const p=await s._getAppCheckToken(),y=p?`#${lx}=${encodeURIComponent(p)}`:"";return`${ux(s)}?${Bl(g).slice(1)}${y}`}function ux({config:s}){return s.emulator?Om(s,ox):`https://${s.authDomain}/${ax}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd="webStorageSupport";class cx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cE,this._completeRedirectFn=Mw,this._overrideRedirectResult=Dw}async _openPopup(e,n,r,o){var u;Ji((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const f=await g_(e,n,r,sm(),o);return sx(e,f,Pm())}async _openRedirect(e,n,r,o){await this._originValidation(e);const u=await g_(e,n,r,sm(),o);return dw(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Ji(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Jw(e),r=new Pw(e);return n.register("authEvent",o=>(xe(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Yd,{type:Yd},o=>{var u;const f=(u=o==null?void 0:o[0])===null||u===void 0?void 0:u[Yd];f!==void 0&&n(!!f),Zi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Bw(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return tE()||$0()||Mm()}}const hx=cx;var p_="@firebase/auth",y_="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function mx(s){Ya(new Lr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:g}=r.options;xe(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:f,authDomain:g,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nE(s)},y=new HS(r,o,u,p);return $S(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ya(new Lr("auth-internal",e=>{const n=hh(e.getProvider("auth").getImmediate());return(r=>new fx(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zs(p_,y_,dx(s)),zs(p_,y_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx=5*60,px=N0("authIdTokenMaxAge")||gx;let v_=null;const yx=s=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>px)return;const o=n==null?void 0:n.token;v_!==o&&(v_=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function vx(s=P0()){const e=Im(s,"auth");if(e.isInitialized())return e.getImmediate();const n=YS(s,{popupRedirectResolver:hx,persistence:[bw,cw,cE]}),r=N0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const f=yx(u.toString());aw(n,f,()=>f(n.currentUser)),rw(n,g=>f(g))}}const o=R0("auth");return o&&XS(n,`http://${o}`),n}function _x(){var s,e;return(e=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&e!==void 0?e:document}FS({loadJS(s){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=o=>{const u=pi("internal-error");u.customData=o,n(u)},r.type="text/javascript",r.charset="UTF-8",_x().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});mx("Browser");var __=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qs,yE;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,w){function R(){}R.prototype=w.prototype,D.D=w.prototype,D.prototype=new R,D.prototype.constructor=D,D.C=function(k,I,O){for(var S=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)S[pe-2]=arguments[pe];return w.prototype[I].apply(k,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,w,R){R||(R=0);var k=Array(16);if(typeof w=="string")for(var I=0;16>I;++I)k[I]=w.charCodeAt(R++)|w.charCodeAt(R++)<<8|w.charCodeAt(R++)<<16|w.charCodeAt(R++)<<24;else for(I=0;16>I;++I)k[I]=w[R++]|w[R++]<<8|w[R++]<<16|w[R++]<<24;w=D.g[0],R=D.g[1],I=D.g[2];var O=D.g[3],S=w+(O^R&(I^O))+k[0]+3614090360&4294967295;w=R+(S<<7&4294967295|S>>>25),S=O+(I^w&(R^I))+k[1]+3905402710&4294967295,O=w+(S<<12&4294967295|S>>>20),S=I+(R^O&(w^R))+k[2]+606105819&4294967295,I=O+(S<<17&4294967295|S>>>15),S=R+(w^I&(O^w))+k[3]+3250441966&4294967295,R=I+(S<<22&4294967295|S>>>10),S=w+(O^R&(I^O))+k[4]+4118548399&4294967295,w=R+(S<<7&4294967295|S>>>25),S=O+(I^w&(R^I))+k[5]+1200080426&4294967295,O=w+(S<<12&4294967295|S>>>20),S=I+(R^O&(w^R))+k[6]+2821735955&4294967295,I=O+(S<<17&4294967295|S>>>15),S=R+(w^I&(O^w))+k[7]+4249261313&4294967295,R=I+(S<<22&4294967295|S>>>10),S=w+(O^R&(I^O))+k[8]+1770035416&4294967295,w=R+(S<<7&4294967295|S>>>25),S=O+(I^w&(R^I))+k[9]+2336552879&4294967295,O=w+(S<<12&4294967295|S>>>20),S=I+(R^O&(w^R))+k[10]+4294925233&4294967295,I=O+(S<<17&4294967295|S>>>15),S=R+(w^I&(O^w))+k[11]+2304563134&4294967295,R=I+(S<<22&4294967295|S>>>10),S=w+(O^R&(I^O))+k[12]+1804603682&4294967295,w=R+(S<<7&4294967295|S>>>25),S=O+(I^w&(R^I))+k[13]+4254626195&4294967295,O=w+(S<<12&4294967295|S>>>20),S=I+(R^O&(w^R))+k[14]+2792965006&4294967295,I=O+(S<<17&4294967295|S>>>15),S=R+(w^I&(O^w))+k[15]+1236535329&4294967295,R=I+(S<<22&4294967295|S>>>10),S=w+(I^O&(R^I))+k[1]+4129170786&4294967295,w=R+(S<<5&4294967295|S>>>27),S=O+(R^I&(w^R))+k[6]+3225465664&4294967295,O=w+(S<<9&4294967295|S>>>23),S=I+(w^R&(O^w))+k[11]+643717713&4294967295,I=O+(S<<14&4294967295|S>>>18),S=R+(O^w&(I^O))+k[0]+3921069994&4294967295,R=I+(S<<20&4294967295|S>>>12),S=w+(I^O&(R^I))+k[5]+3593408605&4294967295,w=R+(S<<5&4294967295|S>>>27),S=O+(R^I&(w^R))+k[10]+38016083&4294967295,O=w+(S<<9&4294967295|S>>>23),S=I+(w^R&(O^w))+k[15]+3634488961&4294967295,I=O+(S<<14&4294967295|S>>>18),S=R+(O^w&(I^O))+k[4]+3889429448&4294967295,R=I+(S<<20&4294967295|S>>>12),S=w+(I^O&(R^I))+k[9]+568446438&4294967295,w=R+(S<<5&4294967295|S>>>27),S=O+(R^I&(w^R))+k[14]+3275163606&4294967295,O=w+(S<<9&4294967295|S>>>23),S=I+(w^R&(O^w))+k[3]+4107603335&4294967295,I=O+(S<<14&4294967295|S>>>18),S=R+(O^w&(I^O))+k[8]+1163531501&4294967295,R=I+(S<<20&4294967295|S>>>12),S=w+(I^O&(R^I))+k[13]+2850285829&4294967295,w=R+(S<<5&4294967295|S>>>27),S=O+(R^I&(w^R))+k[2]+4243563512&4294967295,O=w+(S<<9&4294967295|S>>>23),S=I+(w^R&(O^w))+k[7]+1735328473&4294967295,I=O+(S<<14&4294967295|S>>>18),S=R+(O^w&(I^O))+k[12]+2368359562&4294967295,R=I+(S<<20&4294967295|S>>>12),S=w+(R^I^O)+k[5]+4294588738&4294967295,w=R+(S<<4&4294967295|S>>>28),S=O+(w^R^I)+k[8]+2272392833&4294967295,O=w+(S<<11&4294967295|S>>>21),S=I+(O^w^R)+k[11]+1839030562&4294967295,I=O+(S<<16&4294967295|S>>>16),S=R+(I^O^w)+k[14]+4259657740&4294967295,R=I+(S<<23&4294967295|S>>>9),S=w+(R^I^O)+k[1]+2763975236&4294967295,w=R+(S<<4&4294967295|S>>>28),S=O+(w^R^I)+k[4]+1272893353&4294967295,O=w+(S<<11&4294967295|S>>>21),S=I+(O^w^R)+k[7]+4139469664&4294967295,I=O+(S<<16&4294967295|S>>>16),S=R+(I^O^w)+k[10]+3200236656&4294967295,R=I+(S<<23&4294967295|S>>>9),S=w+(R^I^O)+k[13]+681279174&4294967295,w=R+(S<<4&4294967295|S>>>28),S=O+(w^R^I)+k[0]+3936430074&4294967295,O=w+(S<<11&4294967295|S>>>21),S=I+(O^w^R)+k[3]+3572445317&4294967295,I=O+(S<<16&4294967295|S>>>16),S=R+(I^O^w)+k[6]+76029189&4294967295,R=I+(S<<23&4294967295|S>>>9),S=w+(R^I^O)+k[9]+3654602809&4294967295,w=R+(S<<4&4294967295|S>>>28),S=O+(w^R^I)+k[12]+3873151461&4294967295,O=w+(S<<11&4294967295|S>>>21),S=I+(O^w^R)+k[15]+530742520&4294967295,I=O+(S<<16&4294967295|S>>>16),S=R+(I^O^w)+k[2]+3299628645&4294967295,R=I+(S<<23&4294967295|S>>>9),S=w+(I^(R|~O))+k[0]+4096336452&4294967295,w=R+(S<<6&4294967295|S>>>26),S=O+(R^(w|~I))+k[7]+1126891415&4294967295,O=w+(S<<10&4294967295|S>>>22),S=I+(w^(O|~R))+k[14]+2878612391&4294967295,I=O+(S<<15&4294967295|S>>>17),S=R+(O^(I|~w))+k[5]+4237533241&4294967295,R=I+(S<<21&4294967295|S>>>11),S=w+(I^(R|~O))+k[12]+1700485571&4294967295,w=R+(S<<6&4294967295|S>>>26),S=O+(R^(w|~I))+k[3]+2399980690&4294967295,O=w+(S<<10&4294967295|S>>>22),S=I+(w^(O|~R))+k[10]+4293915773&4294967295,I=O+(S<<15&4294967295|S>>>17),S=R+(O^(I|~w))+k[1]+2240044497&4294967295,R=I+(S<<21&4294967295|S>>>11),S=w+(I^(R|~O))+k[8]+1873313359&4294967295,w=R+(S<<6&4294967295|S>>>26),S=O+(R^(w|~I))+k[15]+4264355552&4294967295,O=w+(S<<10&4294967295|S>>>22),S=I+(w^(O|~R))+k[6]+2734768916&4294967295,I=O+(S<<15&4294967295|S>>>17),S=R+(O^(I|~w))+k[13]+1309151649&4294967295,R=I+(S<<21&4294967295|S>>>11),S=w+(I^(R|~O))+k[4]+4149444226&4294967295,w=R+(S<<6&4294967295|S>>>26),S=O+(R^(w|~I))+k[11]+3174756917&4294967295,O=w+(S<<10&4294967295|S>>>22),S=I+(w^(O|~R))+k[2]+718787259&4294967295,I=O+(S<<15&4294967295|S>>>17),S=R+(O^(I|~w))+k[9]+3951481745&4294967295,D.g[0]=D.g[0]+w&4294967295,D.g[1]=D.g[1]+(I+(S<<21&4294967295|S>>>11))&4294967295,D.g[2]=D.g[2]+I&4294967295,D.g[3]=D.g[3]+O&4294967295}r.prototype.u=function(D,w){w===void 0&&(w=D.length);for(var R=w-this.blockSize,k=this.B,I=this.h,O=0;O<w;){if(I==0)for(;O<=R;)o(this,D,O),O+=this.blockSize;if(typeof D=="string"){for(;O<w;)if(k[I++]=D.charCodeAt(O++),I==this.blockSize){o(this,k),I=0;break}}else for(;O<w;)if(k[I++]=D[O++],I==this.blockSize){o(this,k),I=0;break}}this.h=I,this.o+=w},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var w=1;w<D.length-8;++w)D[w]=0;var R=8*this.o;for(w=D.length-8;w<D.length;++w)D[w]=R&255,R/=256;for(this.u(D),D=Array(16),w=R=0;4>w;++w)for(var k=0;32>k;k+=8)D[R++]=this.g[w]>>>k&255;return D};function u(D,w){var R=g;return Object.prototype.hasOwnProperty.call(R,D)?R[D]:R[D]=w(D)}function f(D,w){this.h=w;for(var R=[],k=!0,I=D.length-1;0<=I;I--){var O=D[I]|0;k&&O==w||(R[I]=O,k=!1)}this.g=R}var g={};function p(D){return-128<=D&&128>D?u(D,function(w){return new f([w|0],0>w?-1:0)}):new f([D|0],0>D?-1:0)}function y(D){if(isNaN(D)||!isFinite(D))return x;if(0>D)return U(y(-D));for(var w=[],R=1,k=0;D>=R;k++)w[k]=D/R|0,R*=4294967296;return new f(w,0)}function T(D,w){if(D.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(D.charAt(0)=="-")return U(T(D.substring(1),w));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=y(Math.pow(w,8)),k=x,I=0;I<D.length;I+=8){var O=Math.min(8,D.length-I),S=parseInt(D.substring(I,I+O),w);8>O?(O=y(Math.pow(w,O)),k=k.j(O).add(y(S))):(k=k.j(R),k=k.add(y(S)))}return k}var x=p(0),C=p(1),B=p(16777216);s=f.prototype,s.m=function(){if(Z(this))return-U(this).m();for(var D=0,w=1,R=0;R<this.g.length;R++){var k=this.i(R);D+=(0<=k?k:4294967296+k)*w,w*=4294967296}return D},s.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(G(this))return"0";if(Z(this))return"-"+U(this).toString(D);for(var w=y(Math.pow(D,6)),R=this,k="";;){var I=ue(R,w).g;R=Y(R,I.j(w));var O=((0<R.g.length?R.g[0]:R.h)>>>0).toString(D);if(R=I,G(R))return O+k;for(;6>O.length;)O="0"+O;k=O+k}},s.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function G(D){if(D.h!=0)return!1;for(var w=0;w<D.g.length;w++)if(D.g[w]!=0)return!1;return!0}function Z(D){return D.h==-1}s.l=function(D){return D=Y(this,D),Z(D)?-1:G(D)?0:1};function U(D){for(var w=D.g.length,R=[],k=0;k<w;k++)R[k]=~D.g[k];return new f(R,~D.h).add(C)}s.abs=function(){return Z(this)?U(this):this},s.add=function(D){for(var w=Math.max(this.g.length,D.g.length),R=[],k=0,I=0;I<=w;I++){var O=k+(this.i(I)&65535)+(D.i(I)&65535),S=(O>>>16)+(this.i(I)>>>16)+(D.i(I)>>>16);k=S>>>16,O&=65535,S&=65535,R[I]=S<<16|O}return new f(R,R[R.length-1]&-2147483648?-1:0)};function Y(D,w){return D.add(U(w))}s.j=function(D){if(G(this)||G(D))return x;if(Z(this))return Z(D)?U(this).j(U(D)):U(U(this).j(D));if(Z(D))return U(this.j(U(D)));if(0>this.l(B)&&0>D.l(B))return y(this.m()*D.m());for(var w=this.g.length+D.g.length,R=[],k=0;k<2*w;k++)R[k]=0;for(k=0;k<this.g.length;k++)for(var I=0;I<D.g.length;I++){var O=this.i(k)>>>16,S=this.i(k)&65535,pe=D.i(I)>>>16,_e=D.i(I)&65535;R[2*k+2*I]+=S*_e,ne(R,2*k+2*I),R[2*k+2*I+1]+=O*_e,ne(R,2*k+2*I+1),R[2*k+2*I+1]+=S*pe,ne(R,2*k+2*I+1),R[2*k+2*I+2]+=O*pe,ne(R,2*k+2*I+2)}for(k=0;k<w;k++)R[k]=R[2*k+1]<<16|R[2*k];for(k=w;k<2*w;k++)R[k]=0;return new f(R,0)};function ne(D,w){for(;(D[w]&65535)!=D[w];)D[w+1]+=D[w]>>>16,D[w]&=65535,w++}function K(D,w){this.g=D,this.h=w}function ue(D,w){if(G(w))throw Error("division by zero");if(G(D))return new K(x,x);if(Z(D))return w=ue(U(D),w),new K(U(w.g),U(w.h));if(Z(w))return w=ue(D,U(w)),new K(U(w.g),w.h);if(30<D.g.length){if(Z(D)||Z(w))throw Error("slowDivide_ only works with positive integers.");for(var R=C,k=w;0>=k.l(D);)R=le(R),k=le(k);var I=re(R,1),O=re(k,1);for(k=re(k,2),R=re(R,2);!G(k);){var S=O.add(k);0>=S.l(D)&&(I=I.add(R),O=S),k=re(k,1),R=re(R,1)}return w=Y(D,I.j(w)),new K(I,w)}for(I=x;0<=D.l(w);){for(R=Math.max(1,Math.floor(D.m()/w.m())),k=Math.ceil(Math.log(R)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),O=y(R),S=O.j(w);Z(S)||0<S.l(D);)R-=k,O=y(R),S=O.j(w);G(O)&&(O=C),I=I.add(O),D=Y(D,S)}return new K(I,D)}s.A=function(D){return ue(this,D).h},s.and=function(D){for(var w=Math.max(this.g.length,D.g.length),R=[],k=0;k<w;k++)R[k]=this.i(k)&D.i(k);return new f(R,this.h&D.h)},s.or=function(D){for(var w=Math.max(this.g.length,D.g.length),R=[],k=0;k<w;k++)R[k]=this.i(k)|D.i(k);return new f(R,this.h|D.h)},s.xor=function(D){for(var w=Math.max(this.g.length,D.g.length),R=[],k=0;k<w;k++)R[k]=this.i(k)^D.i(k);return new f(R,this.h^D.h)};function le(D){for(var w=D.g.length+1,R=[],k=0;k<w;k++)R[k]=D.i(k)<<1|D.i(k-1)>>>31;return new f(R,D.h)}function re(D,w){var R=w>>5;w%=32;for(var k=D.g.length-R,I=[],O=0;O<k;O++)I[O]=0<w?D.i(O+R)>>>w|D.i(O+R+1)<<32-w:D.i(O+R);return new f(I,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,yE=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=T,qs=f}).apply(typeof __<"u"?__:typeof self<"u"?self:typeof window<"u"?window:{});var Ac=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vE,_l,_E,Oc,om,EE,TE,bE;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,m,v){return c==Array.prototype||c==Object.prototype||(c[m]=v.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ac=="object"&&Ac];for(var m=0;m<c.length;++m){var v=c[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function o(c,m){if(m)e:{var v=r;c=c.split(".");for(var A=0;A<c.length-1;A++){var L=c[A];if(!(L in v))break e;v=v[L]}c=c[c.length-1],A=v[c],m=m(A),m!=A&&m!=null&&e(v,c,{configurable:!0,writable:!0,value:m})}}function u(c,m){c instanceof String&&(c+="");var v=0,A=!1,L={next:function(){if(!A&&v<c.length){var Q=v++;return{value:m(Q,c[Q]),done:!1}}return A=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}o("Array.prototype.values",function(c){return c||function(){return u(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},g=this||self;function p(c){var m=typeof c;return m=m!="object"?m:c?Array.isArray(c)?"array":m:"null",m=="array"||m=="object"&&typeof c.length=="number"}function y(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function T(c,m,v){return c.call.apply(c.bind,arguments)}function x(c,m,v){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,A),c.apply(m,L)}}return function(){return c.apply(m,arguments)}}function C(c,m,v){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:x,C.apply(null,arguments)}function B(c,m){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function G(c,m){function v(){}v.prototype=m.prototype,c.aa=m.prototype,c.prototype=new v,c.prototype.constructor=c,c.Qb=function(A,L,Q){for(var ce=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)ce[ze-2]=arguments[ze];return m.prototype[L].apply(A,ce)}}function Z(c){const m=c.length;if(0<m){const v=Array(m);for(let A=0;A<m;A++)v[A]=c[A];return v}return[]}function U(c,m){for(let v=1;v<arguments.length;v++){const A=arguments[v];if(p(A)){const L=c.length||0,Q=A.length||0;c.length=L+Q;for(let ce=0;ce<Q;ce++)c[L+ce]=A[ce]}else c.push(A)}}class Y{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function ne(c){return/^[\s\xa0]*$/.test(c)}function K(){var c=g.navigator;return c&&(c=c.userAgent)?c:""}function ue(c){return ue[" "](c),c}ue[" "]=function(){};var le=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function re(c,m,v){for(const A in c)m.call(v,c[A],A,c)}function D(c,m){for(const v in c)m.call(void 0,c[v],v,c)}function w(c){const m={};for(const v in c)m[v]=c[v];return m}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(c,m){let v,A;for(let L=1;L<arguments.length;L++){A=arguments[L];for(v in A)c[v]=A[v];for(let Q=0;Q<R.length;Q++)v=R[Q],Object.prototype.hasOwnProperty.call(A,v)&&(c[v]=A[v])}}function I(c){var m=1;c=c.split(":");const v=[];for(;0<m&&c.length;)v.push(c.shift()),m--;return c.length&&v.push(c.join(":")),v}function O(c){g.setTimeout(()=>{throw c},0)}function S(){var c=Ne;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class pe{constructor(){this.h=this.g=null}add(m,v){const A=_e.get();A.set(m,v),this.h?this.h.next=A:this.g=A,this.h=A}}var _e=new Y(()=>new q,c=>c.reset());class q{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,me=!1,Ne=new pe,M=()=>{const c=g.Promise.resolve(void 0);ie=()=>{c.then(J)}};var J=()=>{for(var c;c=S();){try{c.h.call(c.g)}catch(v){O(v)}var m=_e;m.j(c),100>m.h&&(m.h++,c.next=m.g,m.g=c)}me=!1};function fe(){this.s=this.s,this.C=this.C}fe.prototype.s=!1,fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var de=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};g.addEventListener("test",v,m),g.removeEventListener("test",v,m)}catch{}return c}();function se(c,m){if(oe.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var v=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget){if(le){e:{try{ue(m.nodeName);var L=!0;break e}catch{}L=!1}L||(m=null)}}else v=="mouseover"?m=c.fromElement:v=="mouseout"&&(m=c.toElement);this.relatedTarget=m,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:he[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&se.aa.h.call(this)}}G(se,oe);var he={2:"touch",3:"pen",4:"mouse"};se.prototype.h=function(){se.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ce="closure_listenable_"+(1e6*Math.random()|0),De=0;function at(c,m,v,A,L){this.listener=c,this.proxy=null,this.src=m,this.type=v,this.capture=!!A,this.ha=L,this.key=++De,this.da=this.fa=!1}function Ct(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Et(c){this.src=c,this.g={},this.h=0}Et.prototype.add=function(c,m,v,A,L){var Q=c.toString();c=this.g[Q],c||(c=this.g[Q]=[],this.h++);var ce=Hn(c,m,A,L);return-1<ce?(m=c[ce],v||(m.fa=!1)):(m=new at(m,this.src,Q,!!A,L),m.fa=v,c.push(m)),m};function an(c,m){var v=m.type;if(v in c.g){var A=c.g[v],L=Array.prototype.indexOf.call(A,m,void 0),Q;(Q=0<=L)&&Array.prototype.splice.call(A,L,1),Q&&(Ct(m),c.g[v].length==0&&(delete c.g[v],c.h--))}}function Hn(c,m,v,A){for(var L=0;L<c.length;++L){var Q=c[L];if(!Q.da&&Q.listener==m&&Q.capture==!!v&&Q.ha==A)return L}return-1}var Ws="closure_lm_"+(1e6*Math.random()|0),lo={};function Jl(c,m,v,A,L){if(Array.isArray(m)){for(var Q=0;Q<m.length;Q++)Jl(c,m[Q],v,A,L);return null}return v=Wl(v),c&&c[Ce]?c.K(m,v,y(A)?!!A.capture:!1,L):In(c,m,v,!1,A,L)}function In(c,m,v,A,L,Q){if(!m)throw Error("Invalid event type");var ce=y(L)?!!L.capture:!!L,ze=Kr(c);if(ze||(c[Ws]=ze=new Et(c)),v=ze.add(m,v,A,ce,Q),v.proxy)return v;if(A=Vh(),v.proxy=A,A.src=c,A.listener=v,c.addEventListener)de||(L=ce),L===void 0&&(L=!1),c.addEventListener(m.toString(),A,L);else if(c.attachEvent)c.attachEvent(er(m.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Vh(){function c(v){return m.call(c.src,c.listener,v)}const m=Ph;return c}function uo(c,m,v,A,L){if(Array.isArray(m))for(var Q=0;Q<m.length;Q++)uo(c,m[Q],v,A,L);else A=y(A)?!!A.capture:!!A,v=Wl(v),c&&c[Ce]?(c=c.i,m=String(m).toString(),m in c.g&&(Q=c.g[m],v=Hn(Q,v,A,L),-1<v&&(Ct(Q[v]),Array.prototype.splice.call(Q,v,1),Q.length==0&&(delete c.g[m],c.h--)))):c&&(c=Kr(c))&&(m=c.g[m.toString()],c=-1,m&&(c=Hn(m,v,A,L)),(v=-1<c?m[c]:null)&&Qr(v))}function Qr(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[Ce])an(m.i,c);else{var v=c.type,A=c.proxy;m.removeEventListener?m.removeEventListener(v,A,c.capture):m.detachEvent?m.detachEvent(er(v),A):m.addListener&&m.removeListener&&m.removeListener(A),(v=Kr(m))?(an(v,c),v.h==0&&(v.src=null,m[Ws]=null)):Ct(c)}}}function er(c){return c in lo?lo[c]:lo[c]="on"+c}function Ph(c,m){if(c.da)c=!0;else{m=new se(m,this);var v=c.listener,A=c.ha||c.src;c.fa&&Qr(c),c=v.call(A,m)}return c}function Kr(c){return c=c[Ws],c instanceof Et?c:null}var co="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wl(c){return typeof c=="function"?c:(c[co]||(c[co]=function(m){return c.handleEvent(m)}),c[co])}function ht(){fe.call(this),this.i=new Et(this),this.M=this,this.F=null}G(ht,fe),ht.prototype[Ce]=!0,ht.prototype.removeEventListener=function(c,m,v,A){uo(this,c,m,v,A)};function $e(c,m){var v,A=c.F;if(A)for(v=[];A;A=A.F)v.push(A);if(c=c.M,A=m.type||m,typeof m=="string")m=new oe(m,c);else if(m instanceof oe)m.target=m.target||c;else{var L=m;m=new oe(A,c),k(m,L)}if(L=!0,v)for(var Q=v.length-1;0<=Q;Q--){var ce=m.g=v[Q];L=_n(ce,A,!0,m)&&L}if(ce=m.g=c,L=_n(ce,A,!0,m)&&L,L=_n(ce,A,!1,m)&&L,v)for(Q=0;Q<v.length;Q++)ce=m.g=v[Q],L=_n(ce,A,!1,m)&&L}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var c=this.i,m;for(m in c.g){for(var v=c.g[m],A=0;A<v.length;A++)Ct(v[A]);delete c.g[m],c.h--}}this.F=null},ht.prototype.K=function(c,m,v,A){return this.i.add(String(c),m,!1,v,A)},ht.prototype.L=function(c,m,v,A){return this.i.add(String(c),m,!0,v,A)};function _n(c,m,v,A){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();for(var L=!0,Q=0;Q<m.length;++Q){var ce=m[Q];if(ce&&!ce.da&&ce.capture==v){var ze=ce.listener,It=ce.ha||ce.src;ce.fa&&an(c.i,ce),L=ze.call(It,A)!==!1&&L}}return L&&!A.defaultPrevented}function Xt(c,m,v){if(typeof c=="function")v&&(c=C(c,v));else if(c&&typeof c.handleEvent=="function")c=C(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:g.setTimeout(c,m||0)}function eu(c){c.g=Xt(()=>{c.g=null,c.i&&(c.i=!1,eu(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class Lh extends fe{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:eu(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tr(c){fe.call(this),this.h=c,this.g={}}G(tr,fe);var nr=[];function ir(c){re(c.g,function(m,v){this.g.hasOwnProperty(v)&&Qr(m)},c),c.g={}}tr.prototype.N=function(){tr.aa.N.call(this),ir(this)},tr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fn=g.JSON.stringify,Yr=g.JSON.parse,sr=class{stringify(c){return g.JSON.stringify(c,void 0)}parse(c){return g.JSON.parse(c,void 0)}};function ho(){}ho.prototype.h=null;function fo(c){return c.h||(c.h=c.i())}function mo(){}var bi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ai(){oe.call(this,"d")}G(Ai,oe);function go(){oe.call(this,"c")}G(go,oe);var Wn={},po=null;function is(){return po=po||new ht}Wn.La="serverreachability";function $r(c){oe.call(this,Wn.La,c)}G($r,oe);function ss(c){const m=is();$e(m,new $r(m))}Wn.STAT_EVENT="statevent";function tu(c,m){oe.call(this,Wn.STAT_EVENT,c),this.stat=m}G(tu,oe);function ot(c){const m=is();$e(m,new tu(m,c))}Wn.Ma="timingevent";function Rt(c,m){oe.call(this,Wn.Ma,c),this.size=m}G(Rt,oe);function Tt(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){c()},m)}function Nn(){this.g=!0}Nn.prototype.xa=function(){this.g=!1};function yo(c,m,v,A,L,Q){c.info(function(){if(c.g)if(Q)for(var ce="",ze=Q.split("&"),It=0;It<ze.length;It++){var Be=ze[It].split("=");if(1<Be.length){var Pt=Be[0];Be=Be[1];var Nt=Pt.split("_");ce=2<=Nt.length&&Nt[1]=="type"?ce+(Pt+"="+Be+"&"):ce+(Pt+"=redacted&")}}else ce=null;else ce=Q;return"XMLHTTP REQ ("+A+") [attempt "+L+"]: "+m+`
`+v+`
`+ce})}function jh(c,m,v,A,L,Q,ce){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+L+"]: "+m+`
`+v+`
`+Q+" "+ce})}function rs(c,m,v,A){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+rr(c,v)+(A?" "+A:"")})}function nu(c,m){c.info(function(){return"TIMEOUT: "+m})}Nn.prototype.info=function(){};function rr(c,m){if(!c.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(c=0;c<v.length;c++)if(Array.isArray(v[c])){var A=v[c];if(!(2>A.length)){var L=A[1];if(Array.isArray(L)&&!(1>L.length)){var Q=L[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(var ce=1;ce<L.length;ce++)L[ce]=""}}}}return Fn(v)}catch{return m}}var as={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Si={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ei;function ti(){}G(ti,ho),ti.prototype.g=function(){return new XMLHttpRequest},ti.prototype.i=function(){return{}},ei=new ti;function on(c,m,v,A){this.j=c,this.i=m,this.l=v,this.R=A||1,this.U=new tr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gt}function gt(){this.i=null,this.g="",this.h=!1}var vo={},Xr={};function Gn(c,m,v){c.L=1,c.v=cr(En(m)),c.m=v,c.P=!0,wi(c,null)}function wi(c,m){c.F=Date.now(),ar(c),c.A=En(c.v);var v=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),So(v.i,"t",A),c.C=0,v=c.j.J,c.h=new gt,c.g=vu(c.j,v?m:null,!c.m),0<c.O&&(c.M=new Lh(C(c.Y,c,c.g),c.O)),m=c.U,v=c.g,A=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(nr[0]=L.toString()),L=nr);for(var Q=0;Q<L.length;Q++){var ce=Jl(v,L[Q],A||m.handleEvent,!1,m.h||m);if(!ce)break;m.g[ce.key]=ce}m=c.H?w(c.H):{},c.m?(c.u||(c.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,m)):(c.u="GET",c.g.ea(c.A,c.u,null,m)),ss(),yo(c.i,c.u,c.A,c.l,c.R,c.m)}on.prototype.ca=function(c){c=c.target;const m=this.M;m&&Mn(c)==3?m.j():this.Y(c)},on.prototype.Y=function(c){try{if(c==this.g)e:{const Nt=Mn(this.g);var m=this.g.Ba();const ki=this.g.Z();if(!(3>Nt)&&(Nt!=3||this.g&&(this.h.h||this.g.oa()||cu(this.g)))){this.J||Nt!=4||m==7||(m==8||0>=ki?ss(3):ss(2)),os(this);var v=this.g.Z();this.X=v;t:if(iu(this)){var A=cu(this.g);c="";var L=A.length,Q=Mn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Bt(this),ni(this);var ce="";break t}this.h.i=new g.TextDecoder}for(m=0;m<L;m++)this.h.h=!0,c+=this.h.i.decode(A[m],{stream:!(Q&&m==L-1)});A.length=0,this.h.g+=c,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=v==200,jh(this.i,this.u,this.A,this.l,this.R,Nt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,It=this.g;if((ze=It.g?It.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ne(ze)){var Be=ze;break t}}Be=null}if(v=Be)rs(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,or(this,v);else{this.o=!1,this.s=3,ot(12),Bt(this),ni(this);break e}}if(this.P){v=!0;let qt;for(;!this.J&&this.C<ce.length;)if(qt=su(this,ce),qt==Xr){Nt==4&&(this.s=4,ot(14),v=!1),rs(this.i,this.l,null,"[Incomplete Response]");break}else if(qt==vo){this.s=4,ot(15),rs(this.i,this.l,ce,"[Invalid Chunk]"),v=!1;break}else rs(this.i,this.l,qt,null),or(this,qt);if(iu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nt!=4||ce.length!=0||this.h.h||(this.s=1,ot(16),v=!1),this.o=this.o&&v,!v)rs(this.i,this.l,ce,"[Invalid Chunked Response]"),Bt(this),ni(this);else if(0<ce.length&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.ba&&!Pt.M&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),vr(Pt),Pt.M=!0,ot(11))}}else rs(this.i,this.l,ce,null),or(this,ce);Nt==4&&Bt(this),this.o&&!this.J&&(Nt==4?gu(this.j,this):(this.o=!1,ar(this)))}else Hh(this.g),v==400&&0<ce.indexOf("Unknown SID")?(this.s=3,ot(12)):(this.s=0,ot(13)),Bt(this),ni(this)}}}catch{}finally{}};function iu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function su(c,m){var v=c.C,A=m.indexOf(`
`,v);return A==-1?Xr:(v=Number(m.substring(v,A)),isNaN(v)?vo:(A+=1,A+v>m.length?Xr:(m=m.slice(A,A+v),c.C=A+v,m)))}on.prototype.cancel=function(){this.J=!0,Bt(this)};function ar(c){c.S=Date.now()+c.I,ru(c,c.I)}function ru(c,m){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Tt(C(c.ba,c),m)}function os(c){c.B&&(g.clearTimeout(c.B),c.B=null)}on.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(nu(this.i,this.A),this.L!=2&&(ss(),ot(17)),Bt(this),this.s=2,ni(this)):ru(this,this.S-c)};function ni(c){c.j.G==0||c.J||gu(c.j,c)}function Bt(c){os(c);var m=c.M;m&&typeof m.ma=="function"&&m.ma(),c.M=null,ir(c.U),c.g&&(m=c.g,c.g=null,m.abort(),m.ma())}function or(c,m){try{var v=c.j;if(v.G!=0&&(v.g==c||_o(v.h,c))){if(!c.K&&_o(v.h,c)&&v.G==3){try{var A=v.Da.g.parse(m)}catch{A=null}if(Array.isArray(A)&&A.length==3){var L=A;if(L[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<c.F)la(v),aa(v);else break e;Io(v),ot(18)}}else v.za=L[1],0<v.za-v.T&&37500>L[2]&&v.F&&v.v==0&&!v.C&&(v.C=Tt(C(v.Za,v),6e3));if(1>=Jr(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Oi(v,11)}else if((c.K||v.g==c)&&la(v),!ne(m))for(L=v.Da.g.parse(m),m=0;m<L.length;m++){let Be=L[m];if(v.T=Be[0],Be=Be[1],v.G==2)if(Be[0]=="c"){v.K=Be[1],v.ia=Be[2];const Pt=Be[3];Pt!=null&&(v.la=Pt,v.j.info("VER="+v.la));const Nt=Be[4];Nt!=null&&(v.Aa=Nt,v.j.info("SVER="+v.Aa));const ki=Be[5];ki!=null&&typeof ki=="number"&&0<ki&&(A=1.5*ki,v.L=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const qt=c.g;if(qt){const ui=qt.g?qt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ui){var Q=A.h;Q.g||ui.indexOf("spdy")==-1&&ui.indexOf("quic")==-1&&ui.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Wr(Q,Q.h),Q.h=null))}if(A.D){const Do=qt.g?qt.g.getResponseHeader("X-HTTP-Session-Id"):null;Do&&(A.ya=Do,Je(A.I,A.D,Do))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-c.F,v.j.info("Handshake RTT: "+v.R+"ms")),A=v;var ce=c;if(A.qa=yu(A,A.J?A.ia:null,A.W),ce.K){ln(A.h,ce);var ze=ce,It=A.L;It&&(ze.I=It),ze.B&&(os(ze),ar(ze)),A.g=ce}else du(A);0<v.i.length&&oa(v)}else Be[0]!="stop"&&Be[0]!="close"||Oi(v,7);else v.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?Oi(v,7):Co(v):Be[0]!="noop"&&v.l&&v.l.ta(Be),v.v=0)}}ss(4)}catch{}}var au=class{constructor(c,m){this.g=c,this.map=m}};function xi(c){this.l=c||10,g.PerformanceNavigationTiming?(c=g.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zr(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Jr(c){return c.h?1:c.g?c.g.size:0}function _o(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function Wr(c,m){c.g?c.g.add(m):c.h=m}function ln(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}xi.prototype.cancel=function(){if(this.i=Eo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Eo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const v of c.g.values())m=m.concat(v.D);return m}return Z(c.i)}function Uh(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var m=[],v=c.length,A=0;A<v;A++)m.push(c[A]);return m}m=[],v=0;for(A in c)m[v++]=c[A];return m}function ea(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var m=[];c=c.length;for(var v=0;v<c;v++)m.push(v);return m}m=[],v=0;for(const A in c)m[v++]=A;return m}}}function To(c,m){if(c.forEach&&typeof c.forEach=="function")c.forEach(m,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,m,void 0);else for(var v=ea(c),A=Uh(c),L=A.length,Q=0;Q<L;Q++)m.call(void 0,A[Q],v&&v[Q],c)}var lr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zh(c,m){if(c){c=c.split("&");for(var v=0;v<c.length;v++){var A=c[v].indexOf("="),L=null;if(0<=A){var Q=c[v].substring(0,A);L=c[v].substring(A+1)}else Q=c[v];m(Q,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function bt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof bt){this.h=c.h,ur(this,c.j),this.o=c.o,this.g=c.g,ls(this,c.s),this.l=c.l;var m=c.i,v=new Ri;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),Ci(this,v),this.m=c.m}else c&&(m=String(c).match(lr))?(this.h=!1,ur(this,m[1]||"",!0),this.o=Dn(m[2]||""),this.g=Dn(m[3]||"",!0),ls(this,m[4]),this.l=Dn(m[5]||"",!0),Ci(this,m[6]||"",!0),this.m=Dn(m[7]||"")):(this.h=!1,this.i=new Ri(null,this.h))}bt.prototype.toString=function(){var c=[],m=this.j;m&&c.push(hr(m,bo,!0),":");var v=this.g;return(v||m=="file")&&(c.push("//"),(m=this.o)&&c.push(hr(m,bo,!0),"@"),c.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&c.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(hr(v,v.charAt(0)=="/"?Bh:Ao,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",hr(v,ta)),c.join("")};function En(c){return new bt(c)}function ur(c,m,v){c.j=v?Dn(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function ls(c,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);c.s=m}else c.s=null}function Ci(c,m,v){m instanceof Ri?(c.i=m,lu(c.i,c.h)):(v||(m=hr(m,qh)),c.i=new Ri(m,c.h))}function Je(c,m,v){c.i.set(m,v)}function cr(c){return Je(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Dn(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function hr(c,m,v){return typeof c=="string"?(c=encodeURI(c).replace(m,ou),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function ou(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var bo=/[#\/\?@]/g,Ao=/[#\?:]/g,Bh=/[#\?]/g,qh=/[#\?@]/g,ta=/#/g;function Ri(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function On(c){c.g||(c.g=new Map,c.h=0,c.i&&zh(c.i,function(m,v){c.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}s=Ri.prototype,s.add=function(c,m){On(this),this.i=null,c=ii(this,c);var v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(m),this.h+=1,this};function Ii(c,m){On(c),m=ii(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function Ni(c,m){return On(c),m=ii(c,m),c.g.has(m)}s.forEach=function(c,m){On(this),this.g.forEach(function(v,A){v.forEach(function(L){c.call(m,L,A,this)},this)},this)},s.na=function(){On(this);const c=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let A=0;A<m.length;A++){const L=c[A];for(let Q=0;Q<L.length;Q++)v.push(m[A])}return v},s.V=function(c){On(this);let m=[];if(typeof c=="string")Ni(this,c)&&(m=m.concat(this.g.get(ii(this,c))));else{c=Array.from(this.g.values());for(let v=0;v<c.length;v++)m=m.concat(c[v])}return m},s.set=function(c,m){return On(this),this.i=null,c=ii(this,c),Ni(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},s.get=function(c,m){return c?(c=this.V(c),0<c.length?String(c[0]):m):m};function So(c,m,v){Ii(c,m),0<v.length&&(c.i=null,c.g.set(ii(c,m),Z(v)),c.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var A=m[v];const Q=encodeURIComponent(String(A)),ce=this.V(A);for(A=0;A<ce.length;A++){var L=Q;ce[A]!==""&&(L+="="+encodeURIComponent(String(ce[A]))),c.push(L)}}return this.i=c.join("&")};function ii(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function lu(c,m){m&&!c.j&&(On(c),c.i=null,c.g.forEach(function(v,A){var L=A.toLowerCase();A!=L&&(Ii(this,A),So(this,L,v))},c)),c.j=m}function fr(c,m){const v=new Nn;if(g.Image){const A=new Image;A.onload=B(kn,v,"TestLoadImage: loaded",!0,m,A),A.onerror=B(kn,v,"TestLoadImage: error",!1,m,A),A.onabort=B(kn,v,"TestLoadImage: abort",!1,m,A),A.ontimeout=B(kn,v,"TestLoadImage: timeout",!1,m,A),g.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else m(!1)}function Qn(c,m){const v=new Nn,A=new AbortController,L=setTimeout(()=>{A.abort(),kn(v,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:A.signal}).then(Q=>{clearTimeout(L),Q.ok?kn(v,"TestPingServer: ok",!0,m):kn(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),kn(v,"TestPingServer: error",!1,m)})}function kn(c,m,v,A,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),A(v)}catch{}}function dr(){this.g=new sr}function si(c,m,v){const A=v||"";try{To(c,function(L,Q){let ce=L;y(L)&&(ce=Fn(L)),m.push(A+Q+"="+encodeURIComponent(ce))})}catch(L){throw m.push(A+"type="+encodeURIComponent("_badmap")),L}}function us(c){this.l=c.Ub||null,this.j=c.eb||!1}G(us,ho),us.prototype.g=function(){return new Di(this.l,this.j)},us.prototype.i=function(c){return function(){return c}}({});function Di(c,m){ht.call(this),this.D=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}G(Di,ht),s=Di.prototype,s.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=m,this.readyState=1,ai(this)},s.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(m.body=c),(this.D||g).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ri(this)),this.readyState=0},s.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ai(this)),this.g&&(this.readyState=3,ai(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wo(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function wo(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}s.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?ri(this):ai(this),this.readyState==3&&wo(this)}},s.Ra=function(c){this.g&&(this.response=this.responseText=c,ri(this))},s.Qa=function(c){this.g&&(this.response=c,ri(this))},s.ga=function(){this.g&&ri(this)};function ri(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ai(c)}s.setRequestHeader=function(c,m){this.u.append(c,m)},s.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=m.next();return c.join(`\r
`)};function ai(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Di.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function xo(c){let m="";return re(c,function(v,A){m+=A,m+=":",m+=v,m+=`\r
`}),m}function Vt(c,m,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=xo(v),typeof c=="string"?v!=null&&encodeURIComponent(String(v)):Je(c,m,v))}function Ke(c){ht.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}G(Ke,ht);var na=/^https?$/i,mr=["POST","PUT"];s=Ke.prototype,s.Ha=function(c){this.J=c},s.ea=function(c,m,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ei.g(),this.v=this.o?fo(this.o):fo(ei),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(Q){uu(this,Q);return}if(c=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var L in A)v.set(L,A[L]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Q of A.keys())v.set(Q,A.get(Q));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(Q=>Q.toLowerCase()=="content-type"),L=g.FormData&&c instanceof g.FormData,!(0<=Array.prototype.indexOf.call(mr,m,void 0))||A||L||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,ce]of v)this.g.setRequestHeader(Q,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gr(this),this.u=!0,this.g.send(c),this.u=!1}catch(Q){uu(this,Q)}};function uu(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.m=5,ia(c),oi(c)}function ia(c){c.A||(c.A=!0,$e(c,"complete"),$e(c,"error"))}s.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,$e(this,"complete"),$e(this,"abort"),oi(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),oi(this,!0)),Ke.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?sa(this):this.bb())},s.bb=function(){sa(this)};function sa(c){if(c.h&&typeof f<"u"&&(!c.v[1]||Mn(c)!=4||c.Z()!=2)){if(c.u&&Mn(c)==4)Xt(c.Ea,0,c);else if($e(c,"readystatechange"),Mn(c)==4){c.h=!1;try{const ce=c.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var A;if(A=ce===0){var L=String(c.D).match(lr)[1]||null;!L&&g.self&&g.self.location&&(L=g.self.location.protocol.slice(0,-1)),A=!na.test(L?L.toLowerCase():"")}v=A}if(v)$e(c,"complete"),$e(c,"success");else{c.m=6;try{var Q=2<Mn(c)?c.g.statusText:""}catch{Q=""}c.l=Q+" ["+c.Z()+"]",ia(c)}}finally{oi(c)}}}}function oi(c,m){if(c.g){gr(c);const v=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,m||$e(c,"ready");try{v.onreadystatechange=A}catch{}}}function gr(c){c.I&&(g.clearTimeout(c.I),c.I=null)}s.isActive=function(){return!!this.g};function Mn(c){return c.g?c.g.readyState:0}s.Z=function(){try{return 2<Mn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),Yr(m)}};function cu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Hh(c){const m={};c=(c.g&&2<=Mn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(ne(c[A]))continue;var v=I(c[A]);const L=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Q=m[L]||[];m[L]=Q,Q.push(v)}D(m,function(A){return A.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function pr(c,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||m}function ra(c){this.Aa=0,this.i=[],this.j=new Nn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=pr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=pr("baseRetryDelayMs",5e3,c),this.cb=pr("retryDelaySeedMs",1e4,c),this.Wa=pr("forwardChannelMaxRetries",2,c),this.wa=pr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new xi(c&&c.concurrentRequestLimit),this.Da=new dr,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=ra.prototype,s.la=8,s.G=1,s.connect=function(c,m,v,A){ot(0),this.W=c,this.H=m||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.I=yu(this,null,this.W),oa(this)};function Co(c){if(hu(c),c.G==3){var m=c.U++,v=En(c.I);if(Je(v,"SID",c.K),Je(v,"RID",m),Je(v,"TYPE","terminate"),yr(c,v),m=new on(c,c.j,m),m.L=2,m.v=cr(En(v)),v=!1,g.navigator&&g.navigator.sendBeacon)try{v=g.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&g.Image&&(new Image().src=m.v,v=!0),v||(m.g=vu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),ar(m)}pu(c)}function aa(c){c.g&&(vr(c),c.g.cancel(),c.g=null)}function hu(c){aa(c),c.u&&(g.clearTimeout(c.u),c.u=null),la(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&g.clearTimeout(c.s),c.s=null)}function oa(c){if(!Zr(c.h)&&!c.s){c.s=!0;var m=c.Ga;ie||M(),me||(ie(),me=!0),Ne.add(m,c),c.B=0}}function Fh(c,m){return Jr(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=m.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Tt(C(c.Ga,c,m),No(c,c.B)),c.B++,!0)}s.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new on(this,this.j,c);let Q=this.o;if(this.S&&(Q?(Q=w(Q),k(Q,this.S)):Q=this.S),this.m!==null||this.O||(L.H=Q,Q=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(m+=A,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=fu(this,L,m),v=En(this.I),Je(v,"RID",c),Je(v,"CVER",22),this.D&&Je(v,"X-HTTP-Session-Id",this.D),yr(this,v),Q&&(this.O?m="headers="+encodeURIComponent(String(xo(Q)))+"&"+m:this.m&&Vt(v,this.m,Q)),Wr(this.h,L),this.Ua&&Je(v,"TYPE","init"),this.P?(Je(v,"$req",m),Je(v,"SID","null"),L.T=!0,Gn(L,v,null)):Gn(L,v,m),this.G=2}}else this.G==3&&(c?Ro(this,c):this.i.length==0||Zr(this.h)||Ro(this))};function Ro(c,m){var v;m?v=m.l:v=c.U++;const A=En(c.I);Je(A,"SID",c.K),Je(A,"RID",v),Je(A,"AID",c.T),yr(c,A),c.m&&c.o&&Vt(A,c.m,c.o),v=new on(c,c.j,v,c.B+1),c.m===null&&(v.H=c.o),m&&(c.i=m.D.concat(c.i)),m=fu(c,v,1e3),v.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Wr(c.h,v),Gn(v,A,m)}function yr(c,m){c.H&&re(c.H,function(v,A){Je(m,A,v)}),c.l&&To({},function(v,A){Je(m,A,v)})}function fu(c,m,v){v=Math.min(c.i.length,v);var A=c.l?C(c.l.Na,c.l,c):null;e:{var L=c.i;let Q=-1;for(;;){const ce=["count="+v];Q==-1?0<v?(Q=L[0].g,ce.push("ofs="+Q)):Q=0:ce.push("ofs="+Q);let ze=!0;for(let It=0;It<v;It++){let Be=L[It].g;const Pt=L[It].map;if(Be-=Q,0>Be)Q=Math.max(0,L[It].g-100),ze=!1;else try{si(Pt,ce,"req"+Be+"_")}catch{A&&A(Pt)}}if(ze){A=ce.join("&");break e}}}return c=c.i.splice(0,v),m.D=c,A}function du(c){if(!c.g&&!c.u){c.Y=1;var m=c.Fa;ie||M(),me||(ie(),me=!0),Ne.add(m,c),c.v=0}}function Io(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Tt(C(c.Fa,c),No(c,c.v)),c.v++,!0)}s.Fa=function(){if(this.u=null,mu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Tt(C(this.ab,this),c)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ot(10),aa(this),mu(this))};function vr(c){c.A!=null&&(g.clearTimeout(c.A),c.A=null)}function mu(c){c.g=new on(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var m=En(c.qa);Je(m,"RID","rpc"),Je(m,"SID",c.K),Je(m,"AID",c.T),Je(m,"CI",c.F?"0":"1"),!c.F&&c.ja&&Je(m,"TO",c.ja),Je(m,"TYPE","xmlhttp"),yr(c,m),c.m&&c.o&&Vt(m,c.m,c.o),c.L&&(c.g.I=c.L);var v=c.g;c=c.ia,v.L=1,v.v=cr(En(m)),v.m=null,v.P=!0,wi(v,c)}s.Za=function(){this.C!=null&&(this.C=null,aa(this),Io(this),ot(19))};function la(c){c.C!=null&&(g.clearTimeout(c.C),c.C=null)}function gu(c,m){var v=null;if(c.g==m){la(c),vr(c),c.g=null;var A=2}else if(_o(c.h,m))v=m.D,ln(c.h,m),A=1;else return;if(c.G!=0){if(m.o)if(A==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var L=c.B;A=is(),$e(A,new Rt(A,v)),oa(c)}else du(c);else if(L=m.s,L==3||L==0&&0<m.X||!(A==1&&Fh(c,m)||A==2&&Io(c)))switch(v&&0<v.length&&(m=c.h,m.i=m.i.concat(v)),L){case 1:Oi(c,5);break;case 4:Oi(c,10);break;case 3:Oi(c,6);break;default:Oi(c,2)}}}function No(c,m){let v=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(v*=2),v*m}function Oi(c,m){if(c.j.info("Error code "+m),m==2){var v=C(c.fb,c),A=c.Xa;const L=!A;A=new bt(A||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||ur(A,"https"),cr(A),L?fr(A.toString(),v):Qn(A.toString(),v)}else ot(2);c.G=0,c.l&&c.l.sa(m),pu(c),hu(c)}s.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function pu(c){if(c.G=0,c.ka=[],c.l){const m=Eo(c.h);(m.length!=0||c.i.length!=0)&&(U(c.ka,m),U(c.ka,c.i),c.h.i.length=0,Z(c.i),c.i.length=0),c.l.ra()}}function yu(c,m,v){var A=v instanceof bt?En(v):new bt(v);if(A.g!="")m&&(A.g=m+"."+A.g),ls(A,A.s);else{var L=g.location;A=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;var Q=new bt(null);A&&ur(Q,A),m&&(Q.g=m),L&&ls(Q,L),v&&(Q.l=v),A=Q}return v=c.D,m=c.ya,v&&m&&Je(A,v,m),Je(A,"VER",c.la),yr(c,A),A}function vu(c,m,v){if(m&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Ca&&!c.pa?new Ke(new us({eb:v})):new Ke(c.pa),m.Ha(c.J),m}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function _u(){}s=_u.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function ua(){}ua.prototype.g=function(c,m){return new un(c,m)};function un(c,m){ht.call(this),this.g=new ra(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(c?c["X-WebChannel-Client-Profile"]=m.va:c={"X-WebChannel-Client-Profile":m.va}),this.g.S=c,(c=m&&m.Sb)&&!ne(c)&&(this.g.m=c),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!ne(m)&&(this.g.D=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new li(this)}G(un,ht),un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){Co(this.g)},un.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.u&&(v={},v.__data__=Fn(c),c=v);m.i.push(new au(m.Ya++,c)),m.G==3&&oa(m)},un.prototype.N=function(){this.g.l=null,delete this.j,Co(this.g),delete this.g,un.aa.N.call(this)};function Eu(c){Ai.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const v in m){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}G(Eu,Ai);function Tu(){go.call(this),this.status=1}G(Tu,go);function li(c){this.g=c}G(li,_u),li.prototype.ua=function(){$e(this.g,"a")},li.prototype.ta=function(c){$e(this.g,new Eu(c))},li.prototype.sa=function(c){$e(this.g,new Tu)},li.prototype.ra=function(){$e(this.g,"b")},ua.prototype.createWebChannel=ua.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,bE=function(){return new ua},TE=function(){return is()},EE=Wn,om={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},as.NO_ERROR=0,as.TIMEOUT=8,as.HTTP_ERROR=6,Oc=as,Si.COMPLETE="complete",_E=Si,mo.EventType=bi,bi.OPEN="a",bi.CLOSE="b",bi.ERROR="c",bi.MESSAGE="d",ht.prototype.listen=ht.prototype.K,_l=mo,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,vE=Ke}).apply(typeof Ac<"u"?Ac:typeof self<"u"?self:typeof window<"u"?window:{});const E_="@firebase/firestore",T_="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let en=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let so="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur=new Cm("@firebase/firestore");function ja(){return Ur.logLevel}function ge(s,...e){if(Ur.logLevel<=je.DEBUG){const n=e.map(jm);Ur.debug(`Firestore (${so}): ${s}`,...n)}}function Wi(s,...e){if(Ur.logLevel<=je.ERROR){const n=e.map(jm);Ur.error(`Firestore (${so}): ${s}`,...n)}}function $a(s,...e){if(Ur.logLevel<=je.WARN){const n=e.map(jm);Ur.warn(`Firestore (${so}): ${s}`,...n)}}function jm(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(s,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,AE(s,r,n)}function AE(s,e,n){let r=`FIRESTORE (${so}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Wi(r),new Error(r)}function Ye(s,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,s||AE(e,o,r)}function Ie(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends ns{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ex{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(en.UNAUTHENTICATED))}shutdown(){}}class Tx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class bx{constructor(e){this.t=e,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ye(this.o===void 0,42304);let r=this.i;const o=p=>this.i!==r?(r=this.i,n(p)):Promise.resolve();let u=new $i;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new $i,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const p=u;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},g=p=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(p=>g(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new $i)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ye(typeof r.accessToken=="string",31837,{l:r}),new SE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ye(e===null||typeof e=="string",2055,{h:e}),new en(e)}}class Ax{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=en.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Sx{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Ax(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(en.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class b_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wx{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ye(this.o===void 0,3512);const r=u=>{u.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,ge("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new b_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ye(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new b_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=xx(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<n&&(r+=e.charAt(o[u]%62))}return r}}function Me(s,e){return s<e?-1:s>e?1:0}function lm(s,e){let n=0;for(;n<s.length&&n<e.length;){const r=s.codePointAt(n),o=e.codePointAt(n);if(r!==o){if(r<128&&o<128)return Me(r,o);{const u=wE(),f=Cx(u.encode(A_(s,n)),u.encode(A_(e,n)));return f!==0?f:Me(r,o)}}n+=r>65535?2:1}return Me(s.length,e.length)}function A_(s,e){return s.codePointAt(e)>65535?s.substring(e,e+2):s.substring(e,e+1)}function Cx(s,e){for(let n=0;n<s.length&&n<e.length;++n)if(s[n]!==e[n])return Me(s[n],e[n]);return Me(s.length,e.length)}function Xa(s,e,n){return s.length===e.length&&s.every((r,o)=>n(r,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_=-62135596800,w_=1e6;class kt{static now(){return kt.fromMillis(Date.now())}static fromDate(e){return kt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*w_);return new kt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ye(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ye(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<S_)throw new ye(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/w_}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-S_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new kt(0,0))}static max(){return new Re(new kt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_="__name__";class gi{constructor(e,n,r){n===void 0?n=0:n>e.length&&Se(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Se(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return gi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof gi?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const u=gi.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Me(e.length,n.length)}static compareSegments(e,n){const r=gi.isNumericId(e),o=gi.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?gi.extractNumericId(e).compare(gi.extractNumericId(n)):lm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qs.fromString(e.substring(4,e.length-2))}}class rt extends gi{construct(e,n,r){return new rt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ye(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(o=>o.length>0))}return new rt(n)}static emptyPath(){return new rt([])}}const Rx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kt extends gi{construct(e,n,r){return new Kt(e,n,r)}static isValidIdentifier(e){return Rx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===x_}static keyField(){return new Kt([x_])}static fromServerFormat(e){const n=[];let r="",o=0;const u=()=>{if(r.length===0)throw new ye(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let f=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new ye(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ye(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,o+=2}else g==="`"?(f=!f,o++):g!=="."||f?(r+=g,o++):(u(),o++)}if(u(),f)throw new ye(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kt(n)}static emptyPath(){return new Kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(rt.fromString(e))}static fromName(e){return new Te(rt.fromString(e).popFirst(5))}static empty(){return new Te(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return rt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new rt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=-1;function Ix(s,e){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(r===1e9?new kt(n+1,0):new kt(n,r));return new Gs(o,Te.empty(),e)}function Nx(s){return new Gs(s.readTime,s.key,Dl)}class Gs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Gs(Re.min(),Te.empty(),Dl)}static max(){return new Gs(Re.max(),Te.empty(),Dl)}}function Dx(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=Te.comparator(s.documentKey,e.documentKey),n!==0?n:Me(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ro(s){if(s.code!==te.FAILED_PRECONDITION||s.message!==Ox)throw s;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Se(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ee((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(r,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ee?n:ee.resolve(n)}catch(n){return ee.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ee.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ee.reject(n)}static resolve(e){return new ee((n,r)=>{n(e)})}static reject(e){return new ee((n,r)=>{r(e)})}static waitFor(e){return new ee((n,r)=>{let o=0,u=0,f=!1;e.forEach(g=>{++o,g.next(()=>{++u,f&&u===o&&n()},p=>r(p))}),f=!0,u===o&&n()})}static or(e){let n=ee.resolve(!1);for(const r of e)n=n.next(o=>o?ee.resolve(o):r());return n}static forEach(e,n){const r=[];return e.forEach((o,u)=>{r.push(n.call(this,o,u))}),this.waitFor(r)}static mapArray(e,n){return new ee((r,o)=>{const u=e.length,f=new Array(u);let g=0;for(let p=0;p<u;p++){const y=p;n(e[y]).next(T=>{f[y]=T,++g,g===u&&r(f)},T=>o(T))}})}static doWhile(e,n){return new ee((r,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):r()};u()})}}function Mx(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ao(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}mh.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um=-1;function gh(s){return s==null}function Yc(s){return s===0&&1/s==-1/0}function Vx(s){return typeof s=="number"&&Number.isInteger(s)&&!Yc(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="";function Px(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=C_(e)),e=Lx(s.get(n),e);return C_(e)}function Lx(s,e){let n=e;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":n+="";break;case CE:n+="";break;default:n+=u}}return n}function C_(s){return s+CE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function Zs(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function RE(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n){this.comparator=e,this.root=n||Qt.EMPTY}insert(e,n){return new ct(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Qt.BLACK,null,null))}remove(e){return new ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sc(this.root,e,this.comparator,!0)}}class Sc{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?r(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qt{constructor(e,n,r,o,u){this.key=e,this.value=n,this.color=r??Qt.RED,this.left=o??Qt.EMPTY,this.right=u??Qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,u){return new Qt(e??this.key,n??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,r),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Qt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Se(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Se(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Se(27949);return e+(this.isRed()?0:1)}}Qt.EMPTY=null,Qt.RED=!0,Qt.BLACK=!1;Qt.EMPTY=new class{constructor(){this.size=0}get key(){throw Se(57766)}get value(){throw Se(16141)}get color(){throw Se(16727)}get left(){throw Se(29726)}get right(){throw Se(36894)}copy(e,n,r,o,u){return this}insert(e,n,r){return new Qt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.comparator=e,this.data=new ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new I_(this.data.getIterator())}getIteratorFrom(e){return new I_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Mt(this.comparator);return n.data=e,n}}class I_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.fields=e,e.sort(Kt.comparator)}static empty(){return new Rn([])}unionWith(e){let n=new Mt(Kt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Rn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new IE("Invalid base64 string: "+u):u}}(e);return new $t(n)}static fromUint8Array(e){const n=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(e);return new $t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$t.EMPTY_BYTE_STRING=new $t("");const jx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qs(s){if(Ye(!!s,39018),typeof s=="string"){let e=0;const n=jx.exec(s);if(Ye(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:vt(s.seconds),nanos:vt(s.nanos)}}function vt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Ks(s){return typeof s=="string"?$t.fromBase64String(s):$t.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="server_timestamp",DE="__type__",OE="__previous_value__",kE="__local_write_time__";function zm(s){var e,n;return((n=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[DE])===null||n===void 0?void 0:n.stringValue)===NE}function ph(s){const e=s.mapValue.fields[OE];return zm(e)?ph(e):e}function Ol(s){const e=Qs(s.mapValue.fields[kE].timestampValue);return new kt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,n,r,o,u,f,g,p,y,T){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=T}}const $c="(default)";class kl{constructor(e,n){this.projectId=e,this.database=n||$c}static empty(){return new kl("","")}get isDefaultDatabase(){return this.database===$c}isEqual(e){return e instanceof kl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="__type__",zx="__max__",wc={mapValue:{}},VE="__vector__",Xc="value";function Ys(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?zm(s)?4:qx(s)?9007199254740991:Bx(s)?10:11:Se(28295,{value:s})}function Ti(s,e){if(s===e)return!0;const n=Ys(s);if(n!==Ys(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Ol(s).isEqual(Ol(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=Qs(o.timestampValue),g=Qs(u.timestampValue);return f.seconds===g.seconds&&f.nanos===g.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(o,u){return Ks(o.bytesValue).isEqual(Ks(u.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(o,u){return vt(o.geoPointValue.latitude)===vt(u.geoPointValue.latitude)&&vt(o.geoPointValue.longitude)===vt(u.geoPointValue.longitude)}(s,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return vt(o.integerValue)===vt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=vt(o.doubleValue),g=vt(u.doubleValue);return f===g?Yc(f)===Yc(g):isNaN(f)&&isNaN(g)}return!1}(s,e);case 9:return Xa(s.arrayValue.values||[],e.arrayValue.values||[],Ti);case 10:case 11:return function(o,u){const f=o.mapValue.fields||{},g=u.mapValue.fields||{};if(R_(f)!==R_(g))return!1;for(const p in f)if(f.hasOwnProperty(p)&&(g[p]===void 0||!Ti(f[p],g[p])))return!1;return!0}(s,e);default:return Se(52216,{left:s})}}function Ml(s,e){return(s.values||[]).find(n=>Ti(n,e))!==void 0}function Za(s,e){if(s===e)return 0;const n=Ys(s),r=Ys(e);if(n!==r)return Me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Me(s.booleanValue,e.booleanValue);case 2:return function(u,f){const g=vt(u.integerValue||u.doubleValue),p=vt(f.integerValue||f.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1}(s,e);case 3:return N_(s.timestampValue,e.timestampValue);case 4:return N_(Ol(s),Ol(e));case 5:return lm(s.stringValue,e.stringValue);case 6:return function(u,f){const g=Ks(u),p=Ks(f);return g.compareTo(p)}(s.bytesValue,e.bytesValue);case 7:return function(u,f){const g=u.split("/"),p=f.split("/");for(let y=0;y<g.length&&y<p.length;y++){const T=Me(g[y],p[y]);if(T!==0)return T}return Me(g.length,p.length)}(s.referenceValue,e.referenceValue);case 8:return function(u,f){const g=Me(vt(u.latitude),vt(f.latitude));return g!==0?g:Me(vt(u.longitude),vt(f.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return D_(s.arrayValue,e.arrayValue);case 10:return function(u,f){var g,p,y,T;const x=u.fields||{},C=f.fields||{},B=(g=x[Xc])===null||g===void 0?void 0:g.arrayValue,G=(p=C[Xc])===null||p===void 0?void 0:p.arrayValue,Z=Me(((y=B==null?void 0:B.values)===null||y===void 0?void 0:y.length)||0,((T=G==null?void 0:G.values)===null||T===void 0?void 0:T.length)||0);return Z!==0?Z:D_(B,G)}(s.mapValue,e.mapValue);case 11:return function(u,f){if(u===wc.mapValue&&f===wc.mapValue)return 0;if(u===wc.mapValue)return 1;if(f===wc.mapValue)return-1;const g=u.fields||{},p=Object.keys(g),y=f.fields||{},T=Object.keys(y);p.sort(),T.sort();for(let x=0;x<p.length&&x<T.length;++x){const C=lm(p[x],T[x]);if(C!==0)return C;const B=Za(g[p[x]],y[T[x]]);if(B!==0)return B}return Me(p.length,T.length)}(s.mapValue,e.mapValue);default:throw Se(23264,{Pe:n})}}function N_(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Me(s,e);const n=Qs(s),r=Qs(e),o=Me(n.seconds,r.seconds);return o!==0?o:Me(n.nanos,r.nanos)}function D_(s,e){const n=s.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const u=Za(n[o],r[o]);if(u)return u}return Me(n.length,r.length)}function Ja(s){return um(s)}function um(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(n){const r=Qs(n);return`time(${r.seconds},${r.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(n){return Ks(n).toBase64()}(s.bytesValue):"referenceValue"in s?function(n){return Te.fromName(n).toString()}(s.referenceValue):"geoPointValue"in s?function(n){return`geo(${n.latitude},${n.longitude})`}(s.geoPointValue):"arrayValue"in s?function(n){let r="[",o=!0;for(const u of n.values||[])o?o=!1:r+=",",r+=um(u);return r+"]"}(s.arrayValue):"mapValue"in s?function(n){const r=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of r)u?u=!1:o+=",",o+=`${f}:${um(n.fields[f])}`;return o+"}"}(s.mapValue):Se(61005,{value:s})}function kc(s){switch(Ys(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ph(s);return e?16+kc(e):16;case 5:return 2*s.stringValue.length;case 6:return Ks(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,u)=>o+kc(u),0)}(s.arrayValue);case 10:case 11:return function(r){let o=0;return Zs(r.fields,(u,f)=>{o+=u.length+kc(f)}),o}(s.mapValue);default:throw Se(13486,{value:s})}}function O_(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function cm(s){return!!s&&"integerValue"in s}function Bm(s){return!!s&&"arrayValue"in s}function k_(s){return!!s&&"nullValue"in s}function M_(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Mc(s){return!!s&&"mapValue"in s}function Bx(s){var e,n;return((n=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{})[ME])===null||n===void 0?void 0:n.stringValue)===VE}function wl(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return Zs(s.mapValue.fields,(n,r)=>e.mapValue.fields[n]=wl(r)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=wl(s.arrayValue.values[n]);return e}return Object.assign({},s)}function qx(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===zx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.value=e}static empty(){return new pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Mc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=wl(n)}setAll(e){let n=Kt.emptyPath(),r={},o=[];e.forEach((f,g)=>{if(!n.isImmediateParentOf(g)){const p=this.getFieldsMap(n);this.applyChanges(p,r,o),r={},o=[],n=g.popLast()}f?r[g.lastSegment()]=wl(f):o.push(g.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,r,o)}delete(e){const n=this.field(e.popLast());Mc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ti(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];Mc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){Zs(n,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new pn(wl(this.value))}}function PE(s){const e=[];return Zs(s.fields,(n,r)=>{const o=new Kt([n]);if(Mc(r)){const u=PE(r.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)}),new Rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,n,r,o,u,f,g){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=u,this.data=f,this.documentState=g}static newInvalidDocument(e){return new tn(e,0,Re.min(),Re.min(),Re.min(),pn.empty(),0)}static newFoundDocument(e,n,r,o){return new tn(e,1,n,Re.min(),r,o,0)}static newNoDocument(e,n){return new tn(e,2,n,Re.min(),Re.min(),pn.empty(),0)}static newUnknownDocument(e,n){return new tn(e,3,n,Re.min(),Re.min(),pn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n){this.position=e,this.inclusive=n}}function V_(s,e,n){let r=0;for(let o=0;o<s.position.length;o++){const u=e[o],f=s.position[o];if(u.field.isKeyField()?r=Te.comparator(Te.fromName(f.referenceValue),n.key):r=Za(f,n.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function P_(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Ti(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n="asc"){this.field=e,this.dir=n}}function Hx(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{}class xt extends LE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Gx(e,n,r):n==="array-contains"?new Yx(e,r):n==="in"?new $x(e,r):n==="not-in"?new Xx(e,r):n==="array-contains-any"?new Zx(e,r):new xt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Qx(e,r):new Kx(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Za(n,this.value)):n!==null&&Ys(this.value)===Ys(n)&&this.matchesComparison(Za(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jn extends LE{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new Jn(e,n)}matches(e){return jE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function jE(s){return s.op==="and"}function UE(s){return Fx(s)&&jE(s)}function Fx(s){for(const e of s.filters)if(e instanceof Jn)return!1;return!0}function hm(s){if(s instanceof xt)return s.field.canonicalString()+s.op.toString()+Ja(s.value);if(UE(s))return s.filters.map(e=>hm(e)).join(",");{const e=s.filters.map(n=>hm(n)).join(",");return`${s.op}(${e})`}}function zE(s,e){return s instanceof xt?function(r,o){return o instanceof xt&&r.op===o.op&&r.field.isEqual(o.field)&&Ti(r.value,o.value)}(s,e):s instanceof Jn?function(r,o){return o instanceof Jn&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((u,f,g)=>u&&zE(f,o.filters[g]),!0):!1}(s,e):void Se(19439)}function BE(s){return s instanceof xt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ja(n.value)}`}(s):s instanceof Jn?function(n){return n.op.toString()+" {"+n.getFilters().map(BE).join(" ,")+"}"}(s):"Filter"}class Gx extends xt{constructor(e,n,r){super(e,n,r),this.key=Te.fromName(r.referenceValue)}matches(e){const n=Te.comparator(e.key,this.key);return this.matchesComparison(n)}}class Qx extends xt{constructor(e,n){super(e,"in",n),this.keys=qE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Kx extends xt{constructor(e,n){super(e,"not-in",n),this.keys=qE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function qE(s,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Te.fromName(r.referenceValue))}class Yx extends xt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Bm(n)&&Ml(n.arrayValue,this.value)}}class $x extends xt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ml(this.value.arrayValue,n)}}class Xx extends xt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ml(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ml(this.value.arrayValue,n)}}class Zx extends xt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Bm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ml(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,n=null,r=[],o=[],u=null,f=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=f,this.endAt=g,this.Ie=null}}function L_(s,e=null,n=[],r=[],o=null,u=null,f=null){return new Jx(s,e,n,r,o,u,f)}function qm(s){const e=Ie(s);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>hm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(u){return u.field.canonicalString()+u.dir}(r)).join(","),gh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ja(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ja(r)).join(",")),e.Ie=n}return e.Ie}function Hm(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!Hx(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!zE(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!P_(s.startAt,e.startAt)&&P_(s.endAt,e.endAt)}function fm(s){return Te.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n=null,r=[],o=[],u=null,f="F",g=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=f,this.startAt=g,this.endAt=p,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function Wx(s,e,n,r,o,u,f,g){return new Gl(s,e,n,r,o,u,f,g)}function yh(s){return new Gl(s)}function j_(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function HE(s){return s.collectionGroup!==null}function xl(s){const e=Ie(s);if(e.Ee===null){e.Ee=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ee.push(u),n.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let g=new Mt(Kt.comparator);return f.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(g=g.add(y.field))})}),g})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ee.push(new Jc(u,r))}),n.has(Kt.keyField().canonicalString())||e.Ee.push(new Jc(Kt.keyField(),r))}return e.Ee}function vi(s){const e=Ie(s);return e.de||(e.de=eC(e,xl(s))),e.de}function eC(s,e){if(s.limitType==="F")return L_(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new Jc(o.field,u)});const n=s.endAt?new Zc(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Zc(s.startAt.position,s.startAt.inclusive):null;return L_(s.path,s.collectionGroup,e,s.filters,s.limit,n,r)}}function dm(s,e){const n=s.filters.concat([e]);return new Gl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function mm(s,e,n){return new Gl(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function vh(s,e){return Hm(vi(s),vi(e))&&s.limitType===e.limitType}function FE(s){return`${qm(vi(s))}|lt:${s.limitType}`}function Ua(s){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(o=>BE(o)).join(", ")}]`),gh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(o=>Ja(o)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(o=>Ja(o)).join(",")),`Target(${r})`}(vi(s))}; limitType=${s.limitType})`}function _h(s,e){return e.isFoundDocument()&&function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):Te.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)}(s,e)&&function(r,o){for(const u of xl(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(s,e)&&function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0}(s,e)&&function(r,o){return!(r.startAt&&!function(f,g,p){const y=V_(f,g,p);return f.inclusive?y<=0:y<0}(r.startAt,xl(r),o)||r.endAt&&!function(f,g,p){const y=V_(f,g,p);return f.inclusive?y>=0:y>0}(r.endAt,xl(r),o))}(s,e)}function tC(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function GE(s){return(e,n)=>{let r=!1;for(const o of xl(s)){const u=nC(o,e,n);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function nC(s,e,n){const r=s.field.isKeyField()?Te.comparator(e.key,n.key):function(u,f,g){const p=f.data.field(u),y=g.data.field(u);return p!==null&&y!==null?Za(p,y):Se(42886)}(s.field,e,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return Se(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Zs(this.inner,(n,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return RE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=new ct(Te.comparator);function es(){return iC}const QE=new ct(Te.comparator);function El(...s){let e=QE;for(const n of s)e=e.insert(n.key,n);return e}function KE(s){let e=QE;return s.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Vr(){return Cl()}function YE(){return Cl()}function Cl(){return new Hr(s=>s.toString(),(s,e)=>s.isEqual(e))}const sC=new ct(Te.comparator),rC=new Mt(Te.comparator);function Ue(...s){let e=rC;for(const n of s)e=e.add(n);return e}const aC=new Mt(Me);function oC(){return aC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yc(e)?"-0":e}}function $E(s){return{integerValue:""+s}}function lC(s,e){return Vx(e)?$E(e):Fm(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(){this._=void 0}}function uC(s,e,n){return s instanceof Wc?function(o,u){const f={fields:{[DE]:{stringValue:NE},[kE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&zm(u)&&(u=ph(u)),u&&(f.fields[OE]=u),{mapValue:f}}(n,e):s instanceof Vl?ZE(s,e):s instanceof Pl?JE(s,e):function(o,u){const f=XE(o,u),g=U_(f)+U_(o.Re);return cm(f)&&cm(o.Re)?$E(g):Fm(o.serializer,g)}(s,e)}function cC(s,e,n){return s instanceof Vl?ZE(s,e):s instanceof Pl?JE(s,e):n}function XE(s,e){return s instanceof eh?function(r){return cm(r)||function(u){return!!u&&"doubleValue"in u}(r)}(e)?e:{integerValue:0}:null}class Wc extends Eh{}class Vl extends Eh{constructor(e){super(),this.elements=e}}function ZE(s,e){const n=WE(e);for(const r of s.elements)n.some(o=>Ti(o,r))||n.push(r);return{arrayValue:{values:n}}}class Pl extends Eh{constructor(e){super(),this.elements=e}}function JE(s,e){let n=WE(e);for(const r of s.elements)n=n.filter(o=>!Ti(o,r));return{arrayValue:{values:n}}}class eh extends Eh{constructor(e,n){super(),this.serializer=e,this.Re=n}}function U_(s){return vt(s.integerValue||s.doubleValue)}function WE(s){return Bm(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function hC(s,e){return s.field.isEqual(e.field)&&function(r,o){return r instanceof Vl&&o instanceof Vl||r instanceof Pl&&o instanceof Pl?Xa(r.elements,o.elements,Ti):r instanceof eh&&o instanceof eh?Ti(r.Re,o.Re):r instanceof Wc&&o instanceof Wc}(s.transform,e.transform)}class fC{constructor(e,n){this.version=e,this.transformResults=n}}class qn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new qn}static exists(e){return new qn(void 0,e)}static updateTime(e){return new qn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vc(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Th{}function eT(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Gm(s.key,qn.none()):new Ql(s.key,s.data,qn.none());{const n=s.data,r=pn.empty();let o=new Mt(Kt.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?r.delete(u):r.set(u,f),o=o.add(u)}return new Js(s.key,r,new Rn(o.toArray()),qn.none())}}function dC(s,e,n){s instanceof Ql?function(o,u,f){const g=o.value.clone(),p=B_(o.fieldTransforms,u,f.transformResults);g.setAll(p),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()}(s,e,n):s instanceof Js?function(o,u,f){if(!Vc(o.precondition,u))return void u.convertToUnknownDocument(f.version);const g=B_(o.fieldTransforms,u,f.transformResults),p=u.data;p.setAll(tT(o)),p.setAll(g),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()}(s,e,n):function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function Rl(s,e,n,r){return s instanceof Ql?function(u,f,g,p){if(!Vc(u.precondition,f))return g;const y=u.value.clone(),T=q_(u.fieldTransforms,p,f);return y.setAll(T),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null}(s,e,n,r):s instanceof Js?function(u,f,g,p){if(!Vc(u.precondition,f))return g;const y=q_(u.fieldTransforms,p,f),T=f.data;return T.setAll(tT(u)),T.setAll(y),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),g===null?null:g.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(x=>x.field))}(s,e,n,r):function(u,f,g){return Vc(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):g}(s,e,n)}function mC(s,e){let n=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),u=XE(r.transform,o||null);u!=null&&(n===null&&(n=pn.empty()),n.set(r.field,u))}return n||null}function z_(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Xa(r,o,(u,f)=>hC(u,f))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Ql extends Th{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Js extends Th{constructor(e,n,r,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function tT(s){const e=new Map;return s.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=s.data.field(n);e.set(n,r)}}),e}function B_(s,e,n){const r=new Map;Ye(s.length===n.length,32656,{Ve:n.length,me:s.length});for(let o=0;o<n.length;o++){const u=s[o],f=u.transform,g=e.data.field(u.field);r.set(u.field,cC(f,g,n[o]))}return r}function q_(s,e,n){const r=new Map;for(const o of s){const u=o.transform,f=n.data.field(o.field);r.set(o.field,uC(u,f,e))}return r}class Gm extends Th{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gC extends Th{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&dC(u,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Rl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Rl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=YE();return this.mutations.forEach(o=>{const u=e.get(o.key),f=u.overlayedDocument;let g=this.applyToLocalView(f,u.mutatedFields);g=n.has(o.key)?null:g;const p=eT(f,g);p!==null&&r.set(o.key,p),f.isValidDocument()||f.convertToNoDocument(Re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ue())}isEqual(e){return this.batchId===e.batchId&&Xa(this.mutations,e.mutations,(n,r)=>z_(n,r))&&Xa(this.baseMutations,e.baseMutations,(n,r)=>z_(n,r))}}class Qm{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){Ye(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let o=function(){return sC}();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,r[f].version);return new Qm(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt,He;function _C(s){switch(s){case te.OK:return Se(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Se(15467,{code:s})}}function nT(s){if(s===void 0)return Wi("GRPC error has no .code"),te.UNKNOWN;switch(s){case wt.OK:return te.OK;case wt.CANCELLED:return te.CANCELLED;case wt.UNKNOWN:return te.UNKNOWN;case wt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case wt.INTERNAL:return te.INTERNAL;case wt.UNAVAILABLE:return te.UNAVAILABLE;case wt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case wt.NOT_FOUND:return te.NOT_FOUND;case wt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case wt.ABORTED:return te.ABORTED;case wt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case wt.DATA_LOSS:return te.DATA_LOSS;default:return Se(39323,{code:s})}}(He=wt||(wt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=new qs([4294967295,4294967295],0);function H_(s){const e=wE().encode(s),n=new yE;return n.update(e),new Uint8Array(n.digest())}function F_(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new qs([n,r],0),new qs([o,u],0)]}class Km{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Tl(`Invalid padding: ${n}`);if(r<0)throw new Tl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Tl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Tl(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=qs.fromNumber(this.pe)}we(e,n,r){let o=e.add(n.multiply(qs.fromNumber(r)));return o.compare(EC)===1&&(o=new qs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const n=H_(e),[r,o]=F_(n);for(let u=0;u<this.hashCount;u++){const f=this.we(r,o,u);if(!this.be(f))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Km(u,o,n);return r.forEach(g=>f.insert(g)),f}insert(e){if(this.pe===0)return;const n=H_(e),[r,o]=F_(n);for(let u=0;u<this.hashCount;u++){const f=this.we(r,o,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Tl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,n,r,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,Kl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new bh(Re.min(),o,new ct(Me),es(),Ue())}}class Kl{constructor(e,n,r,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Kl(r,n,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,n,r,o){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=o}}class iT{constructor(e,n){this.targetId=e,this.Ce=n}}class sT{constructor(e,n,r=$t.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class G_{constructor(){this.Fe=0,this.Me=Q_(),this.xe=$t.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Ue(),n=Ue(),r=Ue();return this.Me.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:Se(38017,{changeType:u})}}),new Kl(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=Q_()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Ye(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class TC{constructor(e){this.ze=e,this.je=new Map,this.He=es(),this.Je=xc(),this.Ye=xc(),this.Ze=new ct(Me)}Xe(e){for(const n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(const n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{const r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:Se(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,o)=>{this.it(o)&&n(o)})}ot(e){const n=e.targetId,r=e.Ce.count,o=this._t(n);if(o){const u=o.target;if(fm(u))if(r===0){const f=new Te(u.path);this.tt(n,f,tn.newNoDocument(f,Re.min()))}else Ye(r===1,20013,{expectedCount:r});else{const f=this.ut(n);if(f!==r){const g=this.ct(e),p=g?this.lt(g,e,f):1;if(p!==0){this.st(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ct(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=n;let f,g;try{f=Ks(r).toUint8Array()}catch(p){if(p instanceof IE)return $a("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new Km(f,o,u)}catch(p){return $a(p instanceof Tl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.pe===0?null:g}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){const r=this.ze.getRemoteKeysForTarget(n);let o=0;return r.forEach(u=>{const f=this.ze.Pt(),g=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(g)||(this.tt(n,u,null),o++)}),o}It(e){const n=new Map;this.je.forEach((u,f)=>{const g=this._t(f);if(g){if(u.current&&fm(g.target)){const p=new Te(g.target.path);this.Et(p).has(f)||this.dt(f,p)||this.tt(f,p,tn.newNoDocument(p,e))}u.Le&&(n.set(f,u.qe()),u.Qe())}});let r=Ue();this.Ye.forEach((u,f)=>{let g=!0;f.forEachWhile(p=>{const y=this._t(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(r=r.add(u))}),this.He.forEach((u,f)=>f.setReadTime(e));const o=new bh(e,n,this.Ze,this.He,r);return this.He=es(),this.Je=xc(),this.Ye=xc(),this.Ze=new ct(Me),o}et(e,n){if(!this.it(e))return;const r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;const o=this.rt(e);this.dt(e,n)?o.$e(n,1):o.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){const n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new G_,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Mt(Me),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Mt(Me),this.Je=this.Je.insert(e,n)),n}it(e){const n=this._t(e)!==null;return n||ge("WatchChangeAggregator","Detected inactive target",e),n}_t(e){const n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new G_),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}}function xc(){return new ct(Te.comparator)}function Q_(){return new ct(Te.comparator)}const bC={asc:"ASCENDING",desc:"DESCENDING"},AC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},SC={and:"AND",or:"OR"};class wC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function gm(s,e){return s.useProto3Json||gh(e)?e:{value:e}}function th(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rT(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function xC(s,e){return th(s,e.toTimestamp())}function _i(s){return Ye(!!s,49232),Re.fromTimestamp(function(n){const r=Qs(n);return new kt(r.seconds,r.nanos)}(s))}function Ym(s,e){return pm(s,e).canonicalString()}function pm(s,e){const n=function(o){return new rt(["projects",o.projectId,"databases",o.database])}(s).child("documents");return e===void 0?n:n.child(e)}function aT(s){const e=rt.fromString(s);return Ye(hT(e),10190,{key:e.toString()}),e}function ym(s,e){return Ym(s.databaseId,e.path)}function $d(s,e){const n=aT(e);if(n.get(1)!==s.databaseId.projectId)throw new ye(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new ye(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Te(lT(n))}function oT(s,e){return Ym(s.databaseId,e)}function CC(s){const e=aT(s);return e.length===4?rt.emptyPath():lT(e)}function vm(s){return new rt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function lT(s){return Ye(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function K_(s,e,n){return{name:ym(s,e),fields:n.value.mapValue.fields}}function RC(s,e){let n;if("targetChange"in e){e.targetChange;const r=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Se(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(y,T){return y.useProto3Json?(Ye(T===void 0||typeof T=="string",58123),$t.fromBase64String(T||"")):(Ye(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),$t.fromUint8Array(T||new Uint8Array))}(s,e.targetChange.resumeToken),f=e.targetChange.cause,g=f&&function(y){const T=y.code===void 0?te.UNKNOWN:nT(y.code);return new ye(T,y.message||"")}(f);n=new sT(r,o,u,g||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=$d(s,r.document.name),u=_i(r.document.updateTime),f=r.document.createTime?_i(r.document.createTime):Re.min(),g=new pn({mapValue:{fields:r.document.fields}}),p=tn.newFoundDocument(o,u,f,g),y=r.targetIds||[],T=r.removedTargetIds||[];n=new Pc(y,T,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=$d(s,r.document),u=r.readTime?_i(r.readTime):Re.min(),f=tn.newNoDocument(o,u),g=r.removedTargetIds||[];n=new Pc([],g,f.key,f)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=$d(s,r.document),u=r.removedTargetIds||[];n=new Pc([],u,o,null)}else{if(!("filter"in e))return Se(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,f=new vC(o,u),g=r.targetId;n=new iT(g,f)}}return n}function IC(s,e){let n;if(e instanceof Ql)n={update:K_(s,e.key,e.value)};else if(e instanceof Gm)n={delete:ym(s,e.key)};else if(e instanceof Js)n={update:K_(s,e.key,e.data),updateMask:jC(e.fieldMask)};else{if(!(e instanceof gC))return Se(16599,{ft:e.type});n={verify:ym(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(u,f){const g=f.transform;if(g instanceof Wc)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Vl)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Pl)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof eh)return{fieldPath:f.field.canonicalString(),increment:g.Re};throw Se(20930,{transform:f.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:xC(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Se(27497)}(s,e.precondition)),n}function NC(s,e){return s&&s.length>0?(Ye(e!==void 0,14353),s.map(n=>function(o,u){let f=o.updateTime?_i(o.updateTime):_i(u);return f.isEqual(Re.min())&&(f=_i(u)),new fC(f,o.transformResults||[])}(n,e))):[]}function DC(s,e){return{documents:[oT(s,e.path)]}}function OC(s,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=oT(s,o);const u=function(y){if(y.length!==0)return cT(Jn.create(y,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const f=function(y){if(y.length!==0)return y.map(T=>function(C){return{field:za(C.field),direction:VC(C.dir)}}(T))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const g=gm(s,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{gt:n,parent:o}}function kC(s){let e=CC(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){Ye(r===1,65062);const T=n.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let u=[];n.where&&(u=function(x){const C=uT(x);return C instanceof Jn&&UE(C)?C.getFilters():[C]}(n.where));let f=[];n.orderBy&&(f=function(x){return x.map(C=>function(G){return new Jc(Ba(G.field),function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(G.direction))}(C))}(n.orderBy));let g=null;n.limit&&(g=function(x){let C;return C=typeof x=="object"?x.value:x,gh(C)?null:C}(n.limit));let p=null;n.startAt&&(p=function(x){const C=!!x.before,B=x.values||[];return new Zc(B,C)}(n.startAt));let y=null;return n.endAt&&(y=function(x){const C=!x.before,B=x.values||[];return new Zc(B,C)}(n.endAt)),Wx(e,o,f,u,g,"F",p,y)}function MC(s,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function uT(s){return s.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ba(n.unaryFilter.field);return xt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Ba(n.unaryFilter.field);return xt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Ba(n.unaryFilter.field);return xt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Ba(n.unaryFilter.field);return xt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Se(61313);default:return Se(60726)}}(s):s.fieldFilter!==void 0?function(n){return xt.create(Ba(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Se(58110);default:return Se(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(n){return Jn.create(n.compositeFilter.filters.map(r=>uT(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Se(1026)}}(n.compositeFilter.op))}(s):Se(30097,{filter:s})}function VC(s){return bC[s]}function PC(s){return AC[s]}function LC(s){return SC[s]}function za(s){return{fieldPath:s.canonicalString()}}function Ba(s){return Kt.fromServerFormat(s.fieldPath)}function cT(s){return s instanceof xt?function(n){if(n.op==="=="){if(M_(n.value))return{unaryFilter:{field:za(n.field),op:"IS_NAN"}};if(k_(n.value))return{unaryFilter:{field:za(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(M_(n.value))return{unaryFilter:{field:za(n.field),op:"IS_NOT_NAN"}};if(k_(n.value))return{unaryFilter:{field:za(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:za(n.field),op:PC(n.op),value:n.value}}}(s):s instanceof Jn?function(n){const r=n.getFilters().map(o=>cT(o));return r.length===1?r[0]:{compositeFilter:{op:LC(n.op),filters:r}}}(s):Se(54877,{filter:s})}function jC(s){const e=[];return s.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function hT(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,n,r,o,u=Re.min(),f=Re.min(),g=$t.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(e){return new Ls(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ls(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ls(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ls(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e){this.wt=e}}function zC(s){const e=kC({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?mm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(){this.Cn=new qC}addToCollectionParentIndex(e,n){return this.Cn.add(n),ee.resolve()}getCollectionParents(e,n){return ee.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ee.resolve()}deleteFieldIndex(e,n){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,n){return ee.resolve()}getDocumentsMatchingTarget(e,n){return ee.resolve(null)}getIndexType(e,n){return ee.resolve(0)}getFieldIndexes(e,n){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,n){return ee.resolve(Gs.min())}getMinOffsetFromCollectionGroup(e,n){return ee.resolve(Gs.min())}updateCollectionGroup(e,n,r){return ee.resolve()}updateIndexEntries(e,n){return ee.resolve()}}class qC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new Mt(rt.comparator),u=!o.has(r);return this.index[n]=o.add(r),u}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Mt(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fT=41943040;class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(fT,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Wa(0)}static lr(){return new Wa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="LruGarbageCollector",HC=1048576;function X_([s,e],[n,r]){const o=Me(s,n);return o===0?Me(e,r):o}class FC{constructor(e){this.Er=e,this.buffer=new Mt(X_),this.dr=0}Ar(){return++this.dr}Rr(e){const n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();X_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class GC{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){ge($_,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ao(n)?ge($_,"Ignoring IndexedDB error during garbage collection: ",n):await ro(n)}await this.mr(3e5)})}}class QC{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return ee.resolve(mh.le);const r=new FC(n);return this.gr.forEachTarget(e,o=>r.Rr(o.sequenceNumber)).next(()=>this.gr.yr(e,o=>r.Rr(o))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(Y_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Y_):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,o,u,f,g,p,y;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(x=>(x>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,f=Date.now(),this.nthSequenceNumber(e,o))).next(x=>(r=x,g=Date.now(),this.removeTargets(e,r,n))).next(x=>(u=x,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(x=>(y=Date.now(),ja()<=je.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-T}ms
	Determined least recently used ${o} in `+(g-f)+`ms
	Removed ${u} targets in `+(p-g)+`ms
	Removed ${x} documents in `+(y-p)+`ms
Total Duration: ${y-T}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:x})))}}function KC(s,e){return new QC(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(){this.changes=new Hr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ee.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(r!==null&&Rl(r.mutation,o,Rn.empty(),kt.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ue()){const o=Vr();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,r).next(u=>{let f=El();return u.forEach((g,p)=>{f=f.insert(g,p.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const r=Vr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ue()))}populateOverlays(e,n,r){const o=[];return r.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((f,g)=>{n.set(f,g)})})}computeViews(e,n,r,o){let u=es();const f=Cl(),g=function(){return Cl()}();return n.forEach((p,y)=>{const T=r.get(y.key);o.has(y.key)&&(T===void 0||T.mutation instanceof Js)?u=u.insert(y.key,y):T!==void 0?(f.set(y.key,T.mutation.getFieldMask()),Rl(T.mutation,y,T.mutation.getFieldMask(),kt.now())):f.set(y.key,Rn.empty())}),this.recalculateAndSaveOverlays(e,u).next(p=>(p.forEach((y,T)=>f.set(y,T)),n.forEach((y,T)=>{var x;return g.set(y,new $C(T,(x=f.get(y))!==null&&x!==void 0?x:null))}),g))}recalculateAndSaveOverlays(e,n){const r=Cl();let o=new ct((f,g)=>f-g),u=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const g of f)g.keys().forEach(p=>{const y=n.get(p);if(y===null)return;let T=r.get(p)||Rn.empty();T=g.applyToLocalView(y,T),r.set(p,T);const x=(o.get(g.batchId)||Ue()).add(p);o=o.insert(g.batchId,x)})}).next(()=>{const f=[],g=o.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),y=p.key,T=p.value,x=YE();T.forEach(C=>{if(!u.has(C)){const B=eT(n.get(C),r.get(C));B!==null&&x.set(C,B),u=u.add(C)}}),f.push(this.documentOverlayCache.saveOverlays(e,y,x))}return ee.waitFor(f)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,o){return function(f){return Te.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):HE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next(u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-u.size):ee.resolve(Vr());let g=Dl,p=u;return f.next(y=>ee.forEach(y,(T,x)=>(g<x.largestBatchId&&(g=x.largestBatchId),u.get(T)?ee.resolve():this.remoteDocumentCache.getEntry(e,T).next(C=>{p=p.insert(T,C)}))).next(()=>this.populateOverlays(e,y,u)).next(()=>this.computeViews(e,p,y,Ue())).next(T=>({batchId:g,changes:KE(T)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Te(n)).next(r=>{let o=El();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const u=n.collectionGroup;let f=El();return this.indexManager.getCollectionParents(e,u).next(g=>ee.forEach(g,p=>{const y=function(x,C){return new Gl(C,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)}(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,r,o).next(T=>{T.forEach((x,C)=>{f=f.insert(x,C)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,u,o))).next(f=>{u.forEach((p,y)=>{const T=y.getKey();f.get(T)===null&&(f=f.insert(T,tn.newInvalidDocument(T)))});let g=El();return f.forEach((p,y)=>{const T=u.get(p);T!==void 0&&Rl(T.mutation,y,Rn.empty(),kt.now()),_h(n,y)&&(g=g.insert(p,y))}),g})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return ee.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:_i(o.createTime)}}(n)),ee.resolve()}getNamedQuery(e,n){return ee.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(o){return{name:o.name,query:zC(o.bundledQuery),readTime:_i(o.readTime)}}(n)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this.overlays=new ct(Te.comparator),this.Qr=new Map}getOverlay(e,n){return ee.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Vr();return ee.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&r.set(o,u)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((o,u)=>{this.St(e,n,u)}),ee.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.Qr.get(r);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.Qr.delete(r)),ee.resolve()}getOverlaysForCollection(e,n,r){const o=Vr(),u=n.length+1,f=new Te(n.child("")),g=this.overlays.getIteratorFrom(f);for(;g.hasNext();){const p=g.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&p.largestBatchId>r&&o.set(p.getKey(),p)}return ee.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let u=new ct((y,T)=>y-T);const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>r){let T=u.get(y.largestBatchId);T===null&&(T=Vr(),u=u.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const g=Vr(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,T)=>g.set(y,T)),!(g.size()>=o)););return ee.resolve(g)}St(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const f=this.Qr.get(o.largestBatchId).delete(r.key);this.Qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new yC(n,r));let u=this.Qr.get(n);u===void 0&&(u=Ue(),this.Qr.set(n,u)),this.Qr.set(n,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(){this.sessionToken=$t.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{constructor(){this.$r=new Mt(zt.Ur),this.Kr=new Mt(zt.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){const r=new zt(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new zt(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){const n=new Te(new rt([])),r=new zt(n,e),o=new zt(n,e+1),u=[];return this.Kr.forEachInRange([r,o],f=>{this.zr(f),u.push(f.key)}),u}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const n=new Te(new rt([])),r=new zt(n,e),o=new zt(n,e+1);let u=Ue();return this.Kr.forEachInRange([r,o],f=>{u=u.add(f.key)}),u}containsKey(e){const n=new zt(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class zt{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return Te.comparator(e.key,n.key)||Me(e.Zr,n.Zr)}static Wr(e,n){return Me(e.Zr,n.Zr)||Te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Mt(zt.Ur)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const u=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new pC(u,n,r,o);this.mutationQueue.push(f);for(const g of o)this.Xr=this.Xr.add(new zt(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ee.resolve(f)}lookupMutationBatch(e,n){return ee.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.ti(r),u=o<0?0:o;return ee.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?Um:this.nr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new zt(n,0),o=new zt(n,Number.POSITIVE_INFINITY),u=[];return this.Xr.forEachInRange([r,o],f=>{const g=this.ei(f.Zr);u.push(g)}),ee.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Mt(Me);return n.forEach(o=>{const u=new zt(o,0),f=new zt(o,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([u,f],g=>{r=r.add(g.Zr)})}),ee.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let u=r;Te.isDocumentKey(u)||(u=u.child(""));const f=new zt(new Te(u),0);let g=new Mt(Me);return this.Xr.forEachWhile(p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(g=g.add(p.Zr)),!0)},f),ee.resolve(this.ni(g))}ni(e){const n=[];return e.forEach(r=>{const o=this.ei(r);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){Ye(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return ee.forEach(n.mutations,o=>{const u=new zt(o.key,n.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){const r=new zt(n,0),o=this.Xr.firstAfterOrEqual(r);return ee.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e){this.ii=e,this.docs=function(){return new ct(Te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),u=o?o.size:0,f=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ee.resolve(r?r.document.mutableCopy():tn.newInvalidDocument(n))}getEntries(e,n){let r=es();return n.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():tn.newInvalidDocument(o))}),ee.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let u=es();const f=n.path,g=new Te(f.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:y,value:{document:T}}=p.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||Dx(Nx(T),r)<=0||(o.has(T.key)||_h(n,T))&&(u=u.insert(T.key,T.mutableCopy()))}return ee.resolve(u)}getAllFromCollectionGroup(e,n,r,o){Se(9500)}si(e,n){return ee.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new n2(this)}getSize(e){return ee.resolve(this.size)}}class n2 extends YC{constructor(e){super(),this.Br=e}applyChanges(e){const n=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?n.push(this.Br.addEntry(e,o)):this.Br.removeEntry(r)}),ee.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e){this.persistence=e,this.oi=new Hr(n=>qm(n),Hm),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this._i=0,this.ai=new $m,this.targetCount=0,this.ui=Wa.cr()}forEachTarget(e,n){return this.oi.forEach((r,o)=>n(o)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),ee.resolve()}Tr(e){this.oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ui=new Wa(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,ee.resolve()}updateTargetData(e,n){return this.Tr(n),ee.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,n,r){let o=0;const u=[];return this.oi.forEach((f,g)=>{g.sequenceNumber<=n&&r.get(g.targetId)===null&&(this.oi.delete(f),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),ee.waitFor(u).next(()=>o)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,n){const r=this.oi.get(n)||null;return ee.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),ee.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(f=>{u.push(o.markPotentiallyOrphaned(e,f))}),ee.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),ee.resolve()}getMatchingKeysForTargetId(e,n){const r=this.ai.Yr(n);return ee.resolve(r)}containsKey(e,n){return ee.resolve(this.ai.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,n){this.ci={},this.overlays={},this.li=new mh(0),this.hi=!1,this.hi=!0,this.Pi=new WC,this.referenceDelegate=e(this),this.Ti=new i2(this),this.indexManager=new BC,this.remoteDocumentCache=function(o){return new t2(o)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new UC(n),this.Ei=new ZC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new JC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new e2(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){ge("MemoryPersistence","Starting transaction:",e);const o=new s2(this.li.next());return this.referenceDelegate.di(),r(o).next(u=>this.referenceDelegate.Ai(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ri(e,n){return ee.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}}class s2 extends kx{constructor(e){super(),this.currentSequenceNumber=e}}class Xm{constructor(e){this.persistence=e,this.Vi=new $m,this.mi=null}static fi(e){return new Xm(e)}get gi(){if(this.mi)return this.mi;throw Se(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),ee.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),ee.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(o=>this.gi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.gi.add(u.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.gi,r=>{const o=Te.fromPath(r);return this.pi(e,o).next(u=>{u||n.removeEntry(o,Re.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return ee.or([()=>ee.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}}class nh{constructor(e,n){this.persistence=e,this.yi=new Hr(r=>Px(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=KC(this,n)}static fi(e,n){return new nh(e,n)}di(){}Ai(e){return ee.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){const n=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(o=>r+o))}br(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return ee.forEach(this.yi,(r,o)=>this.Dr(e,r,o).next(u=>u?ee.resolve():n(o)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.si(e,f=>this.Dr(e,f,n).next(g=>{g||(r++,u.removeEntry(f,Re.min()))})).next(()=>u.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),ee.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),ee.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),ee.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=kc(e.data.value)),n}Dr(e,n,r){return ee.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.yi.get(n);return ee.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.ds=r,this.As=o}static Rs(e,n){let r=Ue(),o=Ue();for(const u of n.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Zm(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return e1()?8:Mx(rn())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,o){const u={result:null};return this.ws(e,n).next(f=>{u.result=f}).next(()=>{if(!u.result)return this.bs(e,n,o,r).next(f=>{u.result=f})}).next(()=>{if(u.result)return;const f=new r2;return this.Ss(e,n,f).next(g=>{if(u.result=g,this.fs)return this.Ds(e,n,f,g.size)})}).next(()=>u.result)}Ds(e,n,r,o){return r.documentReadCount<this.gs?(ja()<=je.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Ua(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),ee.resolve()):(ja()<=je.DEBUG&&ge("QueryEngine","Query:",Ua(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.ps*o?(ja()<=je.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Ua(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vi(n))):ee.resolve())}ws(e,n){if(j_(n))return ee.resolve(null);let r=vi(n);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=mm(n,null,"F"),r=vi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const f=Ue(...u);return this.ys.getDocuments(e,f).next(g=>this.indexManager.getMinOffset(e,r).next(p=>{const y=this.vs(n,g);return this.Cs(n,y,f,p.readTime)?this.ws(e,mm(n,null,"F")):this.Fs(e,y,n,p)}))})))}bs(e,n,r,o){return j_(n)||o.isEqual(Re.min())?ee.resolve(null):this.ys.getDocuments(e,r).next(u=>{const f=this.vs(n,u);return this.Cs(n,f,r,o)?ee.resolve(null):(ja()<=je.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ua(n)),this.Fs(e,f,n,Ix(o,Dl)).next(g=>g))})}vs(e,n){let r=new Mt(GE(e));return n.forEach((o,u)=>{_h(e,u)&&(r=r.add(u))}),r}Cs(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,r){return ja()<=je.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Ua(n)),this.ys.getDocumentsMatchingQuery(e,n,Gs.min(),r)}Fs(e,n,r,o){return this.ys.getDocumentsMatchingQuery(e,r,o).next(u=>(n.forEach(f=>{u=u.insert(f.key,f)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="LocalStore",o2=3e8;class l2{constructor(e,n,r,o){this.persistence=e,this.Ms=n,this.serializer=o,this.xs=new ct(Me),this.Os=new Hr(u=>qm(u),Hm),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XC(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}}function u2(s,e,n,r){return new l2(s,e,n,r)}async function mT(s,e){const n=Ie(s);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(u=>{const f=[],g=[];let p=Ue();for(const y of o){f.push(y.batchId);for(const T of y.mutations)p=p.add(T.key)}for(const y of u){g.push(y.batchId);for(const T of y.mutations)p=p.add(T.key)}return n.localDocuments.getDocuments(r,p).next(y=>({ks:y,removedBatchIds:f,addedBatchIds:g}))})})}function c2(s,e){const n=Ie(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=n.Bs.newChangeBuffer({trackRemovals:!0});return function(g,p,y,T){const x=y.batch,C=x.keys();let B=ee.resolve();return C.forEach(G=>{B=B.next(()=>T.getEntry(p,G)).next(Z=>{const U=y.docVersions.get(G);Ye(U!==null,48541),Z.version.compareTo(U)<0&&(x.applyToRemoteDocument(Z,y),Z.isValidDocument()&&(Z.setReadTime(y.commitVersion),T.addEntry(Z)))})}),B.next(()=>g.mutationQueue.removeMutationBatch(p,x))}(n,r,e,u).next(()=>u.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(g){let p=Ue();for(let y=0;y<g.mutationResults.length;++y)g.mutationResults[y].transformResults.length>0&&(p=p.add(g.batch.mutations[y].key));return p}(e))).next(()=>n.localDocuments.getDocuments(r,o))})}function gT(s){const e=Ie(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function h2(s,e){const n=Ie(s),r=e.snapshotVersion;let o=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=n.Bs.newChangeBuffer({trackRemovals:!0});o=n.xs;const g=[];e.targetChanges.forEach((T,x)=>{const C=o.get(x);if(!C)return;g.push(n.Ti.removeMatchingKeys(u,T.removedDocuments,x).next(()=>n.Ti.addMatchingKeys(u,T.addedDocuments,x)));let B=C.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(x)!==null?B=B.withResumeToken($t.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):T.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(T.resumeToken,r)),o=o.insert(x,B),function(Z,U,Y){return Z.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=o2?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0}(C,B,T)&&g.push(n.Ti.updateTargetData(u,B))});let p=es(),y=Ue();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(u,T))}),g.push(f2(u,f,e.documentUpdates).next(T=>{p=T.qs,y=T.Qs})),!r.isEqual(Re.min())){const T=n.Ti.getLastRemoteSnapshotVersion(u).next(x=>n.Ti.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(T)}return ee.waitFor(g).next(()=>f.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,p,y)).next(()=>p)}).then(u=>(n.xs=o,u))}function f2(s,e,n){let r=Ue(),o=Ue();return n.forEach(u=>r=r.add(u)),e.getEntries(s,r).next(u=>{let f=es();return n.forEach((g,p)=>{const y=u.get(g);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(g)),p.isNoDocument()&&p.version.isEqual(Re.min())?(e.removeEntry(g,p.readTime),f=f.insert(g,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),f=f.insert(g,p)):ge(Jm,"Ignoring outdated watch update for ",g,". Current version:",y.version," Watch version:",p.version)}),{qs:f,Qs:o}})}function d2(s,e){const n=Ie(s);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Um),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function m2(s,e){const n=Ie(s);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return n.Ti.getTargetData(r,e).next(u=>u?(o=u,ee.resolve(o)):n.Ti.allocateTargetId(r).next(f=>(o=new Ls(e,f,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=n.xs.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}async function _m(s,e,n){const r=Ie(s),o=r.xs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",u,f=>r.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!ao(f))throw f;ge(Jm,`Failed to update sequence numbers for target ${e}: ${f}`)}r.xs=r.xs.remove(e),r.Os.delete(o.target)}function Z_(s,e,n){const r=Ie(s);let o=Re.min(),u=Ue();return r.persistence.runTransaction("Execute query","readwrite",f=>function(p,y,T){const x=Ie(p),C=x.Os.get(T);return C!==void 0?ee.resolve(x.xs.get(C)):x.Ti.getTargetData(y,T)}(r,f,vi(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(f,g.targetId).next(p=>{u=p})}).next(()=>r.Ms.getDocumentsMatchingQuery(f,e,n?o:Re.min(),n?u:Ue())).next(g=>(g2(r,tC(e),g),{documents:g,$s:u})))}function g2(s,e,n){let r=s.Ns.get(e)||Re.min();n.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),s.Ns.set(e,r)}class J_{constructor(){this.activeTargetIds=oC()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class p2{constructor(){this.xo=new J_,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new J_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="ConnectivityMonitor";class e0{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){ge(W_,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){ge(W_,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cc=null;function Em(){return Cc===null?Cc=function(){return 268435456+Math.round(2147483648*Math.random())}():Cc++,"0x"+Cc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd="RestConnection",v2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _2{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${o}`,this.Go=this.databaseId.database===$c?`project_id=${r}`:`project_id=${r}&database_id=${o}`}zo(e,n,r,o,u){const f=Em(),g=this.jo(e,n.toUriEncodedString());ge(Xd,`Sending RPC '${e}' ${f}:`,g,r);const p={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(p,o,u);const{host:y}=new URL(g),T=Ul(y);return this.Jo(e,g,p,r,T).then(x=>(ge(Xd,`Received RPC '${e}' ${f}: `,x),x),x=>{throw $a(Xd,`RPC '${e}' ${f} failed with error: `,x,"url: ",g,"request:",r),x})}Yo(e,n,r,o,u,f){return this.zo(e,n,r,o,u)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+so}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}jo(e,n){const r=v2[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class T2 extends _2{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,o,u){const f=Em();return new Promise((g,p)=>{const y=new vE;y.setWithCredentials(!0),y.listenOnce(_E.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Oc.NO_ERROR:const x=y.getResponseJson();ge(Wt,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(x)),g(x);break;case Oc.TIMEOUT:ge(Wt,`RPC '${e}' ${f} timed out`),p(new ye(te.DEADLINE_EXCEEDED,"Request time out"));break;case Oc.HTTP_ERROR:const C=y.getStatus();if(ge(Wt,`RPC '${e}' ${f} failed with status:`,C,"response text:",y.getResponseText()),C>0){let B=y.getResponseJson();Array.isArray(B)&&(B=B[0]);const G=B==null?void 0:B.error;if(G&&G.status&&G.message){const Z=function(Y){const ne=Y.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(ne)>=0?ne:te.UNKNOWN}(G.status);p(new ye(Z,G.message))}else p(new ye(te.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new ye(te.UNAVAILABLE,"Connection failed."));break;default:Se(9055,{h_:e,streamId:f,P_:y.getLastErrorCode(),T_:y.getLastError()})}}finally{ge(Wt,`RPC '${e}' ${f} completed.`)}});const T=JSON.stringify(o);ge(Wt,`RPC '${e}' ${f} sending request:`,o),y.send(n,"POST",T,r,15)})}I_(e,n,r){const o=Em(),u=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=bE(),g=TE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Ho(p.initMessageHeaders,n,r),p.encodeInitMessageHeaders=!0;const T=u.join("");ge(Wt,`Creating RPC '${e}' stream ${o}: ${T}`,p);const x=f.createWebChannel(T,p);this.E_(x);let C=!1,B=!1;const G=new E2({Zo:U=>{B?ge(Wt,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(C||(ge(Wt,`Opening RPC '${e}' stream ${o} transport.`),x.open(),C=!0),ge(Wt,`RPC '${e}' stream ${o} sending:`,U),x.send(U))},Xo:()=>x.close()}),Z=(U,Y,ne)=>{U.listen(Y,K=>{try{ne(K)}catch(ue){setTimeout(()=>{throw ue},0)}})};return Z(x,_l.EventType.OPEN,()=>{B||(ge(Wt,`RPC '${e}' stream ${o} transport opened.`),G.__())}),Z(x,_l.EventType.CLOSE,()=>{B||(B=!0,ge(Wt,`RPC '${e}' stream ${o} transport closed`),G.u_(),this.d_(x))}),Z(x,_l.EventType.ERROR,U=>{B||(B=!0,$a(Wt,`RPC '${e}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),G.u_(new ye(te.UNAVAILABLE,"The operation could not be completed")))}),Z(x,_l.EventType.MESSAGE,U=>{var Y;if(!B){const ne=U.data[0];Ye(!!ne,16349);const K=ne,ue=(K==null?void 0:K.error)||((Y=K[0])===null||Y===void 0?void 0:Y.error);if(ue){ge(Wt,`RPC '${e}' stream ${o} received error:`,ue);const le=ue.status;let re=function(R){const k=wt[R];if(k!==void 0)return nT(k)}(le),D=ue.message;re===void 0&&(re=te.INTERNAL,D="Unknown error status: "+le+" with message "+ue.message),B=!0,G.u_(new ye(re,D)),x.close()}else ge(Wt,`RPC '${e}' stream ${o} received:`,ne),G.c_(ne)}}),Z(g,EE.STAT_EVENT,U=>{U.stat===om.PROXY?ge(Wt,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===om.NOPROXY&&ge(Wt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{G.a_()},0),G}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(n=>n===e)}}function Zd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(s){return new wC(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e,n,r=1e3,o=1.5,u=6e4){this.xi=e,this.timerId=n,this.A_=r,this.R_=o,this.V_=u,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const n=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),o=Math.max(0,n-r);o>0&&ge("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.m_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,o,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0="PersistentStream";class yT{constructor(e,n,r,o,u,f,g,p){this.xi=e,this.S_=r,this.D_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new pT(e,n)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,n){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():n&&n.code===te.RESOURCE_EXHAUSTED?(Wi(n.toString()),Wi("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):n&&n.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(n)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),n=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.v_===n&&this.z_(r,o)},r=>{e(()=>{const o=new ye(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(o)})})}z_(e,n){const r=this.G_(this.v_);this.stream=this.H_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(o=>{r(()=>this.j_(o))}),this.stream.onMessage(o=>{r(()=>++this.M_==1?this.J_(o):this.onNext(o))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return ge(t0,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return n=>{this.xi.enqueueAndForget(()=>this.v_===e?n():(ge(t0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class b2 extends yT{constructor(e,n,r,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,f),this.serializer=u}H_(e,n){return this.connection.I_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const n=RC(this.serializer,e),r=function(u){if(!("targetChange"in u))return Re.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Re.min():f.readTime?_i(f.readTime):Re.min()}(e);return this.listener.Y_(n,r)}Z_(e){const n={};n.database=vm(this.serializer),n.addTarget=function(u,f){let g;const p=f.target;if(g=fm(p)?{documents:DC(u,p)}:{query:OC(u,p).gt},g.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){g.resumeToken=rT(u,f.resumeToken);const y=gm(u,f.expectedCount);y!==null&&(g.expectedCount=y)}else if(f.snapshotVersion.compareTo(Re.min())>0){g.readTime=th(u,f.snapshotVersion.toTimestamp());const y=gm(u,f.expectedCount);y!==null&&(g.expectedCount=y)}return g}(this.serializer,e);const r=MC(this.serializer,e);r&&(n.labels=r),this.Q_(n)}X_(e){const n={};n.database=vm(this.serializer),n.removeTarget=e,this.Q_(n)}}class A2 extends yT{constructor(e,n,r,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,f),this.serializer=u}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,n){return this.connection.I_("Write",e,n)}J_(e){return Ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const n=NC(e.writeResults,e.commitTime),r=_i(e.commitTime);return this.listener.ra(r,n)}ia(){const e={};e.database=vm(this.serializer),this.Q_(e)}ta(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>IC(this.serializer,r))};this.Q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{}class w2 extends S2{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.sa=!1}oa(){if(this.sa)throw new ye(te.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,o){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.zo(e,pm(n,r),o,u,f)).catch(u=>{throw u.name==="FirebaseError"?(u.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ye(te.UNKNOWN,u.toString())})}Yo(e,n,r,o,u){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,g])=>this.connection.Yo(e,pm(n,r),o,f,g,u)).catch(f=>{throw f.name==="FirebaseError"?(f.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ye(te.UNKNOWN,f.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class x2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Wi(n),this.ua=!1):ge("OnlineStateTracker",n)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr="RemoteStore";class C2{constructor(e,n,r,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=u,this.Ra.No(f=>{r.enqueueAndForget(async()=>{Fr(this)&&(ge(zr,"Restarting streams for network reachability change."),await async function(p){const y=Ie(p);y.da.add(4),await Yl(y),y.Va.set("Unknown"),y.da.delete(4),await Sh(y)}(this))})}),this.Va=new x2(r,o)}}async function Sh(s){if(Fr(s))for(const e of s.Aa)await e(!0)}async function Yl(s){for(const e of s.Aa)await e(!1)}function vT(s,e){const n=Ie(s);n.Ea.has(e.targetId)||(n.Ea.set(e.targetId,e),ng(n)?tg(n):oo(n).N_()&&eg(n,e))}function Wm(s,e){const n=Ie(s),r=oo(n);n.Ea.delete(e),r.N_()&&_T(n,e),n.Ea.size===0&&(r.N_()?r.k_():Fr(n)&&n.Va.set("Unknown"))}function eg(s,e){if(s.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}oo(s).Z_(e)}function _T(s,e){s.ma.Ke(e),oo(s).X_(e)}function tg(s){s.ma=new TC({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>s.Ea.get(e)||null,Pt:()=>s.datastore.serializer.databaseId}),oo(s).start(),s.Va.ca()}function ng(s){return Fr(s)&&!oo(s).O_()&&s.Ea.size>0}function Fr(s){return Ie(s).da.size===0}function ET(s){s.ma=void 0}async function R2(s){s.Va.set("Online")}async function I2(s){s.Ea.forEach((e,n)=>{eg(s,e)})}async function N2(s,e){ET(s),ng(s)?(s.Va.Pa(e),tg(s)):s.Va.set("Unknown")}async function D2(s,e,n){if(s.Va.set("Online"),e instanceof sT&&e.state===2&&e.cause)try{await async function(o,u){const f=u.cause;for(const g of u.targetIds)o.Ea.has(g)&&(await o.remoteSyncer.rejectListen(g,f),o.Ea.delete(g),o.ma.removeTarget(g))}(s,e)}catch(r){ge(zr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ih(s,r)}else if(e instanceof Pc?s.ma.Xe(e):e instanceof iT?s.ma.ot(e):s.ma.nt(e),!n.isEqual(Re.min()))try{const r=await gT(s.localStore);n.compareTo(r)>=0&&await function(u,f){const g=u.ma.It(f);return g.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const T=u.Ea.get(y);T&&u.Ea.set(y,T.withResumeToken(p.resumeToken,f))}}),g.targetMismatches.forEach((p,y)=>{const T=u.Ea.get(p);if(!T)return;u.Ea.set(p,T.withResumeToken($t.EMPTY_BYTE_STRING,T.snapshotVersion)),_T(u,p);const x=new Ls(T.target,p,y,T.sequenceNumber);eg(u,x)}),u.remoteSyncer.applyRemoteEvent(g)}(s,n)}catch(r){ge(zr,"Failed to raise snapshot:",r),await ih(s,r)}}async function ih(s,e,n){if(!ao(e))throw e;s.da.add(1),await Yl(s),s.Va.set("Offline"),n||(n=()=>gT(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{ge(zr,"Retrying IndexedDB access"),await n(),s.da.delete(1),await Sh(s)})}function TT(s,e){return e().catch(n=>ih(s,n,e))}async function wh(s){const e=Ie(s),n=$s(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:Um;for(;O2(e);)try{const o=await d2(e.localStore,r);if(o===null){e.Ia.length===0&&n.k_();break}r=o.batchId,k2(e,o)}catch(o){await ih(e,o)}bT(e)&&AT(e)}function O2(s){return Fr(s)&&s.Ia.length<10}function k2(s,e){s.Ia.push(e);const n=$s(s);n.N_()&&n.ea&&n.ta(e.mutations)}function bT(s){return Fr(s)&&!$s(s).O_()&&s.Ia.length>0}function AT(s){$s(s).start()}async function M2(s){$s(s).ia()}async function V2(s){const e=$s(s);for(const n of s.Ia)e.ta(n.mutations)}async function P2(s,e,n){const r=s.Ia.shift(),o=Qm.from(r,e,n);await TT(s,()=>s.remoteSyncer.applySuccessfulWrite(o)),await wh(s)}async function L2(s,e){e&&$s(s).ea&&await async function(r,o){if(function(f){return _C(f)&&f!==te.ABORTED}(o.code)){const u=r.Ia.shift();$s(r).L_(),await TT(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o)),await wh(r)}}(s,e),bT(s)&&AT(s)}async function n0(s,e){const n=Ie(s);n.asyncQueue.verifyOperationInProgress(),ge(zr,"RemoteStore received new credentials");const r=Fr(n);n.da.add(3),await Yl(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.da.delete(3),await Sh(n)}async function j2(s,e){const n=Ie(s);e?(n.da.delete(2),await Sh(n)):e||(n.da.add(2),await Yl(n),n.Va.set("Unknown"))}function oo(s){return s.fa||(s.fa=function(n,r,o){const u=Ie(n);return u.oa(),new b2(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(s.datastore,s.asyncQueue,{e_:R2.bind(null,s),n_:I2.bind(null,s),i_:N2.bind(null,s),Y_:D2.bind(null,s)}),s.Aa.push(async e=>{e?(s.fa.L_(),ng(s)?tg(s):s.Va.set("Unknown")):(await s.fa.stop(),ET(s))})),s.fa}function $s(s){return s.ga||(s.ga=function(n,r,o){const u=Ie(n);return u.oa(),new A2(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(s.datastore,s.asyncQueue,{e_:()=>Promise.resolve(),n_:M2.bind(null,s),i_:L2.bind(null,s),na:V2.bind(null,s),ra:P2.bind(null,s)}),s.Aa.push(async e=>{e?(s.ga.L_(),await wh(s)):(await s.ga.stop(),s.Ia.length>0&&(ge(zr,`Stopping write stream with ${s.Ia.length} pending writes`),s.Ia=[]))})),s.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,n,r,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new $i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,u){const f=Date.now()+r,g=new ig(e,n,f,o,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sg(s,e){if(Wi("AsyncQueue",`${e}: ${s}`),ao(s))return new ye(te.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{static emptySet(e){return new Qa(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Te.comparator(n.key,r.key):(n,r)=>Te.comparator(n.key,r.key),this.keyedMap=El(),this.sortedSet=new ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Qa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Qa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(){this.pa=new ct(Te.comparator)}track(e){const n=e.doc.key,r=this.pa.get(n);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(n,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(n):e.type===1&&r.type===2?this.pa=this.pa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(n,{type:2,doc:e.doc}):Se(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(n,e)}wa(){const e=[];return this.pa.inorderTraversal((n,r)=>{e.push(r)}),e}}class eo{constructor(e,n,r,o,u,f,g,p,y){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,n,r,o,u){const f=[];return n.forEach(g=>{f.push({type:0,doc:g})}),new eo(e,n,Qa.emptySet(n),f,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class z2{constructor(){this.queries=s0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=Ie(n),u=o.queries;o.queries=s0(),u.forEach((f,g)=>{for(const p of g.Sa)p.onError(r)})})(this,new ye(te.ABORTED,"Firestore shutting down"))}}function s0(){return new Hr(s=>FE(s),vh)}async function rg(s,e){const n=Ie(s);let r=3;const o=e.query;let u=n.queries.get(o);u?!u.Da()&&e.va()&&(r=2):(u=new U2,r=e.va()?0:1);try{switch(r){case 0:u.ba=await n.onListen(o,!0);break;case 1:u.ba=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const g=sg(f,`Initialization of query '${Ua(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,u),u.Sa.push(e),e.Fa(n.onlineState),u.ba&&e.Ma(u.ba)&&og(n)}async function ag(s,e){const n=Ie(s),r=e.query;let o=3;const u=n.queries.get(r);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=e.va()?0:1:!u.Da()&&e.va()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function B2(s,e){const n=Ie(s);let r=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const g of f.Sa)g.Ma(o)&&(r=!0);f.ba=o}}r&&og(n)}function q2(s,e,n){const r=Ie(s),o=r.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);r.queries.delete(e)}function og(s){s.Ca.forEach(e=>{e.next()})}var Tm,r0;(r0=Tm||(Tm={})).xa="default",r0.Cache="cache";class lg{constructor(e,n,r){this.query=e,this.Oa=n,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new eo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Na?this.La(e)&&(this.Oa.next(e),n=!0):this.ka(e,this.onlineState)&&(this.qa(e),n=!0),this.Ba=e,n}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let n=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),n=!0),n}ka(e,n){if(!e.fromCache||!this.va())return!0;const r=n!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}La(e){if(e.docChanges.length>0)return!0;const n=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}qa(e){e=eo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==Tm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e){this.key=e}}class wT{constructor(e){this.key=e}}class H2{constructor(e,n){this.query=e,this.Ha=n,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ue(),this.mutatedKeys=Ue(),this.Za=GE(e),this.Xa=new Qa(this.Za)}get eu(){return this.Ha}tu(e,n){const r=n?n.nu:new i0,o=n?n.Xa:this.Xa;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,g=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((T,x)=>{const C=o.get(T),B=_h(this.query,x)?x:null,G=!!C&&this.mutatedKeys.has(C.key),Z=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let U=!1;C&&B?C.data.isEqual(B.data)?G!==Z&&(r.track({type:3,doc:B}),U=!0):this.ru(C,B)||(r.track({type:2,doc:B}),U=!0,(p&&this.Za(B,p)>0||y&&this.Za(B,y)<0)&&(g=!0)):!C&&B?(r.track({type:0,doc:B}),U=!0):C&&!B&&(r.track({type:1,doc:C}),U=!0,(p||y)&&(g=!0)),U&&(B?(f=f.add(B),u=Z?u.add(T):u.delete(T)):(f=f.delete(T),u=u.delete(T)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const T=this.query.limitType==="F"?f.last():f.first();f=f.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{Xa:f,nu:r,Cs:g,mutatedKeys:u}}ru(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const u=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const f=e.nu.wa();f.sort((T,x)=>function(B,G){const Z=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se(20277,{Vt:U})}};return Z(B)-Z(G)}(T.type,x.type)||this.Za(T.doc,x.doc)),this.iu(r),o=o!=null&&o;const g=n&&!o?this.su():[],p=this.Ya.size===0&&this.current&&!o?1:0,y=p!==this.Ja;return this.Ja=p,f.length!==0||y?{snapshot:new eo(this.query,e.Xa,u,f,e.mutatedKeys,p===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:g}:{ou:g}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new i0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Ue(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new wT(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new ST(r))}),n}au(e){this.Ha=e.$s,this.Ya=Ue();const n=this.tu(e.documents);return this.applyChanges(n,!0)}uu(){return eo.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const ug="SyncEngine";class F2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class G2{constructor(e){this.key=e,this.cu=!1}}class Q2{constructor(e,n,r,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.lu={},this.hu=new Hr(g=>FE(g),vh),this.Pu=new Map,this.Tu=new Set,this.Iu=new ct(Te.comparator),this.Eu=new Map,this.du=new $m,this.Au={},this.Ru=new Map,this.Vu=Wa.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function K2(s,e,n=!0){const r=DT(s);let o;const u=r.hu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.uu()):o=await xT(r,e,n,!0),o}async function Y2(s,e){const n=DT(s);await xT(n,e,!0,!1)}async function xT(s,e,n,r){const o=await m2(s.localStore,vi(e)),u=o.targetId,f=s.sharedClientState.addLocalQueryTarget(u,n);let g;return r&&(g=await $2(s,e,u,f==="current",o.resumeToken)),s.isPrimaryClient&&n&&vT(s.remoteStore,o),g}async function $2(s,e,n,r,o){s.fu=(x,C,B)=>async function(Z,U,Y,ne){let K=U.view.tu(Y);K.Cs&&(K=await Z_(Z.localStore,U.query,!1).then(({documents:D})=>U.view.tu(D,K)));const ue=ne&&ne.targetChanges.get(U.targetId),le=ne&&ne.targetMismatches.get(U.targetId)!=null,re=U.view.applyChanges(K,Z.isPrimaryClient,ue,le);return o0(Z,U.targetId,re.ou),re.snapshot}(s,x,C,B);const u=await Z_(s.localStore,e,!0),f=new H2(e,u.$s),g=f.tu(u.documents),p=Kl.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",o),y=f.applyChanges(g,s.isPrimaryClient,p);o0(s,n,y.ou);const T=new F2(e,n,f);return s.hu.set(e,T),s.Pu.has(n)?s.Pu.get(n).push(e):s.Pu.set(n,[e]),y.snapshot}async function X2(s,e,n){const r=Ie(s),o=r.hu.get(e),u=r.Pu.get(o.targetId);if(u.length>1)return r.Pu.set(o.targetId,u.filter(f=>!vh(f,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await _m(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),n&&Wm(r.remoteStore,o.targetId),bm(r,o.targetId)}).catch(ro)):(bm(r,o.targetId),await _m(r.localStore,o.targetId,!0))}async function Z2(s,e){const n=Ie(s),r=n.hu.get(e),o=n.Pu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Wm(n.remoteStore,r.targetId))}async function J2(s,e,n){const r=rR(s);try{const o=await function(f,g){const p=Ie(f),y=kt.now(),T=g.reduce((B,G)=>B.add(G.key),Ue());let x,C;return p.persistence.runTransaction("Locally write mutations","readwrite",B=>{let G=es(),Z=Ue();return p.Bs.getEntries(B,T).next(U=>{G=U,G.forEach((Y,ne)=>{ne.isValidDocument()||(Z=Z.add(Y))})}).next(()=>p.localDocuments.getOverlayedDocuments(B,G)).next(U=>{x=U;const Y=[];for(const ne of g){const K=mC(ne,x.get(ne.key).overlayedDocument);K!=null&&Y.push(new Js(ne.key,K,PE(K.value.mapValue),qn.exists(!0)))}return p.mutationQueue.addMutationBatch(B,y,Y,g)}).next(U=>{C=U;const Y=U.applyToLocalDocumentSet(x,Z);return p.documentOverlayCache.saveOverlays(B,U.batchId,Y)})}).then(()=>({batchId:C.batchId,changes:KE(x)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(f,g,p){let y=f.Au[f.currentUser.toKey()];y||(y=new ct(Me)),y=y.insert(g,p),f.Au[f.currentUser.toKey()]=y}(r,o.batchId,n),await $l(r,o.changes),await wh(r.remoteStore)}catch(o){const u=sg(o,"Failed to persist write");n.reject(u)}}async function CT(s,e){const n=Ie(s);try{const r=await h2(n.localStore,e);e.targetChanges.forEach((o,u)=>{const f=n.Eu.get(u);f&&(Ye(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.cu=!0:o.modifiedDocuments.size>0?Ye(f.cu,14607):o.removedDocuments.size>0&&(Ye(f.cu,42227),f.cu=!1))}),await $l(n,r,e)}catch(r){await ro(r)}}function a0(s,e,n){const r=Ie(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.hu.forEach((u,f)=>{const g=f.view.Fa(e);g.snapshot&&o.push(g.snapshot)}),function(f,g){const p=Ie(f);p.onlineState=g;let y=!1;p.queries.forEach((T,x)=>{for(const C of x.Sa)C.Fa(g)&&(y=!0)}),y&&og(p)}(r.eventManager,e),o.length&&r.lu.Y_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function W2(s,e,n){const r=Ie(s);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Eu.get(e),u=o&&o.key;if(u){let f=new ct(Te.comparator);f=f.insert(u,tn.newNoDocument(u,Re.min()));const g=Ue().add(u),p=new bh(Re.min(),new Map,new ct(Me),f,g);await CT(r,p),r.Iu=r.Iu.remove(u),r.Eu.delete(e),cg(r)}else await _m(r.localStore,e,!1).then(()=>bm(r,e,n)).catch(ro)}async function eR(s,e){const n=Ie(s),r=e.batch.batchId;try{const o=await c2(n.localStore,e);IT(n,r,null),RT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await $l(n,o)}catch(o){await ro(o)}}async function tR(s,e,n){const r=Ie(s);try{const o=await function(f,g){const p=Ie(f);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let T;return p.mutationQueue.lookupMutationBatch(y,g).next(x=>(Ye(x!==null,37113),T=x.keys(),p.mutationQueue.removeMutationBatch(y,x))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,T,g)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T)).next(()=>p.localDocuments.getDocuments(y,T))})}(r.localStore,e);IT(r,e,n),RT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await $l(r,o)}catch(o){await ro(o)}}function RT(s,e){(s.Ru.get(e)||[]).forEach(n=>{n.resolve()}),s.Ru.delete(e)}function IT(s,e,n){const r=Ie(s);let o=r.Au[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),r.Au[r.currentUser.toKey()]=o}}function bm(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Pu.get(e))s.hu.delete(r),n&&s.lu.gu(r,n);s.Pu.delete(e),s.isPrimaryClient&&s.du.Hr(e).forEach(r=>{s.du.containsKey(r)||NT(s,r)})}function NT(s,e){s.Tu.delete(e.path.canonicalString());const n=s.Iu.get(e);n!==null&&(Wm(s.remoteStore,n),s.Iu=s.Iu.remove(e),s.Eu.delete(n),cg(s))}function o0(s,e,n){for(const r of n)r instanceof ST?(s.du.addReference(r.key,e),nR(s,r)):r instanceof wT?(ge(ug,"Document no longer in limbo: "+r.key),s.du.removeReference(r.key,e),s.du.containsKey(r.key)||NT(s,r.key)):Se(19791,{pu:r})}function nR(s,e){const n=e.key,r=n.path.canonicalString();s.Iu.get(n)||s.Tu.has(r)||(ge(ug,"New document in limbo: "+n),s.Tu.add(r),cg(s))}function cg(s){for(;s.Tu.size>0&&s.Iu.size<s.maxConcurrentLimboResolutions;){const e=s.Tu.values().next().value;s.Tu.delete(e);const n=new Te(rt.fromString(e)),r=s.Vu.next();s.Eu.set(r,new G2(n)),s.Iu=s.Iu.insert(n,r),vT(s.remoteStore,new Ls(vi(yh(n.path)),r,"TargetPurposeLimboResolution",mh.le))}}async function $l(s,e,n){const r=Ie(s),o=[],u=[],f=[];r.hu.isEmpty()||(r.hu.forEach((g,p)=>{f.push(r.fu(p,e,n).then(y=>{var T;if((y||n)&&r.isPrimaryClient){const x=y?!y.fromCache:(T=n==null?void 0:n.targetChanges.get(p.targetId))===null||T===void 0?void 0:T.current;r.sharedClientState.updateQueryState(p.targetId,x?"current":"not-current")}if(y){o.push(y);const x=Zm.Rs(p.targetId,y);u.push(x)}}))}),await Promise.all(f),r.lu.Y_(o),await async function(p,y){const T=Ie(p);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",x=>ee.forEach(y,C=>ee.forEach(C.ds,B=>T.persistence.referenceDelegate.addReference(x,C.targetId,B)).next(()=>ee.forEach(C.As,B=>T.persistence.referenceDelegate.removeReference(x,C.targetId,B)))))}catch(x){if(!ao(x))throw x;ge(Jm,"Failed to update sequence numbers: "+x)}for(const x of y){const C=x.targetId;if(!x.fromCache){const B=T.xs.get(C),G=B.snapshotVersion,Z=B.withLastLimboFreeSnapshotVersion(G);T.xs=T.xs.insert(C,Z)}}}(r.localStore,u))}async function iR(s,e){const n=Ie(s);if(!n.currentUser.isEqual(e)){ge(ug,"User change. New user:",e.toKey());const r=await mT(n.localStore,e);n.currentUser=e,function(u,f){u.Ru.forEach(g=>{g.forEach(p=>{p.reject(new ye(te.CANCELLED,f))})}),u.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await $l(n,r.ks)}}function sR(s,e){const n=Ie(s),r=n.Eu.get(e);if(r&&r.cu)return Ue().add(r.key);{let o=Ue();const u=n.Pu.get(e);if(!u)return o;for(const f of u){const g=n.hu.get(f);o=o.unionWith(g.view.eu)}return o}}function DT(s){const e=Ie(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=CT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=W2.bind(null,e),e.lu.Y_=B2.bind(null,e.eventManager),e.lu.gu=q2.bind(null,e.eventManager),e}function rR(s){const e=Ie(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tR.bind(null,e),e}class sh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ah(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,n){return null}Cu(e,n){return null}Du(e){return u2(this.persistence,new a2,e.initialUser,this.serializer)}Su(e){return new dT(Xm.fi,this.serializer)}bu(e){return new p2}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sh.provider={build:()=>new sh};class aR extends sh{constructor(e){super(),this.cacheSizeBytes=e}vu(e,n){Ye(this.persistence.referenceDelegate instanceof nh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new GC(r,e.asyncQueue,n)}Su(e){const n=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new dT(r=>nh.fi(r,n),this.serializer)}}class Am{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>a0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=iR.bind(null,this.syncEngine),await j2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new z2}()}createDatastore(e){const n=Ah(e.databaseInfo.databaseId),r=function(u){return new T2(u)}(e.databaseInfo);return function(u,f,g,p){return new w2(u,f,g,p)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,o,u,f,g){return new C2(r,o,u,f,g)}(this.localStore,this.datastore,e.asyncQueue,n=>a0(this.syncEngine,n,0),function(){return e0.C()?new e0:new y2}())}createSyncEngine(e,n){return function(o,u,f,g,p,y,T){const x=new Q2(o,u,f,g,p,y);return T&&(x.mu=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const u=Ie(o);ge(zr,"RemoteStore shutting down."),u.da.add(5),await Yl(u),u.Ra.shutdown(),u.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Am.provider={build:()=>new Am};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Wi("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="FirestoreClient";class oR{constructor(e,n,r,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=en.UNAUTHENTICATED,this.clientId=xE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,async f=>{ge(Xs,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(r,f=>(ge(Xs,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=sg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Jd(s,e){s.asyncQueue.verifyOperationInProgress(),ge(Xs,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let r=n.initialUser;s.setCredentialChangeListener(async o=>{r.isEqual(o)||(await mT(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}async function l0(s,e){s.asyncQueue.verifyOperationInProgress();const n=await lR(s);ge(Xs,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener(r=>n0(e.remoteStore,r)),s.setAppCheckTokenChangeListener((r,o)=>n0(e.remoteStore,o)),s._onlineComponents=e}async function lR(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ge(Xs,"Using user provided OfflineComponentProvider");try{await Jd(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===te.FAILED_PRECONDITION||o.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;$a("Error using user provided cache. Falling back to memory cache: "+n),await Jd(s,new sh)}}else ge(Xs,"Using default OfflineComponentProvider"),await Jd(s,new aR(void 0));return s._offlineComponents}async function OT(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ge(Xs,"Using user provided OnlineComponentProvider"),await l0(s,s._uninitializedComponentsProvider._online)):(ge(Xs,"Using default OnlineComponentProvider"),await l0(s,new Am))),s._onlineComponents}function uR(s){return OT(s).then(e=>e.syncEngine)}async function rh(s){const e=await OT(s),n=e.eventManager;return n.onListen=K2.bind(null,e.syncEngine),n.onUnlisten=X2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Y2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Z2.bind(null,e.syncEngine),n}function cR(s,e,n={}){const r=new $i;return s.asyncQueue.enqueueAndForget(async()=>function(u,f,g,p,y){const T=new hg({next:C=>{T.xu(),f.enqueueAndForget(()=>ag(u,x));const B=C.docs.has(g);!B&&C.fromCache?y.reject(new ye(te.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&C.fromCache&&p&&p.source==="server"?y.reject(new ye(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(C)},error:C=>y.reject(C)}),x=new lg(yh(g.path),T,{includeMetadataChanges:!0,Qa:!0});return rg(u,x)}(await rh(s),s.asyncQueue,e,n,r)),r.promise}function hR(s,e,n={}){const r=new $i;return s.asyncQueue.enqueueAndForget(async()=>function(u,f,g,p,y){const T=new hg({next:C=>{T.xu(),f.enqueueAndForget(()=>ag(u,x)),C.fromCache&&p.source==="server"?y.reject(new ye(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(C)},error:C=>y.reject(C)}),x=new lg(g,T,{includeMetadataChanges:!0,Qa:!0});return rg(u,x)}(await rh(s),s.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(s,e,n){if(!n)throw new ye(te.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function fR(s,e,n,r){if(e===!0&&r===!0)throw new ye(te.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function c0(s){if(!Te.isDocumentKey(s))throw new ye(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function h0(s){if(Te.isDocumentKey(s))throw new ye(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function xh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Se(12329,{type:typeof s})}function yn(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ye(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xh(s);throw new ye(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT="firestore.googleapis.com",f0=!0;class d0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ye(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=VT,this.ssl=f0}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:f0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=fT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<HC)throw new ye(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new ye(te.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new ye(te.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new ye(te.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ch{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new d0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new d0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ex;switch(r.type){case"firstParty":return new Sx(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ye(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=u0.get(n);r&&(ge("ComponentProvider","Removing Datastore"),u0.delete(n),r.terminate())}(this),Promise.resolve()}}function dR(s,e,n,r={}){var o;s=yn(s,Ch);const u=Ul(e),f=s._getSettings(),g=Object.assign(Object.assign({},f),{emulatorOptions:s._getEmulatorOptions()}),p=`${e}:${n}`;u&&(D0(`https://${p}`),O0("Firestore",!0)),f.host!==VT&&f.host!==p&&$a("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y=Object.assign(Object.assign({},f),{host:p,ssl:u,emulatorOptions:r});if(!Pr(y,g)&&(s._setSettings(y),r.mockUserToken)){let T,x;if(typeof r.mockUserToken=="string")T=r.mockUserToken,x=en.MOCK_USER;else{T=GA(r.mockUserToken,(o=s._app)===null||o===void 0?void 0:o.options.projectId);const C=r.mockUserToken.sub||r.mockUserToken.user_id;if(!C)throw new ye(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new en(C)}s._authCredentials=new Tx(new SE(T,x))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Gr(this.firestore,e,this._query)}}class nn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nn(this.firestore,e,this._key)}}class Hs extends Gr{constructor(e,n,r){super(e,n,yh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nn(this.firestore,null,new Te(e))}withConverter(e){return new Hs(this.firestore,e,this._path)}}function _t(s,e,...n){if(s=Yt(s),MT("collection","path",e),s instanceof Ch){const r=rt.fromString(e,...n);return h0(r),new Hs(s,null,r)}{if(!(s instanceof nn||s instanceof Hs))throw new ye(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(rt.fromString(e,...n));return h0(r),new Hs(s.firestore,null,r)}}function sn(s,e,...n){if(s=Yt(s),arguments.length===1&&(e=xE.newId()),MT("doc","path",e),s instanceof Ch){const r=rt.fromString(e,...n);return c0(r),new nn(s,null,new Te(r))}{if(!(s instanceof nn||s instanceof Hs))throw new ye(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(rt.fromString(e,...n));return c0(r),new nn(s.firestore,s instanceof Hs?s.converter:null,new Te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0="AsyncQueue";class g0{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new pT(this,"async_queue_retry"),this.rc=()=>{const r=Zd();r&&ge(m0,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const n=Zd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const n=Zd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const n=new $i;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!ao(e))throw e;ge(m0,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const n=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,Wi("INTERNAL UNHANDLED ERROR: ",p0(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=n,n}enqueueAfterDelay(e,n,r){this.oc(),this.nc.indexOf(e)>-1&&(n=0);const o=ig.createAndSchedule(this,e,n,r,u=>this.uc(u));return this.Zu.push(o),o}oc(){this.Xu&&Se(47125,{cc:p0(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const n of this.Zu)if(n.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Zu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const n=this.Zu.indexOf(e);this.Zu.splice(n,1)}}function p0(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(s){return function(n,r){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1}(s,["next","error","complete"])}class ts extends Ch{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new g0,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new g0(e),this._firestoreClient=void 0,await e}}}function mR(s,e){const n=typeof s=="object"?s:P0(),r=typeof s=="string"?s:$c,o=Im(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=HA("firestore");u&&dR(o,...u)}return o}function Rh(s){if(s._terminated)throw new ye(te.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||gR(s),s._firestoreClient}function gR(s){var e,n,r;const o=s._freezeSettings(),u=function(g,p,y,T){return new Ux(g,p,y,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,kT(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)}(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,o);s._componentsProvider||!((n=o.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=o.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(s._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),s._firestoreClient=new oR(s._authCredentials,s._appCheckCredentials,s._queue,u,s._componentsProvider&&function(g){const p=g==null?void 0:g._online.build();return{_offline:g==null?void 0:g._offline.build(p),_online:p}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this._byteString=e}static fromBase64String(e){try{return new to($t.fromBase64String(e))}catch(n){throw new ye(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new to($t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ye(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ye(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ye(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR=/^__.*__$/;class yR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Js(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ql(e,this.data,n,this.fieldTransforms)}}class PT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Js(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function LT(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se(40011,{Ic:s})}}class gg{constructor(e,n,r,o,u,f){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Ec(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new gg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.dc({path:r,Rc:!1});return o.Vc(e),o}mc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),o=this.dc({path:r,Rc:!1});return o.Ec(),o}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return ah(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(LT(this.Ic)&&pR.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class vR{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ah(e)}bc(e,n,r,o=!1){return new gg({Ic:e,methodName:n,wc:r,path:Kt.emptyPath(),Rc:!1,yc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nh(s){const e=s._freezeSettings(),n=Ah(s._databaseId);return new vR(s._databaseId,!!e.ignoreUndefinedProperties,n)}function jT(s,e,n,r,o,u={}){const f=s.bc(u.merge||u.mergeFields?2:0,e,n,o);pg("Data must be an object, but it was:",f,r);const g=UT(r,f);let p,y;if(u.merge)p=new Rn(f.fieldMask),y=f.fieldTransforms;else if(u.mergeFields){const T=[];for(const x of u.mergeFields){const C=Sm(e,x,n);if(!f.contains(C))throw new ye(te.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);BT(T,C)||T.push(C)}p=new Rn(T),y=f.fieldTransforms.filter(x=>p.covers(x.field))}else p=null,y=f.fieldTransforms;return new yR(new pn(g),p,y)}class Dh extends fg{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dh}}function _R(s,e,n,r){const o=s.bc(1,e,n);pg("Data must be an object, but it was:",o,r);const u=[],f=pn.empty();Zs(r,(p,y)=>{const T=yg(e,p,n);y=Yt(y);const x=o.mc(T);if(y instanceof Dh)u.push(T);else{const C=Xl(y,x);C!=null&&(u.push(T),f.set(T,C))}});const g=new Rn(u);return new PT(f,g,o.fieldTransforms)}function ER(s,e,n,r,o,u){const f=s.bc(1,e,n),g=[Sm(e,r,n)],p=[o];if(u.length%2!=0)throw new ye(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let C=0;C<u.length;C+=2)g.push(Sm(e,u[C])),p.push(u[C+1]);const y=[],T=pn.empty();for(let C=g.length-1;C>=0;--C)if(!BT(y,g[C])){const B=g[C];let G=p[C];G=Yt(G);const Z=f.mc(B);if(G instanceof Dh)y.push(B);else{const U=Xl(G,Z);U!=null&&(y.push(B),T.set(B,U))}}const x=new Rn(y);return new PT(T,x,f.fieldTransforms)}function TR(s,e,n,r=!1){return Xl(n,s.bc(r?4:3,e))}function Xl(s,e){if(zT(s=Yt(s)))return pg("Unsupported field value:",e,s),UT(s,e);if(s instanceof fg)return function(r,o){if(!LT(o.Ic))throw o.gc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.gc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,o){const u=[];let f=0;for(const g of r){let p=Xl(g,o.fc(f));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),f++}return{arrayValue:{values:u}}}(s,e)}return function(r,o){if((r=Yt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return lC(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=kt.fromDate(r);return{timestampValue:th(o.serializer,u)}}if(r instanceof kt){const u=new kt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:th(o.serializer,u)}}if(r instanceof dg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof to)return{bytesValue:rT(o.serializer,r._byteString)};if(r instanceof nn){const u=o.databaseId,f=r.firestore._databaseId;if(!f.isEqual(u))throw o.gc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Ym(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof mg)return function(f,g){return{mapValue:{fields:{[ME]:{stringValue:VE},[Xc]:{arrayValue:{values:f.toArray().map(y=>{if(typeof y!="number")throw g.gc("VectorValues must only contain numeric values.");return Fm(g.serializer,y)})}}}}}}(r,o);throw o.gc(`Unsupported field value: ${xh(r)}`)}(s,e)}function UT(s,e){const n={};return RE(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zs(s,(r,o)=>{const u=Xl(o,e.Ac(r));u!=null&&(n[r]=u)}),{mapValue:{fields:n}}}function zT(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof kt||s instanceof dg||s instanceof to||s instanceof nn||s instanceof fg||s instanceof mg)}function pg(s,e,n){if(!zT(n)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(n)){const r=xh(n);throw r==="an object"?e.gc(s+" a custom object"):e.gc(s+" "+r)}}function Sm(s,e,n){if((e=Yt(e))instanceof Ih)return e._internalPath;if(typeof e=="string")return yg(s,e);throw ah("Field path arguments must be of type string or ",s,!1,void 0,n)}const bR=new RegExp("[~\\*/\\[\\]]");function yg(s,e,n){if(e.search(bR)>=0)throw ah(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Ih(...e.split("."))._internalPath}catch{throw ah(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function ah(s,e,n,r,o){const u=r&&!r.isEmpty(),f=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(u||f)&&(p+=" (found",u&&(p+=` in field ${r}`),f&&(p+=` in document ${o}`),p+=")"),new ye(te.INVALID_ARGUMENT,g+s+p)}function BT(s,e){return s.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,n,r,o,u){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(vg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class AR extends qT{data(){return super.data()}}function vg(s,e){return typeof e=="string"?yg(s,e):e instanceof Ih?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ye(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _g{}class SR extends _g{}function hn(s,e,...n){let r=[];e instanceof _g&&r.push(e),r=r.concat(n),function(u){const f=u.filter(p=>p instanceof Eg).length,g=u.filter(p=>p instanceof Oh).length;if(f>1||f>0&&g>0)throw new ye(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)s=o._apply(s);return s}class Oh extends SR{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Oh(e,n,r)}_apply(e){const n=this._parse(e);return FT(e._query,n),new Gr(e.firestore,e.converter,dm(e._query,n))}_parse(e){const n=Nh(e.firestore);return function(u,f,g,p,y,T,x){let C;if(y.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new ye(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){_0(x,T);const G=[];for(const Z of x)G.push(v0(p,u,Z));C={arrayValue:{values:G}}}else C=v0(p,u,x)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||_0(x,T),C=TR(g,f,x,T==="in"||T==="not-in");return xt.create(y,T,C)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function mt(s,e,n){const r=e,o=vg("where",s);return Oh._create(o,r,n)}class Eg extends _g{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Eg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Jn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,u){let f=o;const g=u.getFlattenedFilters();for(const p of g)FT(f,p),f=dm(f,p)}(e._query,n),new Gr(e.firestore,e.converter,dm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function v0(s,e,n){if(typeof(n=Yt(n))=="string"){if(n==="")throw new ye(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!HE(e)&&n.indexOf("/")!==-1)throw new ye(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(rt.fromString(n));if(!Te.isDocumentKey(r))throw new ye(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return O_(s,new Te(r))}if(n instanceof nn)return O_(s,n._key);throw new ye(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xh(n)}.`)}function _0(s,e){if(!Array.isArray(s)||s.length===0)throw new ye(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function FT(s,e){const n=function(o,u){for(const f of o)for(const g of f.getFlattenedFilters())if(u.indexOf(g.op)>=0)return g.op;return null}(s.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ye(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class wR{convertValue(e,n="none"){switch(Ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ks(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Se(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Zs(e,(o,u)=>{r[o]=this.convertValue(u,n)}),r}convertVectorValue(e){var n,r,o;const u=(o=(r=(n=e.fields)===null||n===void 0?void 0:n[Xc].arrayValue)===null||r===void 0?void 0:r.values)===null||o===void 0?void 0:o.map(f=>vt(f.doubleValue));return new mg(u)}convertGeoPoint(e){return new dg(vt(e.latitude),vt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ph(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ol(e));default:return null}}convertTimestamp(e){const n=Qs(e);return new kt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=rt.fromString(e);Ye(hT(r),9688,{name:e});const o=new kl(r.get(1),r.get(3)),u=new Te(r.popFirst(5));return o.isEqual(n)||Wi(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(s,e,n){let r;return r=s?s.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class QT extends qT{constructor(e,n,r,o,u,f){super(e,n,r,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Lc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(vg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Lc extends QT{data(e={}){return super.data(e)}}class KT{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new bl(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Lc(this._firestore,this._userDataWriter,r.key,r,new bl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ye(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(g=>{const p=new Lc(o._firestore,o._userDataWriter,g.doc.key,g.doc,new bl(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(g=>u||g.type!==3).map(g=>{const p=new Lc(o._firestore,o._userDataWriter,g.doc.key,g.doc,new bl(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,T=-1;return g.type!==0&&(y=f.indexOf(g.doc.key),f=f.delete(g.doc.key)),g.type!==1&&(f=f.add(g.doc),T=f.indexOf(g.doc.key)),{type:xR(g.type),doc:p,oldIndex:y,newIndex:T}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function xR(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(s){s=yn(s,nn);const e=yn(s.firestore,ts);return cR(Rh(e),s._key).then(n=>YT(e,s,n))}class Tg extends wR{constructor(e){super(),this.firestore=e}convertBytes(e){return new to(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new nn(this.firestore,null,n)}}function Ei(s){s=yn(s,Gr);const e=yn(s.firestore,ts),n=Rh(e),r=new Tg(e);return HT(s._query),hR(n,s._query).then(o=>new KT(e,r,s,o))}function jc(s,e,n){s=yn(s,nn);const r=yn(s.firestore,ts),o=GT(s.converter,e);return kh(r,[jT(Nh(r),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,qn.none())])}function Zl(s,e,n,...r){s=yn(s,nn);const o=yn(s.firestore,ts),u=Nh(o);let f;return f=typeof(e=Yt(e))=="string"||e instanceof Ih?ER(u,"updateDoc",s._key,e,n,r):_R(u,"updateDoc",s._key,e),kh(o,[f.toMutation(s._key,qn.exists(!0))])}function bg(s){return kh(yn(s.firestore,ts),[new Gm(s._key,qn.none())])}function Ag(s,e){const n=yn(s.firestore,ts),r=sn(s),o=GT(s.converter,e);return kh(n,[jT(Nh(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,qn.exists(!1))]).then(()=>r)}function Br(s,...e){var n,r,o;s=Yt(s);let u={includeMetadataChanges:!1,source:"default"},f=0;typeof e[f]!="object"||y0(e[f])||(u=e[f],f++);const g={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(y0(e[f])){const x=e[f];e[f]=(n=x.next)===null||n===void 0?void 0:n.bind(x),e[f+1]=(r=x.error)===null||r===void 0?void 0:r.bind(x),e[f+2]=(o=x.complete)===null||o===void 0?void 0:o.bind(x)}let p,y,T;if(s instanceof nn)y=yn(s.firestore,ts),T=yh(s._key.path),p={next:x=>{e[f]&&e[f](YT(y,s,x))},error:e[f+1],complete:e[f+2]};else{const x=yn(s,Gr);y=yn(x.firestore,ts),T=x._query;const C=new Tg(y);p={next:B=>{e[f]&&e[f](new KT(y,C,x,B))},error:e[f+1],complete:e[f+2]},HT(s._query)}return function(C,B,G,Z){const U=new hg(Z),Y=new lg(B,U,G);return C.asyncQueue.enqueueAndForget(async()=>rg(await rh(C),Y)),()=>{U.xu(),C.asyncQueue.enqueueAndForget(async()=>ag(await rh(C),Y))}}(Rh(y),T,g,p)}function kh(s,e){return function(r,o){const u=new $i;return r.asyncQueue.enqueueAndForget(async()=>J2(await uR(r),o,u)),u.promise}(Rh(s),e)}function YT(s,e,n){const r=n.docs.get(e._key),o=new Tg(s);return new QT(s,o,e._key,r,new bl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(o){so=o})(no),Ya(new Lr("firestore",(r,{instanceIdentifier:o,options:u})=>{const f=r.getProvider("app").getImmediate(),g=new ts(new bx(r.getProvider("auth-internal")),new wx(f,r.getProvider("app-check-internal")),function(y,T){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ye(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kl(y.options.projectId,T)}(f,o),f);return u=Object.assign({useFetchStreams:n},u),g._setSettings(u),g},"PUBLIC").setMultipleInstances(!0)),zs(E_,T_,e),zs(E_,T_,"esm2017")})();/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CR=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),RR=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),E0=s=>{const e=RR(s);return e.charAt(0).toUpperCase()+e.slice(1)},$T=(...s)=>s.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),IR=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var NR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=ae.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:u,iconNode:f,...g},p)=>ae.createElement("svg",{ref:p,...NR,width:e,height:e,stroke:s,strokeWidth:r?Number(n)*24/Number(e):n,className:$T("lucide",o),...!u&&!IR(g)&&{"aria-hidden":"true"},...g},[...f.map(([y,T])=>ae.createElement(y,T)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=(s,e)=>{const n=ae.forwardRef(({className:r,...o},u)=>ae.createElement(DR,{ref:u,iconNode:e,className:$T(`lucide-${CR(E0(s))}`,`lucide-${s}`,r),...o}));return n.displayName=E0(s),n};/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],XT=vn("calendar",OR);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kR=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],T0=vn("camera",kR);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MR=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],VR=vn("chart-no-axes-column",MR);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],lh=vn("chevron-left",PR);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ZT=vn("circle-check",LR);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],UR=vn("circle-x",jR);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zR=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],BR=vn("image",zR);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qR=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ll=vn("plus",qR);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HR=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],FR=vn("settings",HR);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GR=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],JT=vn("square-pen",GR);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QR=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],b0=vn("trash-2",QR);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KR=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],YR=vn("user",KR);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Sg=vn("users",$R);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XR=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Mh=vn("x",XR),WT={apiKey:"AIzaSyCCS1fFfmH4Y4tXn6Rv7w4baNYrz5VSFLG",authDomain:"gym-check-in-d1bf5.firebaseapp.com",projectId:"gym-check-in-d1bf5",storageBucket:"gym-check-in-d1bf5.firebasestorage.app",messagingSenderId:"667813844333",appId:"1:667813844333:web:84e6746664e0540c933664",measurementId:"G-K7WD5R8DDB"},eb=WT.projectId,ZR=null;let Uc,Os,Ka;try{Uc=V0(WT),Os=mR(Uc),Ka=vx(Uc)}catch(s){console.error("Firebase initialization error:",s)}const qr=`/artifacts/${eb}/public/data`,it=s=>`/artifacts/${eb}/users/${s}`,Fe={ATHLETES:"athletes",COACHES:"coaches",CURRENT_CHECKINS:"current_checkins",HISTORICAL_CHECKIN_LOGS:"historical_checkin_logs",APP_METADATA:"app_metadata"},A0={coaches:[{id:"coach-alex",name:"Coach Alex",email:"alex@cheergym.com",phone:"555-111-2222",teams:["Sparkle Squad","Power Pumas"],classes:["Tumble Basics"],isApproved:!0,passcode:"1234"},{id:"coach-jessica",name:"Coach Jessica",email:"jessica@cheergym.com",phone:"555-333-4444",teams:["Power Pumas"],classes:["Jump Drills"],isApproved:!0,passcode:"0000"}],athletes:[{id:"athlete-1",name:"Emily Smith",teams:["Sparkle Squad","Power Pumas"],classes:["Tumble Basics"],skills:[{name:"Back Handspring",status:"Working On"}],improvementAreas:"Needs stronger jumps.",coachNotes:[],parentName:"Sarah Smith",parentPhone:"555-123-4567",parentEmail:"sarah@example.com",emergencyContactName:"John Smith",emergencyContactPhone:"555-765-4321",isApproved:!0,addedByCoach:"Coach Alex",profilePicture:"https://placehold.co/100x100/A0DAFB/FFFFFF?text=ES"},{id:"athlete-2",name:"Mia Johnson",teams:["Sparkle Squad"],classes:["Jump Drills"],skills:[{name:"Round-off",status:"Mastered"}],improvementAreas:"More flexibility.",coachNotes:[],parentName:"David Johnson",parentPhone:"555-987-6543",parentEmail:"david@example.com",emergencyContactName:"Laura Johnson",emergencyContactPhone:"555-432-1098",isApproved:!0,addedByCoach:"Coach Jessica",profilePicture:"https://placehold.co/100x100/F0B27A/FFFFFF?text=MJ"},{id:"athlete-3",name:"Olivia Brown",teams:["Power Pumas"],classes:["Tumble Basics"],skills:[{name:"Flyer Skills",status:"Not Started"}],improvementAreas:"Build confidence.",coachNotes:[],parentName:"Robert Brown",parentPhone:"555-555-1212",parentEmail:"robert@example.com",emergencyContactName:"Maria Brown",emergencyContactPhone:"555-212-5555",isApproved:!0,addedByCoach:"Coach Alex",profilePicture:"https://placehold.co/100x100/96CEB4/FFFFFF?text=OB"},{id:"athlete-pending-1",name:"Sophia Miller",teams:["Sparkle Squad"],classes:[],skills:[],improvementAreas:"",coachNotes:[],parentName:"Chris Miller",parentPhone:"555-100-2000",parentEmail:"chris@example.com",emergencyContactName:"Pat Miller",emergencyContactPhone:"555-200-1000",isApproved:!1,addedByCoach:"Coach Alex",profilePicture:"https://placehold.co/100x100/DBE2EF/36454F?text=SM"}]},wm="cheer123",JR=()=>E.jsxs("div",{className:"flex justify-center items-center p-4",children:[E.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"}),E.jsx("span",{className:"ml-2 text-gray-700",children:"Loading..."})]}),jl=({isOpen:s,title:e,children:n,onClose:r,showCloseButton:o=!0})=>s?E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:E.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md mx-auto relative transform transition-all scale-100 opacity-100",children:[E.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:e}),n,o&&E.jsx("button",{onClick:r,className:"absolute top-3 right-3 text-gray-500 hover:text-gray-700 focus:outline-none",children:E.jsx(Mh,{size:20})})]})}):null,WR=({message:s,type:e,onClose:n})=>{const r=e==="success"?"bg-green-500":"bg-red-500",o=e==="success"?E.jsx(ZT,{size:20}):E.jsx(UR,{size:20});return s?E.jsxs("div",{className:`fixed bottom-4 right-4 ${r} text-white px-4 py-3 rounded-lg shadow-lg flex items-center z-50`,role:"alert",children:[o,E.jsx("span",{className:"ml-2",children:s}),E.jsx("button",{onClick:n,className:"ml-4 text-white opacity-90 hover:opacity-100",children:E.jsx(Mh,{size:16})})]}):null};function eI(){const[s,e]=ae.useState(!1),[n,r]=ae.useState(null),[o,u]=ae.useState("none"),[f,g]=ae.useState(!1),[p,y]=ae.useState(!1),[T,x]=ae.useState(""),[C,B]=ae.useState("success"),G=ae.useCallback((ne,K="success",ue=3e3)=>{x(ne),B(K),y(!0);const le=setTimeout(()=>{y(!1),x("")},ue);return()=>clearTimeout(le)},[]);ae.useEffect(()=>{if(!Uc||!Ka){console.error("Firebase app or auth not initialized.");return}const ne=ow(Ka,async K=>{if(K)r(K.uid),await Z(K.uid);else try{ZR||await tw(Ka)}catch(ue){console.error("Error signing in:",ue),G(`Authentication failed: ${ue.message}`,"error")}g(!0)});return()=>ne()},[]);const Z=async ne=>{var ue;if(!Os||!ne)return;const K=sn(Os,it(ne),Fe.APP_METADATA,"seed_status");try{const le=await oh(K);if(!le.exists()||!((ue=le.data())!=null&&ue.seeded)){console.log("Seeding initial data...");const re=[];for(const D of A0.coaches)re.push(jc(sn(Os,it(ne),Fe.COACHES,D.id),D));for(const D of A0.athletes)re.push(jc(sn(Os,it(ne),Fe.ATHLETES,D.id),D));await Promise.all(re),await jc(K,{seeded:!0,timestamp:new Date}),console.log("Initial data seeded successfully.")}else console.log("Data already seeded.")}catch(le){console.error("Error seeding initial data:",le),G(`Error seeding data: ${le.message}`,"error")}},U=async ne=>{if(!Os||!n)return G("App not ready. Please wait.","error"),!1;if(ne===wm)return e(!0),u("admin"),G("Logged in as Admin!"),!0;try{const K=_t(Os,it(n),Fe.COACHES),ue=hn(K,mt("passcode","==",ne),mt("isApproved","==",!0));return(await Ei(ue)).empty?(G("Invalid Passcode.","error"),!1):(e(!0),u("coach"),G("Logged in as Coach!"),!0)}catch(K){return console.error("Error during login:",K),G(`Login error: ${K.message}`,"error"),!1}},Y=()=>{e(!1),u("none"),G("Logged out successfully.")};return f?E.jsxs("div",{className:"min-h-screen bg-gray-100 font-sans text-gray-900 flex flex-col items-center justify-center p-4",children:[s?E.jsx(nI,{currentUserId:n,userRole:o,onLogout:Y,db:Os,showAppToast:G}):E.jsx(tI,{onLogin:U}),E.jsx(WR,{message:T,type:C,onClose:()=>y(!1)}),s&&E.jsxs("div",{className:"absolute bottom-2 left-2 text-xs text-gray-500 bg-white bg-opacity-75 p-1 rounded",children:["User ID: ",n]})]}):E.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-400 to-indigo-600",children:E.jsx(JR,{})})}const tI=({onLogin:s})=>{const[e,n]=ae.useState(""),[r,o]=ae.useState(!1),u=async f=>{f.preventDefault(),o(!0),await s(e)||n(""),o(!1)};return E.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-2xl w-full max-w-sm border border-gray-200",children:[E.jsx("h2",{className:"text-3xl font-extrabold text-center text-indigo-700 mb-6",children:"Cheer Gym Portal"}),E.jsxs("form",{onSubmit:u,className:"space-y-6",children:[E.jsxs("div",{children:[E.jsx("label",{htmlFor:"passcode",className:"block text-sm font-medium text-gray-700 mb-1",children:"Enter Passcode"}),E.jsx("input",{type:"password",id:"passcode",className:"w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-lg tracking-widest text-center",value:e,onChange:f=>n(f.target.value),required:!0,maxLength:"10"})]}),E.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-indigo-500 to-purple-600 text-white py-3 px-6 rounded-lg font-semibold text-lg shadow-md hover:from-indigo-600 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-300 ease-in-out transform hover:scale-105",disabled:r,children:r?"Logging In...":"Login"})]})]})},nI=({currentUserId:s,userRole:e,onLogout:n,db:r,showAppToast:o})=>{const[u,f]=ae.useState("check-in");return ae.useEffect(()=>{f(e==="coach"||e==="admin"?"coach-dashboard":"check-in")},[e]),E.jsxs("div",{className:"w-full max-w-6xl mx-auto bg-white rounded-xl shadow-2xl border border-gray-200 min-h-[80vh] flex flex-col",children:[E.jsxs("header",{className:"p-4 bg-gradient-to-r from-indigo-600 to-purple-700 text-white rounded-t-xl shadow-md flex justify-between items-center",children:[E.jsx("h1",{className:"text-3xl font-extrabold",children:"Cheer Portal"}),E.jsxs("div",{className:"flex items-center space-x-4",children:[e!=="none"&&E.jsxs("span",{className:"text-sm font-medium opacity-80 capitalize",children:["Logged in as ",e]}),E.jsx("button",{onClick:n,className:"bg-red-500 hover:bg-red-600 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition duration-300 ease-in-out transform hover:scale-105",children:"Logout"})]})]}),E.jsxs("nav",{className:"flex bg-gray-50 border-b border-gray-200",children:[E.jsxs("button",{onClick:()=>f("check-in"),className:`flex-1 py-3 px-4 text-center font-medium text-gray-700 hover:bg-gray-100 focus:outline-none transition-colors duration-200 ${u==="check-in"?"border-b-4 border-indigo-600 text-indigo-700 bg-gray-100":""}`,children:[E.jsx(Sg,{className:"inline-block mr-2",size:20})," Check-In"]}),(e==="coach"||e==="admin")&&E.jsxs("button",{onClick:()=>f("coach-dashboard"),className:`flex-1 py-3 px-4 text-center font-medium text-gray-700 hover:bg-gray-100 focus:outline-none transition-colors duration-200 ${u==="coach-dashboard"?"border-b-4 border-indigo-600 text-indigo-700 bg-gray-100":""}`,children:[E.jsx(FR,{className:"inline-block mr-2",size:20})," Coach Dashboard"]})]}),E.jsxs("main",{className:"flex-1 p-6 overflow-auto",children:[u==="check-in"&&E.jsx(iI,{db:r,currentUserId:s,showAppToast:o}),u==="coach-dashboard"&&(e==="coach"||e==="admin")&&E.jsx(sI,{db:r,currentUserId:s,userRole:e,showAppToast:o})]})]})},iI=({db:s,currentUserId:e,showAppToast:n})=>{const[r,o]=ae.useState(null),[u,f]=ae.useState(null),[g,p]=ae.useState([]),[y,T]=ae.useState([]),[x,C]=ae.useState([]),[B,G]=ae.useState([]),[Z,U]=ae.useState(null),[Y,ne]=ae.useState({}),K=ae.useRef({}),[ue,le]=ae.useState(!1),re=1e3;ae.useEffect(()=>{if(!s||!e)return;(async()=>{try{const O=_t(s,it(e),Fe.ATHLETES),S=hn(O,mt("isApproved","==",!0)),pe=await Ei(S),_e=new Set,q=new Set;pe.forEach(ie=>{const me=ie.data();me.teams.forEach(Ne=>_e.add(Ne)),me.classes.forEach(Ne=>q.add(Ne))}),T(Array.from(_e).sort()),C(Array.from(q).sort())}catch(O){console.error("Error fetching entities:",O),n(`Error loading teams/classes: ${O.message}`,"error")}})()},[s,e,n]),ae.useEffect(()=>{if(!s||!e||!r||!u){p([]);return}const I=_t(s,it(e),Fe.ATHLETES);let O;r==="Team"?O=hn(I,mt("teams","array-contains",u),mt("isApproved","==",!0)):O=hn(I,mt("classes","array-contains",u),mt("isApproved","==",!0));const S=Br(O,pe=>{const _e=pe.docs.map(q=>({id:q.id,...q.data()}));p(_e.sort((q,ie)=>q.name.localeCompare(ie.name)))},pe=>{console.error("Error fetching athletes:",pe),n(`Error loading athletes: ${pe.message}`,"error")});return()=>S()},[s,e,r,u,n]),ae.useEffect(()=>{if(!s||!e||!r||!u){G([]);return}const I=_t(s,qr,Fe.CURRENT_CHECKINS),O=hn(I,mt("checkInType","==",r.toLowerCase()),mt("checkInEntity","==",u)),S=Br(O,pe=>{const _e=pe.docs.map(q=>q.data());G(_e)},pe=>{console.error("Error fetching current check-ins:",pe),n(`Error loading check-ins: ${pe.message}`,"error")});return()=>S()},[s,e,r,u,n]);const D=(I,O)=>{if(console.log(` [Hold Start] Athlete: ${O} (${I})`),!s||!e){console.warn(" Database or user ID not available."),n("App not ready.","error");return}K.current[I]&&clearInterval(K.current[I]),U(I),ne(pe=>({...pe,[I]:0}));const S=Date.now();K.current[I]=setInterval(()=>{const pe=Date.now()-S,_e=Math.min(100,pe/re*100);ne(q=>({...q,[I]:_e})),_e>=100&&(clearInterval(K.current[I]),delete K.current[I],console.log(` [Hold Complete] Triggering check-in for ${O}`),R(I,O),U(null))},50)},w=I=>{K.current[I]&&(clearInterval(K.current[I]),delete K.current[I]),U(null),ne(O=>({...O,[I]:0}))},R=async(I,O)=>{if(console.log(` [Check-In Start] Athlete: ${O} (${I})`),!s||!e||!r||!u){console.warn(" Missing check-in prerequisites:",{db:s,currentUserId:e,selectedCategory:r,selectedEntity:u}),n("Selection incomplete for check-in.","error");return}const S=new Date,pe=_t(s,qr,Fe.CURRENT_CHECKINS),_e=`${I}_${r.toLowerCase()}_${u}_${S.getTime()}`,q={athleteId:I,athleteName:O,checkInType:r.toLowerCase(),checkInEntity:u,timestamp:S.toISOString()};try{await jc(sn(pe,_e),q),console.log(` [Check-In Success] ${O} checked in`),n(`Checked in ${O} for ${u}!`)}catch(ie){console.error(` [Check-In Error] ${O}:`,ie),n(`Check-in failed: ${ie.message}`,"error")}},k=I=>B.some(O=>O.athleteId===I&&O.checkInType===r.toLowerCase()&&O.checkInEntity===u);if(!r)return E.jsxs("div",{className:"flex flex-col items-center justify-center h-full space-y-6",children:[E.jsx("h2",{className:"text-3xl font-bold text-center text-gray-800",children:"Select Check-In Category"}),E.jsxs("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 w-full max-w-md",children:[E.jsxs("button",{onClick:()=>o("Team"),className:"flex-1 bg-indigo-500 text-white py-4 px-6 rounded-lg text-xl font-semibold shadow-lg hover:bg-indigo-600 transition duration-300 ease-in-out transform hover:scale-105",children:[E.jsx(Sg,{className:"inline-block mr-2",size:24})," Team"]}),E.jsxs("button",{onClick:()=>o("Class"),className:"flex-1 bg-purple-500 text-white py-4 px-6 rounded-lg text-xl font-semibold shadow-lg hover:bg-purple-600 transition duration-300 ease-in-out transform hover:scale-105",children:[E.jsx(XT,{className:"inline-block mr-2",size:24})," Class"]})]})]});if(!u){const I=r==="Team"?y:x;return E.jsxs("div",{className:"flex flex-col items-center h-full p-4",children:[E.jsxs("button",{onClick:()=>o(null),className:"self-start mb-4 bg-gray-200 text-gray-700 py-2 px-4 rounded-lg flex items-center hover:bg-gray-300 transition duration-200",children:[E.jsx(lh,{size:20,className:"mr-2"})," Back"]}),E.jsxs("h2",{className:"text-3xl font-bold text-center text-gray-800 mb-6",children:["Select ",r]}),E.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 w-full max-w-3xl",children:I.length===0?E.jsxs("p",{className:"text-center text-gray-600 col-span-full",children:["No ",r.toLowerCase(),"es available."]}):I.map(O=>E.jsx("button",{onClick:()=>f(O),className:"bg-white border border-gray-200 rounded-lg p-4 text-center font-medium shadow hover:shadow-md transition duration-200 transform hover:scale-105 text-lg",children:O},O))})]})}return E.jsxs("div",{className:"flex flex-col h-full p-4",children:[E.jsxs("button",{onClick:()=>f(null),className:"self-start mb-4 bg-gray-200 text-gray-700 py-2 px-4 rounded-lg flex items-center hover:bg-gray-300 transition duration-200",children:[E.jsx(lh,{size:20,className:"mr-2"})," Back to ",r," Selection"]}),E.jsxs("h2",{className:"text-3xl font-bold text-center text-gray-800 mb-6",children:["Check-In for: ",E.jsx("span",{className:"text-indigo-600",children:u})]}),E.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 w-full max-w-5xl mx-auto",children:g.length===0?E.jsxs("p",{className:"text-center text-gray-600 col-span-full",children:["No athletes found for this ",r.toLowerCase(),"."]}):g.map(I=>{const O=k(I.id),S=Z===I.id,pe=S&&Y[I.id]||0;return E.jsxs("div",{className:`relative bg-white rounded-lg p-4 shadow-md overflow-hidden transition-all duration-300 ease-in-out
                  ${O?"border-2 border-green-500 bg-green-50":"border border-gray-200"}
                  ${S?"scale-105 shadow-xl":""}
                `,children:[S&&E.jsx("div",{className:"absolute inset-0 bg-indigo-200 opacity-50 z-0 transition-all duration-50",style:{width:`${pe}%`}}),E.jsx("button",{className:`relative z-10 w-full text-left py-2 px-3 rounded-lg
                    ${O?"text-green-800":"text-gray-800"}
                    ${S?"pointer-events-none":"hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}
                  `,onMouseDown:()=>{le(!0),console.log("[MouseDown] Start hold"),D(I.id,I.name)},onMouseUp:()=>{le(!1),console.log("[MouseUp] End hold"),w(I.id)},onMouseLeave:()=>{ue?console.log("[MouseLeave] Mouse still down, not canceling hold."):(console.log("[MouseLeave] Cancel hold (mouse up)"),w(I.id))},onTouchStart:_e=>{_e.preventDefault(),console.log("[TouchStart] Start hold"),D(I.id,I.name)},onTouchEnd:()=>{console.log("[TouchEnd] End hold"),w(I.id)},onTouchCancel:()=>{console.log("[TouchCancel] Cancel hold"),w(I.id)},children:E.jsxs("div",{className:"flex items-center",children:[E.jsx("img",{src:I.profilePicture||`https://placehold.co/50x50/cccccc/333333?text=${I.name.charAt(0)}`,alt:I.name,className:"w-12 h-12 rounded-full mr-4 object-cover border border-gray-300"}),E.jsx("span",{className:"text-xl font-semibold truncate",children:I.name}),O&&E.jsx(ZT,{className:"ml-auto text-green-600",size:24})]})})]},I.id)})})]})},sI=({db:s,currentUserId:e,userRole:n,showAppToast:r})=>{const[o,u]=ae.useState("attendance"),[f,g]=ae.useState(!1),[p,y]=ae.useState(0),T=ae.useRef(null),x=3e3,C=()=>{g(!0),y(0);const Z=Date.now();T.current=setInterval(()=>{const U=Date.now()-Z,Y=Math.min(100,U/x*100);y(Y),Y===100&&(clearInterval(T.current),T.current=null,G(),g(!1))},50)},B=()=>{T.current&&(clearInterval(T.current),T.current=null),g(!1),y(0)},G=async()=>{if(!s||!e){r("App not ready.","error");return}r("Resetting daily check-ins...","info");try{const Z=_t(s,qr,Fe.CURRENT_CHECKINS),U=await Ei(Z),Y=[],ne=[];if(U.forEach(K=>{const ue=K.data();Y.push(ue),ne.push(bg(sn(Z,K.id)))}),await Promise.all(ne),Y.length>0){const K=_t(s,qr,Fe.HISTORICAL_CHECKIN_LOGS);await Ag(K,{timestamp:new Date().toISOString(),resetByUserId:e,dailyCheckInEvents:Y.map(({athleteId:ue,athleteName:le,checkInType:re,checkInEntity:D,timestamp:w})=>({athleteId:ue,athleteName:le,checkInType:re,checkInEntity:D,timestamp:w}))})}r("Daily check-ins reset and logged!")}catch(Z){console.error("Error resetting daily check-ins:",Z),r(`Failed to reset: ${Z.message}`,"error")}};return E.jsxs("div",{className:"flex flex-col h-full",children:[E.jsx("div",{className:"flex justify-center mb-6",children:E.jsxs("button",{className:`relative bg-red-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transition-all duration-300 ease-in-out transform ${f?"scale-105":"hover:scale-105"} overflow-hidden`,onMouseDown:C,onMouseUp:B,onMouseLeave:B,onTouchStart:Z=>{Z.preventDefault(),C()},onTouchEnd:B,onTouchCancel:B,disabled:n!=="admin",children:[f&&E.jsx("div",{className:"absolute inset-0 bg-red-800 opacity-50 z-0 transition-all duration-50",style:{width:`${progress}%`}}),E.jsx("span",{className:"relative z-10",children:f?`Hold to Reset (${Math.round(p)}%)`:"Reset Daily Check-ins"}),n!=="admin"&&E.jsx("span",{className:"absolute inset-0 flex items-center justify-center text-xs bg-gray-500 bg-opacity-75 rounded-full z-20",children:"Admin Only"})]})}),E.jsxs("nav",{className:"flex bg-gray-50 border-b border-gray-200 rounded-t-lg overflow-hidden mb-6",children:[E.jsxs("button",{onClick:()=>u("attendance"),className:`flex-1 py-3 px-4 text-center font-medium text-gray-700 hover:bg-gray-100 focus:outline-none transition-colors duration-200 ${o==="attendance"?"border-b-4 border-indigo-600 text-indigo-700 bg-gray-100":""}`,children:[E.jsx(VR,{className:"inline-block mr-2",size:20})," Attendance"]}),E.jsxs("button",{onClick:()=>u("athlete-profiles"),className:`flex-1 py-3 px-4 text-center font-medium text-gray-700 hover:bg-gray-100 focus:outline-none transition-colors duration-200 ${o==="athlete-profiles"?"border-b-4 border-indigo-600 text-indigo-700 bg-gray-100":""}`,children:[E.jsx(YR,{className:"inline-block mr-2",size:20})," Athlete Profiles"]}),E.jsxs("button",{onClick:()=>u("coach-management"),className:`flex-1 py-3 px-4 text-center font-medium text-gray-700 hover:bg-gray-100 focus:outline-none transition-colors duration-200 ${o==="coach-management"?"border-b-4 border-indigo-600 text-indigo-700 bg-gray-100":""}`,children:[E.jsx(Sg,{className:"inline-block mr-2",size:20})," Coach Management"]}),E.jsxs("button",{onClick:()=>u("check-in-logs"),className:`flex-1 py-3 px-4 text-center font-medium text-gray-700 hover:bg-gray-100 focus:outline-none transition-colors duration-200 ${o==="check-in-logs"?"border-b-4 border-indigo-600 text-indigo-700 bg-gray-100":""}`,children:[E.jsx(XT,{className:"inline-block mr-2",size:20})," Check-in Logs"]})]}),E.jsxs("div",{className:"flex-1 overflow-auto bg-white rounded-b-xl p-4 shadow-inner",children:[o==="attendance"&&E.jsx(rI,{db:s,currentUserId:e,showAppToast:r}),o==="athlete-profiles"&&E.jsx(aI,{db:s,currentUserId:e,userRole:n,showAppToast:r}),o==="coach-management"&&E.jsx(oI,{db:s,currentUserId:e,userRole:n,showAppToast:r}),o==="check-in-logs"&&E.jsx(uI,{db:s,currentUserId:e,userRole:n,showAppToast:r})]})]})},rI=({db:s,currentUserId:e,showAppToast:n})=>{const[r,o]=ae.useState(null),[u,f]=ae.useState(null),[g,p]=ae.useState([]),[y,T]=ae.useState([]),[x,C]=ae.useState([]),[B,G]=ae.useState([]);ae.useEffect(()=>{if(!s||!e)return;(async()=>{try{const Y=_t(s,it(e),Fe.ATHLETES),ne=hn(Y,mt("isApproved","==",!0)),K=await Ei(ne),ue=new Set,le=new Set;K.forEach(re=>{const D=re.data();D.teams.forEach(w=>ue.add(w)),D.classes.forEach(w=>le.add(w))}),p(Array.from(ue).sort()),T(Array.from(le).sort())}catch(Y){console.error("Error fetching entities:",Y),n(`Error loading teams/classes: ${Y.message}`,"error")}})()},[s,e,n]),ae.useEffect(()=>{if(!s||!e||!r||!u){C([]);return}const U=_t(s,it(e),Fe.ATHLETES);let Y;r==="Team"?Y=hn(U,mt("teams","array-contains",u),mt("isApproved","==",!0)):Y=hn(U,mt("classes","array-contains",u),mt("isApproved","==",!0));const ne=Br(Y,K=>{const ue=K.docs.map(le=>({id:le.id,...le.data()}));C(ue.sort((le,re)=>le.name.localeCompare(re.name)))},K=>{console.error("Error fetching athletes for attendance:",K),n(`Error loading athletes: ${K.message}`,"error")});return()=>ne()},[s,e,r,u,n]),ae.useEffect(()=>{if(!s||!e||!r||!u){G([]);return}const U=_t(s,qr,Fe.CURRENT_CHECKINS),Y=hn(U,mt("checkInType","==",r.toLowerCase()),mt("checkInEntity","==",u)),ne=Br(Y,K=>{const ue=K.docs.map(le=>le.data());G(ue)},K=>{console.error("Error fetching current check-ins:",K),n(`Error loading check-ins: ${K.message}`,"error")});return()=>ne()},[s,e,r,u,n]);const Z=U=>{const Y=B.filter(ne=>ne.athleteId===U);if(Y.length>0){const ne=Y.reduce((K,ue)=>new Date(K.timestamp)>new Date(ue.timestamp)?K:ue);return{status:"Checked In",lastCheckinTime:new Date(ne.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),activities:Y.map(K=>`${K.checkInEntity} (${new Date(K.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})`).join(", ")}}return{status:"Not Checked In",lastCheckinTime:"N/A",activities:"N/A"}};if(!r)return E.jsxs("div",{className:"flex flex-col items-center justify-center h-full space-y-6",children:[E.jsx("h3",{className:"text-2xl font-semibold text-gray-800",children:"Select Category to View Attendance"}),E.jsxs("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 w-full max-w-md",children:[E.jsx("button",{onClick:()=>o("Team"),className:"flex-1 bg-indigo-500 text-white py-3 px-6 rounded-lg text-lg font-semibold shadow-md hover:bg-indigo-600 transition",children:"Team"}),E.jsx("button",{onClick:()=>o("Class"),className:"flex-1 bg-purple-500 text-white py-3 px-6 rounded-lg text-lg font-semibold shadow-md hover:bg-purple-600 transition",children:"Class"})]})]});if(!u){const U=r==="Team"?g:y;return E.jsxs("div",{className:"flex flex-col h-full p-4",children:[E.jsxs("button",{onClick:()=>o(null),className:"self-start mb-4 bg-gray-200 text-gray-700 py-2 px-4 rounded-lg flex items-center hover:bg-gray-300 transition",children:[E.jsx(lh,{size:20,className:"mr-2"})," Back"]}),E.jsxs("h3",{className:"text-2xl font-semibold text-center text-gray-800 mb-6",children:["Select ",r," to View"]}),E.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 w-full max-w-3xl",children:U.length===0?E.jsxs("p",{className:"text-center text-gray-600 col-span-full",children:["No ",r.toLowerCase(),"es found."]}):U.map(Y=>E.jsx("button",{onClick:()=>f(Y),className:"bg-white border border-gray-200 rounded-lg p-3 text-center font-medium shadow hover:shadow-md transition",children:Y},Y))})]})}return E.jsxs("div",{className:"flex flex-col h-full p-4",children:[E.jsxs("button",{onClick:()=>f(null),className:"self-start mb-4 bg-gray-200 text-gray-700 py-2 px-4 rounded-lg flex items-center hover:bg-gray-300 transition",children:[E.jsx(lh,{size:20,className:"mr-2"})," Back to ",r," Selection"]}),E.jsxs("h3",{className:"text-2xl font-bold text-center text-indigo-700 mb-6",children:["Attendance for ",u," (",r,")"]}),E.jsx("div",{className:"overflow-x-auto rounded-lg shadow-md border border-gray-200",children:E.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[E.jsx("thead",{className:"bg-gray-50",children:E.jsxs("tr",{children:[E.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Athlete Name"}),E.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),E.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Check-in Time"}),E.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Activities Today"})]})}),E.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.length===0?E.jsx("tr",{children:E.jsxs("td",{colSpan:"4",className:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500",children:["No athletes found for this ",r.toLowerCase(),"."]})}):x.map(U=>{const{status:Y,lastCheckinTime:ne,activities:K}=Z(U.id);return E.jsxs("tr",{className:Y==="Checked In"?"bg-green-50":"",children:[E.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:E.jsxs("div",{className:"flex items-center",children:[E.jsx("img",{src:U.profilePicture||`https://placehold.co/40x40/cccccc/333333?text=${U.name.charAt(0)}`,alt:U.name,className:"w-8 h-8 rounded-full mr-3 object-cover"}),E.jsx("div",{className:"text-sm font-medium text-gray-900",children:U.name})]})}),E.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:E.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${Y==="Checked In"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:Y})}),E.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ne}),E.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:K})]},U.id)})})]})})]})},aI=({db:s,currentUserId:e,userRole:n,showAppToast:r})=>{const[o,u]=ae.useState([]),[f,g]=ae.useState(""),[p,y]=ae.useState(!1),[T,x]=ae.useState(null),[C,B]=ae.useState(!1);ae.useEffect(()=>{if(!s||!e)return;const re=_t(s,it(e),Fe.ATHLETES),D=Br(re,w=>{const R=w.docs.map(k=>({id:k.id,...k.data()}));u(R.sort((k,I)=>k.name.localeCompare(I.name)))},w=>{console.error("Error fetching athletes for profiles:",w),r(`Error loading athletes: ${w.message}`,"error")});return()=>D()},[s,e,r]);const G=o.filter(re=>re.isApproved),Z=o.filter(re=>!re.isApproved),U=G.filter(re=>re.name.toLowerCase().includes(f.toLowerCase())),Y=async re=>{if(!s||!e||n!=="admin"){r("Permission denied. Only Admin can approve athletes.","error");return}r("Approving athlete...","info");try{const D=sn(s,it(e),Fe.ATHLETES,re);await Zl(D,{isApproved:!0}),r("Athlete approved successfully!")}catch(D){console.error("Error approving athlete:",D),r(`Failed to approve: ${D.message}`,"error")}},ne=async re=>{if(!s||!e||n!=="admin"){r("Permission denied. Only Admin can delete athletes.","error");return}if(window.confirm("Are you sure you want to delete this athlete? This action cannot be undone.")){r("Deleting athlete...","info");try{const D=sn(s,it(e),Fe.ATHLETES,re);await bg(D),r("Athlete deleted successfully!")}catch(D){console.error("Error deleting athlete:",D),r(`Failed to delete: ${D.message}`,"error")}}},K=re=>{x(re),B(!1)},ue=()=>{x(null),B(!1)},le=()=>{n==="admin"?B(re=>!re):r("Only Admin can edit athlete profiles.","error")};return E.jsxs("div",{className:"p-4",children:[E.jsx("h3",{className:"text-2xl font-bold text-center text-indigo-700 mb-6",children:"Athlete Profiles"}),E.jsxs("div",{className:"flex justify-between items-center mb-6 flex-wrap gap-4",children:[E.jsx("input",{type:"text",placeholder:"Search approved athletes by name...",className:"flex-1 min-w-[200px] px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500",value:f,onChange:re=>g(re.target.value)}),E.jsxs("button",{onClick:()=>y(!0),className:"bg-indigo-600 text-white py-2 px-5 rounded-lg font-semibold shadow-md hover:bg-indigo-700 transition duration-300 transform hover:scale-105 flex items-center",children:[E.jsx(Ll,{size:20,className:"mr-2"})," Add New Athlete"]})]}),Z.length>0&&E.jsxs("div",{className:"mb-8 p-4 bg-yellow-50 border border-yellow-200 rounded-lg shadow-sm",children:[E.jsx("h4",{className:"text-xl font-semibold text-yellow-800 mb-4",children:"Pending Athletes for Approval"}),E.jsx("div",{className:"overflow-x-auto",children:E.jsxs("table",{className:"min-w-full divide-y divide-yellow-200",children:[E.jsx("thead",{className:"bg-yellow-100",children:E.jsxs("tr",{children:[E.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-yellow-700 uppercase tracking-wider",children:"Name"}),E.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-yellow-700 uppercase tracking-wider",children:"Added By"}),E.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-yellow-700 uppercase tracking-wider",children:"Actions"})]})}),E.jsx("tbody",{className:"bg-white divide-y divide-yellow-200",children:Z.map(re=>E.jsxs("tr",{children:[E.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:re.name}),E.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:re.addedByCoach||"N/A"}),E.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[E.jsx("button",{onClick:()=>Y(re.id),className:`text-green-600 hover:text-green-900 mr-3 ${n!=="admin"?"opacity-50 cursor-not-allowed":""}`,disabled:n!=="admin",children:"Approve"}),E.jsx("button",{onClick:()=>ne(re.id),className:`text-red-600 hover:text-red-900 ${n!=="admin"?"opacity-50 cursor-not-allowed":""}`,disabled:n!=="admin",children:"Delete"})]})]},re.id))})]})})]}),E.jsx("h4",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Approved Athletes"}),E.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:U.length===0?E.jsx("p",{className:"col-span-full text-center text-gray-600",children:"No approved athletes found."}):U.map(re=>E.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 flex items-center space-x-4 hover:shadow-md transition cursor-pointer",onClick:()=>K(re),children:[E.jsx("img",{src:re.profilePicture||`https://placehold.co/60x60/cccccc/333333?text=${re.name.charAt(0)}`,alt:re.name,className:"w-16 h-16 rounded-full object-cover border-4 border-gray-300"}),E.jsxs("div",{children:[E.jsx("p",{className:"text-lg font-semibold text-gray-900",children:re.name}),E.jsxs("p",{className:"text-sm text-gray-600",children:[re.teams.join(", ")," / ",re.classes.join(", ")]})]})]},re.id))}),E.jsx(jl,{isOpen:p,title:"Add New Athlete",onClose:()=>y(!1),showCloseButton:!0,children:E.jsx(S0,{db:s,currentUserId:e,onClose:()=>y(!1),showAppToast:r,isNew:!0,isEditing:!0,setParentIsEditing:()=>{},userRole:n})}),T&&E.jsxs(jl,{isOpen:!!T,title:C?"Edit Athlete Profile":"View Athlete Profile",onClose:ue,showCloseButton:!0,children:[E.jsx("div",{className:"flex justify-end mb-4",children:E.jsxs("button",{onClick:le,className:`py-2 px-4 rounded-lg flex items-center transition duration-200
                ${C?"bg-red-500 text-white hover:bg-red-600":"bg-indigo-500 text-white hover:bg-indigo-600"}
                ${n!=="admin"?"opacity-50 cursor-not-allowed":""}
              `,disabled:n!=="admin",children:[C?E.jsx(Mh,{size:18,className:"mr-2"}):E.jsx(JT,{size:18,className:"mr-2"}),C?"Cancel Edit":"Edit Profile"]})}),E.jsx(S0,{db:s,currentUserId:e,onClose:ue,showAppToast:r,isNew:!1,initialData:T,isEditing:C,setParentIsEditing:B,athleteId:T.id,userRole:n})]})]})},S0=({db:s,currentUserId:e,onClose:n,showAppToast:r,isNew:o,initialData:u,isEditing:f,setParentIsEditing:g,athleteId:p,userRole:y})=>{const[T,x]=ae.useState(u||{name:"",teams:[],classes:[],skills:[],improvementAreas:"",coachNotes:[],parentName:"",parentPhone:"",parentEmail:"",emergencyContactName:"",emergencyContactPhone:"",isApproved:o?!1:(u==null?void 0:u.isApproved)||!1,addedByCoach:"",profilePicture:""}),[C,B]=ae.useState([]),[G,Z]=ae.useState([]),[U,Y]=ae.useState(""),[ne,K]=ae.useState("Not Started"),[ue,le]=ae.useState(""),[re,D]=ae.useState(null),w=ae.useRef(null),R=ae.useRef(null),k=ae.useRef(null),[I,O]=ae.useState(!1);ae.useEffect(()=>{if(!s||!e)return;(async()=>{try{const he=_t(s,it(e),Fe.ATHLETES),Ce=await Ei(hn(he,mt("isApproved","==",!0))),De=new Set,at=new Set;Ce.forEach(Ct=>{var Et,an;(Et=Ct.data().teams)==null||Et.forEach(Hn=>De.add(Hn)),(an=Ct.data().classes)==null||an.forEach(Hn=>at.add(Hn))}),B(Array.from(De).sort()),Z(Array.from(at).sort())}catch(he){console.error("Error fetching all teams/classes:",he)}})()},[s,e]);const S=se=>{const{name:he,value:Ce,type:De,checked:at}=se.target;if(De==="checkbox"){const{group:Ct}=se.target.dataset;let Et=[...T[Ct]];at?Et.push(Ce):Et=Et.filter(an=>an!==Ce),x({...T,[Ct]:Et})}else x({...T,[he]:Ce})},pe=()=>{U.trim()&&(x({...T,skills:[...T.skills,{name:U.trim(),status:ne}]}),Y(""),K("Not Started"))},_e=(se,he)=>{const Ce=[...T.skills];Ce[se].status=he,x({...T,skills:Ce})},q=se=>{const he=T.skills.filter((Ce,De)=>De!==se);x({...T,skills:he})},ie=async()=>{var se;if(ue.trim()){let he="Unknown Coach";try{const Ce=_t(s,it(e),Fe.COACHES),De=hn(Ce,mt("passcode","==",wm)),at=await Ei(De);if(!at.empty)he=at.docs[0].data().name;else{const Ct=await oh(sn(s,it(e),Fe.COACHES,(se=Ka.currentUser)==null?void 0:se.uid));Ct.exists()&&(he=Ct.data().name)}}catch(Ce){console.warn("Could not fetch coach name for note:",Ce)}x({...T,coachNotes:[...T.coachNotes,{timestamp:new Date().toISOString(),note:ue.trim(),coachName:he}]}),le("")}},me=se=>{const he=T.coachNotes.filter((Ce,De)=>De!==se);x({...T,coachNotes:he})},Ne=se=>{const he=se.target.files[0];if(he){const Ce=new FileReader;Ce.onloadend=()=>{x({...T,profilePicture:Ce.result}),D(null)},Ce.readAsDataURL(he)}},M=()=>{x({...T,profilePicture:""})},J=async()=>{D("camera");try{const se=await navigator.mediaDevices.getUserMedia({video:!0});R.current&&(R.current.srcObject=se,R.current.play())}catch(se){console.error("Error accessing camera:",se),r(`Could not access camera: ${se.message}. Please ensure permissions are granted.`,"error"),D(null)}},fe=()=>{if(R.current&&k.current){const se=k.current.getContext("2d");k.current.width=R.current.videoWidth,k.current.height=R.current.videoHeight,se.drawImage(R.current,0,0,k.current.width,k.current.height);const he=k.current.toDataURL("image/png");x({...T,profilePicture:he}),R.current.srcObject&&R.current.srcObject.getTracks().forEach(Ce=>Ce.stop()),D(null)}},oe=async se=>{var he;se.preventDefault(),O(!0);try{const Ce=_t(s,it(e),Fe.ATHLETES);let De="Unknown Coach";try{const at=_t(s,it(e),Fe.COACHES),Ct=hn(at,mt("passcode","==",wm)),Et=await Ei(Ct);if(!Et.empty)De=Et.docs[0].data().name;else{const an=await oh(sn(s,it(e),Fe.COACHES,(he=Ka.currentUser)==null?void 0:he.uid));an.exists()&&(De=an.data().name)}}catch(at){console.warn("Could not fetch coach name for new athlete:",at)}if(o)await Ag(Ce,{...T,addedByCoach:De}),r("Athlete added successfully!");else{if(y!=="admin"){r("Permission denied. Only Admin can save edits.","error"),O(!1);return}const at=sn(s,it(e),Fe.ATHLETES,p);await Zl(at,T),r("Athlete updated successfully!"),g&&g(!1)}n()}catch(Ce){console.error("Error saving athlete:",Ce),r(`Failed to save athlete: ${Ce.message}`,"error")}finally{O(!1)}},de=f||o;return E.jsxs("form",{onSubmit:oe,className:"space-y-6 max-h-[80vh] overflow-y-auto pr-2",children:[E.jsxs("div",{className:"flex flex-col items-center mb-6",children:[E.jsx("img",{src:T.profilePicture||`https://placehold.co/120x120/cccccc/333333?text=${T.name.charAt(0)||"?"}`,alt:"Profile",className:"w-24 h-24 rounded-full object-cover border-4 border-indigo-200 shadow-md mb-4"}),de&&E.jsxs("div",{className:"flex space-x-2",children:[E.jsxs("button",{type:"button",onClick:()=>w.current.click(),className:"bg-gray-200 text-gray-700 py-2 px-4 rounded-lg flex items-center hover:bg-gray-300 transition",children:[E.jsx(BR,{size:18,className:"mr-2"})," Upload"]}),E.jsx("input",{type:"file",accept:"image/*",ref:w,onChange:Ne,className:"hidden"}),E.jsxs("button",{type:"button",onClick:J,className:"bg-gray-200 text-gray-700 py-2 px-4 rounded-lg flex items-center hover:bg-gray-300 transition",children:[E.jsx(T0,{size:18,className:"mr-2"})," Camera"]}),T.profilePicture&&E.jsxs("button",{type:"button",onClick:M,className:"bg-red-100 text-red-700 py-2 px-4 rounded-lg flex items-center hover:bg-red-200 transition",children:[E.jsx(b0,{size:18,className:"mr-2"})," Remove"]})]})]}),E.jsx(jl,{isOpen:re==="camera",title:"Take a Photo",onClose:()=>{D(null),R.current&&R.current.srcObject&&R.current.srcObject.getTracks().forEach(se=>se.stop())},children:E.jsxs("div",{className:"flex flex-col items-center",children:[E.jsx("video",{ref:R,autoPlay:!0,playsInline:!0,className:"w-full max-w-sm rounded-lg border border-gray-300"}),E.jsx("canvas",{ref:k,className:"hidden"}),E.jsxs("button",{type:"button",onClick:fe,className:"mt-4 bg-indigo-500 text-white py-2 px-4 rounded-lg flex items-center hover:bg-indigo-600 transition",children:[E.jsx(T0,{size:20,className:"mr-2"})," Take Photo"]})]})}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Athlete Name"}),E.jsx("input",{type:"text",name:"name",value:T.name,onChange:S,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",disabled:!de})]}),o&&E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Added By Coach"}),E.jsx("p",{className:"mt-1 text-gray-500 text-sm italic",children:"Will be auto-filled by current coach."})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Teams"}),E.jsxs("div",{className:"mt-1 border border-gray-300 rounded-md p-2 max-h-40 overflow-y-auto bg-gray-50",children:[C.map(se=>E.jsxs("div",{className:"flex items-center",children:[E.jsx("input",{type:"checkbox",id:`team-${se}`,name:"teams",value:se,"data-group":"teams",checked:T.teams.includes(se),onChange:S,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded",disabled:!de}),E.jsx("label",{htmlFor:`team-${se}`,className:"ml-2 text-sm text-gray-900",children:se})]},se)),C.length===0&&E.jsx("p",{className:"text-sm text-gray-500",children:"No teams available yet."})]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Classes"}),E.jsxs("div",{className:"mt-1 border border-gray-300 rounded-md p-2 max-h-40 overflow-y-auto bg-gray-50",children:[G.map(se=>E.jsxs("div",{className:"flex items-center",children:[E.jsx("input",{type:"checkbox",id:`class-${se}`,name:"classes",value:se,"data-group":"classes",checked:T.classes.includes(se),onChange:S,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded",disabled:!de}),E.jsx("label",{htmlFor:`class-${se}`,className:"ml-2 text-sm text-gray-900",children:se})]},se)),G.length===0&&E.jsx("p",{className:"text-sm text-gray-500",children:"No classes available yet."})]})]})]}),E.jsx("h4",{className:"text-lg font-semibold text-gray-800 mt-6 mb-2",children:"Contact Information"}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[E.jsxs("div",{children:[E.jsx("label",{htmlFor:"parentName",className:"block text-sm font-medium text-gray-700",children:"Parent/Guardian Name"}),E.jsx("input",{type:"text",name:"parentName",value:T.parentName,onChange:S,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",disabled:!de})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"parentPhone",className:"block text-sm font-medium text-gray-700",children:"Parent Phone"}),E.jsx("input",{type:"tel",name:"parentPhone",value:T.parentPhone,onChange:S,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",disabled:!de})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"parentEmail",className:"block text-sm font-medium text-gray-700",children:"Parent Email"}),E.jsx("input",{type:"email",name:"parentEmail",value:T.parentEmail,onChange:S,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",disabled:!de})]})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[E.jsxs("div",{children:[E.jsx("label",{htmlFor:"emergencyContactName",className:"block text-sm font-medium text-gray-700",children:"Emergency Contact Name"}),E.jsx("input",{type:"text",name:"emergencyContactName",value:T.emergencyContactName,onChange:S,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",disabled:!de})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"emergencyContactPhone",className:"block text-sm font-medium text-gray-700",children:"Emergency Contact Phone"}),E.jsx("input",{type:"tel",name:"emergencyContactPhone",value:T.emergencyContactPhone,onChange:S,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",disabled:!de})]})]}),E.jsx("h4",{className:"text-lg font-semibold text-gray-800 mt-6 mb-2",children:"Skills"}),E.jsxs("div",{className:"space-y-3",children:[T.skills.map((se,he)=>E.jsxs("div",{className:"flex items-center space-x-3 bg-gray-50 p-3 rounded-lg border border-gray-200",children:[E.jsx("span",{className:"font-medium text-gray-900 flex-1",children:se.name}),de?E.jsxs("select",{value:se.status,onChange:Ce=>_e(he,Ce.target.value),className:"border border-gray-300 rounded-md shadow-sm p-1 text-sm",children:[E.jsx("option",{children:"Not Started"}),E.jsx("option",{children:"Working On"}),E.jsx("option",{children:"Needs Improvement"}),E.jsx("option",{children:"Mastered"})]}):E.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${se.status==="Mastered"?"bg-green-100 text-green-800":se.status==="Working On"?"bg-blue-100 text-blue-800":se.status==="Needs Improvement"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:se.status}),de&&E.jsx("button",{type:"button",onClick:()=>q(he),className:"text-red-500 hover:text-red-700",children:E.jsx(b0,{size:16})})]},he)),de&&E.jsxs("div",{className:"flex space-x-2 mt-4",children:[E.jsx("input",{type:"text",placeholder:"New Skill Name",value:U,onChange:se=>Y(se.target.value),className:"flex-1 border border-gray-300 rounded-md shadow-sm p-2"}),E.jsxs("select",{value:ne,onChange:se=>K(se.target.value),className:"border border-gray-300 rounded-md shadow-sm p-2",children:[E.jsx("option",{children:"Not Started"}),E.jsx("option",{children:"Working On"}),E.jsx("option",{children:"Needs Improvement"}),E.jsx("option",{children:"Mastered"})]}),E.jsx("button",{type:"button",onClick:pe,className:"bg-indigo-500 text-white p-2 rounded-lg hover:bg-indigo-600 transition",children:E.jsx(Ll,{size:20})})]})]}),E.jsx("h4",{className:"text-lg font-semibold text-gray-800 mt-6 mb-2",children:"Improvement Areas"}),E.jsx("textarea",{name:"improvementAreas",value:T.improvementAreas,onChange:S,rows:"3",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",placeholder:"Notes on areas for improvement...",disabled:!de}),E.jsx("h4",{className:"text-lg font-semibold text-gray-800 mt-6 mb-2",children:"Coach Notes"}),E.jsxs("div",{className:"space-y-3",children:[T.coachNotes.sort((se,he)=>new Date(he.timestamp)-new Date(se.timestamp)).map((se,he)=>E.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:[E.jsxs("p",{className:"text-sm text-gray-600",children:[E.jsx("span",{className:"font-medium",children:se.coachName})," on ",new Date(se.timestamp).toLocaleDateString()," at ",new Date(se.timestamp).toLocaleTimeString()]}),E.jsx("p",{className:"text-gray-800 mt-1",children:se.note}),de&&E.jsx("button",{type:"button",onClick:()=>me(he),className:"text-red-500 hover:text-red-700 text-sm mt-2",children:"Remove Note"})]},he)),de&&E.jsxs("div",{className:"flex space-x-2 mt-4",children:[E.jsx("textarea",{value:ue,onChange:se=>le(se.target.value),rows:"2",placeholder:"Add new coach note...",className:"flex-1 border border-gray-300 rounded-md shadow-sm p-2"}),E.jsx("button",{type:"button",onClick:ie,className:"bg-indigo-500 text-white p-2 rounded-lg hover:bg-indigo-600 transition",children:E.jsx(Ll,{size:20})})]})]}),(de||o)&&E.jsxs("div",{className:"flex justify-end space-x-4 mt-8",children:[E.jsx("button",{type:"button",onClick:n,className:"bg-gray-300 text-gray-800 py-2 px-5 rounded-lg font-semibold shadow-md hover:bg-gray-400 transition",disabled:I,children:"Cancel"}),E.jsx("button",{type:"submit",className:"bg-green-600 text-white py-2 px-5 rounded-lg font-semibold shadow-md hover:bg-green-700 transition",disabled:I||f&&y!=="admin",children:I?"Saving...":o?"Add Athlete":"Save Changes"})]})]})},oI=({db:s,currentUserId:e,userRole:n,showAppToast:r})=>{const[o,u]=ae.useState([]),[f,g]=ae.useState(!1),[p,y]=ae.useState(null),[T,x]=ae.useState(!1);ae.useEffect(()=>{if(!s||!e)return;const U=_t(s,it(e),Fe.COACHES),Y=Br(U,ne=>{const K=ne.docs.map(ue=>({id:ue.id,...ue.data()}));u(K.sort((ue,le)=>ue.name.localeCompare(le.name)))},ne=>{console.error("Error fetching coaches:",ne),r(`Error loading coaches: ${ne.message}`,"error")});return()=>Y()},[s,e,r]);const C=async U=>{if(n!=="admin"){r("Permission denied. Only Admin can approve coaches.","error");return}r("Approving coach...","info");try{const Y=sn(s,it(e),Fe.COACHES,U);await Zl(Y,{isApproved:!0}),r("Coach approved successfully!")}catch(Y){console.error("Error approving coach:",Y),r(`Failed to approve: ${Y.message}`,"error")}},B=async U=>{if(n!=="admin"){r("Permission denied. Only Admin can delete coaches.","error");return}if(window.confirm("Are you sure you want to delete this coach? This action cannot be undone.")){r("Deleting coach...","info");try{const Y=sn(s,it(e),Fe.COACHES,U);await bg(Y),r("Coach deleted successfully!")}catch(Y){console.error("Error deleting coach:",Y),r(`Failed to delete: ${Y.message}`,"error")}}},G=U=>{n==="admin"?(y(U),x(!0)):r("Only Admin can edit coach profiles.","error")},Z=()=>{y(null),x(!1)};return E.jsxs("div",{className:"p-4",children:[E.jsx("h3",{className:"text-2xl font-bold text-center text-indigo-700 mb-6",children:"Coach Management"}),E.jsx("div",{className:"flex justify-end mb-6",children:E.jsxs("button",{onClick:()=>g(!0),className:"bg-indigo-600 text-white py-2 px-5 rounded-lg font-semibold shadow-md hover:bg-indigo-700 transition duration-300 transform hover:scale-105 flex items-center",disabled:n!=="admin",children:[E.jsx(Ll,{size:20,className:"mr-2"})," Add New Coach",n!=="admin"&&E.jsx("span",{className:"ml-2 text-xs opacity-75",children:" (Admin Only)"})]})}),E.jsx("div",{className:"overflow-x-auto rounded-lg shadow-md border border-gray-200",children:E.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[E.jsx("thead",{className:"bg-gray-50",children:E.jsxs("tr",{children:[E.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),E.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),E.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Teams / Classes"}),E.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),E.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Passcode"}),E.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),E.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.length===0?E.jsx("tr",{children:E.jsx("td",{colSpan:"6",className:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500",children:"No coaches found."})}):o.map(U=>{var Y,ne;return E.jsxs("tr",{children:[E.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:U.name}),E.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[U.email,E.jsx("br",{}),U.phone]}),E.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["Teams: ",((Y=U.teams)==null?void 0:Y.join(", "))||"N/A",E.jsx("br",{}),"Classes: ",((ne=U.classes)==null?void 0:ne.join(", "))||"N/A"]}),E.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:E.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${U.isApproved?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:U.isApproved?"Approved":"Pending"})}),E.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:U.passcode}),E.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[!U.isApproved&&E.jsx("button",{onClick:()=>C(U.id),className:`text-green-600 hover:text-green-900 mr-3 ${n!=="admin"?"opacity-50 cursor-not-allowed":""}`,disabled:n!=="admin",children:"Approve"}),E.jsx("button",{onClick:()=>G(U),className:`text-indigo-600 hover:text-indigo-900 mr-3 ${n!=="admin"?"opacity-50 cursor-not-allowed":""}`,disabled:n!=="admin",children:"Edit"}),E.jsx("button",{onClick:()=>B(U.id),className:`text-red-600 hover:text-red-900 ${n!=="admin"?"opacity-50 cursor-not-allowed":""}`,disabled:n!=="admin",children:"Delete"})]})]},U.id)})})]})}),E.jsx(jl,{isOpen:f||T,title:T?"Edit Coach":"Add New Coach",onClose:Z,showCloseButton:!0,children:E.jsx(lI,{db:s,currentUserId:e,onClose:Z,showAppToast:r,isNew:!T,initialData:p,userRole:n})})]})},lI=({db:s,currentUserId:e,onClose:n,showAppToast:r,isNew:o,initialData:u,userRole:f})=>{const[g,p]=ae.useState(u||{name:"",email:"",phone:"",teams:[],classes:[],isApproved:o?!1:(u==null?void 0:u.isApproved)||!1,passcode:""}),[y,T]=ae.useState([]),[x,C]=ae.useState([]),[B,G]=ae.useState(!1);ae.useEffect(()=>{if(!s||!e)return;(async()=>{try{const ne=_t(s,it(e),Fe.ATHLETES),K=await Ei(hn(ne,mt("isApproved","==",!0))),ue=new Set,le=new Set;K.forEach(re=>{var D,w;(D=re.data().teams)==null||D.forEach(R=>ue.add(R)),(w=re.data().classes)==null||w.forEach(R=>le.add(R))}),T(Array.from(ue).sort()),C(Array.from(le).sort())}catch(ne){console.error("Error fetching all teams/classes for coach form:",ne)}})()},[s,e]);const Z=Y=>{const{name:ne,value:K,type:ue,checked:le}=Y.target;if(ue==="checkbox"){const{group:re}=Y.target.dataset;let D=[...g[re]];le?D.push(K):D=D.filter(w=>w!==K),p({...g,[re]:D})}else p({...g,[ne]:K})},U=async Y=>{if(Y.preventDefault(),f!=="admin"){r("Permission denied. Only Admin can add/edit coaches.","error");return}G(!0);try{const ne=_t(s,it(e),Fe.COACHES);if(o)await Ag(ne,g),r("Coach added successfully!");else{const K=sn(s,it(e),Fe.COACHES,u.id);await Zl(K,g),r("Coach updated successfully!")}n()}catch(ne){console.error("Error saving coach:",ne),r(`Failed to save coach: ${ne.message}`,"error")}finally{G(!1)}};return E.jsxs("form",{onSubmit:U,className:"space-y-6",children:[E.jsxs("div",{children:[E.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Coach Name"}),E.jsx("input",{type:"text",name:"name",value:g.name,onChange:Z,required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),E.jsx("input",{type:"email",name:"email",value:g.email,onChange:Z,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone"}),E.jsx("input",{type:"tel",name:"phone",value:g.phone,onChange:Z,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"passcode",className:"block text-sm font-medium text-gray-700",children:"4-digit Passcode"}),E.jsx("input",{type:"text",name:"passcode",value:g.passcode,onChange:Z,required:!0,maxLength:"4",pattern:"\\d{4}",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Assigned Teams"}),E.jsxs("div",{className:"mt-1 border border-gray-300 rounded-md p-2 max-h-40 overflow-y-auto bg-gray-50",children:[y.map(Y=>E.jsxs("div",{className:"flex items-center",children:[E.jsx("input",{type:"checkbox",id:`coach-team-${Y}`,name:"teams",value:Y,"data-group":"teams",checked:g.teams.includes(Y),onChange:Z,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded"}),E.jsx("label",{htmlFor:`coach-team-${Y}`,className:"ml-2 text-sm text-gray-900",children:Y})]},Y)),y.length===0&&E.jsx("p",{className:"text-sm text-gray-500",children:"No teams available yet."})]})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Assigned Classes"}),E.jsxs("div",{className:"mt-1 border border-gray-300 rounded-md p-2 max-h-40 overflow-y-auto bg-gray-50",children:[x.map(Y=>E.jsxs("div",{className:"flex items-center",children:[E.jsx("input",{type:"checkbox",id:`coach-class-${Y}`,name:"classes",value:Y,"data-group":"classes",checked:g.classes.includes(Y),onChange:Z,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded"}),E.jsx("label",{htmlFor:`coach-class-${Y}`,className:"ml-2 text-sm text-gray-900",children:Y})]},Y)),x.length===0&&E.jsx("p",{className:"text-sm text-gray-500",children:"No classes available yet."})]})]})]}),E.jsxs("div",{className:"flex justify-end space-x-4 mt-8",children:[E.jsx("button",{type:"button",onClick:n,className:"bg-gray-300 text-gray-800 py-2 px-5 rounded-lg font-semibold shadow-md hover:bg-gray-400 transition",disabled:B,children:"Cancel"}),E.jsx("button",{type:"submit",className:"bg-green-600 text-white py-2 px-5 rounded-lg font-semibold shadow-md hover:bg-green-700 transition",disabled:B,children:B?"Saving...":o?"Add Coach":"Save Changes"})]})]})},uI=({db:s,currentUserId:e,userRole:n,showAppToast:r})=>{const[o,u]=ae.useState([]),[f,g]=ae.useState(null),[p,y]=ae.useState(!1),[T,x]=ae.useState(""),[C,B]=ae.useState("All"),[G,Z]=ae.useState("All"),[U,Y]=ae.useState("All"),[ne,K]=ae.useState([]),[ue,le]=ae.useState([]);ae.useEffect(()=>{if(!s||!e)return;const S=_t(s,qr,Fe.HISTORICAL_CHECKIN_LOGS),pe=Br(S,_e=>{const q=_e.docs.map(ie=>({id:ie.id,...ie.data()}));u(q.sort((ie,me)=>new Date(me.timestamp)-new Date(ie.timestamp)))},_e=>{console.error("Error fetching historical logs:",_e),r(`Error loading logs: ${_e.message}`,"error")});return()=>pe()},[s,e,r]),ae.useEffect(()=>{if(!s||!e)return;(async()=>{try{const pe=_t(s,it(e),Fe.ATHLETES),_e=await Ei(hn(pe,mt("isApproved","==",!0))),q=new Set,ie=new Set;_e.forEach(me=>{var Ne,M;(Ne=me.data().teams)==null||Ne.forEach(J=>q.add(J)),(M=me.data().classes)==null||M.forEach(J=>ie.add(J))}),K(Array.from(q).sort()),le(Array.from(ie).sort())}catch(pe){console.error("Error fetching all teams/classes for logs filter:",pe)}})()},[s,e]);const re=S=>{g(S),y(!1)},D=()=>{g(null),y(!1)},w=()=>{n==="admin"?y(S=>!S):r("Only Admin can edit check-in logs.","error")},R=(S,pe)=>{if(n!=="admin"){r("Permission denied. Only Admin can edit logs.","error");return}const _e={...f};_e.dailyCheckInEvents=_e.dailyCheckInEvents.filter((q,ie)=>ie!==pe),g(_e)},k=async(S,pe,_e,q,ie)=>{if(n!=="admin"){r("Permission denied. Only Admin can edit logs.","error");return}const me=await oh(sn(s,it(e),Fe.ATHLETES,pe));if(!me.exists()){r("Athlete not found.","error");return}const Ne=me.data().name,M={athleteId:pe,athleteName:Ne,checkInType:_e.toLowerCase(),checkInEntity:q,timestamp:new Date(ie).toISOString()},J={...f,dailyCheckInEvents:[...f.dailyCheckInEvents,M]};g(J),r("Event added locally. Remember to save changes.","info")},I=async()=>{if(n!=="admin"){r("Permission denied. Only Admin can save log edits.","error");return}if(f){r("Saving log changes...","info");try{const S=sn(s,qr,Fe.HISTORICAL_CHECKIN_LOGS,f.id);await Zl(S,{dailyCheckInEvents:f.dailyCheckInEvents,lastEdited:new Date().toISOString()}),r("Log updated successfully!"),y(!1)}catch(S){console.error("Error saving log edits:",S),r(`Failed to save log: ${S.message}`,"error")}}},O=o.filter(S=>{let pe=!0;if(U!=="All"&&G!=="All"?S.dailyCheckInEvents.some(q=>q.checkInEntity===U&&q.checkInType===G.toLowerCase())||(pe=!1):G!=="All"&&(S.dailyCheckinEvents.some(q=>q.checkInType===G.toLowerCase())||(pe=!1)),T){const _e=T.toLowerCase();S.dailyCheckInEvents.some(ie=>ie.athleteName.toLowerCase().includes(_e))||(pe=!1)}return C==="Missed"&&T?S.dailyCheckinEvents.some(q=>q.athleteName.toLowerCase().includes(T.toLowerCase()))&&(pe=!1):C==="Checked In"&&T?S.dailyCheckinEvents.some(q=>q.athleteName.toLowerCase().includes(T.toLowerCase()))||(pe=!1):C==="Checked In"&&!T&&S.dailyCheckinEvents.length===0&&(pe=!1),pe});return E.jsxs("div",{className:"p-4",children:[E.jsx("h3",{className:"text-2xl font-bold text-center text-indigo-700 mb-6",children:"Historical Check-in Logs"}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6 p-4 bg-gray-50 rounded-lg shadow-sm border border-gray-200",children:[E.jsxs("div",{children:[E.jsx("label",{htmlFor:"filterAthlete",className:"block text-sm font-medium text-gray-700",children:"Athlete Name"}),E.jsx("input",{type:"text",id:"filterAthlete",value:T,onChange:S=>x(S.target.value),placeholder:"Filter by athlete name",className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"filterStatus",className:"block text-sm font-medium text-gray-700",children:"Status"}),E.jsxs("select",{id:"filterStatus",value:C,onChange:S=>B(S.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",children:[E.jsx("option",{value:"All",children:"All"}),E.jsx("option",{value:"Checked In",children:"Checked In"}),E.jsx("option",{value:"Missed",children:"Missed (requires athlete name filter)"})]})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"filterCategory",className:"block text-sm font-medium text-gray-700",children:"Category"}),E.jsxs("select",{id:"filterCategory",value:G,onChange:S=>{Z(S.target.value),Y("All")},className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",children:[E.jsx("option",{value:"All",children:"All"}),E.jsx("option",{value:"Team",children:"Team"}),E.jsx("option",{value:"Class",children:"Class"})]})]}),(G==="Team"||G==="Class")&&E.jsxs("div",{children:[E.jsxs("label",{htmlFor:"filterEntity",className:"block text-sm font-medium text-gray-700",children:[G," Name"]}),E.jsxs("select",{id:"filterEntity",value:U,onChange:S=>Y(S.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",children:[E.jsxs("option",{value:"All",children:["All ",G,"s"]}),(G==="Team"?ne:ue).map(S=>E.jsx("option",{value:S,children:S},S))]})]})]}),E.jsx("div",{className:"overflow-x-auto rounded-lg shadow-md border border-gray-200",children:E.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[E.jsx("thead",{className:"bg-gray-50",children:E.jsxs("tr",{children:[E.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reset Timestamp"}),E.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reset By User ID"}),E.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Entries Count"}),E.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),E.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:O.length===0?E.jsx("tr",{children:E.jsx("td",{colSpan:"4",className:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500",children:"No historical check-in logs found matching your filters."})}):O.map(S=>{var pe;return E.jsxs("tr",{children:[E.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[new Date(S.timestamp).toLocaleString(),S.lastEdited&&E.jsxs("span",{className:"block text-xs text-gray-500 italic",children:["(Edited ",new Date(S.lastEdited).toLocaleString(),")"]})]}),E.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:S.resetByUserId}),E.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((pe=S.dailyCheckInEvents)==null?void 0:pe.length)||0}),E.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:E.jsx("button",{onClick:()=>re(S),className:"text-indigo-600 hover:text-indigo-900 mr-3",children:"View Details"})})]},S.id)})})]})}),f&&E.jsxs(jl,{isOpen:!!f,title:"Check-in Log Details",onClose:D,showCloseButton:!0,children:[E.jsx("div",{className:"flex justify-end mb-4",children:E.jsxs("button",{onClick:w,className:`py-2 px-4 rounded-lg flex items-center transition duration-200
                ${p?"bg-red-500 text-white hover:bg-red-600":"bg-indigo-500 text-white hover:bg-indigo-600"}
                ${n!=="admin"?"opacity-50 cursor-not-allowed":""}
              `,disabled:n!=="admin",children:[p?E.jsx(Mh,{size:18,className:"mr-2"}):E.jsx(JT,{size:18,className:"mr-2"}),p?"Cancel Edit":"Edit Log"]})}),E.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[E.jsxs("p",{className:"text-gray-700",children:[E.jsx("strong",{children:"Reset At:"})," ",new Date(f.timestamp).toLocaleString()]}),E.jsxs("p",{className:"text-gray-700",children:[E.jsx("strong",{children:"Reset By:"})," ",f.resetByUserId]}),f.lastEdited&&E.jsxs("p",{className:"text-gray-700",children:[E.jsx("strong",{children:"Last Edited:"})," ",new Date(f.lastEdited).toLocaleString()]}),E.jsx("h4",{className:"text-lg font-semibold text-gray-800 mt-6 mb-2",children:"Check-in Events"}),f.dailyCheckInEvents&&f.dailyCheckInEvents.length>0?E.jsx("div",{className:"overflow-x-auto rounded-lg border border-gray-200 shadow-sm",children:E.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[E.jsx("thead",{className:"bg-gray-50",children:E.jsxs("tr",{children:[E.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Athlete"}),E.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),E.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Entity"}),E.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time"}),p&&E.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),E.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.dailyCheckInEvents.map((S,pe)=>E.jsxs("tr",{children:[E.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:S.athleteName}),E.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:S.checkInType}),E.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:S.checkInEntity}),E.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500",children:new Date(S.timestamp).toLocaleTimeString()}),p&&E.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:E.jsx("button",{onClick:()=>R(f.id,pe),className:"text-red-600 hover:text-red-900",children:"Remove"})})]},pe))})]})}):E.jsx("p",{className:"text-gray-600",children:"No check-in events recorded for this log."}),p&&E.jsx(cI,{db:s,currentUserId:e,onAddEvent:(S,pe,_e,q)=>k(f.id,S,pe,_e,q),showAppToast:r}),p&&E.jsxs("div",{className:"flex justify-end space-x-4 mt-8",children:[E.jsx("button",{type:"button",onClick:D,className:"bg-gray-300 text-gray-800 py-2 px-5 rounded-lg font-semibold shadow-md hover:bg-gray-400 transition",children:"Discard Changes"}),E.jsx("button",{type:"button",onClick:I,className:"bg-green-600 text-white py-2 px-5 rounded-lg font-semibold shadow-md hover:bg-green-700 transition",children:"Save Changes"})]})]})]})]})},cI=({db:s,currentUserId:e,onAddEvent:n,showAppToast:r})=>{const[o,u]=ae.useState(""),[f,g]=ae.useState(""),[p,y]=ae.useState(""),[T,x]=ae.useState(""),[C,B]=ae.useState([]),[G,Z]=ae.useState([]),[U,Y]=ae.useState([]);ae.useEffect(()=>{if(!s||!e)return;(async()=>{try{const ue=_t(s,it(e),Fe.ATHLETES),le=await Ei(hn(ue,mt("isApproved","==",!0)));B(le.docs.map(w=>({id:w.id,name:w.data().name})));const re=new Set,D=new Set;le.docs.forEach(w=>{var R,k;(R=w.data().teams)==null||R.forEach(I=>re.add(I)),(k=w.data().classes)==null||k.forEach(I=>D.add(I))}),Z(Array.from(re).sort()),Y(Array.from(D).sort())}catch(ue){console.error("Error fetching data for AddCheckinEventForm:",ue),r(`Error loading data: ${ue.message}`,"error")}})()},[s,e,r]);const ne=K=>{if(K.preventDefault(),!o||!f||!p||!T){r("Please fill all fields.","error");return}n(o,f,p,T),u(""),g(""),y(""),x("")};return E.jsxs("div",{className:"mt-8 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[E.jsx("h5",{className:"text-md font-semibold text-blue-800 mb-4",children:"Manually Add Check-in Event"}),E.jsxs("form",{onSubmit:ne,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[E.jsxs("div",{children:[E.jsx("label",{htmlFor:"addAthlete",className:"block text-sm font-medium text-gray-700",children:"Athlete"}),E.jsxs("select",{id:"addAthlete",value:o,onChange:K=>u(K.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",required:!0,children:[E.jsx("option",{value:"",children:"Select Athlete"}),C.map(K=>E.jsx("option",{value:K.id,children:K.name},K.id))]})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"addCategory",className:"block text-sm font-medium text-gray-700",children:"Category"}),E.jsxs("select",{id:"addCategory",value:f,onChange:K=>{g(K.target.value),y("")},className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",required:!0,children:[E.jsx("option",{value:"",children:"Select Category"}),E.jsx("option",{value:"Team",children:"Team"}),E.jsx("option",{value:"Class",children:"Class"})]})]}),(f==="Team"||f==="Class")&&E.jsxs("div",{children:[E.jsxs("label",{htmlFor:"addEntity",className:"block text-sm font-medium text-gray-700",children:[f," Name"]}),E.jsxs("select",{id:"addEntity",value:p,onChange:K=>y(K.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",required:!0,children:[E.jsxs("option",{value:"",children:["Select ",f]}),(f==="Team"?G:U).map(K=>E.jsx("option",{value:K,children:K},K))]})]}),E.jsxs("div",{children:[E.jsx("label",{htmlFor:"addTimestamp",className:"block text-sm font-medium text-gray-700",children:"Timestamp"}),E.jsx("input",{type:"datetime-local",id:"addTimestamp",value:T,onChange:K=>x(K.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",required:!0})]}),E.jsx("div",{className:"md:col-span-2 flex justify-end",children:E.jsxs("button",{type:"submit",className:"bg-indigo-500 text-white py-2 px-4 rounded-lg font-semibold hover:bg-indigo-600 transition flex items-center",children:[E.jsx(Ll,{size:18,className:"mr-2"})," Add Event"]})})]})]})};MA.createRoot(document.getElementById("root")).render(E.jsx(ae.StrictMode,{children:E.jsx(eI,{})}));
